<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8e6d16c30a318632e6b9.css" id="gatsby-global-css">pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="icon" href="/favicon-32x32.png?v=fdc3be8e1936d723139249e23665dd77" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#0c9ee4"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=fdc3be8e1936d723139249e23665dd77"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=fdc3be8e1936d723139249e23665dd77"/><style type="text/css">
    .anchor-header.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor-header.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor-header svg,
    h2 .anchor-header svg,
    h3 .anchor-header svg,
    h4 .anchor-header svg,
    h5 .anchor-header svg,
    h6 .anchor-header svg {
      visibility: hidden;
    }
    h1:hover .anchor-header svg,
    h2:hover .anchor-header svg,
    h3:hover .anchor-header svg,
    h4:hover .anchor-header svg,
    h5:hover .anchor-header svg,
    h6:hover .anchor-header svg,
    h1 .anchor-header:focus svg,
    h2 .anchor-header:focus svg,
    h3 .anchor-header:focus svg,
    h4 .anchor-header:focus svg,
    h5 .anchor-header:focus svg,
    h6 .anchor-header:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="/rss.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">[JPA] @Transactional 와 AOP | Jay 기술 블로그</title><link data-react-helmet="true" rel="canonical" href="https://won0935.github.io/category/spring/transactional-aop/"/><meta data-react-helmet="true" name="description" content="개발을 하며 에 대해 잘못 사용하고 있는 경우가 있었다.
의 동작구조를 이해하기 위해서는 스프링의 AOP 를 다시 한번 생각해보는 것이 중요했다.
따라서 각 기술에 대해 공부해보았다. AOP란 무엇이며 왜 사용하는가 Spring AOP…"/><meta data-react-helmet="true" property="og:title" content="[JPA] @Transactional 와 AOP"/><meta data-react-helmet="true" property="og:description" content="개발을 하며 에 대해 잘못 사용하고 있는 경우가 있었다.
의 동작구조를 이해하기 위해서는 스프링의 AOP 를 다시 한번 생각해보는 것이 중요했다.
따라서 각 기술에 대해 공부해보았다. AOP란 무엇이며 왜 사용하는가 Spring AOP…"/><meta data-react-helmet="true" property="og:image" content="https://won0935.github.io/images/ogp.png"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="google-site-verification" content="OxCmDAbFt_oP2EzYabwJiA4KNndMwAcKMQdvpa8vL6w"/><meta data-react-helmet="true" name="naver-site-verification" content="07c520f56835b243f94776be22c4cbcb671bbfe5"/><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","headline":"[JPA] @Transactional 와 AOP","image":"https://won0935.github.io/images/ogp.png","editor":"won0935","datePublished":"2022-06-24","dateCreated":"2022-06-24","dateModified":"2022-06-24","description":"개발을 하며 에 대해 잘못 사용하고 있는 경우가 있었다.\n의 동작구조를 이해하기 위해서는 스프링의 AOP 를 다시 한번 생각해보는 것이 중요했다.\n따라서 각 기술에 대해 공부해보았다. AOP란 무엇이며 왜 사용하는가 Spring AOP…","author":{"@type":"Person","name":"won0935","image":"https://won0935.github.io/images/avatar.png"},"publisher":{"@type":"Organization","name":"won0935","logo":{"@type":"ImageObject","url":"https://won0935.github.io/images/avatar.png","width":150,"height":150}}}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://won0935.github.io","name":"HOME"}},{"@type":"ListItem","position":2,"item":{"@id":"https://won0935.github.io/spring","name":"스프링"}},{"@type":"ListItem","position":3,"item":{"name":"[JPA] @Transactional 와 AOP"}}]}</script><style data-styled="fEdaQt ebovCZ iarFOA evPsmz kyfGjL gEBZRU fKTVbh boOHpQ gYZPam dYhQMO knVwJm dQJMGd hzEQGR ctKYlG fiFeft iRbQrG ifmpQu ggusaO fDIfyV fHkPwv kqnMjP XIZEq fTcnoY heGWde" data-styled-version="4.4.1">
/* sc-component-id: sc-global-2864780479 */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-tap-highlight-color:rgba(0,0,0,0);} html,body{height:100%;} body{--bg:#f5f5f5;--textNormal:#21242d;--headerBackground:#ffffff;--bioBackground:#f5f5f5;--bioColor:rgba(0,0,0,0.87);--bioHighlight:#000000;--categoryHeader:rgba(0,0,0,0.87);--categoryColor:rgba(0,0,0,0.87);--categotyImgage:linear-gradient(-45deg,#ffa649,#f7645b,#805ed4);--postCardColor:rgba(0,0,0,0.87);--postCardHighlight:rgba(0,0,0,0.08);--postCardEmoji:#ffffff;--postCardDivideLine:#969fa7;--tableOfContentsFocusColor:rgb(33,37,41) background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;} body.dark{--bg:#21242d;--textNormal:#21242d;--headerBackground:#3B71DA;--bioBackground:#313746;--bioColor:#ffffff;--bioHighlight:#ffffff;--categoryHeader:#ffffff;--categoryColor:#727d86;--categotyImgage:#313746;--postCardColor:#ffffff;--postCardHighlight:#313746;--postCardEmoji:#313746;--postCardDivideLine:#313746;--tableOfContentsFocusColor:#f1f4f7;background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} a{color:#20a8ea;-webkit-text-decoration:none;text-decoration:none;word-break:break-all;-webkit-transition:.2s;transition:.2s;} a:focus{outline:none;} ol,ul,li{list-style:none;} blockquote,q{quotes:none;} blockquote::before,blockquote::after,q::before,q::after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} img{max-width:100%;} button,input{font-family:inherit;font-size:inherit;background:none;border:none;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;resize:none;} button:focus,input:focus{outline:none;}
/* sc-component-id: ContentWrapper__IndexContent-sc-qgwu46-0 */
.ebovCZ{max-width:1250px;margin:0 auto;padding:0 1.5em;} @media screen and (max-width:950px){.ebovCZ{max-width:760px;}} @media screen and (max-width:500px){.ebovCZ{padding:0 20px;}}
/* sc-component-id: Footer__FooterContent-sc-5p0nzy-0 */
.fTcnoY{padding:0.1em 0;}
/* sc-component-id: Footer__FooterInner-sc-5p0nzy-1 */
.heGWde{margin-top:3em;text-align:center;padding:1.5em;border-top:solid 1px #313746;color:#727d86;font-size:14px;} .heGWde a{color:#727d86;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: ColorModeToggle__ToggleButton-sc-b3isah-0 */
.evPsmz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:auto;cursor:pointer;} .evPsmz .icon-sun{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#222;} .evPsmz .icon-moon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#fff;}
/* sc-component-id: Header__HeaderTag-sc-sxwgs1-0 */
.fEdaQt{background:var(--headerBackground);width:100%;box-shadow:rgba(0,0,0,0.2) 0px 3px 3px -2px,rgba(0,0,0,0.14) 0px 3px 4px 0px,rgba(0,0,0,0.12) 0px 1px 8px 0px;}
/* sc-component-id: Header__HeaderInner-sc-sxwgs1-1 */
.iarFOA{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px;} .iarFOA .logo{width:200px;height:55px;} @media screen and (max-width:500px){.iarFOA .logo{margin:0 auto;}} .iarFOA .message-link{position:absolute;right:0;top:7px;display:block;width:34px;} .iarFOA .message-link:hover{top:5px;}
/* sc-component-id: Layout__Content-sc-152i9mm-0 */
.kyfGjL{margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.kyfGjL{display:block;}} @media screen and (max-width:500px){.kyfGjL{margin-top:0;}}
/* sc-component-id: MainWrapper__IndexWrapper-sc-vkqmvp-0 */
.gEBZRU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.gEBZRU{display:block;}} @media screen and (max-width:500px){.gEBZRU{margin-top:0;}}
/* sc-component-id: MainWrapper__ContentsWrapper-sc-vkqmvp-1 */
.fKTVbh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:calc(100% - 290px - 40px);margin-right:40px;} @media screen and (max-width:950px){.fKTVbh{width:100%;}}
/* sc-component-id: CategoryLabel__Wrapper-sc-134vpma-0 */
.hzEQGR .category-text{padding:0.3em 1em;display:inline-block;display:inline;padding:3px 6px;line-height:1.2;font-size:12px;border-radius:2px;font-weight:700;color:#fff;} @media screen and (max-width:950px){.hzEQGR .category-text{font-size:11px;padding:2.5px 6px;}}
/* sc-component-id: RelatedPosts__Wrapper-sc-15t1gj5-0 */
.fiFeft{background:#f1f4f7;padding:2em 2.5em;} @media screen and (max-width:500px){.fiFeft{padding:30px 20px;}}
/* sc-component-id: RelatedPosts__PostCardWrapper-sc-15t1gj5-1 */
.iRbQrG .post-card-link{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1em;padding:15px;background:#fff;border-radius:5px;color:#313746;box-shadow:0 1px 2px rgba(0,0,0,0.1);} .iRbQrG .post-card-link:hover{background:#e0ebf1;} @media screen and (max-width:500px){.iRbQrG .post-card-link{padding:10px;}}
/* sc-component-id: RelatedPosts__PostCardEmoji-sc-15t1gj5-2 */
.ifmpQu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 2px 4px rgba(0,0,0,0.4);margin:0;width:80px;height:80px;background:#f1f4f7;border-radius:4px;font-size:50px;} .ifmpQu img{width:55px;height:55px;}
/* sc-component-id: RelatedPosts__PostCardContent-sc-15t1gj5-3 */
.ggusaO{width:calc(100% - 80px);padding-left:15px;} .ggusaO h5{font-size:1.1em;font-weight:700;line-height:1.45;} .ggusaO time{display:block;margin-bottom:0.1em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;font-size:0.8em;color:#969fa7;} @media screen and (max-width:500px){.ggusaO{padding-left:15px;}.ggusaO h5{font-size:1em;}}
/* sc-component-id: TableOfContents__TableIndex-sc-10py2gf-0 */
.fDIfyV{position:-webkit-sticky;position:sticky;top:2em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;width:320px;padding:1.5em;background:none;border-radius:4px;} @media screen and (max-width:950px){.fDIfyV{position:relative;margin:2em 0;width:100%;}} @media screen and (max-width:500px){.fDIfyV{padding:1.3em 1em;}}
/* sc-component-id: TableOfContents__TableWrapper-sc-10py2gf-1 */
.fHkPwv{display:block;width:100%;max-height:calc(100vh - 150px);word-break:break-word;color:black;overflow:auto;border-left:1.5px solid rgb(233,236,239);}
/* sc-component-id: TableOfContents__TableHeader-sc-10py2gf-2 */
.kqnMjP{display:block;text-align:left;font-size:17px;color:var(--bioColor);padding-left:15px;margin-bottom:15px;}
/* sc-component-id: TableOfContents__TableContents-sc-10py2gf-3 */
.XIZEq{margin:0 10px;font-size:14px;overflow:hidden;-webkit-transition:all 0.125s ease-in 0s;transition:all 0.125s ease-in 0s;} .XIZEq a{display:block;color:rgb(134,142,150);} .XIZEq a:hover{color:var(--tableOfContentsFocusColor);} .XIZEq ul{list-style:none;margin-left:10px;margin-bottom:0px;line-height:1.5rem;} .XIZEq ul > li a[href='']{color:var(--tableOfContentsFocusColor);-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);}
/* sc-component-id: post__Content-sc-rer3gn-0 */
.boOHpQ{position:relative;background:#fff;overflow:hidden;font-size:16px;} .boOHpQ:before,.boOHpQ:after{content:'';position:absolute;width:0;height:0;z-index:5;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;} .boOHpQ:before{top:0;left:0;border-top:20px solid var(--bg);border-right:20px solid transparent;} .boOHpQ:after{bottom:0;right:0;border-bottom:20px solid var(--bg);border-left:20px solid transparent;} @media screen and (max-width:500px){.boOHpQ{margin:0 -20px;}.boOHpQ:before,.boOHpQ:after{content:none;}}
/* sc-component-id: post__HeroImage-sc-rer3gn-1 */
.gYZPam{position:relative;background:#313746;text-align:center;background-image:url("/static/pattern-00b88abde489053a0ab3b3e799db37b9.svg");background-repeat:repeat;background-size:400px;min-height:230px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .gYZPam .emoji{width:110px;height:110px;} @media screen and (max-width:500px){.gYZPam{min-height:190px;}}
/* sc-component-id: post__ContentMain-sc-rer3gn-2 */
.dYhQMO{padding:1.8em 2.5em;} @media screen and (max-width:500px){.dYhQMO{padding:30px 20px;}}
/* sc-component-id: post__PostTitle-sc-rer3gn-3 */
.dQJMGd{margin:0.1em 0 0.3em;font-size:1.8em;font-weight:700;line-height:1.5;} @media screen and (max-width:500px){.dQJMGd{font-size:25px;}}
/* sc-component-id: post__PostDate-sc-rer3gn-4 */
.knVwJm{display:block;color:#969fa7;font-size:0.9em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}
/* sc-component-id: post__PostContent-sc-rer3gn-5 */
.ctKYlG{margin:1.5em 0 1em;line-height:1.9;} .ctKYlG .gatsby-highlight{margin:1.5em 0;} @media screen and (max-width:500px){.ctKYlG .gatsby-highlight{margin:1.5em -20px;}} .ctKYlG code[class*='language-'],.ctKYlG pre[class*='language-']{-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:Menlo,Monaco,'Courier New',monospace;color:#ccc;text-shadow:none;word-break:break-all;} .ctKYlG pre[class*='language-'],.ctKYlG:not(pre) > code[class*='language-']{background:#313746;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.5);} @media screen and (max-width:500px){.ctKYlG pre[class*='language-'],.ctKYlG:not(pre) > code[class*='language-']{border-radius:0;}} .ctKYlG pre[class*='language-']{padding:1.2em 1.2em;-webkit-overflow-scrolling:touch;position:relative;font-size:14.5px;line-height:1.7;overflow:auto;} .ctKYlG .gatsby-highlight pre[class*='language-'].line-numbers{padding-left:3.4em;} .ctKYlG pre[class*='language-'].line-numbers span.line-numbers-rows{padding:1.2em 0 1.2em 0.7em;background-color:hsla(0,0%,78.4%,0.15);border:none;} .ctKYlG .token.comment,.ctKYlG .token.block-comment,.ctKYlG .token.prolog,.ctKYlG .token.doctype,.ctKYlG .token.cdata{color:#999;} .ctKYlG .token.punctuation{color:#ccc;} .ctKYlG .token.tag,.ctKYlG .token.attr-name,.ctKYlG .token.namespace,.ctKYlG .token.deleted{color:#e2777a;} .ctKYlG .token.function-name{color:#6196cc;} .ctKYlG .token.boolean,.ctKYlG .token.number,.ctKYlG .token.function{color:#f08d49;} .ctKYlG .token.property,.ctKYlG .token.class-name,.ctKYlG .token.constant,.ctKYlG .token.symbol{color:#f8c555;} .ctKYlG .token.selector,.ctKYlG .token.important,.ctKYlG .token.atrule,.ctKYlG .token.keyword,.ctKYlG .token.builtin{color:#cc99cd;} .ctKYlG .token.string,.ctKYlG .token.char,.ctKYlG .token.attr-value,.ctKYlG .token.regex,.ctKYlG .token.variable{color:#7ec699;} .ctKYlG .token.operator,.ctKYlG .token.entity,.ctKYlG .token.url{color:#67cdcc;} .ctKYlG .token.important,.ctKYlG .token.bold{font-weight:bold;} .ctKYlG .token.italic{font-style:italic;} .ctKYlG .token.entity{cursor:help;} .ctKYlG .token.inserted{color:green;} .ctKYlG .gatsby-code-title{position:relative;margin:1.5em 0 -24px auto;background:#616161;color:#fff;font-size:12px;height:24px;padding:0 8px;line-height:24px;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-weight:500;border-radius:0 5px;display:table;z-index:2;} @media screen and (max-width:500px){.ctKYlG .gatsby-code-title{border-radius:0 0 0 5px;margin-right:-20px;}} .ctKYlG .gatsby-code-title + .gatsby-highlight{margin-top:0;} .ctKYlG p > code,.ctKYlG li > code{color:#ff3860 !important;background:#f9f1f3;padding:0.15em 0.4em;margin:0.2em;border-radius:4px;font-size:0.85em;word-break:break-all;white-space:pre-line;} .ctKYlG strong > code{font-family:inherit !important;} .ctKYlG a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .ctKYlG p{margin:0.5em 0;} .ctKYlG h1,.ctKYlG h2,.ctKYlG h3,.ctKYlG h4,.ctKYlG h5,.ctKYlG h6{margin:40px 0 10px;font-weight:700;line-height:1.5;} .ctKYlG h1{margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.55em;} .ctKYlG h1:before{position:absolute;top:0;left:0;content:"";display:inline-block;width:5px;height:100%;border-radius:5px;background:linear-gradient(0deg,#ffa649 0%,#ffa649 50%,#f7645b 50%,#f7645b 100%);} .ctKYlG h2{position:relative;margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.40em;} .ctKYlG h2:before{position:absolute;top:0;left:0;content:"";display:inline-block;width:5px;height:100%;border-radius:5px;background:linear-gradient(0deg,#ffa649 0%,#ffa649 50%,#f7645b 50%,#f7645b 100%);} .ctKYlG h3{margin:40px 0 12px;font-size:1.40em;} .ctKYlG h4{position:relative;padding-left:18px;font-size:1.2em;} .ctKYlG h4:before{position:absolute;top:.2em;left:0;content:"";display:inline-block;width:14px;height:19px;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuODrOOCpOODpOODvF8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzAgNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwIDQ1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0Y3NjQ1Qzt9Cgkuc3Qxe2ZpbGw6I0ZGQTc0ODt9Cjwvc3R5bGU+Cjx0aXRsZT5pY29uPC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4LjEsMzAuMWMwLDcuNS02LjEsMTMuNi0xMy42LDEzLjZTMC45LDM3LjcsMC45LDMwLjFTNywxNi41LDE0LjUsMTYuNVMyOC4xLDIyLjYsMjguMSwzMC4xeiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjguMSwxNS42YzAsNy41LTYuMSwxMy42LTEzLjYsMTMuNlMwLjksMjMuMSwwLjksMTUuNlM3LDIsMTQuNSwyUzI4LjEsOC4xLDI4LjEsMTUuNnoiLz4KPC9zdmc+Cg==");background-size:contain;background-repeat:no-repeat;} .ctKYlG ul,.ctKYlG ol{margin:1em 0;} .ctKYlG ul p,.ctKYlG ol p{margin:0;} .ctKYlG ul{padding-left:1.2em;} .ctKYlG ul li{margin:.4em 0;list-style:disc;} .ctKYlG ul ul,.ctKYlG ul ol{margin:0;} .ctKYlG ol{counter-reset:number;} .ctKYlG ol > li{list-style:none;list-style-position:inside;position:relative;padding:0 0 0 30px;margin:0.5em 0;} .ctKYlG ol > li:before{display:inline-block;position:absolute;left:0;top:0;width:20px;height:20px;margin:.4em 0;border-radius:25%;background:#5c9ee7;color:#fff;font-weight:700;font-size:14px;text-align:center;line-height:20px;content:counter(number);counter-increment:number;} .ctKYlG ol ul{margin:0;} .ctKYlG strong{font-weight:550;font-size:1.1em;} .ctKYlG em{font-style:italic;} .ctKYlG del{-webkit-text-decoration:line-through;text-decoration:line-through;} .ctKYlG hr{display:block;margin:2em 0;border:none;border-top:dotted 3px #e1eaf3;} .ctKYlG table{display:block;margin:1em 0;border-spacing:2px;border-collapse:separate;overflow:auto;-webkit-overflow-scrolling:touch;width:auto;font-size:.9em;line-height:1.4;} .ctKYlG table th{background-color:#313746;color:#FFF;padding:10px 12px;text-align:center;font-weight:700;} .ctKYlG table th[align="center"]{text-align:center;} .ctKYlG table th[align="right"]{text-align:right;} .ctKYlG table td{background-color:#f1f4f7;color:#313746;padding:10px 12px;} .ctKYlG table td code[class*='language-']{color:#313746;} .ctKYlG table thead tr th:first-child{border-radius:5px 0 0 0;} .ctKYlG table thead tr th:last-child{border-radius:0 5px 0 0;} .ctKYlG table tbody tr:last-child td:first-child{border-radius:0 0 0 5px;} .ctKYlG table tbody tr:last-child td:last-child{border-radius:0 0 5px 0;} .ctKYlG blockquote{margin:1em 0;padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5;} .ctKYlG .gatsby-resp-image-wrapper{margin:2em 0;box-shadow:1px 1px 20px lightgrey;border-radius:4px;overflow:hidden;} .ctKYlG .anchor-header{margin:2px 0 0 0;} .ctKYlG .custom-block{margin:1em 0;background:#f1f4f7;} .ctKYlG .custom-block-heading{font-weight:700;} .ctKYlG .custom-block-heading .emoji{width:1.2em !important;height:1.2em !important;vertical-align:-0.2em !important;} .ctKYlG .custom-block-body{font-size:0.92em;} .ctKYlG .custom-block-body > *:first-child{margin-top:0;} .ctKYlG .custom-block-body > *:last-child{margin-bottom:0;} .ctKYlG .custom-block-body h5{font-size:1.05em;margin:20px 0 5px;} .ctKYlG > *:first-child{margin-top:0;} .ctKYlG .custom-block.simple{padding:1em 1.2em;border-radius:5px;} .ctKYlG .custom-block.simple .custom-block-heading{font-size:1.1em;} .ctKYlG .custom-block.info,.ctKYlG .custom-block.alert,.ctKYlG .custom-block.notice{padding:0.7em 1em;border-left:solid 4px #20a8ea;border-radius:1px 3px 3px 1px;} .ctKYlG .custom-block.alert{border-left-color:#f7615f;background:#ffeff0;} .ctKYlG .custom-block.alert .custom-block-heading{color:#f7615f;} .ctKYlG .custom-block.notice{border-left-color:#ffa22b;background:#fff4df;} .ctKYlG .custom-block.notice .custom-block-heading{color:#ffa22b;} .ctKYlG .custom-block.image-small,.ctKYlG .custom-block.image-medium{background:#c0e2fb;padding:1.5em;text-align:center;border-radius:5px;} .ctKYlG .custom-block.image-small .gatsby-resp-image-wrapper,.ctKYlG .custom-block.image-medium .gatsby-resp-image-wrapper{margin:0;border:none;box-shadow:0 5px 15px rgba(0,0,0,0.15);} .ctKYlG .custom-block.image-small .gatsby-resp-image-wrapper{max-width:350px !important;border:none;} .ctKYlG .custom-block.image-medium .gatsby-resp-image-wrapper{max-width:450px !important;border:none;}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-d69d5b1ac5db60e29788.js"/><link as="script" rel="preload" href="/framework-999a01e9e4c894cffffe.js"/><link as="script" rel="preload" href="/styles-e383b929d2d4095ae339.js"/><link as="script" rel="preload" href="/app-0dbf9fa9f0620e9dd3df.js"/><link as="script" rel="preload" href="/de71a805-d9a74fce0a097621e412.js"/><link as="script" rel="preload" href="/53b27b57f60ee3e1ca57a66cde9add975dffb161-9b45968f09d89d7a2af7.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-e2a6eaff4ad412c6fa96.js"/><link as="fetch" rel="preload" href="/page-data/category/spring/transactional-aop/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/196006245.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1984257895.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2528810007.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="App" style="background-color:var(--bg);color:var(--textNormal);transition:color 0.2s ease-out, background 0.2s ease-out"><header class="Header__HeaderTag-sc-sxwgs1-0 fEdaQt"><div class="ContentWrapper__IndexContent-sc-qgwu46-0 ebovCZ"><div class="Header__HeaderInner-sc-sxwgs1-1 iarFOA"><a class="logo-link" href="/"><img class="logo" src="/static/logo-79575ee6a6d57857a20e895c52919bb8.png" alt="Jay 기술 블로그"/></a><div class="ColorModeToggle__ToggleButton-sc-b3isah-0 evPsmz"><div style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:13px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:26px;width:54px;margin:0;position:relative;background:#d9dfe2;border-radius:13px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:26px;width:29px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-moon checkedIcon"><svg width="24" height="24" fill="#EFDC05"><rect width="24" height="24" fill="none" rx="0" ry="0"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M14.8102 3.2H13.8202C13.4902 3.2 13.2302 2.93 13.2302 2.6C13.2302 2.27 13.5002 2 13.8302 2H16.2602C16.5002 2 16.7202 2.15 16.8102 2.37C16.9002 2.59 16.8502 2.85 16.6802 3.02L15.2702 4.43H16.2602C16.5902 4.43 16.8602 4.7 16.8602 5.03C16.8602 5.36 16.5902 5.63 16.2602 5.63H13.8202C13.5802 5.63 13.3602 5.48 13.2702 5.26C13.1802 5.04 13.2302 4.78 13.4002 4.61L14.8102 3.2ZM20.1401 11.0101H21.1301C21.4601 11.0101 21.7401 11.2801 21.7401 11.6101C21.7401 11.9401 21.4701 12.2101 21.1401 12.2101H18.7001C18.4601 12.2101 18.2401 12.0601 18.1501 11.8401C18.0601 11.6201 18.1101 11.3601 18.2801 11.1901L19.6901 9.78008H18.7001C18.3701 9.78008 18.1001 9.51008 18.1001 9.18008C18.1001 8.85008 18.3701 8.58008 18.7001 8.58008H21.1301C21.3701 8.58008 21.5901 8.73008 21.6801 8.95008C21.7701 9.17008 21.7201 9.43008 21.5501 9.60008L20.1401 11.0101ZM11.0302 9.8499H12.8502L10.7002 11.9999C10.5302 12.1699 10.4802 12.4299 10.5702 12.6499C10.6602 12.8699 10.8802 13.0199 11.1202 13.0199H14.2902C14.6202 13.0199 14.8902 12.7499 14.8902 12.4199C14.8902 12.0899 14.6202 11.8199 14.2902 11.8199H12.5602L14.7102 9.6699C14.8802 9.4999 14.9302 9.2399 14.8402 9.0199C14.7502 8.7999 14.5302 8.6499 14.2902 8.6499H11.0202C10.6902 8.6499 10.4202 8.9199 10.4202 9.2499C10.4202 9.5799 10.7002 9.8499 11.0302 9.8499ZM14.5501 16.89C15.6601 16.89 16.7201 16.66 17.7101 16.19C17.9401 16.08 18.2101 16.13 18.3801 16.3C18.5601 16.48 18.6101 16.75 18.5001 16.98C17.0901 20.05 13.9901 22.03 10.6001 22.03C5.79013 22.03 1.88013 18.12 1.88013 13.31C1.88013 9.94004 3.87013 6.84004 6.93013 5.40004C7.16013 5.29004 7.43012 5.34004 7.61012 5.52004C7.79012 5.70004 7.84013 5.97004 7.73013 6.20004C7.27013 7.19004 7.03012 8.26004 7.03012 9.38004C7.03012 13.52 10.4001 16.89 14.5501 16.89ZM3.09013 13.31C3.09013 17.46 6.46012 20.83 10.6101 20.83C12.9901 20.83 15.2001 19.7 16.6001 17.85C15.9401 18.01 15.2501 18.09 14.5501 18.09C9.74013 18.09 5.83012 14.18 5.83012 9.38004C5.83012 8.68004 5.91013 7.99004 6.07013 7.32004C4.22013 8.73004 3.09013 10.94 3.09013 13.31Z"></path></svg></div></div><div style="height:26px;width:29px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-sun uncheckedIcon"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.2" baseProfile="tiny" viewBox="0 0 24 24" size="24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.934l1-2.934c.072-.213.078-.452 0-.682-.188-.553-.789-.848-1.341-.659-.553.189-.847.788-.659 1.341l1 2.934zM4 11c-.213-.072-.452-.078-.682 0-.553.188-.848.789-.659 1.341.189.553.788.847 1.341.659l2.934-1-2.934-1zM12 17.066l-1 2.934c-.072.213-.078.452 0 .682.188.553.789.848 1.341.659.553-.189.847-.788.659-1.341l-1-2.934zM21.341 11.657c-.188-.553-.788-.848-1.341-.659l-2.934 1 2.934 1c.213.072.452.078.682 0 .552-.188.847-.789.659-1.341zM5.636 7.05l2.781 1.367-1.367-2.781c-.1-.202-.265-.375-.482-.482-.524-.258-1.157-.042-1.415.482-.257.523-.041 1.157.483 1.414zM5.153 17.432c-.257.523-.041 1.156.482 1.414.523.257 1.157.041 1.414-.482l1.367-2.781-2.781 1.367c-.201.099-.374.263-.482.482zM18.363 16.949l-2.781-1.367 1.367 2.781c.1.202.264.375.482.482.523.257 1.156.041 1.414-.482s.042-1.157-.482-1.414zM18.844 6.566c.258-.524.042-1.157-.481-1.415-.523-.257-1.157-.041-1.414.482l-1.369 2.783 2.782-1.368c.202-.1.375-.264.482-.482zM12 7.5c-2.481 0-4.5 2.019-4.5 4.5s2.019 4.5 4.5 4.5 4.5-2.019 4.5-4.5-2.019-4.5-4.5-4.5z"></path></svg></div></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(0px);top:0;outline:0;box-shadow:0px 1px 5px rgba(0, 0, 0, 0.6);border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px" id="normal-switch"/></div></div></div></div></header><div class="ContentWrapper__IndexContent-sc-qgwu46-0 ebovCZ"><div class="Layout__Content-sc-152i9mm-0 kyfGjL"><main><div class="MainWrapper__IndexWrapper-sc-vkqmvp-0 gEBZRU"><div class="MainWrapper__ContentsWrapper-sc-vkqmvp-1 fKTVbh"><section class="post__Content-sc-rer3gn-0 boOHpQ"><p class="post__HeroImage-sc-rer3gn-1 gYZPam"><img class="emoji" draggable="false" alt="✏️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/270f.svg"/></p><div class="post__ContentMain-sc-rer3gn-2 dYhQMO"><time class="post__PostDate-sc-rer3gn-4 knVwJm">2022.06.24</time><h1 class="post__PostTitle-sc-rer3gn-3 dQJMGd">[JPA] @Transactional 와 AOP</h1><div class="CategoryLabel__Wrapper-sc-134vpma-0 hzEQGR"><a class="category-text" style="background:#d55b45" href="/category/spring">스프링</a></div><div class="post__PostContent-sc-rer3gn-5 ctKYlG"><blockquote>
<p>개발을 하며 <code class="language-text">@Transactional</code>에 대해 잘못 사용하고 있는 경우가 있었다.
<code class="language-text">@Transactional</code>의 동작구조를 이해하기 위해서는 스프링의 AOP 를 다시 한번 생각해보는 것이 중요했다.
따라서 각 기술에 대해 공부해보았다.</p>
</blockquote>
<ul>
<li><strong>AOP</strong>란 무엇이며 왜 사용하는가</li>
<li>Spring AOP는 왜 <strong>프록시</strong>를 사용하는가</li>
<li><code class="language-text">@Transactional</code>은 어떻게 동작하는가</li>
</ul>
<h1 id="aopaspect-oriented-programming란-무엇이며-왜-사용하는가" style="position:relative;"><a href="#aopaspect-oriented-programming%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%99%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80" aria-label="aopaspect oriented programming란 무엇이며 왜 사용하는가 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AOP(Aspect Oriented Programming)란 무엇이며 왜 사용하는가</h1>
<p><img src="https://user-images.githubusercontent.com/55419159/175801451-20c84e73-e4e2-42b5-8136-7ab4adbbb3a3.png" alt="image"></p>
<p>AOP란 Aspect Oriented Programming의 약자로 관점 지향 프로그래밍이라고 한다.
여기서 <strong>Aspect(관점)이란 흩어진 관심사들을 하나로 모듈화 한 것</strong>을 의미한다.</p>
<p><strong>객체 지항 프로그래밍(OOP)</strong>에서는 주요 관심사에 따라 클래스를 분할한다.
이 클래스들은 보통 <strong>SRP(Single Responsibility Principle)</strong>에 따라 하나의 책임만을 갖게 설계된다.
하지만 클래스를 설계하다보면 <strong>로깅, 보안, 트랜잭션</strong> 등 여러 클래스에서 공통적으로 사용하는 부가 기능들이 생긴다.
이들은 주요 비즈니스 로직은 아니지만, 반복적으로 여러 곳에서 쓰이는 데 이를 <strong>흩어진 관심사(Cross Cutting Concerns)</strong>라고 한다.</p>
<blockquote>
<p>AOP 없이 흩어진 관심사를 처리하면 다음과 같은 문제가 발생한다.</p>
<ul>
<li>여러 곳에서 반복적인 코드를 작성해야 한다.</li>
<li>코드가 변경될 경우 여러 곳에 가서 수정이 필요하다.</li>
<li>주요 비즈니스 로직과 부가 기능이 한 곳에 섞여 가독성이 떨어진다.</li>
</ul>
</blockquote>
<p>따라서 <strong>흩어진 관심사를 별도의 클래스로 모듈화</strong>하여 위의 문제들을 해결하고, 결과적으로 <strong>OOP를 더욱 잘 지킬 수 있도록 도움을 주는 것이 AOP</strong>이다.</p>
<h2 id="aop의-주요-개념" style="position:relative;"><a href="#aop%EC%9D%98-%EC%A3%BC%EC%9A%94-%EA%B0%9C%EB%85%90" aria-label="aop의 주요 개념 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AOP의 주요 개념</h2>
<ul>
<li><code class="language-text">Aspect</code>: Advice + PointCut로 AOP의 기본 모듈</li>
<li><code class="language-text">Advice</code>: Target에 제공할 부가 기능을 담고 있는 모듈</li>
<li><code class="language-text">Target</code>: Advice이 부가 기능을 제공할 대상 (Advice가 적용될 비즈니스 로직)</li>
<li><code class="language-text">JointPoint</code>: Advice가 적용될 위치 (메서드 진입 지점, 생성자 호출 시점, 필드에서 값을 꺼내올 때 등 다양한 시점에 적용 가능)</li>
<li><code class="language-text">PointCut</code>: Target을 지정하는 정규 표현식</li>
</ul>
<hr>
<h1 id="spring-aop는-왜-프록시-방식을-사용하는가" style="position:relative;"><a href="#spring-aop%EB%8A%94-%EC%99%9C-%ED%94%84%EB%A1%9D%EC%8B%9C-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80" aria-label="spring aop는 왜 프록시 방식을 사용하는가 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spring AOP는 왜 프록시 방식을 사용하는가?</h1>
<blockquote>
<p>Spring AOP는 기본적으로 <strong>프록시 방식</strong>으로 동작한다.</p>
<p>프록시 패턴이란 어떤 객체를 사용하고자 할 때, 객체를 직접적으로 참조 하는 것이 아니라, 해당 객체를 <strong>대행(대리, proxy)하는 객체를 통해 대상객체에 접근하는 방식</strong>을 말한다.</p>
</blockquote>
<p>그렇다면 Spring은 왜 <code class="language-text">Target</code> 객체를 직접 참조하지 않고 프록시 객체를 사용할까?
프록시 객체 없이 <code class="language-text">Target</code> 객체를 사용하고 있다고 생각해보자.</p>
<p><code class="language-text">Aspect</code> 클래스에 정의된 부가 기능을 사용하기 위해서, 우리는 원하는 위치에서 직접 <code class="language-text">Aspect</code> 클래스를 호출해야 한다.
이 경우, <code class="language-text">Target</code> 클래스 안에 부가 기능을 호출하는 로직이 포함되기 때문에 <strong>AOP를 적용하지 않았을 때와 동일한 문제</strong>가 발생한다.
<strong>여러 곳에서 반복적</strong>으로 <code class="language-text">Aspect</code>를 호출해야 하고, 그로 인해 유지보수성이 크게 떨어진다.</p>
<p>그래서 Spring에서는 <code class="language-text">Target</code> 클래스 혹은 그의 상위 <strong>인터페이스를 상속하는 프록시 클래스를 생성</strong>하고, <strong>프록시 클래스에서 부가 기능에 관련된 처리</strong>를 한다.
이렇게 하면 <code class="language-text">Target</code>에서 <code class="language-text">Aspect</code>을 알 필요 없이 순수한 <strong>비즈니스 로직에 집중</strong>할 수 있다.</p>
<p>예를 들어 다음 코드의 <code class="language-text">logic()</code> 메서드가 <code class="language-text">Target</code>이라면,</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TargetService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TargetServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TargetService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Proxy에서 <code class="language-text">Target</code> 전/후에 부가 기능을 처리하고 <code class="language-text">Target</code>을 호출한다.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TargetServiceProxy</span> <span class="token keyword">implements</span> <span class="token class-name">TargetService</span> <span class="token punctuation">{</span>
    <span class="token comment">// 지금은 구현체를 직접 생성했지만, 외부에서 의존성을 주입 받도록 할 수 있다.</span>
    <span class="token class-name">TargetService</span> targetService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TargetServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Target 호출 이전에 처리해야하는 부가 기능</span>

        <span class="token comment">// Target 호출</span>
        targetService<span class="token punctuation">.</span><span class="token function">logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Target 호출 이후에 처리해야하는 부가 기능</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>사용하는 입장에서는 <code class="language-text">Target</code> 객체를 사용하는 것처럼 Proxy 객체를 사용할 수 있다.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UseService</span> <span class="token punctuation">{</span>
    <span class="token comment">// 지금은 구현체를 직접 생성했지만, 외부에서 의존성을 주입 받도록 할 수 있다.</span>
    <span class="token class-name">TargetService</span> targetService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TargetServiceProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">useLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Target 호출하는 것처럼 부가 기능이 추가된 Proxy를 호출한다.</span>
        targetService<span class="token punctuation">.</span><span class="token function">logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2 id="jdk-proxy와-cglib-proxy" style="position:relative;"><a href="#jdk-proxy%EC%99%80-cglib-proxy" aria-label="jdk proxy와 cglib proxy permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JDK Proxy와 CGLib Proxy</h2>
<p>Spring에서는 몇 가지 설정을 하면 자동으로 <code class="language-text">Target</code>의 프록시 객체를 생성해주는데, <strong>JDK Proxy(Dynamic Proxy)</strong>와 <strong>CGLib Proxy</strong>를 만들 수 있다.</p>
<p>두 방식의 가장 큰 차이점은 <code class="language-text">Target</code>의 어떤 부분을 상속 받아서 프록시를 구현하느냐에 있다.</p>
<p><img src="https://user-images.githubusercontent.com/55419159/175801301-1af8e29f-4d05-4f0b-8fda-cfbc373dade0.png" alt="image"></p>
<h3 id="jdk-proxy" style="position:relative;"><a href="#jdk-proxy" aria-label="jdk proxy permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JDK Proxy</h3>
<p>JDK Proxy는 <code class="language-text">Target</code>의 상위 <strong>인터페이스를 상속</strong> 받아 프록시를 만든다.
따라서 인터페이스를 구현한 클래스가 아니면 의존할 수 없다.
<code class="language-text">Target</code>에서 다른 구체 클래스에 의존하고 있다면, JDK 방식에서는 그 클래스(빈)를 찾을 수 없어 런타임 에러가 발생한다.</p>
<h3 id="cglib-proxy" style="position:relative;"><a href="#cglib-proxy" aria-label="cglib proxy permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CGLib Proxy</h3>
<p>CGLib Proxy는 <code class="language-text">Target</code> <strong>클래스를 상속</strong> 받아 프록시를 만든다.
JDK 방식과는 달리 인터페이스를 구현하지 않아도 되고, 구체 클래스에 의존하기 때문에 런타임 에러가 발생할 확률도 상대적으로 적다.
또한 JDK Proxy는 내부적으로 Reflection을 사용해서 추가적인 비용이 들지만, CGLib는 그렇지 않다고 한다.
여러 성능 상 이점으로 인해 <strong>Spring Boot</strong>에서는 <strong>CGLib</strong>를 사용한 방식을 기본으로 채택하고 있다.</p>
<hr>
<h1 id="transactional은-어떻게-동작하는가" style="position:relative;"><a href="#transactional%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EA%B0%80" aria-label="transactional은 어떻게 동작하는가 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@Transactional은 어떻게 동작하는가</h1>
<p><code class="language-text">@Transactional</code>는 Proxy 형태로 동작한다.
트랜잭션 처리를 위한 <code class="language-text">@Transactional</code> 애노테이션은 <strong>Spring AOP의 대표적인 예</strong>이다.
(<strong>Spring은 JDK Proxy</strong>, <strong>Spring Boot는 CGLIb Proxy</strong>를 기본으로 하기 때문에, 사용하는 것에 따라 생성된 프록시 객체 형태는 다를 수 있다.)</p>
<h2 id="transactional의-동작-순서" style="position:relative;"><a href="#transactional%EC%9D%98-%EB%8F%99%EC%9E%91-%EC%88%9C%EC%84%9C" aria-label="transactional의 동작 순서 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@Transactional의 동작 순서</h2>
<p><img src="https://user-images.githubusercontent.com/55419159/175801322-34c8e4d5-54b7-4691-84bb-3ee3aa700d3c.png" alt="image"></p>
<ol>
<li><code class="language-text">Target</code>에 대한 호출이 들어오면 AOP proxy가 이를 가로채서(intercept) 가져온다. </li>
<li>AOP proxy에서 <code class="language-text">Transaction Advisor</code>가 commit 또는 rollback 등의 트랜잭션 처리를 한다. </li>
<li>트랜잭션 처리 외에 다른 부가 기능이 있을 경우 해당 <code class="language-text">Custom Advisor</code>에서 그 처리를 한다. </li>
<li>각 <code class="language-text">Advisor</code>에서 부가 기능 처리를 마치면 <code class="language-text">Target Method</code>를 수행한다. </li>
<li>interceptor chain을 따라 caller에게 결과를 다시 전달한다.</li>
</ol>
<p>코드 레벨로 보자면 아래와 유사한 작업이 이루어진다.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionProxy</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">TransactonManager</span> manager <span class="token operator">=</span> <span class="token class-name">TransactionManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transactionLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 트랜잭션 전처리(트랜잭션 시작, autoCommit(false) 등)</span>
            manager<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 다음 처리 로직(타겟 비스니스 로직, 다른 부가 기능 처리 등)</span>
            target<span class="token punctuation">.</span><span class="token function">logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 트랜잭션 후처리(트랜잭션 커밋 등)</span>
            manager<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 트랜잭션 오류 발생 시 롤백</span>
            manager<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2 id="transactional-적용-예제" style="position:relative;"><a href="#transactional-%EC%A0%81%EC%9A%A9-%EC%98%88%EC%A0%9C" aria-label="transactional 적용 예제 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@Transactional 적용 예제</h2>
<p><code class="language-text">@Transactional</code>이 프록시 방식으로 동작하는 것을 모른다면 실수하기 쉬운 부분들이 있다.
여기서는 몇 가지 예제를 통해 그 부분을 짚고 넘어가고자 한다.</p>
<ol>
<li><code class="language-text">private</code> <strong>메소드는 트랜잭션 처리를 할 수 없다.</strong>
앞서 트랜잭션이 코드 레벨에서 어떻게 동작하는지 대락적으로 살펴봤다.
프록시 객체는 타겟 객체/인터페이스를 상속 받아서 구현하는데, <code class="language-text">private</code>으로 되어 있으면 <strong>자식인 프록시 객체에서 호출할 수 없다</strong>.
따라서 <code class="language-text">@Transactional</code> 이 붙는 메서드, 클래스는 프록시 객체에서 접근 가능한 레벨로 지정해야 한다.</li>
<li>트랜잭션은 객체 외부에서 <strong>처음 진입하는 메서드를 기준</strong>으로 동작한다.</li>
</ol>
<h4 id="다음과-같이-a-b-c의-메서드가-있다고-가정하자" style="position:relative;"><a href="#%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%B4-a-b-c%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%9E%88%EB%8B%A4%EA%B3%A0-%EA%B0%80%EC%A0%95%ED%95%98%EC%9E%90" aria-label="다음과 같이 a b c의 메서드가 있다고 가정하자 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>다음과 같이 A, B, C의 메서드가 있다고 가정하자.</h4>
<ul>
<li>A 메서드는 쿠폰을 생성하는 메서드이고, 트랜잭션이 적용되어 있다.</li>
<li>B 메서드는 A 메서드를 3번 호출하고, 트랜잭션이 적용되어 있지 않다.</li>
<li>C 메서드도 A 메서드를 3번 호출한다. 하지만 C에는 트랜잭션이 적용되어 있다.</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">CouponGroupMapper</span> couponGroupMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token class-name">CouponGroupParam</span> param<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        param<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">CouponGroupStatus</span><span class="token punctuation">.</span>CREATED<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 상태 변경</span>
        couponGroupMapper<span class="token punctuation">.</span><span class="token function">insertCouponGroup</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CouponGroupParam</span> param <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CouponGroupParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"1000포인트 쿠폰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setMaxCount</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setValidFromDt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setValidToDt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setIssuerId</span><span class="token punctuation">(</span><span class="token string">"0101"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">"B000"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">A</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 오류 발생!</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CouponGroupParam</span> param <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CouponGroupParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"1000 포인트 쿠폰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setMaxCount</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setValidFromDt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setValidToDt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setIssuerId</span><span class="token punctuation">(</span><span class="token string">"0101"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            param<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">"C000"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">A</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 오류 발생!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>B, C 메서드 모두 정상적인 경우라면 쿠폰 3개를 신규 생성한다.
그렇다면 B와 C 메서드는 동일한 기능을 한다고 볼 수 있을까?</p>
<h4 id="쿠폰을-3개를-모두-생성한-뒤-오류가-발생했다고-가정해보자" style="position:relative;"><a href="#%EC%BF%A0%ED%8F%B0%EC%9D%84-3%EA%B0%9C%EB%A5%BC-%EB%AA%A8%EB%91%90-%EC%83%9D%EC%84%B1%ED%95%9C-%EB%92%A4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%96%88%EB%8B%A4%EA%B3%A0-%EA%B0%80%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90" aria-label="쿠폰을 3개를 모두 생성한 뒤 오류가 발생했다고 가정해보자 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>쿠폰을 3개를 모두 생성한 뒤 오류가 발생했다고 가정해보자.</h4>
<p>B,C 메서드에서 호출하는 A 메서드에는 트랜잭션 처리가 되어있기 때문에, B,C 모두 3개의 쿠폰을 정상적으로 생성한다고 예상할 수도 있다.
직접 코드를 실행했을 때의 결과는 다음과 같았다.</p>
<h4 id="진입-메서드에-트랜잭션이-적용되어-있지-않은-경우-b-메서드" style="position:relative;"><a href="#%EC%A7%84%EC%9E%85-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%B4-%EC%A0%81%EC%9A%A9%EB%90%98%EC%96%B4-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%80-%EA%B2%BD%EC%9A%B0-b-%EB%A9%94%EC%84%9C%EB%93%9C" aria-label="진입 메서드에 트랜잭션이 적용되어 있지 않은 경우 b 메서드 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>진입 메서드에 트랜잭션이 적용되어 있지 않은 경우 (B 메서드)</h4>
<p><img src="https://user-images.githubusercontent.com/55419159/175801356-b011c140-6d5f-4b52-ab39-78acb6660b76.png" alt="image">
B 메서드를 실행하면, 쿠폰을 생성하는 3번의 쿼리가 호출된 뒤 <code class="language-text">RuntimeExcetption</code>이 발생하는 것을 확인할 수 있다.
<img src="https://user-images.githubusercontent.com/55419159/175801371-2db19b53-d8c9-41ff-b73a-d3aecfe6f19d.png" alt="image">
DB에도 3개의 쿠폰 데이터가 잘 생성되어 있는 것을 확인할 수 있다.</p>
<h4 id="진입-메서드에-트랜잭션이-적용되어-있는-경우-c-메서드" style="position:relative;"><a href="#%EC%A7%84%EC%9E%85-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%B4-%EC%A0%81%EC%9A%A9%EB%90%98%EC%96%B4-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0-c-%EB%A9%94%EC%84%9C%EB%93%9C" aria-label="진입 메서드에 트랜잭션이 적용되어 있는 경우 c 메서드 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>진입 메서드에 트랜잭션이 적용되어 있는 경우 (C 메서드)</h4>
<p><img src="https://user-images.githubusercontent.com/55419159/175801390-e5543954-9257-4700-94ce-528984d835fe.png" alt="image">
C 메서드도 B 메서드와 동일하게 쿠폰을 생성하는 3번의 쿼리가 호출된 뒤 <code class="language-text">RuntimeExcetption</code>이 발생한다.
<img src="https://user-images.githubusercontent.com/55419159/175801405-ed696d2f-d423-4780-9e1b-dc8f0dac0bce.png" alt="image">
하지만 DB를 확인해보면 아무런 쿠폰 데이터가 생성되어 있지 않다!</p>
<p>이렇게 B, C 메서드를 실행한 결과가 다른 것은 트랜잭션이 프록시로 동작한다는 사실을 이해한다면 당연한 결과이다.</p>
<p><img src="https://user-images.githubusercontent.com/55419159/175801427-7699470e-ec80-4912-8f6c-46005211da35.png" alt="image"></p>
<p>클래스에 <code class="language-text">@Transactional</code> 처리가 되어 있는 부분(A, C 메서드)이 있다면, Spring은 해당 부분에 트랜잭션 처리를 추가한 프록시를 자동으로 생성한다.
그리고 외부에서 호출하면, 원래 클래스가 아닌 프록시가 대신 호출된다.</p>
<ol>
<li>C 메서드를 호출하면, <code class="language-text">TestService</code>가 아닌 <code class="language-text">TestService</code>의 프록시에 구현된 C 메서드가 대신 호출된다. 따라서 C와 C에서 호출하는 A 모두 프록시 객체에서 트랜잭션 처리를 해준다. </li>
<li>하지만 B 메서드를 호출하는 것은 트랜잭션 처리가 되어 있지 않은 순수 B 메서드를 호출하는 것과 같다. 이때 B에서 호출하는 A 역시 트랜잭션 처리가 되어 있지 않다.</li>
</ol>
<p>결과적으로 트랜잭션은 <strong>객체 외부에서 처음 진입하는 메서드를 기준으로 동작</strong>한다는 사실을 알 수 있다.</p>
<hr>
<h1 id="결론" style="position:relative;"><a href="#%EA%B2%B0%EB%A1%A0" aria-label="결론 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>결론</h1>
<ul>
<li><strong>AOP는 흩어진 관심사를 별도의 클래스로 모듈화하는 프로그래밍 방법</strong>을 말하며, OOP를 더욱 잘 지킬 수 있도록 도움을 준다.</li>
<li><strong>Spring AOP</strong>는 <strong>프록시</strong> 객체를 자동으로 생성해주어, <code class="language-text">Aspect</code>/<code class="language-text">Advice</code>에 직접적으로 의존하지 않게 해준다.</li>
<li>
<p><code class="language-text">@Transactional</code> 도 Spring AOP 중 하나로 <strong>프록시 방식</strong>으로 동작한다.</p>
<ul>
<li>원본 클래스/인터페이스를 상속 받아 프록시를 생성하기 때문에 접근 제어가 <code class="language-text">private</code><strong>으로 되어 있으면 안된다</strong>.</li>
<li>객체 외부에서 처음으로 진입하는 메서드에 트랜잭션 처리가 되어 있어야, 해당 요청을 프록시 객체가 대신 처리할 수 있다. 따라서 트랜잭션은 객체 <strong>외부에서 처음 진입하는 메서드를 기준</strong>으로 동작한다.</li>
</ul>
</li>
</ul></div></div><aside><div class="RelatedPosts__Wrapper-sc-15t1gj5-0 fiFeft"><div class="RelatedPosts__PostCardWrapper-sc-15t1gj5-1 iRbQrG"><a class="post-card-link" href="/category/spring/pessimistic-optimistic-lock/"><p class="RelatedPosts__PostCardEmoji-sc-15t1gj5-2 ifmpQu"><img class="emoji" draggable="false" alt="🔒" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f512.svg"/></p><div class="RelatedPosts__PostCardContent-sc-15t1gj5-3 ggusaO"><h5>[Lock] 동시성이슈에 대한 해결 방법</h5><time>2023.01.03</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-15t1gj5-1 iRbQrG"><a class="post-card-link" href="/category/spring/jdk-dynamic-proxy-vs-cglib/"><p class="RelatedPosts__PostCardEmoji-sc-15t1gj5-2 ifmpQu"><img class="emoji" draggable="false" alt="🪔" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1fa94.svg"/></p><div class="RelatedPosts__PostCardContent-sc-15t1gj5-3 ggusaO"><h5>[Spring] JDK Dynamic Proxy VS CGLIB</h5><time>2022.10.30</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-15t1gj5-1 iRbQrG"><a class="post-card-link" href="/category/spring/spring-bean-lifecycle/"><p class="RelatedPosts__PostCardEmoji-sc-15t1gj5-2 ifmpQu"><img class="emoji" draggable="false" alt="🔋" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f50b.svg"/></p><div class="RelatedPosts__PostCardContent-sc-15t1gj5-3 ggusaO"><h5>[Spring] Spring Bean Lifecycle</h5><time>2022.10.25</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-15t1gj5-1 iRbQrG"><a class="post-card-link" href="/category/spring/bean-post-processor/"><p class="RelatedPosts__PostCardEmoji-sc-15t1gj5-2 ifmpQu">🛟</p><div class="RelatedPosts__PostCardContent-sc-15t1gj5-3 ggusaO"><h5>[Spring] BeanPostProcessor</h5><time>2022.10.20</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-15t1gj5-1 iRbQrG"><a class="post-card-link" href="/category/spring/spring-configuration/"><p class="RelatedPosts__PostCardEmoji-sc-15t1gj5-2 ifmpQu"><img class="emoji" draggable="false" alt="🏖️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f3d6.svg"/></p><div class="RelatedPosts__PostCardContent-sc-15t1gj5-3 ggusaO"><h5>[Spring] Spring Configuration</h5><time>2022.10.15</time></div></a></div></div><div></div></aside></section></div><div class="TableOfContents__TableIndex-sc-10py2gf-0 fDIfyV"><div class="TableOfContents__TableWrapper-sc-10py2gf-1 fHkPwv table-of-contents"><h1 class="TableOfContents__TableHeader-sc-10py2gf-2 kqnMjP">🔖 Catalog</h1><div class="TableOfContents__TableContents-sc-10py2gf-3 XIZEq"><ul>
<li>
<p><a href="/category/spring/transactional-aop/#aopaspect-oriented-programming%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%99%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80">AOP(Aspect Oriented Programming)란 무엇이며 왜 사용하는가</a></p>
<ul>
<li><a href="/category/spring/transactional-aop/#aop%EC%9D%98-%EC%A3%BC%EC%9A%94-%EA%B0%9C%EB%85%90">AOP의 주요 개념</a></li>
</ul>
</li>
<li>
<p><a href="/category/spring/transactional-aop/#spring-aop%EB%8A%94-%EC%99%9C-%ED%94%84%EB%A1%9D%EC%8B%9C-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80">Spring AOP는 왜 프록시 방식을 사용하는가?</a></p>
<ul>
<li>
<p><a href="/category/spring/transactional-aop/#jdk-proxy%EC%99%80-cglib-proxy">JDK Proxy와 CGLib Proxy</a></p>
<ul>
<li><a href="/category/spring/transactional-aop/#jdk-proxy">JDK Proxy</a></li>
<li><a href="/category/spring/transactional-aop/#cglib-proxy">CGLib Proxy</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="/category/spring/transactional-aop/#transactional%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EA%B0%80">@Transactional은 어떻게 동작하는가</a></p>
<ul>
<li><a href="/category/spring/transactional-aop/#transactional%EC%9D%98-%EB%8F%99%EC%9E%91-%EC%88%9C%EC%84%9C">@Transactional의 동작 순서</a></li>
<li>
<p><a href="/category/spring/transactional-aop/#transactional-%EC%A0%81%EC%9A%A9-%EC%98%88%EC%A0%9C">@Transactional 적용 예제</a></p>
<ul>
<li>
<ul>
<li><a href="/category/spring/transactional-aop/#%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%9D%B4-a-b-c%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%9E%88%EB%8B%A4%EA%B3%A0-%EA%B0%80%EC%A0%95%ED%95%98%EC%9E%90">다음과 같이 A, B, C의 메서드가 있다고 가정하자.</a></li>
<li><a href="/category/spring/transactional-aop/#%EC%BF%A0%ED%8F%B0%EC%9D%84-3%EA%B0%9C%EB%A5%BC-%EB%AA%A8%EB%91%90-%EC%83%9D%EC%84%B1%ED%95%9C-%EB%92%A4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%96%88%EB%8B%A4%EA%B3%A0-%EA%B0%80%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90">쿠폰을 3개를 모두 생성한 뒤 오류가 발생했다고 가정해보자.</a></li>
<li><a href="/category/spring/transactional-aop/#%EC%A7%84%EC%9E%85-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%B4-%EC%A0%81%EC%9A%A9%EB%90%98%EC%96%B4-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%80-%EA%B2%BD%EC%9A%B0-b-%EB%A9%94%EC%84%9C%EB%93%9C">진입 메서드에 트랜잭션이 적용되어 있지 않은 경우 (B 메서드)</a></li>
<li><a href="/category/spring/transactional-aop/#%EC%A7%84%EC%9E%85-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%B4-%EC%A0%81%EC%9A%A9%EB%90%98%EC%96%B4-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0-c-%EB%A9%94%EC%84%9C%EB%93%9C">진입 메서드에 트랜잭션이 적용되어 있는 경우 (C 메서드)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="/category/spring/transactional-aop/#%EA%B2%B0%EB%A1%A0">결론</a></li>
</ul></div></div></div></div></main></div></div><footer class="Footer__FooterContent-sc-5p0nzy-0 fTcnoY"><div class="ContentWrapper__IndexContent-sc-qgwu46-0 ebovCZ"><div class="Footer__FooterInner-sc-5p0nzy-1 heGWde"><div>© <!-- -->2023<!-- -->, Jay. All rights reserved.</div></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'none', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/category/spring/transactional-aop/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6ed0469530c21b23fd71.js"],"app":["/app-0dbf9fa9f0620e9dd3df.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-2296adb1de2fc003fbd5.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-50bdfd543664202d8b16.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-6ad552307d57c3b3397d.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-655be2bbb60a827e3b84.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-e2a6eaff4ad412c6fa96.js"]};/*]]>*/</script><script src="/polyfill-6ed0469530c21b23fd71.js" nomodule=""></script><script src="/component---src-templates-post-tsx-e2a6eaff4ad412c6fa96.js" async=""></script><script src="/53b27b57f60ee3e1ca57a66cde9add975dffb161-9b45968f09d89d7a2af7.js" async=""></script><script src="/de71a805-d9a74fce0a097621e412.js" async=""></script><script src="/app-0dbf9fa9f0620e9dd3df.js" async=""></script><script src="/styles-e383b929d2d4095ae339.js" async=""></script><script src="/framework-999a01e9e4c894cffffe.js" async=""></script><script src="/webpack-runtime-d69d5b1ac5db60e29788.js" async=""></script></body></html>