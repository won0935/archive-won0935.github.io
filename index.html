<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Jay&#039;s Develop Note</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Jay&#039;s Develop Note"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Jay&#039;s Develop Note"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="기억보단 기록으로"><meta property="og:type" content="blog"><meta property="og:title" content="Jay&#039;s Develop Note"><meta property="og:url" content="http://won0935.github.io/"><meta property="og:site_name" content="Jay&#039;s Develop Note"><meta property="og:description" content="기억보단 기록으로"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://won0935.github.io/img/og_image.png"><meta property="article:author" content="Song Jae-won, Jay"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://won0935.github.io"},"headline":"Jay's Develop Note","image":["http://won0935.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Song Jae-won, Jay"},"publisher":{"@type":"Organization","name":"Jay's Develop Note","logo":{"@type":"ImageObject","url":{"text":"기억보단 기록으로"}}},"description":"기억보단 기록으로"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">기억보단 기록으로</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" target="_blank" rel="noopener" href="https://dev-song.notion.site/Clean-Neat-Code-955801f71953414097b2992b1ed9f3b2">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/won0935"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.221Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.221Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4/">디자인패턴</a></span><span class="level-item">3 minutes read (About 518 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/2021-10-19-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4/2021-10-19-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4/">싱글톤 패턴</a></h1><div class="content"><blockquote>
<p>해당 클래스의 인스턴스가 하나만 만들어지고,<br>어디서든지 그 인스턴스에 접근할 수 있도록 하기 위한 패턴</p>
</blockquote>
<h2 id="고전적인-싱글톤-패턴-문제-있음"><a href="#고전적인-싱글톤-패턴-문제-있음" class="headerlink" title="고전적인 싱글톤 패턴 (문제 있음)"></a>고전적인 싱글톤 패턴 (문제 있음)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>)&#123;</span><br><span class="line">			uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> uniqueInstance;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>멀티쓰레드 환경에서는 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>)&#123;</span><br><span class="line">	uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이 부분에서  2개 이상의 인스턴스가 생성될 수 있다.</p>
<h2 id="해결방법"><a href="#해결방법" class="headerlink" title="해결방법"></a>해결방법</h2><h3 id="1-synchronized-사용"><a href="#1-synchronized-사용" class="headerlink" title="1. synchronized 사용"></a>1. <code>synchronized</code> 사용</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>)&#123;</span><br><span class="line">			uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> uniqueInstance;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>단점 : 속도 저하  → 메소드가  <code>synchronized</code> 되면 약 100배 정도 성능 저하가 일어난다고 한다.</li>
</ul>
<h3 id="2-인스턴스를-처음부터-만들어-버림"><a href="#2-인스턴스를-처음부터-만들어-버림" class="headerlink" title="2. 인스턴스를 처음부터 만들어 버림"></a>2. 인스턴스를 처음부터 만들어 버림</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> uniqueInstance;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>클래스가 로딩될 때 JVM에서 Singleton의 유일한 인스턴스를 생성해준다.</li>
</ul>
<h3 id="3-DCL-Double-Checking-Locking-사용"><a href="#3-DCL-Double-Checking-Locking-사용" class="headerlink" title="3. DCL(Double-Checking Locking) 사용"></a>3. DCL(Double-Checking Locking) 사용</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                        <span class="keyword">synchronized</span> (Singleton.class)&#123;</span><br><span class="line">                                  <span class="keyword">if</span>(uniqueInstance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                                             uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                                  &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> uniqueInstance;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>volatile</code> 키워드를 사용하면 자바의 일종의 최적화인 리오더링(보통 컴파일 과정에서 일어나며, 프로그래머가 만들어낸 코드는 컴파일 될 때 좀더 빠르게 실행될 수 있도록 조작이 가해져 최적하됨)을 회피하여 읽기와 쓰기순서를 보장한다.</li>
<li>멀티스레딩을 쓰더라도 uniqueInstance변수가 Singleton 인스턴스로 초기화 되는 과정이 올바르게 진행되도록 할 수 있다.</li>
<li><strong>DCL은 자바1.5이상의 버전에서만 사용가능</strong>하다.</li>
<li>자바 1.4 및 그 전에 나온 버전의 JVM 중에는 volatile 키워드를 사용하더라도 동기화가 잘 안되는 것이 많다. 일종의 버그.</li>
</ul>
<h2 id="요약"><a href="#요약" class="headerlink" title="요약"></a>요약</h2><ul>
<li>우리가 알고있던 싱글톤 패턴은 사실 <strong>싱글톤 패턴이 아님</strong>!</li>
<li>위의 3가지 방법을 사용하자</li>
<li>개인적으론 **생성자(2번)**가 가장 간단한 것 같음</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.221Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.221Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4/">디자인패턴</a></span><span class="level-item">21 minutes read (About 3217 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/2021-10-20-%ED%8C%A9%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4/2021-10-20-%ED%8C%A9%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4/">팩토리 패턴</a></h1><div class="content"><h2 id="⛳-들어가기-전에"><a href="#⛳-들어가기-전에" class="headerlink" title="⛳ 들어가기 전에.."></a>⛳ 들어가기 전에..</h2><p>회사에서 같은 프로세스 내에서 각각의 제휴사에 서비스를 인터페이스해야 하는 경우가 있었다.</p>
<p>전체적인 프로세스 플로우를 인터페이스로, 제휴사를 클래스(Bean)로 만들어 팩토리 패턴으로 구현하였다. </p>
<p>동일한 프로세스 플로우 내에서 각기 다른 제휴사의 API와 연동해야 했는데 팩토리 패턴이 많은 도움이 되었다.</p>
<hr>
<h2 id="👋-팩토리패턴이란"><a href="#👋-팩토리패턴이란" class="headerlink" title="👋 팩토리패턴이란"></a>👋 팩토리패턴이란</h2><h3 id="⚾-팩토리-메소드-패턴"><a href="#⚾-팩토리-메소드-패턴" class="headerlink" title="⚾ 팩토리 메소드 패턴"></a>⚾ 팩토리 메소드 패턴</h3><blockquote>
<p>객체를 생성하기 위한 인터페이스를 정의하는데,<br>어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정하게 만든다.<br>즉, 팩토리 메소드 패턴을 이용하면 <strong>클래스의 인스턴스를 만드는 일을 서브클래스에게 맡기는 것</strong>.</p>
</blockquote>
<h3 id="🥎-추상-팩토리-패턴"><a href="#🥎-추상-팩토리-패턴" class="headerlink" title="🥎 추상 팩토리 패턴"></a>🥎 추상 팩토리 패턴</h3><blockquote>
<p><strong>인터페이스를 이용</strong>하여 서로 연관된,<br>또는 의존하는 객체를 구상 클래스를 지정하지 않고도 생성한다.</p>
</blockquote>
<hr>
<h2 id="🎩-팩토리패턴이-필요한-이유"><a href="#🎩-팩토리패턴이-필요한-이유" class="headerlink" title="🎩 팩토리패턴이 필요한 이유"></a>🎩 팩토리패턴이 필요한 이유</h2><p><code>new</code>를 사용하는 것은 구상 클래스의 인스턴스를 만드는 것이다.<br>당연히! 인터페이스가 아닌 <em>특정 구현을 사용하게 되어버리는 것</em>.<br>일련의 구상 클래스들이 있을때는 어쩔수 없이 다음과 같은 코드를 만들어야 하는 경우가 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Duck duck;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( type == picnic ) duck = <span class="keyword">new</span> MallardDuck();</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ( type == hunting ) duck = <span class="keyword">new</span> DecoyDuck();</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ( type == inBathTub) duck = <span class="keyword">new</span> RubberDuck();</span><br></pre></td></tr></table></figure>

<p>이런 코드가 있다는 것은, 뭔가 변경하거나 확장해야 할 때 <em>코드를 다시 확인하고 추가 또는 제거해야 한다는 것</em>을 의미한다.<br><strong>인터페이스</strong>에 맞춰서 코딩을 하면 시스템에서 일어날 수 있는 여러 변화를 이겨낼 수 있다.<br><strong>다형성</strong> 덕분에 어떤 클래스든 특정 인터페이스만 구현하면 사용할수 있기 때문이다.</p>
<p>반대로. 구상 클래스를 많이 사용하면 새로운 구상 클래스가 추가될 때마다 코드를 고쳐야 하기때문에 많은 문제가 생길수 있다.<br>즉, <em>변화에 대해 닫혀 있는 코드</em>가 되어버리는 것이다.</p>
<blockquote>
<p>바뀔 수 있는 부분을 찾아내서 바뀌지 않는 부분하고 분리시켜야 한다는 원칙.</p>
</blockquote>
<hr>
<h2 id="🎢-고전적인-팩토리-패턴"><a href="#🎢-고전적인-팩토리-패턴" class="headerlink" title="🎢 고전적인 팩토리 패턴"></a>🎢 고전적인 팩토리 패턴</h2><ul>
<li><strong>피자 가게</strong>를 운영하고 있고 <strong>피자가게 클래스</strong>를 만들어야 된다고 가정한다.<blockquote>
<p>피자가게는 다양한 피자가 있을 수 있다.<br>또한 다양한 피자가게가 있을 수 있다.</p>
</blockquote>
</li>
</ul>
<h3 id="🎞-기존소스"><a href="#🎞-기존소스" class="headerlink" title="🎞 기존소스"></a>🎞 기존소스</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Pizza <span class="title">orderPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       Pizza pizza;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//추가하거나 제거 시 매번 바뀌어야 하는부분</span></span><br><span class="line">       <span class="keyword">if</span>(type.equals(<span class="string">&quot;cheese&quot;</span>)) pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">&quot;greek&quot;</span>)) pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">&quot;pepperoni&quot;</span>)) pizza = <span class="keyword">new</span> PepperoniPizza();</span><br><span class="line">       <span class="comment">//</span></span><br><span class="line"></span><br><span class="line">       pizza.prepare();</span><br><span class="line">       pizza.bake();</span><br><span class="line">       pizza.cut();</span><br><span class="line">       pizza.box();</span><br><span class="line">       <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-피자-팩토리를-만든다"><a href="#1-피자-팩토리를-만든다" class="headerlink" title="1. 피자 팩토리를 만든다."></a>1. 피자 팩토리를 만든다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplePizzaFactory</span> </span>&#123;	</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>&#123; <span class="comment">//이런 경우에는 static메소드로 선언하는 경우가 종종 있음.</span></span><br><span class="line"></span><br><span class="line">	Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pizza.equals(<span class="string">&quot;cheese&quot;</span>)) pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">	<span class="keyword">if</span>(pizza.equals(<span class="string">&quot;pepper&quot;</span>)) pizza = <span class="keyword">new</span> PepperoniPizza();</span><br><span class="line">	<span class="keyword">if</span>(pizza.equals(<span class="string">&quot;clam&quot;</span>)) pizza = <span class="keyword">new</span> ClamPizza();</span><br><span class="line">	<span class="keyword">if</span>(pizza.equals(<span class="string">&quot;veggie&quot;</span>)) pizza = <span class="keyword">new</span> VeggiePizza();</span><br><span class="line">	</span><br><span class="line">       <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-피자-가게를-만든다"><a href="#2-피자-가게를-만든다" class="headerlink" title="2. 피자 가게를 만든다."></a>2. 피자 가게를 만든다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	SimplePizzaFactory simplePizzaFactory;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PizzaStore</span><span class="params">(SimplePizzaFactory simplePizzaFactory)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.simplePizzaFactory = simplePizzaFactory;  <span class="comment">//피자 가게를 동적으로 설정</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		Pizza pizza;</span><br><span class="line">		pizza = simplePizzaFactory.createPizza(type); <span class="comment">//수정 안해도 됨</span></span><br><span class="line">		pizza.prepare();</span><br><span class="line">		pizza.bake();</span><br><span class="line">		pizza.cut();</span><br><span class="line">		pizza.box();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> pizza;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-다양한-피자가게가-생긴다"><a href="#3-다양한-피자가게가-생긴다" class="headerlink" title="3. 다양한 피자가게가 생긴다."></a>3. 다양한 피자가게가 생긴다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PizzaStore nyStore = <span class="keyword">new</span> PizzaStore(<span class="keyword">new</span> NYPizzaFactory());</span><br><span class="line">nyStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line"></span><br><span class="line">PizzaStore chicagoStore = <span class="keyword">new</span> PizzaStore(<span class="keyword">new</span> ChicagoPizzafactory());</span><br><span class="line">chicagoStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>각 피자가게에서 <code>orderPizza()</code> 만 호출하면 피자를 생성할 수 있게 되었다.</li>
</ul>
<blockquote>
<p>그러나, 각 팩토리를 가진 피자가게 체인점들이 서로의 구현방식이 달라지는 일이 발생할수도 있게 되었다.<br>(PizzaStore가 각각 있다보니 굽는 방식이 달라진다거나 피자를 자르는 단계를 빼먹거나 하는..)</p>
</blockquote>
<hr>
<h2 id="🎟-팩토리-메소드-패턴"><a href="#🎟-팩토리-메소드-패턴" class="headerlink" title="🎟 팩토리 메소드 패턴"></a>🎟 팩토리 메소드 패턴</h2><blockquote>
<p>피자가게와 피자 <strong>제작 과정 전체를 하나로 묶어주는 프레임워크</strong>를 만들어야 된다는 결론!!<br>파자를 만드는 활동 자체는 전부 PizzaStore 클래스에 국한시키면서도 분점마다 고유의 스타일을 살릴 수 있는 방법은 ??</p>
</blockquote>
<h3 id="4-피자가게를-묶는-추상-클래스를-만든다-프렌차이즈-본사랄까"><a href="#4-피자가게를-묶는-추상-클래스를-만든다-프렌차이즈-본사랄까" class="headerlink" title="4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)"></a>4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span></span>&#123; <span class="comment">//추상 클래스로 구현</span></span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		Pizza pizza;</span><br><span class="line">		pizza = createPizza(type);</span><br><span class="line">		pizza.prepare();</span><br><span class="line">		pizza.bake();</span><br><span class="line">		pizza.cut();</span><br><span class="line">		pizza.box();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> pizza;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">abstract</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>; <span class="comment">//Pizza 인스턴스를 만드는 일은 팩토리 역할을 하는 메소드에서 맡아 처리</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-각-피자가게에서-추상클래스-본사-를-상속받게-한다"><a href="#5-각-피자가게에서-추상클래스-본사-를-상속받게-한다" class="headerlink" title="5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다."></a>5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.</h3><p>이제 각 분점을 위한 지역별로 서브클래스를 만들어줘야 한다. 피자의 스타일은 각 서브클래스에서 결정.</p>
<p><img src="https://user-images.githubusercontent.com/55419159/139077742-76ac1027-09c3-4e42-8046-82a2b4e0cb54.jpg" alt="image"></p>
<p>이제 <code>ChicagoPizzaStore</code>, <code>NYPizzaStore</code> 에는 구상 피자클래스를 분기해주는 각각의 <code>createPizza()</code> 메소드가 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span>(type.equals(<span class="string">&quot;cheese&quot;</span>)) pizza = <span class="keyword">new</span> NYStyleCheesePizza();</span><br><span class="line">		<span class="keyword">if</span>(type.equals(<span class="string">&quot;peper&quot;</span>)) pizza = <span class="keyword">new</span> NYStylePepperoniPizza();</span><br><span class="line">		<span class="keyword">if</span>(type.equals(<span class="string">&quot;clam&quot;</span>)) pizza = <span class="keyword">new</span> NYStyleClamPizza();</span><br><span class="line">		<span class="keyword">if</span>(type.equals(<span class="string">&quot;veggie&quot;</span>)) pizza = <span class="keyword">new</span> NYStyleVeggiePizza();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> pizza;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(type.equals(<span class="string">&quot;cheese&quot;</span>)) pizza = <span class="keyword">new</span> ChicagoStyleCheesePizza();</span><br><span class="line">        <span class="keyword">if</span>(type.equals(<span class="string">&quot;peper&quot;</span>)) pizza = <span class="keyword">new</span> ChicagoStylePepperoniPizza();</span><br><span class="line">        <span class="keyword">if</span>(type.equals(<span class="string">&quot;clam&quot;</span>)) pizza = <span class="keyword">new</span> ChicagoStyleClamPizza();</span><br><span class="line">        <span class="keyword">if</span>(type.equals(<span class="string">&quot;veggie&quot;</span>)) pizza = <span class="keyword">new</span> ChicagoStyleVeggiePizza();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="6-피자-추상클래스를-만든다-순수한-피자-그-자체"><a href="#6-피자-추상클래스를-만든다-순수한-피자-그-자체" class="headerlink" title="6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)"></a>6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line">	String name;</span><br><span class="line">	String dough;</span><br><span class="line">	String sauce;</span><br><span class="line">	ArrayList&lt;String&gt; toppings = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;Preparing : &quot;</span>+name);</span><br><span class="line">		System.out.println(<span class="string">&quot;Tossing dough...&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;Adding source&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;Adding toppings&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span> (String topping : toppings) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;\ttopping : &quot;</span>+topping);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;Bake for 25 minutes at 350&quot;</span>); &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;Cutting the pizza into diagonal slices&quot;</span>); &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">box</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;Place pizza in official PizzaStore box&quot;</span>); &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getname</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.name; &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-다양한-피자를-만들어-피자-추상클래스를-상속한다"><a href="#7-다양한-피자를-만들어-피자-추상클래스를-상속한다" class="headerlink" title="7. 다양한 피자를 만들어 피자 추상클래스를 상속한다."></a>7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYStyleCheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NYStyleCheesePizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = <span class="string">&quot;NY Style CheesePizza&quot;</span>;</span><br><span class="line">		<span class="keyword">this</span>.dough = <span class="string">&quot;Thin Crust Dough&quot;</span>;</span><br><span class="line">		<span class="keyword">this</span>.sauce = <span class="string">&quot;Marinara Sauce&quot;</span>;</span><br><span class="line">		<span class="keyword">this</span>.toppings.add(<span class="string">&quot;Grated Reggiano Cheese&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoStyleCheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ChicagoStyleCheesePizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = <span class="string">&quot;Chicago Style CheesePizza&quot;</span>;</span><br><span class="line">		<span class="keyword">this</span>.dough = <span class="string">&quot;Extra Thick Crust Dough&quot;</span>;</span><br><span class="line">		<span class="keyword">this</span>.sauce = <span class="string">&quot;Plum Tomato Sauce&quot;</span>;</span><br><span class="line">		<span class="keyword">this</span>.toppings.add(<span class="string">&quot;Shredded mozzarella Cheese&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123; System.out.println(<span class="string">&quot;Cutting the pizza into square slices&quot;</span>); &#125; <span class="comment">//바꾸고 싶은 메소드만 오버라이딩</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-피자를-주문한다"><a href="#8-피자를-주문한다" class="headerlink" title="8. 피자를 주문한다."></a>8. 피자를 주문한다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaTestDrive</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	PizzaStore nyStore = <span class="keyword">new</span> NYPizzaStore();</span><br><span class="line">	PizzaStore chicagoStore = <span class="keyword">new</span> ChicagoPizzaStore();</span><br><span class="line"></span><br><span class="line">	Pizza nySytpePizza = nyStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">	System.out.println(nySytpePizza.getname());</span><br><span class="line"></span><br><span class="line">	Pizza chicagoStypePizza = chicagoStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">	System.out.println(chicagoStypePizza.getname());</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<ul>
<li>모든 팩토리 패턴에서는 <strong>객체 생성을 캡슐화</strong> 한다.</li>
<li>팩토리 메소드 패턴에서는 <em>서브 클래스에서 어떤 클래스를 만들지를 결정하게 함</em>으로써 객체 생성을 캡슐화 한다.</li>
</ul>
<ul>
<li>생산자 클래스(피자가게)</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/55419159/139077751-6a262811-5faf-4937-b7f1-5fb3447d8b90.jpg" alt="image2"></p>
<ul>
<li>제품 클래스(피자)</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/55419159/139077752-b27d2d2f-57fb-4226-bab6-f890d0f70a74.jpg" alt="image3"></p>
<p>위 클래스 다이어그램에서는 <code>PizzaStore</code> 추상 클래스에서 객체를 만들기 위한 메소드,<br>즉 팩토리 메소드를 위한 인터페이스를 제공한다는 것을 알수있다. </p>
<p><code>PizzaStore</code>에 구현되어 있는 다른 메소드 <code>orderPizza()</code> 에서는 팩토리 메소드에 의해 생산된 제품을 가지고 필요한 작업을 처리한다.<br>하지만 실제 팩토리 메소드를 구현하고 제품(객체 인스턴스)을 만들어 내는 일은 <strong>서브클래스</strong>에서만 할수 있다.</p>
<hr>
<h2 id="🎭-디자인원칙-의존성-뒤집기-원칙"><a href="#🎭-디자인원칙-의존성-뒤집기-원칙" class="headerlink" title="🎭 디자인원칙 : 의존성 뒤집기 원칙"></a>🎭 디자인원칙 : 의존성 뒤집기 원칙</h2><blockquote>
<p>추상화된 것에 의존하도록 만들어라. 구상 클래스에 의존하도록 만들지 않도록 한다.</p>
</blockquote>
<p><del>구현클래스에 의존하는 형태</del></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PizzaStore -&gt; NYStyleCheesePizza</span><br><span class="line">PizzaStore -&gt; ChicagoStypeCheesePizza</span><br><span class="line">PizzaStore -&gt; NYStyleVeggiePizza</span><br></pre></td></tr></table></figure>
<p><del>-&gt; 좋지않음</del></p>
<p>추상클래스(인터페이스)를 의존하는 형태</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PizzaStore -&gt; Pizza</span><br><span class="line">Pizza &lt;- NYStyleCheesePizza</span><br><span class="line">Pizza &lt;- ChicagoStyleCheesePizza</span><br><span class="line">Pizza &lt;- NYStyleVeggiePizza</span><br></pre></td></tr></table></figure>
<p> -&gt; <strong>좋음</strong></p>
<h3 id="🛒-원칙에-도움이-되는-가이드"><a href="#🛒-원칙에-도움이-되는-가이드" class="headerlink" title="🛒 원칙에 도움이 되는 가이드"></a>🛒 원칙에 도움이 되는 가이드</h3><p><em><strong>1. 어떤 변수에도 구상 클래스에 대한 레퍼런스를 지정하지 않는다.</strong></em></p>
<ul>
<li><code>new</code> 연산자를 사용하면 레퍼런스를 사용하게 되는 것이다.</li>
</ul>
<p><em><strong>2. 구상 클래스에서 유도된 클래스를 만들지 않는다.</strong></em></p>
<ul>
<li>구상클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게된다, 추상화 된 것을 사용해야 한다.</li>
</ul>
<p><em><strong>3. 베이스 클래스에 이미 구현되어 있던 메소드를 오버라이드 하지 않는다.</strong></em></p>
<ul>
<li>이미 구현되어 있는 메소드를 오버라이드 한다는 것은 애초부터 베이스 클래스가 제대로 추상화 된것이 아니었다고 볼 수 있다. </li>
<li>베이스 클래스에서 메소드를 정의할 때는 모든 서브 클래스에서 공유할 수 있는 것만 정의해야한다.</li>
</ul>
<hr>
<h2 id="🦺-추상-팩토리-패턴"><a href="#🦺-추상-팩토리-패턴" class="headerlink" title="🦺 추상 팩토리 패턴"></a>🦺 추상 팩토리 패턴</h2><p>이렇게 PizzaStore 디자인이 모양새를 갖췄다. 유연한 프레임워크도 만들어 졌고, 디자인 원칙도 충실하게 지켰다.</p>
<p>각각 체인점들이 미리 정해놓은 절차를 잘 따르고 있지만 몇몇 체인점들이 자잘한 재료를 더 싼 재료로 바꿔서 원가를 절감해 마진을 남기고 있다. </p>
<p>원재료의 품질까지 관리하는 방법이 있을까??</p>
<ul>
<li><strong>원재료 군</strong>을 만들어 파악하자. </li>
<li>제품에 들어가는 재료군(반죽, 소스, 치즈, 야채, 고기)은 같지만, 지역마다 재료의 구체적인 내용이 조금씩 다르다.</li>
</ul>
<ol>
<li>지역별로 팩토리를 만들어 각 생성 메소드를 구현하는 <code>PizzaingredientFactory</code> 클래스를 만든다.</li>
<li><code>ReggianoCheese</code>, <code>RedPeppers</code>, <code>ThickCrustDough</code>와 같이 팩토리에서 사용할 원재료 클래스들을 구현한다.</li>
<li>만든 원재료 공장을 <code>PizzaStore</code> 코드에서 사용하도록 함으로써 하나로 묶어준다.</li>
</ol>
<h3 id="9-원재료-공장을-만든다"><a href="#9-원재료-공장을-만든다" class="headerlink" title="9. 원재료 공장을 만든다."></a>9. 원재료 공장을 만든다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PizzaIngredientFactory</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Dough <span class="title">createDough</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Sauce <span class="title">createSauce</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Cheese <span class="title">createCheese</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span> Veggies[] createVeggies();</span><br><span class="line"><span class="function"><span class="keyword">public</span> Pepperoni <span class="title">createPepperoni</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Clams <span class="title">createClams</span><span class="params">()</span></span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYPizzaingredientFactory</span> <span class="keyword">implements</span> <span class="title">PizzaIngredientFactory</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Dough <span class="title">createDough</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> ThinCrustdough(); &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Sauce <span class="title">createSauce</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> MarinaraSauce(); &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Cheese <span class="title">createCheese</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> ReggianoCheese(); &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Veggies[] createVeggies() &#123;</span><br><span class="line">		Veggies veggies[] = &#123; <span class="keyword">new</span> Farlic(), <span class="keyword">new</span> Onion(), <span class="keyword">new</span> Mushroom(), <span class="keyword">new</span> RedPepper() &#125;;</span><br><span class="line">		<span class="keyword">return</span> veggies;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pepperoni <span class="title">createPepperoni</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> SlicedPepperoni(); &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Clams <span class="title">createClams</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Freshclams(); &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoPizzaingredientFactory</span> <span class="keyword">implements</span> <span class="title">PizzaIngredientFactory</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dough <span class="title">createDough</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> ThickCrustDough(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sauce <span class="title">createSauce</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> PlumTomatoSauce(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cheese <span class="title">createCheese</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> MozzarellaCheese(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Veggies[] createVeggies() &#123;</span><br><span class="line">        Veggies veggies[] = &#123; <span class="keyword">new</span> BlackOlives(), <span class="keyword">new</span> Spinach(), <span class="keyword">new</span> EggPlant()&#125;;</span><br><span class="line">        <span class="keyword">return</span> veggies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pepperoni <span class="title">createPepperoni</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Slicedpepperoni(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Clams <span class="title">createClams</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> FrozenClam(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-피자마다-재료는-다르다"><a href="#10-피자마다-재료는-다르다" class="headerlink" title="10. 피자마다 재료는 다르다."></a>10. 피자마다 재료는 다르다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line">String name;</span><br><span class="line">Dough dough;</span><br><span class="line">Sauce sauce;</span><br><span class="line">Veggies veggies[];</span><br><span class="line">Cheese cheese;</span><br><span class="line">Pepperoni pepperoni;</span><br><span class="line">Clams clams;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span></span>; <span class="comment">//추상 메소드로 변경됨.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;Bake for 25 minutes at 350&quot;</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;Cutting the pizza into diagonal slices&quot;</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">box</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;Place pizza in official PizzaStore box&quot;</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getname</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.name; &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	PizzaIngredientFactory ingredientFactory;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CheesePizza</span><span class="params">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.ingredientFactory = ingredientFactory;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.dough = ingredientFactory.createDough();</span><br><span class="line">		<span class="keyword">this</span>.sauce = ingredientFactory.createSauce();</span><br><span class="line">		<span class="keyword">this</span>.cheese = ingredientFactory.createCheese();</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClamPizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    PizzaIngredientFactory ingredientFactory;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClamPizza</span><span class="params">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ingredientFactory = ingredientFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dough = ingredientFactory.createDough();</span><br><span class="line">        <span class="keyword">this</span>.sauce = ingredientFactory.createSauce();</span><br><span class="line">        <span class="keyword">this</span>.cheese = ingredientFactory.createCheese();</span><br><span class="line">        <span class="keyword">this</span>.clams = ingredientFactory.createClams();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="11-피자마다-지역마다-다른-피자를-만든다"><a href="#11-피자마다-지역마다-다른-피자를-만든다" class="headerlink" title="11. 피자마다, 지역마다 다른 피자를 만든다."></a>11. 피자마다, 지역마다 다른 피자를 만든다.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">	PizzaIngredientFactory ingredientFactory = <span class="keyword">new</span> NYPizzaingredientFactory();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(type.equals(<span class="string">&quot;cheese&quot;</span>))&#123;</span><br><span class="line">		pizza = <span class="keyword">new</span> CheesePizza(ingredientFactory);</span><br><span class="line">		pizza.setName(ingredientFactory.NY_STYLE+<span class="string">&quot; Cheese Pizza&quot;</span>);</span><br><span class="line">	</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">&quot;peper&quot;</span>))&#123;</span><br><span class="line">		pizza = <span class="keyword">new</span> PepperoniPizza(ingredientFactory);</span><br><span class="line">		pizza.setName(ingredientFactory.NY_STYLE+<span class="string">&quot; Pepperoni Pizza&quot;</span>);</span><br><span class="line">	</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">&quot;clam&quot;</span>))&#123;</span><br><span class="line">		pizza = <span class="keyword">new</span> ClamPizza(ingredientFactory);</span><br><span class="line">		pizza.setName(ingredientFactory.NY_STYLE+<span class="string">&quot; Clam Pizza&quot;</span>);</span><br><span class="line">	</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">&quot;veggie&quot;</span>))&#123;</span><br><span class="line">		pizza = <span class="keyword">new</span> VeggiePizza(ingredientFactory);</span><br><span class="line">		pizza.setName(ingredientFactory.NY_STYLE+<span class="string">&quot; Veggie Pizza&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>


<h3 id="⛳-프로세스-정리"><a href="#⛳-프로세스-정리" class="headerlink" title="⛳ 프로세스 정리"></a>⛳ 프로세스 정리</h3><p><img src="https://user-images.githubusercontent.com/55419159/139077755-c920f73b-e347-41d4-b1a8-9f0bc5e028fa.jpg" alt="image4"></p>
<p>이제 전체적인 흐름은.</p>
<ol>
<li><p>뉴욕 피자가게를 만든다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PizzaStore nyPizzaStore = <span class="keyword">new</span> NYPizzaStore();</span><br></pre></td></tr></table></figure></li>
<li><p>주문을 한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nyPizzaStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>orderPizza 메소드에서는 우선 createPizza() 메소드를 호출한다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pizza pizza = createPizza(<span class="string">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>createPizza() 메소드가 호출되면 원재료 공장이 돌아가기 시작한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pizza pizza = <span class="keyword">new</span> CheesePizza(nyIngredientFactory);</span><br></pre></td></tr></table></figure></li>
<li><p>피자를 준비하는 prepare()메소드가 호출되면 팩토리에 원재료 주문이 들어간다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">        dough = nyIngredientFactory.createDough();</span><br><span class="line">        sauce = nyIngredientFactory.createSauce();</span><br><span class="line">        cheese = nyIngredientFactory.createCheese();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>준비단계가 끝나고 orderPizza() 메소드에서는 피자를 굽고, 자르고, 포장한다.</p>
</li>
</ol>
<hr>
<h2 id="💎-요약"><a href="#💎-요약" class="headerlink" title="💎 요약"></a>💎 요약</h2><h3 id="추상-팩토리-패턴"><a href="#추상-팩토리-패턴" class="headerlink" title="추상 팩토리 패턴"></a>추상 팩토리 패턴</h3><blockquote>
<p>제품군을 생성하기 위한 <strong>인터페이스</strong>를 생성하고, 그 <strong>인터페이스를 구성</strong>하여 사용할수 있게끔 하는것.</p>
</blockquote>
<h3 id="추상-메소드-패턴"><a href="#추상-메소드-패턴" class="headerlink" title="추상 메소드 패턴"></a>추상 메소드 패턴</h3><blockquote>
<p>하나의 추상클래스에서 <strong>추상 메소드</strong>를 만들고, 서브클래스들이 <strong>그 추상메소드를 구현</strong>하여 인스턴스를 만들게끔 하는것.</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.205Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T11:20:28.894Z" title="11/1/2021, 8:20:28 PM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B2%8C%EC%9E%84/">게임</a></span><span class="level-item">2 minutes read (About 262 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B2%8C%EC%9E%84/2021-10-30-m1-league-of-legend/">m1 맥에서 144hz 롤하기</a></h1><div class="content"><blockquote>
<p>결론부터 말하면 롤 <strong>설정 값</strong>을 바꿔주면 <strong>m1 macbook Air</strong>로 <em>144hz 방어</em>가 가능하다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/55419159/139523580-e90497ce-2cab-444b-b137-c17ae0875f05.png"></p>
<h2 id="테스트-스펙"><a href="#테스트-스펙" class="headerlink" title="테스트 스펙"></a>테스트 스펙</h2><ul>
<li>macbook air m1(2020) 8g 256gb (깡통 맥북에어 옵션)</li>
<li>qhd 165hz 외장모니터</li>
</ul>
<br>


<h2 id="방법"><a href="#방법" class="headerlink" title="방법"></a>방법</h2><h3 id="1-finder-‘응용-프로그램’-‘리그오브레전드’-오른쪽클릭-‘패키지-내용보기’"><a href="#1-finder-‘응용-프로그램’-‘리그오브레전드’-오른쪽클릭-‘패키지-내용보기’" class="headerlink" title="1. finder - ‘응용 프로그램’ - ‘리그오브레전드’ 오른쪽클릭 ‘패키지 내용보기’"></a>1. finder - ‘응용 프로그램’ - ‘리그오브레전드’ 오른쪽클릭 ‘패키지 내용보기’</h3><p>   <img src="https://user-images.githubusercontent.com/55419159/139523689-d613a586-55f2-426c-9e10-09e776c04450.png"></p>
<br>

<h3 id="2-아래의-경로로-들어감"><a href="#2-아래의-경로로-들어감" class="headerlink" title="2. 아래의 경로로 들어감"></a>2. 아래의 경로로 들어감</h3><ul>
<li>LoL/Config/game.cfg</li>
<li>텍스트 에디터로 열기</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/55419159/139523809-a896357e-4c3b-413a-8474-6fc4ec9ecca4.png"></p>
<br>

<h3 id="3-General-마지막-항목에-“MetalBetaTest-true”-추가"><a href="#3-General-마지막-항목에-“MetalBetaTest-true”-추가" class="headerlink" title="3. [General] 마지막 항목에 “MetalBetaTest=true” 추가"></a>3. [General] 마지막 항목에 “MetalBetaTest=true” 추가</h3><p><img src="https://user-images.githubusercontent.com/55419159/139523849-60136e47-3f6b-4ae4-b22d-15f066f4f16b.png"></p>
<h2 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h2><ul>
<li>상옵기준 매우 쾌적하게 플레이 가능 (심지어 발열도 없다.)</li>
<li>심지어 한타중에도 프레임드랍이 없다…🤔</li>
<li>게임하려고 맥북사는 사람들은 없겠지만 롤하려고 맥북은 사도 될지도…?</li>
</ul>
<br>

<p>참고 : <a href="!%5B%5D(https://devtrackers.gg/leagueoflegends/p/c1948cdc-mac-on-metal-beta-testing)">Mac on Metal Beta Testing</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.204Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.204Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/">가상면접 사례로 배우는 대규모 시스템 설계기초</a></span><span class="level-item">3 minutes read (About 502 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/2021-10-13-%ED%82%A4-%EA%B0%92-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%84%A4%EA%B3%84/2021-10-13-%ED%82%A4-%EA%B0%92-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%84%A4%EA%B3%84/">키-값 저장소 설계</a></h1><div class="content"><blockquote>
<ul>
<li>비 관계형 데이터베이스<br>고유식별자(key)를 키로 가짐</li>
<li>키와 값 사이의 연결 관계를 “키-값” 쌍(pair)라고 표현</li>
</ul>
</blockquote>
<hr>
<h2 id="분산-키-값-저장소의-CAP-정리"><a href="#분산-키-값-저장소의-CAP-정리" class="headerlink" title="분산 키-값 저장소의 CAP 정리"></a>분산 키-값 저장소의 CAP 정리</h2><p>데이터 일관성(Consistency), 가용성(Availability), 파티션 감내성(Partition Tolerance)라 표현하며,<br>동시에 3가지 요구사항을 만족하는 것은 불가능하다는 정리</p>
<p><img src="https://user-images.githubusercontent.com/55419159/138880667-4a4e727b-07d8-44e0-99b5-14088750a4b2.png" alt="image">{: .image-center}</p>
<hr>
<h3 id="용어-정리"><a href="#용어-정리" class="headerlink" title="용어 정리"></a>용어 정리</h3><p>데이터 일관성(Consistency)</p>
<ul>
<li>분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계 없이 언제나 같은 데이터를 보게 되어야 한다.</li>
</ul>
<p>가용성(Availability)</p>
<ul>
<li>분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.</li>
</ul>
<p>파티션 감내성(Partition Tolerance)</p>
<ul>
<li>파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미한다. 파티션 감내는 네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 한다는 것을 뜻한다.</li>
</ul>
<hr>
<h3 id="분산-키-값-저장소가-가져야하는-기능"><a href="#분산-키-값-저장소가-가져야하는-기능" class="headerlink" title="분산 키-값 저장소가 가져야하는 기능"></a>분산 키-값 저장소가 가져야하는 기능</h3><table>
<thead>
<tr>
<th>목표/문제</th>
<th>기술</th>
</tr>
</thead>
<tbody><tr>
<td>대규모 데이터 저장</td>
<td>안정 해시를 사용해 서버들에 부하 분산</td>
</tr>
<tr>
<td>읽기 연산에 대한 높은 가용성 보장</td>
<td>여러 데이터센터에 다중화</td>
</tr>
<tr>
<td>쓰기 연산에 대한 높은 가용성 보장</td>
<td>버저닝 및 벡터 시계를 사용한 충돌 해소</td>
</tr>
<tr>
<td>데이터 파티션</td>
<td>안정 해시</td>
</tr>
<tr>
<td>점진적 규모 확장성</td>
<td>안정 해시</td>
</tr>
<tr>
<td>다양성(heterogeneity)</td>
<td>안정 해시</td>
</tr>
<tr>
<td>조절 가능한 데이터 일관성</td>
<td>정족수 합의</td>
</tr>
<tr>
<td>일시적 장애 처리</td>
<td>느슨한 정족수 프로토콜과 단서 후 임시 위탁</td>
</tr>
<tr>
<td>영구적 장애 처리</td>
<td>머클 트리</td>
</tr>
<tr>
<td>데이터 센터 장애 대응</td>
<td>여러 데이터 센터에 걸친 데이터 다중화</td>
</tr>
</tbody></table>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.203Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.203Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/">가상면접 사례로 배우는 대규모 시스템 설계기초</a></span><span class="level-item">7 minutes read (About 996 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/2021-10-13-%EC%B2%98%EB%A6%AC%EC%9C%A8-%EC%A0%9C%ED%95%9C-%EC%9E%A5%EC%B9%98%EC%9D%98-%EC%84%A4%EA%B3%84/2021-10-13-%EC%B2%98%EB%A6%AC%EC%9C%A8-%EC%A0%9C%ED%95%9C-%EC%9E%A5%EC%B9%98%EC%9D%98-%EC%84%A4%EA%B3%84/">처리율 제한 장치의 설계</a></h1><div class="content"><h1 id="처리율-제한-장치의-설계"><a href="#처리율-제한-장치의-설계" class="headerlink" title="처리율 제한 장치의 설계"></a>처리율 제한 장치의 설계</h1><blockquote>
<p>API 요청횟수가 특정 임계치를 넘어가면 추가로 도달한 요청은 처리를 중단하는 것</p>
</blockquote>
<hr>
<h2 id="장점"><a href="#장점" class="headerlink" title="장점"></a>장점</h2><ol>
<li>DoS공격 방지</li>
<li>비용절감</li>
<li>서버 과부하 방지</li>
</ol>
<hr>
<h1 id="처리율-제한-알고리즘"><a href="#처리율-제한-알고리즘" class="headerlink" title="처리율 제한 알고리즘"></a>처리율 제한 알고리즘</h1><h2 id="토큰-버킷"><a href="#토큰-버킷" class="headerlink" title="토큰 버킷"></a>토큰 버킷</h2><pre><code>&gt; 토큰을 발급하고 토큰의 갯수 만큼만 API 요청을 버킷에 담음
버킷이 가득 찬 경우 API요청은 버려짐(overflow)
&gt;
</code></pre>
<p><img src="https://user-images.githubusercontent.com/55419159/138881073-2532be82-cc51-4872-a6be-f7e256b1a74e.png" alt="image"></p>
<pre><code>- 가장 간단하고 폭넓게 사용됨(아마존 등)
- 메모리 효율성 높음
- 버킷크기:토큰공급률 비율 튜닝이 관건
</code></pre>
<hr>
<h2 id="누출-버킷"><a href="#누출-버킷" class="headerlink" title="누출 버킷"></a>누출 버킷</h2><pre><code>&gt; 토큰 버킷 알고리즘과 유사하지만 처리율이 고정
큐(FIFO)로 구현
&gt; 
</code></pre>
<p><img src="https://user-images.githubusercontent.com/55419159/138881283-90475661-ca10-481f-a3fb-2e7e3cae0168.png" alt="image"></p>
<ul>
<li>동작방식<ol>
<li>요청이 도착하면 큐가 가득 차 있는지 확인, 빈자리가 있는 경우 큐에 요청 추가</li>
<li>큐가 가득 차있는 경우 새 요청은 버림</li>
<li>지정된 시간마다 큐에서 요청을 꺼내어 처리</li>
</ol>
<ul>
<li>토큰 버킷 알고리즘과 유사</li>
<li>고정된 처리율을 가지고 있어 안정적 출력이 필요한 환경에 적합</li>
<li>단시간에 많은 처리율이 들어올 경우 취약함</li>
</ul>
</li>
</ul>
<hr>
<h2 id="고정-윈도-카운터"><a href="#고정-윈도-카운터" class="headerlink" title="고정 윈도 카운터"></a>고정 윈도 카운터</h2><ul>
<li>동작방식<ol>
<li>타임라인을 고정된 간격의 윈도로 나누고, 각 윈도마다 카운터를 붙임</li>
<li>요청이 접수될 때마다 이 카운터의 값은 1씩 증가함</li>
<li>이 카운터 값이 사전에 설정된 임계치에 도달하면 새로운 요청은<br>새 윈도가 열릴 때 까지 버려짐</li>
</ol>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/55419159/138881425-aaf0ecc3-a73c-4007-9d36-3c9693f2062f.png" alt="image"></p>
<pre><code>- 메모리 효율 좋음
- 윈도 경계에서 일시적으로 많은 트래픽이 몰려드는 경우, 
기대했던 시스템의 처리 한도보다 많은 양의 요청을 처리하게 됨
</code></pre>
<hr>
<h2 id="이동-윈도-로그"><a href="#이동-윈도-로그" class="headerlink" title="이동 윈도 로그"></a>이동 윈도 로그</h2><pre><code>&gt; 고정 윈도 카운터 알고리즘의 윈도 경계 부분에서 
트래픽이 몰리는 경우를 보완하기 위한 알고리즘
&gt; 
</code></pre>
<ul>
<li>동작방식<ol>
<li>요청의 타임스탬프를 추적함<br>타임스탬프는 보통 Redis의 Sorted Set과 같은 정렬 집합 캐시에 보관</li>
<li>새 요청이 오면 만료된 타임스탬프는 제거</li>
<li>새 요청의 타임 스탬프를 로그에 추가</li>
<li>로그의 크기가 허용치보다 같거나 작으면 요청을 시스템에 전달함<br>그렇지 않은 경우 처리는 거부됨</li>
</ol>
<ul>
<li>윈도 알고리즘의 처리율 한도를 넘지 않음</li>
<li>다량의 메모리 사용, 거부된 요청의 타임스탬프도 보관하기 때문</li>
</ul>
</li>
</ul>
<hr>
<h2 id="이동-윈도-카운터"><a href="#이동-윈도-카운터" class="headerlink" title="이동 윈도 카운터"></a>이동 윈도 카운터</h2><pre><code>&gt; 고정 윈도 카운터 + 이동 윈도 로그
&gt; 

- 이전 시간대의 평균 처리율에 따라 현재 윈도의 상태를 계산하므로 
짧은 시간에 몰리는 트래픽에도 잘 대응
- 메모리 효율이 좋음
- 직전 시간의 추정치를 계산하기 때문에 기준이 느슨함, But 심각한 건 아님
</code></pre>
<hr>
<h1 id="프로세스"><a href="#프로세스" class="headerlink" title="프로세스"></a>프로세스</h1><ol>
<li>처리율 제한 규칙은 디스크에 보관한다.<br>작업 프로세스는 수시로 규칙을 디스크에서 읽어 캐시에 저장한다.</li>
<li>클라이언트가 요청을 서버에 보내면 요청은 먼저 처리율 제한 미들웨어에 도달한다.<br>카운터 및 마지막 요청의 타임스탬프를 레디스 캐시에서 가져온다. <ul>
<li>해당 요청이 처리율 제한에 걸리지 않은 경우 API서버로 보낸다.</li>
<li>해당 요청이 처리율 제한에 걸렸다면 429(too many request) 에러를 클라이언트에 보낸다.<br>한편 해당 요청은 그대로 버릴 수도 있고 메시지 큐에 저장할 수도 있다.</li>
</ul>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/">가상면접 사례로 배우는 대규모 시스템 설계기초</a></span><span class="level-item">2 minutes read (About 351 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/2021-10-13-%EA%B0%9C%EB%9E%B5%EC%A0%81%EC%9D%B8-%EA%B7%9C%EB%AA%A8-%EC%B6%94%EC%A0%95/2021-10-13-%EA%B0%9C%EB%9E%B5%EC%A0%81%EC%9D%B8-%EA%B7%9C%EB%AA%A8-%EC%B6%94%EC%A0%95/">개략적인 규모 추정</a></h1><div class="content"><h1 id="2의-제곱-수"><a href="#2의-제곱-수" class="headerlink" title="2의 제곱 수"></a>2의 제곱 수</h1><ul>
<li>최소단위는 1바이트, 8비트</li>
<li>아스키 문자 하나 메모리크기가 1바이트</li>
</ul>
<h1 id="모든-프로그래머가-알아야-하는-응답-지연-값"><a href="#모든-프로그래머가-알아야-하는-응답-지연-값" class="headerlink" title="모든 프로그래머가 알아야 하는 응답 지연 값"></a>모든 프로그래머가 알아야 하는 응답 지연 값</h1><ul>
<li>메모리는 빠르지만 디스크는 아직도 느리다</li>
<li>디스크 탐색은 가능한 한 피하라</li>
<li>단순한 압축 알고리즘은 빠르다</li>
<li>데이터를 인터넷으로 전송하기 전에 가능하면 압축하라</li>
<li>데이터 센터는 보통 여러 지역에 분산되어있고, 센터들 간에 데이터를 주고 받는 데는 시간이 걸린다</li>
</ul>
<h1 id="가용성에-관계된-수치들"><a href="#가용성에-관계된-수치들" class="headerlink" title="가용성에 관계된 수치들"></a>가용성에 관계된 수치들</h1><blockquote>
<p>고가용성</p>
<p>시스템이 오랜 기간동안 지속적으로 중단 없이 운영될 수 있는 능력</p>
</blockquote>
<hr>
<h1 id="예제-트위터-QPS와-저장소-요구량-추정"><a href="#예제-트위터-QPS와-저장소-요구량-추정" class="headerlink" title="예제: 트위터 QPS와 저장소 요구량 추정"></a>예제: 트위터 QPS와 저장소 요구량 추정</h1><h2 id="가정"><a href="#가정" class="headerlink" title="가정"></a>가정</h2><ul>
<li>월간 능동 사용자(mau) 3억 명</li>
<li>50%가 매일 사용</li>
<li>각 사용자는 매일 2건</li>
<li>미디어 포함 10%</li>
<li>데이터는 5년 보관</li>
</ul>
<h2 id="추정"><a href="#추정" class="headerlink" title="추정"></a>추정</h2><ul>
<li>QPS(Query Per Second) 추정치</li>
<li>일간 능동 사용자(dau) = 3억 x 50% = 1.5억</li>
<li>QPS = 1.5억 x 2건 / 24시간 / 3600초 = 약 3500</li>
<li>최대 QPS = 2 x QPS = 약 7000</li>
</ul>
<h2 id="미디어-저장을-위한-저장소-요구량"><a href="#미디어-저장을-위한-저장소-요구량" class="headerlink" title="미디어 저장을 위한 저장소 요구량"></a>미디어 저장을 위한 저장소 요구량</h2><ul>
<li>평균 크기<ul>
<li>id = 64바이트</li>
<li>body = 140바이트</li>
<li>미디어 = 1MB</li>
</ul>
</li>
<li>미디어 저장소 요구량 : 1.5억 x 2 x 10% x 1MB = 30TB/day</li>
<li>5년간 미디어를 보관하기 위한 저장소 요구량 : 30TB x 365 x 5 = 약 55PB</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/">가상면접 사례로 배우는 대규모 시스템 설계기초</a></span><span class="level-item">5 minutes read (About 707 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/2021-10-13-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%88%98%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B7%9C%EB%AA%A8-%ED%99%95%EC%9E%A5%EC%84%B1/2021-10-13-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%88%98%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B7%9C%EB%AA%A8-%ED%99%95%EC%9E%A5%EC%84%B1/">사용자 수에 따른 규모 확장성</a></h1><div class="content"><ul>
<li>요약<ul>
<li>웹 계층은 무상태 계층으로</li>
<li>모든 계층에 다중화 도입</li>
<li>가능한 많은 데이터를 캐시할 것</li>
<li>여러 데이터 센터를 지원할 것</li>
<li>정적 콘텐츠는 CDN을 통해 서비스할 것</li>
<li>데이터 계층은 샤딩을 통에 그 규모를 확장할 것</li>
<li>각 계층은 독립적 서비스로 분할할 것</li>
<li>시스템을 지속적으로 모니터링 하고, 자동화 도구들을 활용할 것</li>
</ul>
</li>
</ul>
<hr>
<h1 id="단일서버"><a href="#단일서버" class="headerlink" title="단일서버"></a>단일서버</h1><h2 id="시스템이-단일-서버로-구현되어있다고-가정할-시-프로세스"><a href="#시스템이-단일-서버로-구현되어있다고-가정할-시-프로세스" class="headerlink" title="시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스"></a>시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스</h2><ol>
<li>사용자가 도메인(api.mysite.com)으로 접속한다.</li>
<li>DNS에 질의하여 IP주소로 반환된다. (DNS는 제3사업자임)</li>
<li>IP주소로 HTTP 요청</li>
<li>HTML or Json으로 응답</li>
</ol>
<hr>
<h1 id="데이터베이스"><a href="#데이터베이스" class="headerlink" title="데이터베이스"></a>데이터베이스</h1><h2 id="RDBMS-vs-NoSQL"><a href="#RDBMS-vs-NoSQL" class="headerlink" title="RDBMS vs NoSQL"></a>RDBMS vs NoSQL</h2><ul>
<li>RDBMS<ul>
<li>오라클, MySQL, PostegreSQL</li>
<li>열, 컬럼으로 표현</li>
<li>Join으로 합침</li>
</ul>
</li>
<li>NoSQL<ul>
<li>MongoDB …</li>
<li>Join 지원 안함</li>
</ul>
</li>
</ul>
<h2 id="NoSQL-쓰는-경우"><a href="#NoSQL-쓰는-경우" class="headerlink" title="NoSQL 쓰는 경우"></a>NoSQL 쓰는 경우</h2><ul>
<li>속도 중요할 시</li>
<li>비정형 데이터일 시</li>
<li>데이터 직렬화, 역직렬화 용</li>
<li>대량의 데이터</li>
</ul>
<hr>
<h1 id="수직적-규모-확장-vs-수평적-규모-확장"><a href="#수직적-규모-확장-vs-수평적-규모-확장" class="headerlink" title="수직적 규모 확장 vs 수평적 규모 확장"></a>수직적 규모 확장 vs 수평적 규모 확장</h1><h2 id="Sacale-Up-vs-Sacale-Out"><a href="#Sacale-Up-vs-Sacale-Out" class="headerlink" title="Sacale-Up vs Sacale-Out"></a>Sacale-Up vs Sacale-Out</h2><p>Scale-Up : 단일 서버 사양을 높임</p>
<p>Scale-Out : 서버 수를 추가</p>
<h2 id="Sacale-Up-아닌-Sacale-Out이-유리한-이유"><a href="#Sacale-Up-아닌-Sacale-Out이-유리한-이유" class="headerlink" title="Sacale-Up 아닌 Sacale-Out이 유리한 이유"></a>Sacale-Up 아닌 Sacale-Out이 유리한 이유</h2><ul>
<li>한 대의 서버 메모리를 무한대로 증설할 방법이 없음</li>
<li>장애에 대한 자동복구 방안이나 다중화 제시 X</li>
</ul>
<h2 id="로드밸런서-LB"><a href="#로드밸런서-LB" class="headerlink" title="로드밸런서(LB)"></a>로드밸런서(LB)</h2><ul>
<li>트래픽 분산의 역할</li>
</ul>
<h2 id="DB-다중화"><a href="#DB-다중화" class="headerlink" title="DB 다중화"></a>DB 다중화</h2><ul>
<li>이중화 시 master-slave로 나눔</li>
<li>master는 write, slave는 read</li>
<li>보통 read연산 비중이 훨씬 높고 slave DB가 더 많음 → 성능</li>
</ul>
<hr>
<h1 id="캐시"><a href="#캐시" class="headerlink" title="캐시"></a>캐시</h1><ul>
<li>값비싼 연산 결과나 자주 참조되는 데이터를 저장하는 메모리</li>
</ul>
<h2 id="캐시-사용-시-고려해야-할-것"><a href="#캐시-사용-시-고려해야-할-것" class="headerlink" title="캐시 사용 시 고려해야 할 것"></a>캐시 사용 시 고려해야 할 것</h2><ul>
<li>영속적인 데이터 X</li>
<li>만료(expire) 방식<ul>
<li>LRU → 가장 자주 씀</li>
<li>LFU</li>
<li>FIFO</li>
</ul>
</li>
<li>데이터 일관성 유지 방식</li>
</ul>
<hr>
<h1 id="콘텐츠-전송-네크워크-CDN"><a href="#콘텐츠-전송-네크워크-CDN" class="headerlink" title="콘텐츠 전송 네크워크(CDN)"></a>콘텐츠 전송 네크워크(CDN)</h1><ul>
<li>정적 콘텐츠 캐싱</li>
<li>CSS, JS, 이미지, 비디오</li>
</ul>
<hr>
<h1 id="무상태-stateless-웹-계층"><a href="#무상태-stateless-웹-계층" class="headerlink" title="무상태(stateless) 웹 계층"></a>무상태(stateless) 웹 계층</h1><ul>
<li>Scale-Out 시 중요</li>
<li>상태정보를 웹 계층에서 제거</li>
</ul>
<h2 id="상태-정보를-웹-말고-DB에-저장"><a href="#상태-정보를-웹-말고-DB에-저장" class="headerlink" title="상태 정보를 웹 말고 DB에 저장"></a>상태 정보를 웹 말고 DB에 저장</h2><ul>
<li>MSA시 <strong>공유저장소</strong>를 활용</li>
<li>Redis, NoSQL 활용</li>
</ul>
<hr>
<h1 id="데이터센터"><a href="#데이터센터" class="headerlink" title="데이터센터"></a>데이터센터</h1><ul>
<li>통상적으로 지리적으로 가장 가까운 곳으로 라우팅(Geo-routing)</li>
</ul>
<h2 id="구축-시-신경써야-할-것"><a href="#구축-시-신경써야-할-것" class="headerlink" title="구축 시 신경써야 할 것"></a>구축 시 신경써야 할 것</h2><ul>
<li>트래픽 우회</li>
<li>데이터 동기화</li>
<li>테스트와 배포</li>
</ul>
<p>→ Message Queue는 시스템이 독립적으로 확장할 수 있는 핵심전략</p>
<hr>
<h1 id="메시지-큐"><a href="#메시지-큐" class="headerlink" title="메시지 큐"></a>메시지 큐</h1><ul>
<li>무손실, 비동기</li>
<li>pub-sub 방식</li>
</ul>
<hr>
<h1 id="데이터베이스의-규모-확장"><a href="#데이터베이스의-규모-확장" class="headerlink" title="데이터베이스의 규모 확장"></a>데이터베이스의 규모 확장</h1><h2 id="샤딩-sharding"><a href="#샤딩-sharding" class="headerlink" title="샤딩(sharding)"></a>샤딩(sharding)</h2><ul>
<li>DB를 scale-out 하는 것</li>
<li><strong>모든 샤드는 같은 스키마를 쓰지만 데이터 중복은 없음</strong></li>
<li>샤딩 키를 정하는 것이 중요</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/">가상면접 사례로 배우는 대규모 시스템 설계기초</a></span><span class="level-item">2 minutes read (About 344 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/2021-10-13-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84-%EB%A9%B4%EC%A0%91-%EA%B3%B5%EB%9E%B5%EB%B2%95/2021-10-13-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84-%EB%A9%B4%EC%A0%91-%EA%B3%B5%EB%9E%B5%EB%B2%95/">시스템 설계 면접 공략법</a></h1><div class="content"><h1 id="효과적-면접을-위한-4단계-접근법"><a href="#효과적-면접을-위한-4단계-접근법" class="headerlink" title="효과적 면접을 위한 4단계 접근법"></a>효과적 면접을 위한 4단계 접근법</h1><h2 id="1-문제-이해-및-설계-범위-확정"><a href="#1-문제-이해-및-설계-범위-확정" class="headerlink" title="1. 문제 이해 및 설계 범위 확정"></a>1. 문제 이해 및 설계 범위 확정</h2><ul>
<li>구체적으로 어떤 기능들을 만들어야 하나</li>
<li>제품 사용자 수는 얼마나 되나</li>
<li>회사의 규모는 얼마나 빨리 커지리라 예상하나? 석 달, 여섯 달, 일년 뒤의 규모는 얼마가 되리라 예상하는가</li>
<li>회사가 주로 사용하는 기술 스택은 무엇인가</li>
<li>설계를 단순화 하기 위한 기존 서비스로는 어떤 것이 있는가</li>
</ul>
<p>→ 중요한 것은 모호함을 없에는 것</p>
<hr>
<h2 id="2-개략적인-설계안-제시-및-동의-구하기"><a href="#2-개략적인-설계안-제시-및-동의-구하기" class="headerlink" title="2. 개략적인 설계안 제시 및 동의 구하기"></a>2. 개략적인 설계안 제시 및 동의 구하기</h2><ul>
<li>청사진을 만들고 의견을 구하라ㅋ</li>
<li>화이트보드에 다이어그램 그리기<ul>
<li>클라이언트, API, 웹서버, DB, 캐시, CDN, MQ 등</li>
</ul>
</li>
<li>청사진이 제약사항에 부합하는지 확인하라</li>
</ul>
<hr>
<h2 id="3-상세-설계"><a href="#3-상세-설계" class="headerlink" title="3. 상세 설계"></a>3. 상세 설계</h2><ul>
<li>시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인</li>
<li>전체 설계의 개략적 청사진 마련</li>
<li>해당 청사진에 대한 면접관의 의견 청취</li>
<li>상세 설계에서 집중해야 할 영역들 확인</li>
</ul>
<hr>
<h2 id="4-마무리"><a href="#4-마무리" class="headerlink" title="4. 마무리"></a>4. 마무리</h2><ul>
<li>개선점 찾기 ex&gt; 병목구간</li>
<li>설계 핵심 요약</li>
<li>운영 관련 이슈<ul>
<li>메트릭, 모니터링, 로그, 배포 등</li>
</ul>
</li>
<li>시스템 확장 방식</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-01T00:25:46.202Z" title="11/1/2021, 9:25:46 AM">2021-11-01</time></span><span class="level-item"><a class="link-muted" href="/categories/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/">가상면접 사례로 배우는 대규모 시스템 설계기초</a></span><span class="level-item">3 minutes read (About 385 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/01/%EA%B0%80%EC%83%81%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84%EA%B8%B0%EC%B4%88/2021-10-13-%EC%95%88%EC%A0%95-%ED%95%B4%EC%8B%9C-%EC%84%A4%EA%B3%84/2021-10-13-%EC%95%88%EC%A0%95-%ED%95%B4%EC%8B%9C-%EC%84%A4%EA%B3%84/">안정 해시 설계</a></h1><div class="content"><blockquote>
<p>수평적 규모 확장을 위해서는 요청 또는 데이터를 서버로 균등하게 나누는 것이 중요<br>안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술</p>
</blockquote>
<hr>
<h2 id="안정-해시-설계의-이점"><a href="#안정-해시-설계의-이점" class="headerlink" title="안정 해시 설계의  이점"></a>안정 해시 설계의  이점</h2><ul>
<li>서버가 추가되거나 삭제될 때 재배치되는 키의 수가 최소화된다.</li>
<li>데이터가 보다 균등하게 분포하게 되므로 수평적 규모 확장성을 달성하기 쉽다.</li>
<li>핫스팟(hotspot) 키 문제를 줄인다.</li>
</ul>
<hr>
<h3 id="만약-잘-분배가-되어있던-서버-하나가-죽었을-경우"><a href="#만약-잘-분배가-되어있던-서버-하나가-죽었을-경우" class="headerlink" title="만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?"></a>만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?</h3><h3 id="기존-해시-테이블"><a href="#기존-해시-테이블" class="headerlink" title="기존 해시 테이블"></a>기존 해시 테이블</h3><ul>
<li>모든 키를 재배치함</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/55419159/138881514-e09e12fd-2764-40ee-9eef-2cf3a4a84f3f.png"></p>
<h3 id="안정-해시"><a href="#안정-해시" class="headerlink" title="안정 해시"></a>안정 해시</h3><ul>
<li>이상이 있는 부분만 재배치</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/55419159/138881565-e60403c1-c98e-48ab-bb80-8a8c5f10320b.png"></p>
<hr>
<h2 id="기본-구현법"><a href="#기본-구현법" class="headerlink" title="기본 구현법"></a>기본 구현법</h2><ol>
<li>서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치한다.</li>
<li>키의 위치에서 링을 시계 방향을 탐색하다 만나는 최초의 서버가 키가 저장될 서버다.</li>
</ol>
<p><strong>문제점</strong></p>
<ul>
<li>서버가 추가되거나 삭제될 때 파티션의 크기를 균등하게 유지하는게 불가능</li>
<li>키의 균등 분포를 달성하기가 어려움</li>
</ul>
<hr>
<h2 id="가상-노드"><a href="#가상-노드" class="headerlink" title="가상 노드"></a>가상 노드</h2><blockquote>
<p>기본 구현법의 문제를 해결하기 위한 방법<br>실제 노드를 가르키는 가상 노드를 만들어 해시 링에 균등하게 배치하는 방법</p>
</blockquote>
</div></article></div></div><!--!--><div class="column column-right  order-3 is-sticky"><!--!--></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">기억보단 기록으로</a><p class="is-size-7"><span>&copy; 2021 Song Jae-won, Jay</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/won0935"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>