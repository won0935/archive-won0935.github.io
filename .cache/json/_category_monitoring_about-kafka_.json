{"data":{"site":{"siteMetadata":{"title":"Jay 기술 블로그","author":"won0935","siteUrl":"https://won0935.github.io"}},"markdownRemark":{"id":"faef4b93-5a1f-5546-8e5d-9a48fafcf278","excerpt":"⛳ 들어가기 전에.. 회사에서  스택으로 로깅 시스템을 구축해야 한다.\n따라서 각 기술에 대해 공부해보았다. 📩 Kafka 란 아파치에서 제공하는 pub-sub 기반의 분산형 메시지 큐이다.\ndispatch가 아닌, subscribe…","html":"<h2 id=\"-들어가기-전에\" style=\"position:relative;\"><a href=\"#-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84%EC%97%90\" aria-label=\" 들어가기 전에 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⛳ 들어가기 전에..</h2>\n<p>회사에서 <code class=\"language-text\">EFK(ElasticSearch-Fluentd-Kafka)</code> 스택으로 <strong>로깅 시스템</strong>을 구축해야 한다.\n따라서 각 기술에 대해 공부해보았다.</p>\n<h2 id=\"-kafka-란\" style=\"position:relative;\"><a href=\"#-kafka-%EB%9E%80\" aria-label=\" kafka 란 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📩 Kafka 란</h2>\n<p>아파치에서 제공하는 <strong>pub-sub</strong> 기반의 <strong>분산형 메시지 큐</strong>이다.\ndispatch가 아닌, <strong>subscribe 방식</strong>으로 기존 <code class=\"language-text\">RabbitMQ</code>에 비해 성능이 좋다.\n(단, RabbitMQ에서 제공하는 전체 트랜잭션은 제공되지 않음)</p>\n<h2 id=\"-kafka-기본용어\" style=\"position:relative;\"><a href=\"#-kafka-%EA%B8%B0%EB%B3%B8%EC%9A%A9%EC%96%B4\" aria-label=\" kafka 기본용어 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🧱 Kafka 기본용어</h2>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/143737608-fd87cbb9-3ae8-4dc0-81be-ed64de1cf889.png\" alt=\"image\"></p>\n<h3 id=\"1-broker-브로커\" style=\"position:relative;\"><a href=\"#1-broker-%EB%B8%8C%EB%A1%9C%EC%BB%A4\" aria-label=\"1 broker 브로커 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <code class=\"language-text\">broker</code> (브로커)</h3>\n<p><code class=\"language-text\">브로커</code>는 실제로 <strong>메시지를 저장</strong>하는 카프카의 각 노드이다.</p>\n<h4 id=\"역할--특징\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95\" aria-label=\"역할  특징 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 &#x26; 특징</h4>\n<ul>\n<li><code class=\"language-text\">pub</code>으로 인해 들어온 <strong>데이터 저장</strong> (disk 기반)</li>\n<li><code class=\"language-text\">leader</code>, <code class=\"language-text\">follower</code> 개념 존재</li>\n</ul>\n<h3 id=\"2-zookeeper-주키퍼\" style=\"position:relative;\"><a href=\"#2-zookeeper-%EC%A3%BC%ED%82%A4%ED%8D%BC\" aria-label=\"2 zookeeper 주키퍼 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. <code class=\"language-text\">zookeeper</code> (주키퍼)</h3>\n<p>주키퍼는 아파치에서 제공하는 코디네이션 분산 플랫폼이다.</p>\n<h4 id=\"역할--특징-1\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-1\" aria-label=\"역할  특징 1 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 &#x26; 특징</h4>\n<ul>\n<li>broker health check</li>\n<li><code class=\"language-text\">leader</code> 선출</li>\n<li><code class=\"language-text\">znode</code>(파일 시스템의 폴더 구조)라는 곳에 <code class=\"language-text\">broker</code>의 meta 정보 관리</li>\n</ul>\n<p>zookeeper 클러스터는 <strong>앙상블</strong>이라 부르며, 앙상블은 데이터 write시 과반수가 넘으면 성공으로 간주하게 된다.\n즉, 앙상블은 <strong>2N+1인 홀수</strong>로 구성이 필요하다.</p>\n<h3 id=\"3-topic-토픽\" style=\"position:relative;\"><a href=\"#3-topic-%ED%86%A0%ED%94%BD\" aria-label=\"3 topic 토픽 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. <code class=\"language-text\">topic</code> (토픽)</h3>\n<p>토픽은 <strong>큐들의 집합</strong>이다.</p>\n<p>큐들의 집합이라는 용어를 사용한 이유는 토픽은 <strong>한개 이상의 파티션</strong>이 있어야 하고, <strong>파티션이 한개의 큐</strong>이기 때문이다.</p>\n<h4 id=\"역할--특징-2\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-2\" aria-label=\"역할  특징 2 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 &#x26; 특징</h4>\n<ul>\n<li>클러스터 내 토픽명 고유</li>\n<li>큐 집합을 논리적 단위로 구분</li>\n<li>메시지 저장기간, 메시지 복제수 등의 설정을 토픽단위 제공 (<a href=\"https://kafka.apache.org/23/documentation.html#topicconfigs\">Kafka 공식문서- Topic</a>)</li>\n</ul>\n<h3 id=\"4-partition-파티션\" style=\"position:relative;\"><a href=\"#4-partition-%ED%8C%8C%ED%8B%B0%EC%85%98\" aria-label=\"4 partition 파티션 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. <code class=\"language-text\">partition</code> (파티션)</h3>\n<p>파티션은 토픽을 이루는 큐이다.</p>\n<p>각 파티션에는 <code class=\"language-text\">leader</code>, <code class=\"language-text\">follower</code>, <code class=\"language-text\">isr</code> 존재합니다.</p>\n<p>각 용어의 의미는 아래와 같다.</p>\n<ul>\n<li><code class=\"language-text\">leader</code>는 메시지를 <code class=\"language-text\">write</code>, <code class=\"language-text\">read</code>하는 역할을 수행하며, 토픽의 replication 갯수만큼 <code class=\"language-text\">follower</code>에게 복제를 명령한다.</li>\n<li><code class=\"language-text\">follower</code>는 <code class=\"language-text\">leader</code>의 요청을 받아 메시지를 복제하는 역할.</li>\n<li><code class=\"language-text\">isr</code>는 replication group을 의미하며, leader &#x26; follwer 선출 시 이 isr 내에서 선출하게 된다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/143746108-38d945e4-9723-446a-a07c-6a42ea37feba.png\" alt=\"image\"></p>\n<p>위 사진을 보면 0번 파티션의 정보로는,\n<code class=\"language-text\">leader</code>는 2번 <code class=\"language-text\">broker</code>, <code class=\"language-text\">isr(in sync replicas)</code>는 현재 2번, 3번으로 되어 있는것을 볼 수 있다.</p>\n<h3 id=\"5-producer-프로듀서\" style=\"position:relative;\"><a href=\"#5-producer-%ED%94%84%EB%A1%9C%EB%93%80%EC%84%9C\" aria-label=\"5 producer 프로듀서 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. <code class=\"language-text\">producer</code> (프로듀서)</h3>\n<p>프로듀서는 카프카에서 <strong>메시지를 발행(pub)하는 주체</strong>를 의미한다.</p>\n<h4 id=\"역할--특징-3\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-3\" aria-label=\"역할  특징 3 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 &#x26; 특징</h4>\n<ul>\n<li>메시지 발행 시 직렬화를 제공한다.(string, json, avro 등)</li>\n<li>partition에 특정 데이터만을 발행하기 위해 메시지의 key를 지정할 수 있다.</li>\n<li>메시지 발행 후 broker로 부터 ack를 받을 수 있다. (<a href=\"https://kafka.apache.org/23/documentation.html#producerapi\">Kafka 공식문서- Producer</a>)</li>\n</ul>\n<h3 id=\"6-consumer-컨슈머\" style=\"position:relative;\"><a href=\"#6-consumer-%EC%BB%A8%EC%8A%88%EB%A8%B8\" aria-label=\"6 consumer 컨슈머 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. <code class=\"language-text\">consumer</code> (컨슈머)</h3>\n<p>컨슈머는 메시지를 <strong>subscribe하는 주체</strong>이다.</p>\n<h4 id=\"역할--특징-4\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-4\" aria-label=\"역할  특징 4 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 &#x26; 특징</h4>\n<ul>\n<li><code class=\"language-text\">commit</code>이라는 행위로 어느 offset까지 subscribe했는지 주키퍼에게 알림.</li>\n<li>컨슈머는 살아있다면 zookeeper에게 heart beat를 전송.</li>\n<li><code class=\"language-text\">poll</code>이라는 행위로 메시지를 subscribe하며, 이때 시간과 최대 개수 등을 설정 가능 (<a href=\"https://kafka.apache.org/23/documentation.html#consumerconfigs\">Kafka 공식문서- Consumer</a>) </li>\n</ul>\n<p>여기서 offset은 각 파티션에 메시지가 유입된 순서를 의미한다.</p>\n<h3 id=\"7-consumer-group-컨슈머-그룹\" style=\"position:relative;\"><a href=\"#7-consumer-group-%EC%BB%A8%EC%8A%88%EB%A8%B8-%EA%B7%B8%EB%A3%B9\" aria-label=\"7 consumer group 컨슈머 그룹 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. <code class=\"language-text\">consumer group</code> (컨슈머 그룹)</h3>\n<p>컨슈머 그룹은 <strong>컨슈머들의 논리적인 그룹</strong>을 의미한다.</p>\n<h4 id=\"역할--특징-5\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-5\" aria-label=\"역할  특징 5 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 &#x26; 특징</h4>\n<ul>\n<li>토픽별 컨슈머 그룹 단위로 <strong>offset</strong>과 <strong>lag</strong>를 관리.</li>\n<li>컨슈머는 컨슈머그룹을 필수로 가져야 함.</li>\n<li>토픽의 파티션 갯수만큼 컨슈머들이 동일 컨슈머 그룹에 존재하는것이 Best!!</li>\n<li>한 파티션은 하나의 컨슈머만 점유 가능하기 때문.</li>\n<li>파티션을 점유중인 컨슈머가 down 되었을 시 컨슈머 그룹내 리밸런싱 동작.</li>\n<li>down된 컨슈머가 점유한 파티션을 다른 컨슈머에게 위임하는 작업.</li>\n</ul>\n<p>여기서, lag는 한 토픽의 (총 메시지 갯수 - 컨슈머 그룹이 subscribe한 메시지 갯수) 이다.\n간단히, 한 토픽에서 한 컨슈머 그룹이 소비해야하는 총 메시지 개수이다.</p>","tableOfContents":"<ul>\n<li><a href=\"/category/monitoring/about-kafka/#-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84%EC%97%90\">⛳ 들어가기 전에..</a></li>\n<li><a href=\"/category/monitoring/about-kafka/#-kafka-%EB%9E%80\">📩 Kafka 란</a></li>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#-kafka-%EA%B8%B0%EB%B3%B8%EC%9A%A9%EC%96%B4\">🧱 Kafka 기본용어</a></p>\n<ul>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#1-broker-%EB%B8%8C%EB%A1%9C%EC%BB%A4\">1. <code class=\"language-text\">broker</code> (브로커)</a></p>\n<ul>\n<li><a href=\"/category/monitoring/about-kafka/#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95\">역할 &#x26; 특징</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#2-zookeeper-%EC%A3%BC%ED%82%A4%ED%8D%BC\">2. <code class=\"language-text\">zookeeper</code> (주키퍼)</a></p>\n<ul>\n<li><a href=\"/category/monitoring/about-kafka/#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-1\">역할 &#x26; 특징</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#3-topic-%ED%86%A0%ED%94%BD\">3. <code class=\"language-text\">topic</code> (토픽)</a></p>\n<ul>\n<li><a href=\"/category/monitoring/about-kafka/#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-2\">역할 &#x26; 특징</a></li>\n</ul>\n</li>\n<li><a href=\"/category/monitoring/about-kafka/#4-partition-%ED%8C%8C%ED%8B%B0%EC%85%98\">4. <code class=\"language-text\">partition</code> (파티션)</a></li>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#5-producer-%ED%94%84%EB%A1%9C%EB%93%80%EC%84%9C\">5. <code class=\"language-text\">producer</code> (프로듀서)</a></p>\n<ul>\n<li><a href=\"/category/monitoring/about-kafka/#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-3\">역할 &#x26; 특징</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#6-consumer-%EC%BB%A8%EC%8A%88%EB%A8%B8\">6. <code class=\"language-text\">consumer</code> (컨슈머)</a></p>\n<ul>\n<li><a href=\"/category/monitoring/about-kafka/#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-4\">역할 &#x26; 특징</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/category/monitoring/about-kafka/#7-consumer-group-%EC%BB%A8%EC%8A%88%EB%A8%B8-%EA%B7%B8%EB%A3%B9\">7. <code class=\"language-text\">consumer group</code> (컨슈머 그룹)</a></p>\n<ul>\n<li><a href=\"/category/monitoring/about-kafka/#%EC%97%AD%ED%95%A0--%ED%8A%B9%EC%A7%95-5\">역할 &#x26; 특징</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"[모니터링] Kafka 란","description":"","date":"2021.11.28","emoji":"📨","category":"monitoring"}}},"pageContext":{"slug":"/category/monitoring/about-kafka/","relatedPosts":[{"node":{"fields":{"slug":"/category/monitoring/oauth2-openid/"},"frontmatter":{"title":"[모니터링] Oauth 2.0 & OpenID Connect 알아보기","date":"2022.01.29","emoji":"🔒","category":"monitoring"}}},{"node":{"fields":{"slug":"/category/monitoring/jenkins-plugins/"},"frontmatter":{"title":"[모니터링] 폐쇠망에서 Jenkins 업그레이드 & 플러그인 설치하기","date":"2022.01.25","emoji":"🕴","category":"monitoring"}}},{"node":{"fields":{"slug":"/category/monitoring/nginx-prometheus/"},"frontmatter":{"title":"[모니터링] Nginx 를 Prometheus 로 모니터링 하기","date":"2021.12.20","emoji":"🚂","category":"monitoring"}}},{"node":{"fields":{"slug":"/category/monitoring/fluentd-prometheus/"},"frontmatter":{"title":"[모니터링] Fluentd 를 Prometheus 로 모니터링 하기","date":"2021.12.17","emoji":"🔡","category":"monitoring"}}}]}}