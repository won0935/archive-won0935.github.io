{"expireTime":9007200939154746000,"key":"transformer-remark-markdown-html-ast-dd44a34fdcf0573d6376cc0670b7ca38-gatsby-remark-code-titlesgatsby-remark-embed-youtubegatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-custom-blocksgatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"처리율-제한-장치의-설계","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%B2%98%EB%A6%AC%EC%9C%A8-%EC%A0%9C%ED%95%9C-%EC%9E%A5%EC%B9%98%EC%9D%98-%EC%84%A4%EA%B3%84","aria-label":"처리율 제한 장치의 설계 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"처리율 제한 장치의 설계","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":16,"offset":16}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":16,"offset":16}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"API 요청횟수가 특정 임계치를 넘어가면 추가로 도달한 요청은 처리를 중단하는 것","position":{"start":{"line":4,"column":3,"offset":20},"end":{"line":4,"column":48,"offset":65}}}],"position":{"start":{"line":4,"column":3,"offset":20},"end":{"line":4,"column":48,"offset":65}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":18},"end":{"line":5,"column":2,"offset":67}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":7,"column":1,"offset":69},"end":{"line":7,"column":4,"offset":72}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"장점","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%9E%A5%EC%A0%90","aria-label":"장점 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"장점","position":{"start":{"line":9,"column":4,"offset":77},"end":{"line":9,"column":6,"offset":79}}}],"position":{"start":{"line":9,"column":1,"offset":74},"end":{"line":9,"column":6,"offset":79}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DoS공격 방지","position":{"start":{"line":11,"column":4,"offset":84},"end":{"line":11,"column":12,"offset":92}}}],"position":{"start":{"line":11,"column":1,"offset":81},"end":{"line":11,"column":12,"offset":92}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"비용절감","position":{"start":{"line":12,"column":4,"offset":96},"end":{"line":12,"column":8,"offset":100}}}],"position":{"start":{"line":12,"column":1,"offset":93},"end":{"line":12,"column":8,"offset":100}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서버 과부하 방지","position":{"start":{"line":13,"column":4,"offset":104},"end":{"line":13,"column":13,"offset":113}}}],"position":{"start":{"line":13,"column":1,"offset":101},"end":{"line":13,"column":13,"offset":113}}},{"type":"text","value":"\n"}],"position":{"start":{"line":11,"column":1,"offset":81},"end":{"line":13,"column":13,"offset":113}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":15,"column":1,"offset":115},"end":{"line":15,"column":4,"offset":118}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"처리율-제한-알고리즘","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%B2%98%EB%A6%AC%EC%9C%A8-%EC%A0%9C%ED%95%9C-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98","aria-label":"처리율 제한 알고리즘 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"처리율 제한 알고리즘","position":{"start":{"line":17,"column":3,"offset":122},"end":{"line":17,"column":14,"offset":133}}}],"position":{"start":{"line":17,"column":1,"offset":120},"end":{"line":17,"column":14,"offset":133}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"토큰-버킷","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%ED%86%A0%ED%81%B0-%EB%B2%84%ED%82%B7","aria-label":"토큰 버킷 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"토큰 버킷","position":{"start":{"line":19,"column":4,"offset":138},"end":{"line":19,"column":9,"offset":143}}}],"position":{"start":{"line":19,"column":1,"offset":135},"end":{"line":19,"column":9,"offset":143}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"토큰을 발급하고 토큰의 갯수 만큼만 API 요청을 버킷에 담음\n버킷이 가득 찬 경우 API요청은 버려짐(overflow)","position":{"start":{"line":21,"column":3,"offset":151},"end":{"line":22,"column":35,"offset":220}}}],"position":{"start":{"line":21,"column":3,"offset":151},"end":{"line":22,"column":35,"offset":220}}},{"type":"text","value":"\n"}],"position":{"start":{"line":21,"column":1,"offset":149},"end":{"line":22,"column":35,"offset":220}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/55419159/138881073-2532be82-cc51-4872-a6be-f7e256b1a74e.png","alt":"image"},"children":[],"position":{"start":{"line":24,"column":1,"offset":222},"end":{"line":24,"column":112,"offset":333}}}],"position":{"start":{"line":24,"column":1,"offset":222},"end":{"line":24,"column":112,"offset":333}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"가장 간단하고 폭넓게 사용됨(아마존 등)","position":{"start":{"line":26,"column":3,"offset":337},"end":{"line":26,"column":25,"offset":359}}}],"position":{"start":{"line":26,"column":1,"offset":335},"end":{"line":26,"column":25,"offset":359}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"메모리 효율성 높음","position":{"start":{"line":27,"column":3,"offset":362},"end":{"line":27,"column":13,"offset":372}}}],"position":{"start":{"line":27,"column":1,"offset":360},"end":{"line":27,"column":13,"offset":372}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"버킷크기:토큰공급률 비율 튜닝이 관건","position":{"start":{"line":28,"column":3,"offset":375},"end":{"line":28,"column":23,"offset":395}}}],"position":{"start":{"line":28,"column":1,"offset":373},"end":{"line":28,"column":23,"offset":395}}},{"type":"text","value":"\n"}],"position":{"start":{"line":26,"column":1,"offset":335},"end":{"line":28,"column":23,"offset":395}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":30,"column":1,"offset":397},"end":{"line":30,"column":6,"offset":402}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"누출-버킷","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%88%84%EC%B6%9C-%EB%B2%84%ED%82%B7","aria-label":"누출 버킷 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"누출 버킷","position":{"start":{"line":32,"column":4,"offset":407},"end":{"line":32,"column":9,"offset":412}}}],"position":{"start":{"line":32,"column":1,"offset":404},"end":{"line":32,"column":9,"offset":412}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"토큰 버킷 알고리즘과 유사하지만 처리율이 고정\n큐(FIFO)로 구현","position":{"start":{"line":34,"column":3,"offset":420},"end":{"line":35,"column":14,"offset":459}}}],"position":{"start":{"line":34,"column":3,"offset":420},"end":{"line":35,"column":14,"offset":459}}},{"type":"text","value":"\n"}],"position":{"start":{"line":34,"column":1,"offset":418},"end":{"line":35,"column":14,"offset":459}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/55419159/138881283-90475661-ca10-481f-a3fb-2e7e3cae0168.png","alt":"image"},"children":[],"position":{"start":{"line":37,"column":1,"offset":461},"end":{"line":37,"column":112,"offset":572}}}],"position":{"start":{"line":37,"column":1,"offset":461},"end":{"line":37,"column":112,"offset":572}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"동작방식","position":{"start":{"line":40,"column":3,"offset":577},"end":{"line":40,"column":7,"offset":581}}}],"position":{"start":{"line":40,"column":3,"offset":577},"end":{"line":40,"column":7,"offset":581}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"요청이 도착하면 큐가 가득 차 있는지 확인, 빈자리가 있는 경우 큐에 요청 추가","position":{"start":{"line":42,"column":8,"offset":594},"end":{"line":42,"column":52,"offset":638}}}],"position":{"start":{"line":42,"column":5,"offset":591},"end":{"line":42,"column":52,"offset":638}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"큐가 가득 차있는 경우 새 요청은 버림","position":{"start":{"line":43,"column":8,"offset":646},"end":{"line":43,"column":29,"offset":667}}}],"position":{"start":{"line":43,"column":5,"offset":643},"end":{"line":43,"column":29,"offset":667}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"지정된 시간마다 큐에서 요청을 꺼내어 처리","position":{"start":{"line":44,"column":8,"offset":675},"end":{"line":44,"column":31,"offset":698}}}],"position":{"start":{"line":44,"column":5,"offset":672},"end":{"line":45,"column":5,"offset":703}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"토큰 버킷 알고리즘과 유사","position":{"start":{"line":46,"column":7,"offset":710},"end":{"line":46,"column":21,"offset":724}}}],"position":{"start":{"line":46,"column":5,"offset":708},"end":{"line":46,"column":21,"offset":724}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"고정된 처리율을 가지고 있어 안정적 출력이 필요한 환경에 적합","position":{"start":{"line":47,"column":7,"offset":731},"end":{"line":47,"column":41,"offset":765}}}],"position":{"start":{"line":47,"column":5,"offset":729},"end":{"line":47,"column":41,"offset":765}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"단시간에 많은 처리율이 들어올 경우 취약함","position":{"start":{"line":48,"column":7,"offset":772},"end":{"line":48,"column":30,"offset":795}}}],"position":{"start":{"line":48,"column":5,"offset":770},"end":{"line":48,"column":30,"offset":795}}},{"type":"text","value":"\n"}],"position":{"start":{"line":42,"column":5,"offset":591},"end":{"line":48,"column":30,"offset":795}}},{"type":"text","value":"\n"}],"position":{"start":{"line":40,"column":1,"offset":575},"end":{"line":48,"column":30,"offset":795}}},{"type":"text","value":"\n"}],"position":{"start":{"line":40,"column":1,"offset":575},"end":{"line":48,"column":30,"offset":795}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":50,"column":1,"offset":797},"end":{"line":50,"column":4,"offset":800}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"고정-윈도-카운터","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EA%B3%A0%EC%A0%95-%EC%9C%88%EB%8F%84-%EC%B9%B4%EC%9A%B4%ED%84%B0","aria-label":"고정 윈도 카운터 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"고정 윈도 카운터","position":{"start":{"line":52,"column":4,"offset":805},"end":{"line":52,"column":13,"offset":814}}}],"position":{"start":{"line":52,"column":1,"offset":802},"end":{"line":52,"column":13,"offset":814}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"동작방식","position":{"start":{"line":54,"column":3,"offset":818},"end":{"line":54,"column":7,"offset":822}}}],"position":{"start":{"line":54,"column":3,"offset":818},"end":{"line":54,"column":7,"offset":822}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"타임라인을 고정된 간격의 윈도로 나누고, 각 윈도마다 카운터를 붙임","position":{"start":{"line":56,"column":8,"offset":835},"end":{"line":56,"column":45,"offset":872}}}],"position":{"start":{"line":56,"column":5,"offset":832},"end":{"line":56,"column":45,"offset":872}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"요청이 접수될 때마다 이 카운터의 값은 1씩 증가함","position":{"start":{"line":57,"column":8,"offset":880},"end":{"line":57,"column":36,"offset":908}}}],"position":{"start":{"line":57,"column":5,"offset":877},"end":{"line":57,"column":36,"offset":908}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이 카운터 값이 사전에 설정된 임계치에 도달하면 새로운 요청은\n새 윈도가 열릴 때 까지 버려짐","position":{"start":{"line":58,"column":8,"offset":916},"end":{"line":59,"column":22,"offset":973}}}],"position":{"start":{"line":58,"column":5,"offset":913},"end":{"line":59,"column":22,"offset":973}}},{"type":"text","value":"\n"}],"position":{"start":{"line":56,"column":5,"offset":832},"end":{"line":59,"column":22,"offset":973}}},{"type":"text","value":"\n"}],"position":{"start":{"line":54,"column":1,"offset":816},"end":{"line":60,"column":5,"offset":978}}},{"type":"text","value":"\n"}],"position":{"start":{"line":54,"column":1,"offset":816},"end":{"line":60,"column":5,"offset":978}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/55419159/138881425-aaf0ecc3-a73c-4007-9d36-3c9693f2062f.png","alt":"image"},"children":[],"position":{"start":{"line":61,"column":1,"offset":979},"end":{"line":61,"column":112,"offset":1090}}}],"position":{"start":{"line":61,"column":1,"offset":979},"end":{"line":61,"column":112,"offset":1090}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"메모리 효율 좋음","position":{"start":{"line":63,"column":3,"offset":1095},"end":{"line":63,"column":12,"offset":1104}}}],"position":{"start":{"line":63,"column":1,"offset":1093},"end":{"line":63,"column":12,"offset":1104}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"윈도 경계에서 일시적으로 많은 트래픽이 몰려드는 경우, 기대했던 시스템의 처리 한도보다 많은 양의 요청을 처리하게 됨","position":{"start":{"line":64,"column":3,"offset":1107},"end":{"line":64,"column":68,"offset":1172}}}],"position":{"start":{"line":64,"column":1,"offset":1105},"end":{"line":64,"column":68,"offset":1172}}},{"type":"text","value":"\n"}],"position":{"start":{"line":63,"column":1,"offset":1093},"end":{"line":64,"column":68,"offset":1172}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":66,"column":1,"offset":1174},"end":{"line":66,"column":4,"offset":1177}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"이동-윈도-로그","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%9D%B4%EB%8F%99-%EC%9C%88%EB%8F%84-%EB%A1%9C%EA%B7%B8","aria-label":"이동 윈도 로그 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"이동 윈도 로그","position":{"start":{"line":68,"column":4,"offset":1182},"end":{"line":68,"column":12,"offset":1190}}}],"position":{"start":{"line":68,"column":1,"offset":1179},"end":{"line":68,"column":12,"offset":1190}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"고정 윈도 카운터 알고리즘의 윈도 경계 부분에서\n트래픽이 몰리는 경우를 보완하기 위한 알고리즘","position":{"start":{"line":70,"column":3,"offset":1198},"end":{"line":71,"column":28,"offset":1253}}}],"position":{"start":{"line":70,"column":3,"offset":1198},"end":{"line":71,"column":28,"offset":1253}}},{"type":"text","value":"\n"}],"position":{"start":{"line":70,"column":1,"offset":1196},"end":{"line":71,"column":28,"offset":1253}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"동작방식","position":{"start":{"line":73,"column":3,"offset":1257},"end":{"line":73,"column":7,"offset":1261}}}],"position":{"start":{"line":73,"column":3,"offset":1257},"end":{"line":73,"column":7,"offset":1261}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"요청의 타임스탬프를 추적함\n타임스탬프는 보통 Redis의 Sorted Set과 같은 정렬 집합 캐시에 보관","position":{"start":{"line":75,"column":8,"offset":1274},"end":{"line":76,"column":49,"offset":1337}}}],"position":{"start":{"line":75,"column":5,"offset":1271},"end":{"line":76,"column":49,"offset":1337}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"새 요청이 오면 만료된 타임스탬프는 제거","position":{"start":{"line":77,"column":8,"offset":1345},"end":{"line":77,"column":30,"offset":1367}}}],"position":{"start":{"line":77,"column":5,"offset":1342},"end":{"line":77,"column":30,"offset":1367}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"새 요청의 타임 스탬프를 로그에 추가","position":{"start":{"line":78,"column":8,"offset":1375},"end":{"line":78,"column":28,"offset":1395}}}],"position":{"start":{"line":78,"column":5,"offset":1372},"end":{"line":78,"column":28,"offset":1395}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"로그의 크기가 허용치보다 같거나 작으면 요청을 시스템에 전달함\n그렇지 않은 경우 처리는 거부됨","position":{"start":{"line":79,"column":8,"offset":1403},"end":{"line":80,"column":22,"offset":1459}}}],"position":{"start":{"line":79,"column":5,"offset":1400},"end":{"line":81,"column":5,"offset":1464}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"윈도 알고리즘의 처리율 한도를 넘지 않음","position":{"start":{"line":82,"column":7,"offset":1471},"end":{"line":82,"column":29,"offset":1493}}}],"position":{"start":{"line":82,"column":5,"offset":1469},"end":{"line":82,"column":29,"offset":1493}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"다량의 메모리 사용, 거부된 요청의 타임스탬프도 보관하기 때문","position":{"start":{"line":83,"column":7,"offset":1500},"end":{"line":83,"column":41,"offset":1534}}}],"position":{"start":{"line":83,"column":5,"offset":1498},"end":{"line":83,"column":41,"offset":1534}}},{"type":"text","value":"\n"}],"position":{"start":{"line":75,"column":5,"offset":1271},"end":{"line":83,"column":41,"offset":1534}}},{"type":"text","value":"\n"}],"position":{"start":{"line":73,"column":1,"offset":1255},"end":{"line":83,"column":41,"offset":1534}}},{"type":"text","value":"\n"}],"position":{"start":{"line":73,"column":1,"offset":1255},"end":{"line":83,"column":41,"offset":1534}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":85,"column":1,"offset":1536},"end":{"line":85,"column":4,"offset":1539}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"이동-윈도-카운터","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%9D%B4%EB%8F%99-%EC%9C%88%EB%8F%84-%EC%B9%B4%EC%9A%B4%ED%84%B0","aria-label":"이동 윈도 카운터 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"이동 윈도 카운터","position":{"start":{"line":87,"column":4,"offset":1544},"end":{"line":87,"column":13,"offset":1553}}}],"position":{"start":{"line":87,"column":1,"offset":1541},"end":{"line":87,"column":13,"offset":1553}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"고정 윈도 카운터 + 이동 윈도 로그 ","position":{"start":{"line":89,"column":3,"offset":1561},"end":{"line":89,"column":24,"offset":1582}}}],"position":{"start":{"line":89,"column":3,"offset":1561},"end":{"line":89,"column":24,"offset":1582}}},{"type":"text","value":"\n"}],"position":{"start":{"line":89,"column":1,"offset":1559},"end":{"line":89,"column":24,"offset":1582}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이전 시간대의 평균 처리율에 따라 현재 윈도의 상태를 계산하므로 짧은 시간에 몰리는 트래픽에도 잘 대응","position":{"start":{"line":91,"column":3,"offset":1590},"end":{"line":91,"column":60,"offset":1647}}}],"position":{"start":{"line":91,"column":1,"offset":1588},"end":{"line":91,"column":60,"offset":1647}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"메모리 효율이 좋음","position":{"start":{"line":92,"column":3,"offset":1650},"end":{"line":92,"column":13,"offset":1660}}}],"position":{"start":{"line":92,"column":1,"offset":1648},"end":{"line":92,"column":13,"offset":1660}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"직전 시간의 추정치를 계산하기 때문에 기준이 느슨함, But 심각한 건 아님","position":{"start":{"line":93,"column":3,"offset":1663},"end":{"line":93,"column":45,"offset":1705}}}],"position":{"start":{"line":93,"column":1,"offset":1661},"end":{"line":93,"column":45,"offset":1705}}},{"type":"text","value":"\n"}],"position":{"start":{"line":91,"column":1,"offset":1588},"end":{"line":93,"column":45,"offset":1705}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":95,"column":1,"offset":1707},"end":{"line":95,"column":4,"offset":1710}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"프로세스","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4","aria-label":"프로세스 permalink","class":"anchor-header before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"프로세스","position":{"start":{"line":97,"column":3,"offset":1714},"end":{"line":97,"column":7,"offset":1718}}}],"position":{"start":{"line":97,"column":1,"offset":1712},"end":{"line":97,"column":7,"offset":1718}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"처리율 제한 규칙은 디스크에 보관한다.\n작업 프로세스는 수시로 규칙을 디스크에서 읽어 캐시에 저장한다.","position":{"start":{"line":99,"column":4,"offset":1723},"end":{"line":100,"column":36,"offset":1781}}}],"position":{"start":{"line":99,"column":1,"offset":1720},"end":{"line":100,"column":36,"offset":1781}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라이언트가 요청을 서버에 보내면 요청은 먼저 처리율 제한 미들웨어에 도달한다.\n카운터 및 마지막 요청의 타임스탬프를 레디스 캐시에서 가져온다. ","position":{"start":{"line":101,"column":4,"offset":1785},"end":{"line":102,"column":37,"offset":1866}}}],"position":{"start":{"line":101,"column":4,"offset":1785},"end":{"line":102,"column":37,"offset":1866}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"해당 요청이 처리율 제한에 걸리지 않은 경우 API서버로 보낸다.","position":{"start":{"line":103,"column":7,"offset":1873},"end":{"line":103,"column":43,"offset":1909}}}],"position":{"start":{"line":103,"column":5,"offset":1871},"end":{"line":103,"column":43,"offset":1909}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"해당 요청이 처리율 제한에 걸렸다면 429(too many request) 에러를 클라이언트에 보낸다.\n한편 해당 요청은 그대로 버릴 수도 있고 메시지 큐에 저장할 수도 있다.","position":{"start":{"line":104,"column":7,"offset":1916},"end":{"line":105,"column":45,"offset":2019}}}],"position":{"start":{"line":104,"column":5,"offset":1914},"end":{"line":105,"column":45,"offset":2019}}},{"type":"text","value":"\n"}],"position":{"start":{"line":103,"column":5,"offset":1871},"end":{"line":105,"column":45,"offset":2019}}},{"type":"text","value":"\n"}],"position":{"start":{"line":101,"column":1,"offset":1782},"end":{"line":105,"column":45,"offset":2019}}},{"type":"text","value":"\n"}],"position":{"start":{"line":99,"column":1,"offset":1720},"end":{"line":105,"column":45,"offset":2019}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":106,"column":1,"offset":2020}}}}