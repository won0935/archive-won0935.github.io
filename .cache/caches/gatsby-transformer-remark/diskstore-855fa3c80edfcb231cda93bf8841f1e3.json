{"expireTime":9007200896353682000,"key":"transformer-remark-markdown-ast-21897d0d773b2f18c0bebac1b869b988-gatsby-remark-code-titlesgatsby-remark-embed-youtubegatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-custom-blocksgatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"link","url":"#개요","title":null,"children":[],"data":{"hProperties":{"aria-label":"개요 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"개요","position":{"start":{"line":2,"column":4,"offset":4},"end":{"line":2,"column":6,"offset":6},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":6,"offset":6},"indent":[]},"data":{"id":"개요","htmlAttributes":{"id":"개요"},"hProperties":{"id":"개요","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">자바 ORM 표준 JPA 프로그래밍</code>","position":{"start":{"line":4,"column":1,"offset":8},"end":{"line":4,"column":22,"offset":29},"indent":[]}},{"type":"text","value":"이라는 책으로 스터디를 진행하던 도중 공유 되었던 이슈를 포스팅으로 공유하고자 합니다.","position":{"start":{"line":4,"column":22,"offset":29},"end":{"line":4,"column":70,"offset":77},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":8},"end":{"line":4,"column":70,"offset":77},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"먼저, 공유된 이슈가 어떤 상황인지 이야기하고 ","position":{"start":{"line":6,"column":1,"offset":79},"end":{"line":6,"column":27,"offset":105},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Transactional</code>","position":{"start":{"line":6,"column":27,"offset":105},"end":{"line":6,"column":43,"offset":121},"indent":[]}},{"type":"text","value":" 어노테이션을 사용할 때 발생한 이슈와 ","position":{"start":{"line":6,"column":43,"offset":121},"end":{"line":6,"column":65,"offset":143},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">JPQL</code>","position":{"start":{"line":6,"column":65,"offset":143},"end":{"line":6,"column":71,"offset":149},"indent":[]}},{"type":"text","value":"을 사용할 때 발생한 이슈에 대해서 알아보겠습니다.","position":{"start":{"line":6,"column":71,"offset":149},"end":{"line":6,"column":99,"offset":177},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":79},"end":{"line":6,"column":99,"offset":177},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#무엇을-테스트-하려-했는지-예시","title":null,"children":[],"data":{"hProperties":{"aria-label":"무엇을 테스트 하려 했는지 예시 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"무엇을 테스트 하려 했는지? (예시)","position":{"start":{"line":8,"column":4,"offset":182},"end":{"line":8,"column":24,"offset":202},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":179},"end":{"line":8,"column":24,"offset":202},"indent":[]},"data":{"id":"무엇을-테스트-하려-했는지-예시","htmlAttributes":{"id":"무엇을-테스트-하려-했는지-예시"},"hProperties":{"id":"무엇을-테스트-하려-했는지-예시","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"포스팅의 좋아요 수 정보를 증가시키기 위해 JPQL로 업데이트하려고 했다.","position":{"start":{"line":10,"column":3,"offset":206},"end":{"line":10,"column":44,"offset":247},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":206},"end":{"line":10,"column":44,"offset":247},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"코드 리팩토링의 과정에서 변경 감지를 이용하지 않고 JPQL을 사용했다.","position":{"start":{"line":11,"column":5,"offset":252},"end":{"line":11,"column":45,"offset":292},"indent":[]}}],"position":{"start":{"line":11,"column":5,"offset":252},"end":{"line":11,"column":45,"offset":292},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":250},"end":{"line":11,"column":45,"offset":292},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":204},"end":{"line":11,"column":45,"offset":292},"indent":[1]}}],"position":{"start":{"line":10,"column":1,"offset":204},"end":{"line":11,"column":45,"offset":292},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"그러나, JPQL로 업데이트 한 이후에 해당 엔티티를 조회했더니 운영 환경, 테스트 환경의 결과가 달랐다.","position":{"start":{"line":13,"column":1,"offset":294},"end":{"line":13,"column":60,"offset":353},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":294},"end":{"line":13,"column":60,"offset":353},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#엔티티-코드-정보","title":null,"children":[],"data":{"hProperties":{"aria-label":"엔티티 코드 정보 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"엔티티, 코드 정보","position":{"start":{"line":15,"column":4,"offset":358},"end":{"line":15,"column":14,"offset":368},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":355},"end":{"line":15,"column":14,"offset":368},"indent":[]},"data":{"id":"엔티티-코드-정보","htmlAttributes":{"id":"엔티티-코드-정보"},"hProperties":{"id":"엔티티-코드-정보","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Post 엔티티","position":{"start":{"line":17,"column":3,"offset":372},"end":{"line":17,"column":11,"offset":380},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":370},"end":{"line":17,"column":13,"offset":382},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":370},"end":{"line":17,"column":13,"offset":382},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@Setter</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token annotation punctuation\">@AllArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Builder</span>\n<span class=\"token annotation punctuation\">@DynamicUpdate</span>\n<span class=\"token annotation punctuation\">@ToString</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Post</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token annotation punctuation\">@Id</span>\n  <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> postId<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> title<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">long</span> likeCount<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":19,"column":1,"offset":384},"end":{"line":39,"column":4,"offset":662},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PostRepository","position":{"start":{"line":41,"column":3,"offset":666},"end":{"line":41,"column":17,"offset":680},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":664},"end":{"line":41,"column":19,"offset":682},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":664},"end":{"line":41,"column":19,"offset":682},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Repository</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">PostRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Post</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token annotation punctuation\">@Modifying</span>\n  <span class=\"token annotation punctuation\">@Transactional</span>\n  <span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update Post p set p.likeCount = p.likeCount + :count where p.postId = :id\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">int</span> <span class=\"token function\">updateLikeCount</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> count<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":43,"column":1,"offset":684},"end":{"line":52,"column":4,"offset":978},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#문제-상황-2가지","title":null,"children":[],"data":{"hProperties":{"aria-label":"문제 상황 2가지 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"문제 상황 2가지","position":{"start":{"line":54,"column":4,"offset":983},"end":{"line":54,"column":13,"offset":992},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":980},"end":{"line":54,"column":13,"offset":992},"indent":[]},"data":{"id":"문제-상황-2가지","htmlAttributes":{"id":"문제-상황-2가지"},"hProperties":{"id":"문제-상황-2가지","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"결과가 다른 2가지의 상황이 있습니다.","position":{"start":{"line":56,"column":1,"offset":994},"end":{"line":56,"column":22,"offset":1015},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":994},"end":{"line":56,"column":22,"offset":1015},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"테스트 환경에서 쓴 코드","position":{"start":{"line":58,"column":4,"offset":1020},"end":{"line":58,"column":17,"offset":1033},"indent":[]}}],"position":{"start":{"line":58,"column":4,"offset":1020},"end":{"line":58,"column":17,"offset":1033},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":1017},"end":{"line":58,"column":17,"offset":1033},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"운영 환경에서 동작을 확인하려고 쓴 코드","position":{"start":{"line":59,"column":4,"offset":1037},"end":{"line":59,"column":26,"offset":1059},"indent":[]}}],"position":{"start":{"line":59,"column":4,"offset":1037},"end":{"line":59,"column":26,"offset":1059},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":1034},"end":{"line":59,"column":26,"offset":1059},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":1017},"end":{"line":59,"column":26,"offset":1059},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"각각 다음과 같습니다.","position":{"start":{"line":61,"column":1,"offset":1061},"end":{"line":61,"column":13,"offset":1073},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":1061},"end":{"line":61,"column":13,"offset":1073},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"1. 테스트 환경에서 쓴 코드","position":{"start":{"line":63,"column":3,"offset":1077},"end":{"line":63,"column":19,"offset":1093},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":1075},"end":{"line":63,"column":21,"offset":1095},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":1075},"end":{"line":63,"column":21,"offset":1095},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SpringtestApplicationTests</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token annotation punctuation\">@Autowired</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">PostRepository</span> postRepository<span class=\"token punctuation\">;</span>\n\n  <span class=\"token annotation punctuation\">@Test</span>\n  <span class=\"token annotation punctuation\">@Transactional</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> 테스트<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Post</span> post1 <span class=\"token operator\">=</span> <span class=\"token class-name\">Post</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">title</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"세상을 바꾸는 IT 동아리\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">likeCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Post</span> post2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Post</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">title</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"현직 멘토들이 가지고 있는 경험을 멘토들에게 공유해주는 멘토링\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">likeCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    postRepository<span class=\"token punctuation\">.</span><span class=\"token function\">saveAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>post1<span class=\"token punctuation\">,</span> post2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    postRepository<span class=\"token punctuation\">.</span><span class=\"token function\">updateLikeCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Post</span> post <span class=\"token operator\">=</span> postRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token number\">1L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post -> {}\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span><span class=\"token function\">getLikeCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":65,"column":1,"offset":1097},"end":{"line":95,"column":4,"offset":1779},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"2. 운영 환경에서 동작을 확인하려고 쓴 코드","position":{"start":{"line":97,"column":3,"offset":1783},"end":{"line":97,"column":28,"offset":1808},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":1781},"end":{"line":97,"column":30,"offset":1810},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":1781},"end":{"line":97,"column":30,"offset":1810},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Runner</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationRunner</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">PostRepository</span> postRepository<span class=\"token punctuation\">;</span>\n\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ApplicationArguments</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token annotation punctuation\">@Transactional</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Post</span> post1 <span class=\"token operator\">=</span> <span class=\"token class-name\">Post</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">title</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"세상을 바꾸는 IT 동아리\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">likeCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Post</span> post2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Post</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">title</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"현직 멘토들이 가지고 있는 경험을 멘토들에게 공유해주는 멘토링\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">likeCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    postRepository<span class=\"token punctuation\">.</span><span class=\"token function\">saveAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>post1<span class=\"token punctuation\">,</span> post2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    postRepository<span class=\"token punctuation\">.</span><span class=\"token function\">updateLikeCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Post</span> post <span class=\"token operator\">=</span> postRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token number\">1L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post -> {}\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span><span class=\"token function\">getLikeCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JPQL이 반영된 이후 정상적으로 데이터를 가져옴 !\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"데이터 불일치\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":99,"column":1,"offset":1812},"end":{"line":137,"column":4,"offset":2717},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#결과는","title":null,"children":[],"data":{"hProperties":{"aria-label":"결과는 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"결과는?","position":{"start":{"line":139,"column":4,"offset":2722},"end":{"line":139,"column":8,"offset":2726},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":2719},"end":{"line":139,"column":8,"offset":2726},"indent":[]},"data":{"id":"결과는","htmlAttributes":{"id":"결과는"},"hProperties":{"id":"결과는","style":"position:relative;"}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#테스트-환경","title":null,"children":[],"data":{"hProperties":{"aria-label":"테스트 환경 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"테스트 환경","position":{"start":{"line":141,"column":6,"offset":2733},"end":{"line":141,"column":12,"offset":2739},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":2728},"end":{"line":141,"column":12,"offset":2739},"indent":[]},"data":{"id":"테스트-환경","htmlAttributes":{"id":"테스트-환경"},"hProperties":{"id":"테스트-환경","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/test-result.png","alt":"테스트 결과","position":{"start":{"line":143,"column":1,"offset":2741},"end":{"line":143,"column":36,"offset":2776},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad240da76561e431510af7e71a9380d5/e16b4/test-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.8936170212766%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRUlEQVQoz02SW5aCMBBEWY4QkCQGSAIYHqNnZv8LqqmOCn7cU00FY1c3RUoJ67ZhXVdsVB8C2rbNKozjiEiknqYJrusQYjzq2+0G515qSbGmO577hn1dsm5LQhx6bPQnuYSEnj/QLZwxsO0VnTWZnhd01n6pRTFbjdA52KaGuzZZTa1giXmjVYW2vOBK2qo86oPLWRcdL+nZhXUOrTao6hplpVCqE/G++XiqbqCaE/GL3zTjwbgpeCwx4O57dlpTB0zsXJ6X6LGOnBujSwo5E98bjegsPFMOrC2TFE/O6k/m97Pjse+c4YKRHe9c0sKzdJ/zfKUWb+aC5Dx6n/F9j04Ww/k10uFj5DYZ16gyt6wEiaPqXFfH83lWluWLqsrkd2UcHFWxM0qOSpVPRPD85yBdxJcnOgxD9vxbP37PDi03rLXO/ANOPAG/FEfUuwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"테스트 결과\"\n        title=\"테스트 결과\"\n        src=\"/static/ad240da76561e431510af7e71a9380d5/1d69c/test-result.png\"\n        srcset=\"/static/ad240da76561e431510af7e71a9380d5/4dcb9/test-result.png 188w,\n/static/ad240da76561e431510af7e71a9380d5/5ff7e/test-result.png 375w,\n/static/ad240da76561e431510af7e71a9380d5/1d69c/test-result.png 750w,\n/static/ad240da76561e431510af7e71a9380d5/78797/test-result.png 1125w,\n/static/ad240da76561e431510af7e71a9380d5/aa440/test-result.png 1500w,\n/static/ad240da76561e431510af7e71a9380d5/e16b4/test-result.png 2546w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":143,"column":1,"offset":2741},"end":{"line":143,"column":36,"offset":2776},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#운영-환경","title":null,"children":[],"data":{"hProperties":{"aria-label":"운영 환경 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"운영 환경","position":{"start":{"line":145,"column":6,"offset":2783},"end":{"line":145,"column":11,"offset":2788},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":2778},"end":{"line":145,"column":11,"offset":2788},"indent":[]},"data":{"id":"운영-환경","htmlAttributes":{"id":"운영-환경"},"hProperties":{"id":"운영-환경","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/production-result.png","alt":"운영 결과","position":{"start":{"line":147,"column":1,"offset":2790},"end":{"line":147,"column":41,"offset":2830},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c28aa3139e8319369b9fa9f19871c25e/e49d9/production-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.53191489361703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABnElEQVQoz41SWXKrMBDkKokTPxCLWMQmAQJkknf/C3V6iJ1y5SsfXdKMZmtNR9u+4Tg+ET4GLK5Hnms0TYPEWlzGEe/EZRhQ9z22dYWlf6A90i9nT7/45JS8aFkWrH6H3wzc2CLPNOq6hmLAW9fh2raItUZVlqiZUFXVCYkRyL25+zXjopKBLZPEyLIMSimkKoVKU568J8l5ij+OYyS0f+PZH43jgHleMNgKXVsjS3NIE8XuV8HThMaYs7FAYgSP+2OgaJomLLPH7A3/cIAuSK2uoEj3nfjHInFRoJRE0srzHAXt3xD/WVAM5yy6rkfPT5ZOMrp60L0j+QMkJzKmIeUZhnS1Ls4u0iRjx0TAuyCVyQR3ygKJ00+2TPm95XXHHgassyVdQzlQPpSCbFlkc71v1Dl3SkQkYwmRivyrFPqhHMKOW/jA8b/FbXWUTcnlcBFs9LLMeNl3XFh4IPbbDRPZzDLEtnGIwG8aT6oPRBsfQjgQDiZ4R1rfMkq4rFeB93ijzlzf4XP12CaHw7OgHTHTZ5saBSWmKLWU5xdfDD2gcbJo5QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"운영 결과\"\n        title=\"운영 결과\"\n        src=\"/static/c28aa3139e8319369b9fa9f19871c25e/1d69c/production-result.png\"\n        srcset=\"/static/c28aa3139e8319369b9fa9f19871c25e/4dcb9/production-result.png 188w,\n/static/c28aa3139e8319369b9fa9f19871c25e/5ff7e/production-result.png 375w,\n/static/c28aa3139e8319369b9fa9f19871c25e/1d69c/production-result.png 750w,\n/static/c28aa3139e8319369b9fa9f19871c25e/78797/production-result.png 1125w,\n/static/c28aa3139e8319369b9fa9f19871c25e/aa440/production-result.png 1500w,\n/static/c28aa3139e8319369b9fa9f19871c25e/e49d9/production-result.png 3100w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":147,"column":1,"offset":2790},"end":{"line":147,"column":41,"offset":2830},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":149,"column":1,"offset":2832},"end":{"line":149,"column":4,"offset":2835},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"위의 결과를 보았을 때, 무엇이 옳은 결과로 보이시나요?!","position":{"start":{"line":151,"column":3,"offset":2839},"end":{"line":151,"column":35,"offset":2871},"indent":[]}}],"position":{"start":{"line":151,"column":3,"offset":2839},"end":{"line":151,"column":35,"offset":2871},"indent":[]}}],"position":{"start":{"line":151,"column":1,"offset":2837},"end":{"line":151,"column":35,"offset":2871},"indent":[]}}],"position":{"start":{"line":151,"column":1,"offset":2837},"end":{"line":151,"column":35,"offset":2871},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"이미지를 봤을 때는 운영 환경의 결과가 맞고 테스트 환경이 틀린 결과로 보이지만","position":{"start":{"line":153,"column":1,"offset":2873},"end":{"line":153,"column":45,"offset":2917},"indent":[]}}],"position":{"start":{"line":153,"column":1,"offset":2873},"end":{"line":153,"column":45,"offset":2917},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"여기에는 2가지 문제점이 존재합니다.","position":{"start":{"line":155,"column":1,"offset":2919},"end":{"line":155,"column":21,"offset":2939},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":2919},"end":{"line":155,"column":21,"offset":2939},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#2가지-문제점에-대하여","title":null,"children":[],"data":{"hProperties":{"aria-label":"2가지 문제점에 대하여 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2가지 문제점에 대하여","position":{"start":{"line":157,"column":4,"offset":2944},"end":{"line":157,"column":16,"offset":2956},"indent":[]}}],"position":{"start":{"line":157,"column":1,"offset":2941},"end":{"line":157,"column":16,"offset":2956},"indent":[]},"data":{"id":"2가지-문제점에-대하여","htmlAttributes":{"id":"2가지-문제점에-대하여"},"hProperties":{"id":"2가지-문제점에-대하여","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"정말로 하나의 트랜잭션이 동작했을까?","position":{"start":{"line":159,"column":3,"offset":2960},"end":{"line":159,"column":23,"offset":2980},"indent":[]}}],"position":{"start":{"line":159,"column":3,"offset":2960},"end":{"line":159,"column":23,"offset":2980},"indent":[]}}],"position":{"start":{"line":159,"column":1,"offset":2958},"end":{"line":160,"column":1,"offset":2981},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"JPQL로 Update를 진행하고 난 뒤 Select로 가져온 데이터는 Update가 반영된 데이터가 가져와졌을까?","position":{"start":{"line":161,"column":3,"offset":2984},"end":{"line":161,"column":67,"offset":3048},"indent":[]}}],"position":{"start":{"line":161,"column":3,"offset":2984},"end":{"line":161,"column":67,"offset":3048},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":2982},"end":{"line":161,"column":67,"offset":3048},"indent":[]}}],"position":{"start":{"line":159,"column":1,"offset":2958},"end":{"line":161,"column":67,"offset":3048},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"JPQL의 쿼리는 항상 영속성 컨텍스트를 거치지 않고 바로 DB에 쿼리를 날립니다.","position":{"start":{"line":163,"column":1,"offset":3050},"end":{"line":163,"column":47,"offset":3096},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":3050},"end":{"line":163,"column":47,"offset":3096},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"현재는 운영 환경, 테스트 환경에 모두 ","position":{"start":{"line":165,"column":1,"offset":3098},"end":{"line":165,"column":23,"offset":3120},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Transactional</code>","position":{"start":{"line":165,"column":23,"offset":3120},"end":{"line":165,"column":39,"offset":3136},"indent":[]}},{"type":"text","value":"을 걸어둔 상태이므로 하나의 트랜잭션으로 동작해야합니다.","position":{"start":{"line":165,"column":39,"offset":3136},"end":{"line":165,"column":70,"offset":3167},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":3098},"end":{"line":165,"column":70,"offset":3167},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"하나의 트랜잭션이 정상적으로 동작했다면, JPQL은 DB 데이터는 변경했지만, 영속성 컨텍스트의 데이터는 변경시키지 않았으므로 Select시에 변경 되기 전의 데이터를 가져오는 것이 맞습니다.","position":{"start":{"line":167,"column":1,"offset":3169},"end":{"line":167,"column":108,"offset":3276},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":3169},"end":{"line":167,"column":108,"offset":3276},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"여기서, ‘JPQL을 사용한 이후 조회할 때 DB와 영속성 컨텍스트간의 동기화가 이루어지지 않았다’는 첫번째 문제점을 발견할 수 있습니다.","position":{"start":{"line":169,"column":1,"offset":3278},"end":{"line":169,"column":78,"offset":3355},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":3278},"end":{"line":169,"column":78,"offset":3355},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"첫번째 문제점","position":{"start":{"line":171,"column":3,"offset":3359},"end":{"line":171,"column":10,"offset":3366},"indent":[]}}],"position":{"start":{"line":171,"column":3,"offset":3359},"end":{"line":171,"column":10,"offset":3366},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":3357},"end":{"line":171,"column":10,"offset":3366},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"그리고 운영 환경에서는 하나의 트랜잭션이 아닌 별도의 트랜잭션이 동작했기 때문에 JPQL을 실행한 이후 조회된 데이터에는 JPQL이 반영된 결과가 나왔다는 것을 알 수 있습니다.","position":{"start":{"line":173,"column":1,"offset":3368},"end":{"line":173,"column":100,"offset":3467},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":3368},"end":{"line":173,"column":100,"offset":3467},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"트랜잭션이 다르므로 영속성 컨텍스트도 다르니 찾는 엔티티가 없어서 다시 DB에서 데이터를 조회했을 것","position":{"start":{"line":175,"column":3,"offset":3471},"end":{"line":175,"column":59,"offset":3527},"indent":[]}}],"position":{"start":{"line":175,"column":3,"offset":3471},"end":{"line":175,"column":59,"offset":3527},"indent":[]}}],"position":{"start":{"line":175,"column":1,"offset":3469},"end":{"line":175,"column":59,"offset":3527},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"결국, ‘운영 환경에서의 ","position":{"start":{"line":177,"column":1,"offset":3529},"end":{"line":177,"column":15,"offset":3543},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Transactional</code>","position":{"start":{"line":177,"column":15,"offset":3543},"end":{"line":177,"column":31,"offset":3559},"indent":[]}},{"type":"text","value":"이 동작하지 않았다는 것’도 알 수 있습니다.","position":{"start":{"line":177,"column":31,"offset":3559},"end":{"line":177,"column":56,"offset":3584},"indent":[]}}],"position":{"start":{"line":177,"column":1,"offset":3529},"end":{"line":177,"column":56,"offset":3584},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"두번째 문제점","position":{"start":{"line":179,"column":3,"offset":3588},"end":{"line":179,"column":10,"offset":3595},"indent":[]}}],"position":{"start":{"line":179,"column":3,"offset":3588},"end":{"line":179,"column":10,"offset":3595},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":3586},"end":{"line":179,"column":10,"offset":3595},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#첫번째-문제점","title":null,"children":[],"data":{"hProperties":{"aria-label":"첫번째 문제점 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"첫번째 문제점","position":{"start":{"line":181,"column":6,"offset":3602},"end":{"line":181,"column":13,"offset":3609},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":3597},"end":{"line":181,"column":13,"offset":3609},"indent":[]},"data":{"id":"첫번째-문제점","htmlAttributes":{"id":"첫번째-문제점"},"hProperties":{"id":"첫번째-문제점","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"JPQL을 사용한 이후 조회할 때 DB와 영속성 컨텍스트간의 동기화가 이루어지지 않은 이슈","position":{"start":{"line":183,"column":3,"offset":3613},"end":{"line":183,"column":53,"offset":3663},"indent":[]}}],"position":{"start":{"line":183,"column":3,"offset":3613},"end":{"line":183,"column":53,"offset":3663},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":3611},"end":{"line":183,"column":53,"offset":3663},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":3611},"end":{"line":183,"column":53,"offset":3663},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"그렇다면, JPQL을 실행한 이후 영속성 컨텍스트의 데이터를 동기화 시킬 방법이 있을까?","position":{"start":{"line":185,"column":1,"offset":3665},"end":{"line":185,"column":50,"offset":3714},"indent":[]}}],"position":{"start":{"line":185,"column":1,"offset":3665},"end":{"line":185,"column":50,"offset":3714},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#해결-방법","title":null,"children":[],"data":{"hProperties":{"aria-label":"해결 방법 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"해결 방법","position":{"start":{"line":187,"column":7,"offset":3722},"end":{"line":187,"column":12,"offset":3727},"indent":[]}}],"position":{"start":{"line":187,"column":1,"offset":3716},"end":{"line":187,"column":12,"offset":3727},"indent":[]},"data":{"id":"해결-방법","htmlAttributes":{"id":"해결-방법"},"hProperties":{"id":"해결-방법","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"아래의 코드처럼 ","position":{"start":{"line":189,"column":1,"offset":3729},"end":{"line":189,"column":10,"offset":3738},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Modifying</code>","position":{"start":{"line":189,"column":10,"offset":3738},"end":{"line":189,"column":22,"offset":3750},"indent":[]}},{"type":"text","value":"의 ","position":{"start":{"line":189,"column":22,"offset":3750},"end":{"line":189,"column":24,"offset":3752},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">clearAutomatically</code>","position":{"start":{"line":189,"column":24,"offset":3752},"end":{"line":189,"column":44,"offset":3772},"indent":[]}},{"type":"text","value":" 옵션을 적용시키면 쿼리 실행 이후 영속성 컨텍스트를 초기화 시켜준다고 합니다.","position":{"start":{"line":189,"column":44,"offset":3772},"end":{"line":189,"column":88,"offset":3816},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":3729},"end":{"line":189,"column":88,"offset":3816},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"영속성 컨텍스트가 초기화 된다는 말은 이후 엔티티를 select시 바로 DB를 조회한다는 말과 동일합니다.","position":{"start":{"line":191,"column":1,"offset":3818},"end":{"line":191,"column":60,"offset":3877},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":3818},"end":{"line":191,"column":60,"offset":3877},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"1차 캐시에 데이터가 없을 것이므로","position":{"start":{"line":193,"column":3,"offset":3881},"end":{"line":193,"column":22,"offset":3900},"indent":[]}}],"position":{"start":{"line":193,"column":3,"offset":3881},"end":{"line":193,"column":22,"offset":3900},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":3879},"end":{"line":193,"column":22,"offset":3900},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Repository</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">PostRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Post</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token annotation punctuation\">@Modifying</span><span class=\"token punctuation\">(</span>clearAutomatically <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 쿼리 실행 이후 영속성 컨텍스트를 초기화시켜준다.</span>\n  <span class=\"token annotation punctuation\">@Transactional</span>\n  <span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update Post p set p.likeCount = p.likeCount + :count where p.postId = :id\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">int</span> <span class=\"token function\">updateLikeCount</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> count<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":195,"column":1,"offset":3902},"end":{"line":204,"column":4,"offset":4254},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"✔︎ 첫번째 문제점 해결","position":{"start":{"line":206,"column":3,"offset":4258},"end":{"line":206,"column":16,"offset":4271},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":4256},"end":{"line":206,"column":18,"offset":4273},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":4256},"end":{"line":206,"column":18,"offset":4273},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/jpql-solution.png","alt":"JPQL 동기화 해결","position":{"start":{"line":208,"column":1,"offset":4275},"end":{"line":208,"column":43,"offset":4317},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/658a6201bd7dbad7efa023d5fc57caa2/87547/jpql-solution.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.808510638297875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVUlEQVQoz4WSy1LDMAxF+z1t3vEjThzHdpICHWbgH9j1//cXSUw6sAAWZ2zJ0fWVo5O9fWB+v8O83pH3N7xEj6cUcY0BrmvhtUIcB6TRCXkaJcf7ZbCYVC/xpHvoqsRpDBGMCwlxmvC8BOxMmBGskaLZaCkc2hqmrqTQNjXFjawCn5XFl+C0MAnKWGil0DQNqqrC5XJBURQoy1Lg+Hw+/8nDIQtqO2AcR0zk1FqLuq5FmC9o21bEuYiFf+Mh6GNG2ysYY+CcE0FFbv9z9IfDTC0bEVRaizN2dMAtc+5o/3vuyHPudLQr6xyQU8K+79i2DW4YpP1lWRBjxLqusu+6Tp7mgL/hrtjMD8EQEzIVMfv1Ck1OHRUs9NMiXZTzCj/P9KatxLz33iPQJQx//xDksUl0eAseG83dTngahUV1iEZhHQz2yclZ6Dskq5FprI58plgVF3wCI6AmjL3UVTEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JPQL 동기화 해결\"\n        title=\"JPQL 동기화 해결\"\n        src=\"/static/658a6201bd7dbad7efa023d5fc57caa2/1d69c/jpql-solution.png\"\n        srcset=\"/static/658a6201bd7dbad7efa023d5fc57caa2/4dcb9/jpql-solution.png 188w,\n/static/658a6201bd7dbad7efa023d5fc57caa2/5ff7e/jpql-solution.png 375w,\n/static/658a6201bd7dbad7efa023d5fc57caa2/1d69c/jpql-solution.png 750w,\n/static/658a6201bd7dbad7efa023d5fc57caa2/78797/jpql-solution.png 1125w,\n/static/658a6201bd7dbad7efa023d5fc57caa2/aa440/jpql-solution.png 1500w,\n/static/658a6201bd7dbad7efa023d5fc57caa2/87547/jpql-solution.png 3174w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":208,"column":1,"offset":4275},"end":{"line":208,"column":43,"offset":4317},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#두번째-문제점","title":null,"children":[],"data":{"hProperties":{"aria-label":"두번째 문제점 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"두번째 문제점","position":{"start":{"line":210,"column":6,"offset":4324},"end":{"line":210,"column":13,"offset":4331},"indent":[]}}],"position":{"start":{"line":210,"column":1,"offset":4319},"end":{"line":210,"column":13,"offset":4331},"indent":[]},"data":{"id":"두번째-문제점","htmlAttributes":{"id":"두번째-문제점"},"hProperties":{"id":"두번째-문제점","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"운영 환경에서 ","position":{"start":{"line":212,"column":3,"offset":4335},"end":{"line":212,"column":11,"offset":4343},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Transactional</code>","position":{"start":{"line":212,"column":11,"offset":4343},"end":{"line":212,"column":27,"offset":4359},"indent":[]}},{"type":"text","value":"이 동작하지 않았던 이슈","position":{"start":{"line":212,"column":27,"offset":4359},"end":{"line":212,"column":40,"offset":4372},"indent":[]}}],"position":{"start":{"line":212,"column":3,"offset":4335},"end":{"line":212,"column":40,"offset":4372},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":4333},"end":{"line":212,"column":40,"offset":4372},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":4333},"end":{"line":212,"column":40,"offset":4372},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#해결-방법-1","title":null,"children":[],"data":{"hProperties":{"aria-label":"해결 방법 1 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"해결 방법","position":{"start":{"line":214,"column":7,"offset":4380},"end":{"line":214,"column":12,"offset":4385},"indent":[]}}],"position":{"start":{"line":214,"column":1,"offset":4374},"end":{"line":214,"column":12,"offset":4385},"indent":[]},"data":{"id":"해결-방법-1","htmlAttributes":{"id":"해결-방법-1"},"hProperties":{"id":"해결-방법-1","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Spring Boot에서 프록시는 ","position":{"start":{"line":216,"column":1,"offset":4387},"end":{"line":216,"column":20,"offset":4406},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">CGLIB</code>","position":{"start":{"line":216,"column":20,"offset":4406},"end":{"line":216,"column":27,"offset":4413},"indent":[]}},{"type":"text","value":"으로 동작합니다.","position":{"start":{"line":216,"column":27,"offset":4413},"end":{"line":216,"column":36,"offset":4422},"indent":[]}}],"position":{"start":{"line":216,"column":1,"offset":4387},"end":{"line":216,"column":36,"offset":4422},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"바이트 코드를 생성하여 런타임 시점에 적용하는 방식","position":{"start":{"line":218,"column":3,"offset":4426},"end":{"line":218,"column":31,"offset":4454},"indent":[]}}],"position":{"start":{"line":218,"column":3,"offset":4426},"end":{"line":218,"column":31,"offset":4454},"indent":[]}}],"position":{"start":{"line":218,"column":1,"offset":4424},"end":{"line":218,"column":31,"offset":4454},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"동일한 ","position":{"start":{"line":220,"column":1,"offset":4456},"end":{"line":220,"column":5,"offset":4460},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Bean(Class)</code>","position":{"start":{"line":220,"column":5,"offset":4460},"end":{"line":220,"column":18,"offset":4473},"indent":[]}},{"type":"text","value":"에서 ","position":{"start":{"line":220,"column":18,"offset":4473},"end":{"line":220,"column":21,"offset":4476},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Spring AOP CGLIB</code>","position":{"start":{"line":220,"column":21,"offset":4476},"end":{"line":220,"column":39,"offset":4494},"indent":[]}},{"type":"text","value":"이 동작하지 않기 때문에 위의 ","position":{"start":{"line":220,"column":39,"offset":4494},"end":{"line":220,"column":56,"offset":4511},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">update()</code>","position":{"start":{"line":220,"column":56,"offset":4511},"end":{"line":220,"column":66,"offset":4521},"indent":[]}},{"type":"text","value":"메서드를 외부에서 생성하여 호출해야합니다.","position":{"start":{"line":220,"column":66,"offset":4521},"end":{"line":220,"column":89,"offset":4544},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":4456},"end":{"line":220,"column":89,"offset":4544},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Runner</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationRunner</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">PostService</span> postService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ApplicationArguments</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n    postService<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":222,"column":1,"offset":4546},"end":{"line":235,"column":4,"offset":4813},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":237,"column":1,"offset":4815},"end":{"line":237,"column":4,"offset":4818},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"운영 환경에서도 정상 동작하는 트랜잭션","position":{"start":{"line":239,"column":3,"offset":4822},"end":{"line":239,"column":24,"offset":4843},"indent":[]}}],"position":{"start":{"line":239,"column":1,"offset":4820},"end":{"line":239,"column":26,"offset":4845},"indent":[]}}],"position":{"start":{"line":239,"column":1,"offset":4820},"end":{"line":239,"column":26,"offset":4845},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">@Modifying</code>","position":{"start":{"line":241,"column":3,"offset":4849},"end":{"line":241,"column":15,"offset":4861},"indent":[]}},{"type":"text","value":"만 설정하고 위의 방법으로 트랜잭션을 걸었을 경우 트랜잭션이 잘 동작하니 초기 테스트 환경처럼 정상적으로 에러가 발생합니다.","position":{"start":{"line":241,"column":15,"offset":4861},"end":{"line":241,"column":84,"offset":4930},"indent":[]}}],"position":{"start":{"line":241,"column":3,"offset":4849},"end":{"line":241,"column":84,"offset":4930},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/transaction-error.png","alt":"트랜잭셔널 이슈","position":{"start":{"line":243,"column":3,"offset":4934},"end":{"line":243,"column":46,"offset":4977},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d30374db33665dd4381048eadbe1f568/9d362/transaction-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.78723404255319%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVQoz21S2Y6jMADrz4xayg2BkAPKFUpnVjtaaTX//ycehyndVtoHy0kIjmPn8PX3E79/XbEsA5zr4eYBjW7QqjdUZYQsL1GkMfJScFwgSRKEYbjhfD5veJ4f5tsHxusNprvAXgbYfoCoJKw64zqnUDpDIXKuFRB1hqpKOS8QJzHCJ7Edh25yeP/8g9mLUlATUltoY2HbFsoaCClRNQ3qhiwbCr/iZ01yX4PDsCxY1xXTPMG0ApIbcl6t1AaB0ogahZCcc7MxLYxtoa39YR6qjOHB3cb1Jjg7NDy9LAsKRYijeMsiYlYnIvDZBME9r2cOnjLcwSsrnlTXNSSvVZbZI3QvGNxxSlOEcYyU7L973sceu/BWirIdr+IzM9C6YLMVYv6c0/UbcdQaR3JSliykRkIh//0ZL6V4sVbW6I3GqBQs3epKoNWKzqstCpEmqPMciutVlr442p/Nw6Fm6IbtLc5hHAe+R4dpHDH0/VaCUgY9x35uWUZF8eg/z+WfQzbY0Z0XdPO88UxhoQc2PJEvW5uS7vKMGZ+OLOmE4F7U7u4hKCnYqgbvdLZOEzHi5masXpxOl+EC13fo+R477lP3AoUQiKLoRczjG+KrY2pIUEn0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"트랜잭셔널 이슈\"\n        title=\"트랜잭셔널 이슈\"\n        src=\"/static/d30374db33665dd4381048eadbe1f568/1d69c/transaction-error.png\"\n        srcset=\"/static/d30374db33665dd4381048eadbe1f568/4dcb9/transaction-error.png 188w,\n/static/d30374db33665dd4381048eadbe1f568/5ff7e/transaction-error.png 375w,\n/static/d30374db33665dd4381048eadbe1f568/1d69c/transaction-error.png 750w,\n/static/d30374db33665dd4381048eadbe1f568/78797/transaction-error.png 1125w,\n/static/d30374db33665dd4381048eadbe1f568/aa440/transaction-error.png 1500w,\n/static/d30374db33665dd4381048eadbe1f568/9d362/transaction-error.png 3278w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":243,"column":3,"offset":4934},"end":{"line":243,"column":46,"offset":4977},"indent":[]}}],"position":{"start":{"line":241,"column":1,"offset":4847},"end":{"line":243,"column":46,"offset":4977},"indent":[1,1]}}],"position":{"start":{"line":241,"column":1,"offset":4847},"end":{"line":243,"column":46,"offset":4977},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"✔︎ 두번째 문제점 해결","position":{"start":{"line":245,"column":3,"offset":4981},"end":{"line":245,"column":16,"offset":4994},"indent":[]}}],"position":{"start":{"line":245,"column":1,"offset":4979},"end":{"line":245,"column":18,"offset":4996},"indent":[]}}],"position":{"start":{"line":245,"column":1,"offset":4979},"end":{"line":245,"column":18,"offset":4996},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">@Modifying(clearAutomatically = true)</code>","position":{"start":{"line":247,"column":3,"offset":5000},"end":{"line":247,"column":42,"offset":5039},"indent":[]}},{"type":"text","value":"를 적용시키면 운영 환경 또한 잘 동작하는 것을 확인할 수 있습니다.","position":{"start":{"line":247,"column":42,"offset":5039},"end":{"line":247,"column":80,"offset":5077},"indent":[]}}],"position":{"start":{"line":247,"column":3,"offset":5000},"end":{"line":247,"column":80,"offset":5077},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/transaction-solution.png","alt":"트랜잭셔널 해결","position":{"start":{"line":249,"column":3,"offset":5081},"end":{"line":249,"column":49,"offset":5127},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9b0ddf6858bc9f19330d87df041b12b/9d362/transaction-solution.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.319148936170215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQoz4VSa4+bMBDkr5zulBYMhIcBP8CEVwhXVVGl6v7/P5kb0ySKTpXuw8jWrj27M7vBx98rrr8vOJ9HLMsJyzxAW43eHmBUAaUdlMwgqwpFKZEXGZI0QZL8H8G8/cK4brCuR9sPaE8DylpBNyHWOYM2OYkylERRpZAy3UlFHCMMwx1RFCG63QM3LXi//sG8vsOS0LgBjWnZZQtlNKqmZoGaZ7PfZd2grOov+BfzueC8bVjXFct5QddLqEazgwKybRGSNDYWgsi1RudVdA6Gcdt2+6mtRevcftaNQjCtF2g+bli9KBOkSQpBCfExxQ8i9NK8JBFBCIGYEF/wHAs0K0kp6VGJlGZ7P+7J6P7wFtu9+gZBrS27U2gp0ZgaSinE7Co+HvGTiHgXz0W+JzR7d56ooHdpmj6SYpcqHnhI9EWe7nc8JDuaOk0jHIdSc1pFnqOirwdaceD+HbwdjDWctofixJXi1Jmr+CbLMhypxpMGfv/GccS8TJjPErYxOLJL2XV4aS1eWexVK+QkPA3DPl1Le1zf7yhY7LGLXrLpegxc5mme+KGA5lInrFRyDV748W0nblFyC7beYT312IYTLjznjsR1heRmjZf8CV/WYRs03/7XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"트랜잭셔널 해결\"\n        title=\"트랜잭셔널 해결\"\n        src=\"/static/a9b0ddf6858bc9f19330d87df041b12b/1d69c/transaction-solution.png\"\n        srcset=\"/static/a9b0ddf6858bc9f19330d87df041b12b/4dcb9/transaction-solution.png 188w,\n/static/a9b0ddf6858bc9f19330d87df041b12b/5ff7e/transaction-solution.png 375w,\n/static/a9b0ddf6858bc9f19330d87df041b12b/1d69c/transaction-solution.png 750w,\n/static/a9b0ddf6858bc9f19330d87df041b12b/78797/transaction-solution.png 1125w,\n/static/a9b0ddf6858bc9f19330d87df041b12b/aa440/transaction-solution.png 1500w,\n/static/a9b0ddf6858bc9f19330d87df041b12b/9d362/transaction-solution.png 3278w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":249,"column":3,"offset":5081},"end":{"line":249,"column":49,"offset":5127},"indent":[]}}],"position":{"start":{"line":247,"column":1,"offset":4998},"end":{"line":249,"column":49,"offset":5127},"indent":[1,1]}}],"position":{"start":{"line":247,"column":1,"offset":4998},"end":{"line":249,"column":49,"offset":5127},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"참고","position":{"start":{"line":251,"column":3,"offset":5131},"end":{"line":251,"column":5,"offset":5133},"indent":[]}}],"position":{"start":{"line":251,"column":1,"offset":5129},"end":{"line":251,"column":7,"offset":5135},"indent":[]}}],"position":{"start":{"line":251,"column":1,"offset":5129},"end":{"line":251,"column":7,"offset":5135},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://cheese10yun.github.io/spring-transacion-same-bean","children":[{"type":"text","value":"https://cheese10yun.github.io/spring-transacion-same-bean","position":{"start":{"line":253,"column":3,"offset":5139},"end":{"line":253,"column":60,"offset":5196},"indent":[]}}],"position":{"start":{"line":253,"column":3,"offset":5139},"end":{"line":253,"column":60,"offset":5196},"indent":[]}}],"position":{"start":{"line":253,"column":3,"offset":5139},"end":{"line":253,"column":60,"offset":5196},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":5137},"end":{"line":253,"column":60,"offset":5196},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://mommoo.tistory.com/92","children":[{"type":"text","value":"https://mommoo.tistory.com/92","position":{"start":{"line":254,"column":3,"offset":5199},"end":{"line":254,"column":32,"offset":5228},"indent":[]}}],"position":{"start":{"line":254,"column":3,"offset":5199},"end":{"line":254,"column":32,"offset":5228},"indent":[]}}],"position":{"start":{"line":254,"column":3,"offset":5199},"end":{"line":254,"column":32,"offset":5228},"indent":[]}}],"position":{"start":{"line":254,"column":1,"offset":5197},"end":{"line":254,"column":32,"offset":5228},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":5137},"end":{"line":254,"column":32,"offset":5228},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#결론","title":null,"children":[],"data":{"hProperties":{"aria-label":"결론 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"결론","position":{"start":{"line":256,"column":4,"offset":5233},"end":{"line":256,"column":6,"offset":5235},"indent":[]}}],"position":{"start":{"line":256,"column":1,"offset":5230},"end":{"line":256,"column":6,"offset":5235},"indent":[]},"data":{"id":"결론","htmlAttributes":{"id":"결론"},"hProperties":{"id":"결론","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"이처럼 스터디때 공유된 내용은 쉽게 실수할 수 있는 문제 2가지가 모두 있었습니다.","position":{"start":{"line":258,"column":1,"offset":5237},"end":{"line":258,"column":47,"offset":5283},"indent":[]}}],"position":{"start":{"line":258,"column":1,"offset":5237},"end":{"line":258,"column":47,"offset":5283},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"정확한 개념을 알고 있는 것이 중요하다는 것을 다시 한번 깨달았고 저도 생각하지 못했던 이슈를 공유하는 유익한 시간이었던 것 같습니다 !","position":{"start":{"line":260,"column":1,"offset":5285},"end":{"line":260,"column":77,"offset":5361},"indent":[]}}],"position":{"start":{"line":260,"column":1,"offset":5285},"end":{"line":260,"column":77,"offset":5361},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":261,"column":1,"offset":5362}}}}