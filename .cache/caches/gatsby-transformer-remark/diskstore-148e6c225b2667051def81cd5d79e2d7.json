{"expireTime":9007200896353687000,"key":"transformer-remark-markdown-ast-57591eb3cd67825a06cfcbadce6847bb-gatsby-remark-code-titlesgatsby-remark-embed-youtubegatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-custom-blocksgatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"link","url":"#개요","title":null,"children":[],"data":{"hProperties":{"aria-label":"개요 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"개요","position":{"start":{"line":2,"column":4,"offset":4},"end":{"line":2,"column":6,"offset":6},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":6,"offset":6},"indent":[]},"data":{"id":"개요","htmlAttributes":{"id":"개요"},"hProperties":{"id":"개요","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">AOP</code>","position":{"start":{"line":4,"column":1,"offset":8},"end":{"line":4,"column":6,"offset":13},"indent":[]}},{"type":"text","value":"는 ","position":{"start":{"line":4,"column":6,"offset":13},"end":{"line":4,"column":8,"offset":15},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">IoC/DI</code>","position":{"start":{"line":4,"column":8,"offset":15},"end":{"line":4,"column":16,"offset":23},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":4,"column":16,"offset":23},"end":{"line":4,"column":18,"offset":25},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">서비스 추상화</code>","position":{"start":{"line":4,"column":18,"offset":25},"end":{"line":4,"column":27,"offset":34},"indent":[]}},{"type":"text","value":"와 더불어 스프링의 3개 기반기술의 하나입니다.","position":{"start":{"line":4,"column":27,"offset":34},"end":{"line":4,"column":53,"offset":60},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":8},"end":{"line":4,"column":53,"offset":60},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"스프링에 적용된 가장 인기 있는 ","position":{"start":{"line":6,"column":1,"offset":62},"end":{"line":6,"column":19,"offset":80},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">AOP</code>","position":{"start":{"line":6,"column":19,"offset":80},"end":{"line":6,"column":24,"offset":85},"indent":[]}},{"type":"text","value":"의 적용 대상은 바로 선언적 트랜잭션 기능입니다.","position":{"start":{"line":6,"column":24,"offset":85},"end":{"line":6,"column":51,"offset":112},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":62},"end":{"line":6,"column":51,"offset":112},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"이번 포스팅에서는 서비스 추상화로 많은 근본적인 문제를 해결했던 트랜잭션 경계 설정 기능을 ","position":{"start":{"line":8,"column":1,"offset":114},"end":{"line":8,"column":52,"offset":165},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">AOP</code>","position":{"start":{"line":8,"column":52,"offset":165},"end":{"line":8,"column":57,"offset":170},"indent":[]}},{"type":"text","value":"를 이용해 더 깔끔한 방식으로 바꿔보겠습니다.","position":{"start":{"line":8,"column":57,"offset":170},"end":{"line":8,"column":82,"offset":195},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":114},"end":{"line":8,"column":82,"offset":195},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#1-트랜잭션-코드의-분리","title":null,"children":[],"data":{"hProperties":{"aria-label":"1 트랜잭션 코드의 분리 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"1. 트랜잭션 코드의 분리","position":{"start":{"line":10,"column":4,"offset":200},"end":{"line":10,"column":18,"offset":214},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":197},"end":{"line":10,"column":18,"offset":214},"indent":[]},"data":{"id":"1-트랜잭션-코드의-분리","htmlAttributes":{"id":"1-트랜잭션-코드의-분리"},"hProperties":{"id":"1-트랜잭션-코드의-분리","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"여러 기술과 환경에 독립적인 깔끔한 UserService 코드이지만, 한가지 찜찜한 문제가 있습니다.","position":{"start":{"line":12,"column":1,"offset":216},"end":{"line":12,"column":57,"offset":272},"indent":[]}},{"type":"break","position":{"start":{"line":12,"column":57,"offset":272},"end":{"line":13,"column":1,"offset":275},"indent":[1]}},{"type":"text","value":"바로 트랜잭션 경계설정 부분입니다.","position":{"start":{"line":13,"column":1,"offset":275},"end":{"line":13,"column":20,"offset":294},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":216},"end":{"line":13,"column":20,"offset":294},"indent":[1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"트랜잭션과 비즈니스 로직이 공존하는 메소드","position":{"start":{"line":15,"column":3,"offset":298},"end":{"line":15,"column":26,"offset":321},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":296},"end":{"line":15,"column":28,"offset":323},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":296},"end":{"line":15,"column":28,"offset":323},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">upgradeLevels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 트랜잭션 전 처리</span>\n    <span class=\"token class-name\">PlatformTransactionManager</span> transactionManager\n        <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSourceTransactionManager</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">TransactionStatus</span> status <span class=\"token operator\">=</span>\n        transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultTransactionDefinition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 비즈니스 로직</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> users <span class=\"token operator\">=</span> userDao<span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user <span class=\"token operator\">:</span> users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">canUpgradeLevel</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">upgradeUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// 트랜잭션 후 처리</span>\n        transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":17,"column":1,"offset":325},"end":{"line":39,"column":4,"offset":997},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"비즈니스 로직 코드를 사이에 두고 트랜잭션 시작과 종료를 담당하는 코드가 전후로 존재합니다.","position":{"start":{"line":41,"column":1,"offset":999},"end":{"line":41,"column":52,"offset":1050},"indent":[]}},{"type":"break","position":{"start":{"line":41,"column":52,"offset":1050},"end":{"line":42,"column":1,"offset":1053},"indent":[1]}},{"type":"text","value":"UserService 클래스에서는 비즈니스 로직만 담는 것이 이상적인 설계입니다.","position":{"start":{"line":42,"column":1,"offset":1053},"end":{"line":42,"column":46,"offset":1098},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":999},"end":{"line":42,"column":46,"offset":1098},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#1-di를-이용한-클래스의-분리","title":null,"children":[],"data":{"hProperties":{"aria-label":"1 di를 이용한 클래스의 분리 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"1) DI를 이용한 클래스의 분리","position":{"start":{"line":44,"column":6,"offset":1105},"end":{"line":44,"column":24,"offset":1123},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":1100},"end":{"line":44,"column":24,"offset":1123},"indent":[]},"data":{"id":"1-di를-이용한-클래스의-분리","htmlAttributes":{"id":"1-di를-이용한-클래스의-분리"},"hProperties":{"id":"1-di를-이용한-클래스의-분리","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"그렇다면, ","position":{"start":{"line":46,"column":1,"offset":1125},"end":{"line":46,"column":7,"offset":1131},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">트랜잭션 처리 부분을 분리</code>","position":{"start":{"line":46,"column":7,"offset":1131},"end":{"line":46,"column":23,"offset":1147},"indent":[]}},{"type":"text","value":"하는 것은 어떨까?!","position":{"start":{"line":46,"column":23,"offset":1147},"end":{"line":46,"column":34,"offset":1158},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1125},"end":{"line":46,"column":34,"offset":1158},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"현재 UserService는 클래스로 되어있어 다른 코드에서 사용한다면 UserService를 직접 참조하게 되어 ","position":{"start":{"line":48,"column":1,"offset":1160},"end":{"line":48,"column":65,"offset":1224},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">강한 결합도</code>","position":{"start":{"line":48,"column":65,"offset":1224},"end":{"line":48,"column":73,"offset":1232},"indent":[]}},{"type":"text","value":"를 가지게 됩니다.","position":{"start":{"line":48,"column":73,"offset":1232},"end":{"line":48,"column":83,"offset":1242},"indent":[]}},{"type":"break","position":{"start":{"line":48,"column":83,"offset":1242},"end":{"line":49,"column":1,"offset":1245},"indent":[1]}},{"type":"text","value":"따라서, 이전에 계속 반복했던 ","position":{"start":{"line":49,"column":1,"offset":1245},"end":{"line":49,"column":18,"offset":1262},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">인터페이스</code>","position":{"start":{"line":49,"column":18,"offset":1262},"end":{"line":49,"column":25,"offset":1269},"indent":[]}},{"type":"text","value":"를 활용하여 강한 결합도를 분리합니다.","position":{"start":{"line":49,"column":25,"offset":1269},"end":{"line":49,"column":46,"offset":1290},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1160},"end":{"line":49,"column":46,"offset":1290},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"또한, UserService의 비즈니스 처리 구현체인 UserServiceImpl과 트랜잭션 구현체인 UserServiceTx 2가지 클래스를 만듭니다.","position":{"start":{"line":51,"column":1,"offset":1292},"end":{"line":51,"column":86,"offset":1377},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1292},"end":{"line":51,"column":86,"offset":1377},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"UserServiceImpl: UserService의 순수한 비즈니스 로직 구현체","position":{"start":{"line":53,"column":3,"offset":1381},"end":{"line":53,"column":48,"offset":1426},"indent":[]}}],"position":{"start":{"line":53,"column":3,"offset":1381},"end":{"line":53,"column":48,"offset":1426},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1379},"end":{"line":53,"column":48,"offset":1426},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"UserServiceTx : 트랜잭션 처리 책임을 맡고 있는 구현체","position":{"start":{"line":54,"column":3,"offset":1429},"end":{"line":54,"column":40,"offset":1466},"indent":[]}}],"position":{"start":{"line":54,"column":3,"offset":1429},"end":{"line":54,"column":40,"offset":1466},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":1427},"end":{"line":54,"column":40,"offset":1466},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1379},"end":{"line":54,"column":40,"offset":1466},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"앞서 말한 구조는 다음과 같습니다.","position":{"start":{"line":56,"column":1,"offset":1468},"end":{"line":56,"column":20,"offset":1487},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":1468},"end":{"line":56,"column":20,"offset":1487},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-1.png","alt":"AOP 1","position":{"start":{"line":58,"column":1,"offset":1489},"end":{"line":58,"column":29,"offset":1517},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6fea5fb6c8dd964e659fa5ce9db808c6/7ae9c/AOP-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.4468085106383%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1ElEQVQY03WQ2Q6EIAxF/f+f1Ji44Q4Yl4idOTU4Mw9D0gDt5fTSZJ5n2bZNyrKUvu9l33chF0IQ1rqu4pyVZVkkz3MpikLPUXNd108k1s5S17VkWaYPxnGUYRjEWvs0mqZJwWmavnWpHMchxjSqA04453RPEOOMPcIoxBXC+YiBG2P07L3TOq5uXbiBMfFtG2d8HVc4BcgXY9CcHDU06AkFQo4BLM6w6zp1VFWVusL9Z6buqTMuGnD/C6QzY0DcNI20bauP0AD03utoqNMMA9zP85QXGr7NqhOUQtgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 1\"\n        title=\"AOP 1\"\n        src=\"/static/6fea5fb6c8dd964e659fa5ce9db808c6/1d69c/AOP-1.png\"\n        srcset=\"/static/6fea5fb6c8dd964e659fa5ce9db808c6/4dcb9/AOP-1.png 188w,\n/static/6fea5fb6c8dd964e659fa5ce9db808c6/5ff7e/AOP-1.png 375w,\n/static/6fea5fb6c8dd964e659fa5ce9db808c6/1d69c/AOP-1.png 750w,\n/static/6fea5fb6c8dd964e659fa5ce9db808c6/7ae9c/AOP-1.png 972w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":58,"column":1,"offset":1489},"end":{"line":58,"column":29,"offset":1517},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#2-분리된-트랜잭션-기능","title":null,"children":[],"data":{"hProperties":{"aria-label":"2 분리된 트랜잭션 기능 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2) 분리된 트랜잭션 기능","position":{"start":{"line":60,"column":6,"offset":1524},"end":{"line":60,"column":20,"offset":1538},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":1519},"end":{"line":60,"column":20,"offset":1538},"indent":[]},"data":{"id":"2-분리된-트랜잭션-기능","htmlAttributes":{"id":"2-분리된-트랜잭션-기능"},"hProperties":{"id":"2-분리된-트랜잭션-기능","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"UserService 인터페이스","position":{"start":{"line":62,"column":3,"offset":1542},"end":{"line":62,"column":20,"offset":1559},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":1540},"end":{"line":62,"column":22,"offset":1561},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":1540},"end":{"line":62,"column":22,"offset":1561},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">upgradeLevels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":64,"column":1,"offset":1563},"end":{"line":69,"column":4,"offset":1669},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"트랜잭션 코드를 제거한 UserService 구현 클래스","position":{"start":{"line":71,"column":3,"offset":1673},"end":{"line":71,"column":34,"offset":1704},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":1671},"end":{"line":71,"column":36,"offset":1706},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":1671},"end":{"line":71,"column":36,"offset":1706},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">upgradeLevels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> users <span class=\"token operator\">=</span> userDao<span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user <span class=\"token operator\">:</span> users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">canUpgradeLevel</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">upgradeLevel</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":73,"column":1,"offset":1708},"end":{"line":88,"column":4,"offset":2043},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"위임 기능을 가진 UserServiceTx 트랜잭션 클래스","position":{"start":{"line":90,"column":3,"offset":2047},"end":{"line":90,"column":35,"offset":2079},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":2045},"end":{"line":90,"column":37,"offset":2081},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":2045},"end":{"line":90,"column":37,"offset":2081},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserServiceTx</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        userService<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">upgradeLevels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">TransactionStatus</span> status <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager\n            <span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultTransactionDefinition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            userService<span class=\"token punctuation\">.</span><span class=\"token function\">upgradeLevels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":92,"column":1,"offset":2083},"end":{"line":112,"column":4,"offset":2614},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"트랜잭션 로직의 ","position":{"start":{"line":114,"column":1,"offset":2616},"end":{"line":114,"column":10,"offset":2625},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">역할</code>","position":{"start":{"line":114,"column":10,"offset":2625},"end":{"line":114,"column":14,"offset":2629},"indent":[]}},{"type":"text","value":"은 비즈니스 로직 처리 전후로 ","position":{"start":{"line":114,"column":14,"offset":2629},"end":{"line":114,"column":31,"offset":2646},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">트랜잭션 경계설정</code>","position":{"start":{"line":114,"column":31,"offset":2646},"end":{"line":114,"column":42,"offset":2657},"indent":[]}},{"type":"text","value":"을 해주고 실행될 비즈니스 로직을 ","position":{"start":{"line":114,"column":42,"offset":2657},"end":{"line":114,"column":61,"offset":2676},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">위임하는 역할</code>","position":{"start":{"line":114,"column":61,"offset":2676},"end":{"line":114,"column":70,"offset":2685},"indent":[]}},{"type":"text","value":"입니다.","position":{"start":{"line":114,"column":70,"offset":2685},"end":{"line":114,"column":74,"offset":2689},"indent":[]}},{"type":"break","position":{"start":{"line":114,"column":74,"offset":2689},"end":{"line":115,"column":1,"offset":2692},"indent":[1]}},{"type":"text","value":"이제 비즈니스 로직과 트랜잭션 로직 처리 코드가 깔끔하게 분리되었습니다.","position":{"start":{"line":115,"column":1,"offset":2692},"end":{"line":115,"column":41,"offset":2732},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":2616},"end":{"line":115,"column":41,"offset":2732},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#3-트랜잭션-적용을-위한-di-설정","title":null,"children":[],"data":{"hProperties":{"aria-label":"3 트랜잭션 적용을 위한 di 설정 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"3) 트랜잭션 적용을 위한 DI 설정","position":{"start":{"line":117,"column":6,"offset":2739},"end":{"line":117,"column":26,"offset":2759},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":2734},"end":{"line":117,"column":26,"offset":2759},"indent":[]},"data":{"id":"3-트랜잭션-적용을-위한-di-설정","htmlAttributes":{"id":"3-트랜잭션-적용을-위한-di-설정"},"hProperties":{"id":"3-트랜잭션-적용을-위한-di-설정","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"기본적으로 ","position":{"start":{"line":119,"column":1,"offset":2761},"end":{"line":119,"column":7,"offset":2767},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Autowired</code>","position":{"start":{"line":119,"column":7,"offset":2767},"end":{"line":119,"column":19,"offset":2779},"indent":[]}},{"type":"text","value":"는 타입이 일치하는 빈을 가져오는데 현재는 UserService를 구현한 두 개의 빈이 존재합니다.","position":{"start":{"line":119,"column":19,"offset":2779},"end":{"line":119,"column":74,"offset":2834},"indent":[]}},{"type":"break","position":{"start":{"line":119,"column":74,"offset":2834},"end":{"line":120,"column":1,"offset":2837},"indent":[1]}},{"type":"text","value":"그렇기에 Spring의 DI기능을 사용하기 위해서는 같은 타입의 빈을 구별할 수 있도록 필드 이름을 수정해주어야합니다.","position":{"start":{"line":120,"column":1,"offset":2837},"end":{"line":120,"column":67,"offset":2903},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":2761},"end":{"line":120,"column":67,"offset":2903},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"DI 규칙은 다음과 같습니다.","position":{"start":{"line":122,"column":1,"offset":2905},"end":{"line":122,"column":17,"offset":2921},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":2905},"end":{"line":122,"column":17,"offset":2921},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"스프링 컨테이너가 같은 ","position":{"start":{"line":124,"column":4,"offset":2926},"end":{"line":124,"column":17,"offset":2939},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Class Type</code>","position":{"start":{"line":124,"column":17,"offset":2939},"end":{"line":124,"column":29,"offset":2951},"indent":[]}},{"type":"text","value":"으로 빈을 찾습니다.","position":{"start":{"line":124,"column":29,"offset":2951},"end":{"line":124,"column":40,"offset":2962},"indent":[]}}],"position":{"start":{"line":124,"column":4,"offset":2926},"end":{"line":124,"column":40,"offset":2962},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":2923},"end":{"line":124,"column":40,"offset":2962},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">Class Type</code>","position":{"start":{"line":125,"column":4,"offset":2966},"end":{"line":125,"column":16,"offset":2978},"indent":[]}},{"type":"text","value":"이 중복된다면, ","position":{"start":{"line":125,"column":16,"offset":2978},"end":{"line":125,"column":25,"offset":2987},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">필드명</code>","position":{"start":{"line":125,"column":25,"offset":2987},"end":{"line":125,"column":30,"offset":2992},"indent":[]}},{"type":"text","value":"으로 빈을 찾습니다.","position":{"start":{"line":125,"column":30,"offset":2992},"end":{"line":125,"column":41,"offset":3003},"indent":[]}}],"position":{"start":{"line":125,"column":4,"offset":2966},"end":{"line":125,"column":41,"offset":3003},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":2963},"end":{"line":125,"column":41,"offset":3003},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":2923},"end":{"line":125,"column":41,"offset":3003},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#4-트랜잭션-처리-코드-분리의-장점","title":null,"children":[],"data":{"hProperties":{"aria-label":"4 트랜잭션 처리 코드 분리의 장점 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"4) 트랜잭션 처리 코드 분리의 장점","position":{"start":{"line":127,"column":6,"offset":3010},"end":{"line":127,"column":26,"offset":3030},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":3005},"end":{"line":127,"column":26,"offset":3030},"indent":[]},"data":{"id":"4-트랜잭션-처리-코드-분리의-장점","htmlAttributes":{"id":"4-트랜잭션-처리-코드-분리의-장점"},"hProperties":{"id":"4-트랜잭션-처리-코드-분리의-장점","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"비즈니스 코드와 트랜잭션 처리 코드를 분리했을 때의 ","position":{"start":{"line":129,"column":1,"offset":3032},"end":{"line":129,"column":30,"offset":3061},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">장점</code>","position":{"start":{"line":129,"column":30,"offset":3061},"end":{"line":129,"column":34,"offset":3065},"indent":[]}},{"type":"text","value":"은 다음과 같습니다.","position":{"start":{"line":129,"column":34,"offset":3065},"end":{"line":129,"column":45,"offset":3076},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":3032},"end":{"line":129,"column":45,"offset":3076},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"비즈니스 로직을 담당하는 코드를 작성할 때는 트랜잭션과 관련된 내용에 대해 신경쓰지 않아도 됩니다.","position":{"start":{"line":131,"column":3,"offset":3080},"end":{"line":131,"column":58,"offset":3135},"indent":[]}}],"position":{"start":{"line":131,"column":3,"offset":3080},"end":{"line":131,"column":58,"offset":3135},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":3078},"end":{"line":131,"column":58,"offset":3135},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"비즈니스 로직에 대한 테스트 코드를 작성하기 쉬워집니다.","position":{"start":{"line":132,"column":3,"offset":3138},"end":{"line":132,"column":34,"offset":3169},"indent":[]}}],"position":{"start":{"line":132,"column":3,"offset":3138},"end":{"line":132,"column":34,"offset":3169},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":3136},"end":{"line":132,"column":34,"offset":3169},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":3078},"end":{"line":132,"column":34,"offset":3169},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#2-고립된-단위-테스트","title":null,"children":[],"data":{"hProperties":{"aria-label":"2 고립된 단위 테스트 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2. 고립된 단위 테스트","position":{"start":{"line":134,"column":4,"offset":3174},"end":{"line":134,"column":17,"offset":3187},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":3171},"end":{"line":134,"column":17,"offset":3187},"indent":[]},"data":{"id":"2-고립된-단위-테스트","htmlAttributes":{"id":"2-고립된-단위-테스트"},"hProperties":{"id":"2-고립된-단위-테스트","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"가장 편하고 좋은 테스트 방법은 ","position":{"start":{"line":136,"column":1,"offset":3189},"end":{"line":136,"column":19,"offset":3207},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">가능한 한 작은 단위</code>","position":{"start":{"line":136,"column":19,"offset":3207},"end":{"line":136,"column":32,"offset":3220},"indent":[]}},{"type":"text","value":"로 쪼개서 테스트하는 것입니다.","position":{"start":{"line":136,"column":32,"offset":3220},"end":{"line":136,"column":49,"offset":3237},"indent":[]}},{"type":"break","position":{"start":{"line":136,"column":49,"offset":3237},"end":{"line":137,"column":1,"offset":3240},"indent":[1]}},{"type":"text","value":"작은 단위의 테스트가 좋은 이유는 테스트가 실패했을 때 그 ","position":{"start":{"line":137,"column":1,"offset":3240},"end":{"line":137,"column":34,"offset":3273},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">원인</code>","position":{"start":{"line":137,"column":34,"offset":3273},"end":{"line":137,"column":38,"offset":3277},"indent":[]}},{"type":"text","value":"을 찾기 쉬워지기 때문입니다.","position":{"start":{"line":137,"column":38,"offset":3277},"end":{"line":137,"column":54,"offset":3293},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":3189},"end":{"line":137,"column":54,"offset":3293},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-2.png","alt":"AOP 2","position":{"start":{"line":139,"column":1,"offset":3295},"end":{"line":139,"column":29,"offset":3323},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17a7b72c61740780287de25d4bfdc4c3/c1b63/AOP-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.4468085106383%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1UlEQVQY03WQWY6EMAxE+/5X44Mb0E1Ywg5iE3tNV42CRkgTySpHTtnPeV3XBZ6n8hzHgSzLkKapoixLaZIkyPMcdV3DmOibF5jnWZ7XeZ5YlgXrukq3bcM0Tcpp+HxCNbXWoqoqqTFGtWEYpH3fy3M3LIoCURR9J8foug7vdwDP8+D7vsyOirm1qWjcJg7obsjCvu8iY/DOB1wvjmOEYSgqxu/6Cdq2RdM0UoKwRpCbkE2e4Q5NJKTJaRAEouVQN+j+Q5rZ9L941sdxFB2J+H/c6u+7H+Nxy6JEn47wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 2\"\n        title=\"AOP 2\"\n        src=\"/static/17a7b72c61740780287de25d4bfdc4c3/1d69c/AOP-2.png\"\n        srcset=\"/static/17a7b72c61740780287de25d4bfdc4c3/4dcb9/AOP-2.png 188w,\n/static/17a7b72c61740780287de25d4bfdc4c3/5ff7e/AOP-2.png 375w,\n/static/17a7b72c61740780287de25d4bfdc4c3/1d69c/AOP-2.png 750w,\n/static/17a7b72c61740780287de25d4bfdc4c3/78797/AOP-2.png 1125w,\n/static/17a7b72c61740780287de25d4bfdc4c3/c1b63/AOP-2.png 1200w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":139,"column":1,"offset":3295},"end":{"line":139,"column":29,"offset":3323},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"하지만, 위의 그림처럼 여러 의존 관계를 가진 객체들이 존재하기에 원하는 대로 쪼갤 수 없는 경우가 있습니다.","position":{"start":{"line":141,"column":1,"offset":3325},"end":{"line":141,"column":62,"offset":3386},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":3325},"end":{"line":141,"column":62,"offset":3386},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"UserServiceTest는 오직 UserService의 기능만을 테스트하기 위한 테스트입니다.","position":{"start":{"line":143,"column":1,"offset":3388},"end":{"line":143,"column":55,"offset":3442},"indent":[]}},{"type":"break","position":{"start":{"line":143,"column":55,"offset":3442},"end":{"line":144,"column":1,"offset":3445},"indent":[1]}},{"type":"text","value":"하지만, 여러 의존 객체가 있어서 불필요한 리소스가 들고 UserService에는 문제가 없더라도 다른 의존 객체에 문제가 생겨 테스트에 실패할 수도 있습니다.","position":{"start":{"line":144,"column":1,"offset":3445},"end":{"line":144,"column":90,"offset":3534},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":3388},"end":{"line":144,"column":90,"offset":3534},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#1-테스트-대상-고립시키기","title":null,"children":[],"data":{"hProperties":{"aria-label":"1 테스트 대상 고립시키기 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"1) 테스트 대상 고립시키기","position":{"start":{"line":146,"column":6,"offset":3541},"end":{"line":146,"column":21,"offset":3556},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":3536},"end":{"line":146,"column":21,"offset":3556},"indent":[]},"data":{"id":"1-테스트-대상-고립시키기","htmlAttributes":{"id":"1-테스트-대상-고립시키기"},"hProperties":{"id":"1-테스트-대상-고립시키기","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"테스트 대상을 고립(의존성을 제거)시키길 원한다면, MailSender에 적용했던 것 처럼 ","position":{"start":{"line":148,"column":1,"offset":3558},"end":{"line":148,"column":52,"offset":3609},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">목 오브젝트</code>","position":{"start":{"line":148,"column":52,"offset":3609},"end":{"line":148,"column":60,"offset":3617},"indent":[]}},{"type":"text","value":"를 만들어 검증하는 방법을 이용하면 됩니다.","position":{"start":{"line":148,"column":60,"offset":3617},"end":{"line":148,"column":84,"offset":3641},"indent":[]}}],"position":{"start":{"line":148,"column":1,"offset":3558},"end":{"line":148,"column":84,"offset":3641},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-3.png","alt":"AOP 3","position":{"start":{"line":150,"column":1,"offset":3643},"end":{"line":150,"column":29,"offset":3671},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3f73f24511e235fa358fbe75264404e/8ae78/AOP-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.4468085106383%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA50lEQVQY02WRjYqEMAyEff9nE3yCWxVtVfyrv6ig2X45untwhaFNm5lM0uh5HglgLcsi+74r1nWVaZpkHEe/zzLPs/R97+833eu6lmEY5DgOzb2uS6LzPPXADhDgkaSu66SqKiWmaSpZln1EuC+KQmMKwdm2TaKmaSTPcwVJEOM4liRJFK/Xj7rFOQTnnBaFB9q21ULckxf9dcc5kABOrLFSlqWSgLVWnB8BYsYYFbTWfAX/z3DV+QyDn5vz7fs4tEwXtIlbhAFvFISjgvd9SwCiuISIG8jMB9e/HzOpGM4RIA6fBujyDVY7xupt0PMjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 3\"\n        title=\"AOP 3\"\n        src=\"/static/a3f73f24511e235fa358fbe75264404e/1d69c/AOP-3.png\"\n        srcset=\"/static/a3f73f24511e235fa358fbe75264404e/4dcb9/AOP-3.png 188w,\n/static/a3f73f24511e235fa358fbe75264404e/5ff7e/AOP-3.png 375w,\n/static/a3f73f24511e235fa358fbe75264404e/1d69c/AOP-3.png 750w,\n/static/a3f73f24511e235fa358fbe75264404e/8ae78/AOP-3.png 1096w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":150,"column":1,"offset":3643},"end":{"line":150,"column":29,"offset":3671},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"UserDao 목 오브젝트","position":{"start":{"line":152,"column":3,"offset":3675},"end":{"line":152,"column":17,"offset":3689},"indent":[]}}],"position":{"start":{"line":152,"column":1,"offset":3673},"end":{"line":152,"column":19,"offset":3691},"indent":[]}}],"position":{"start":{"line":152,"column":1,"offset":3673},"end":{"line":152,"column":19,"offset":3691},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MockUserDao</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserDao</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> users<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> updated <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MockUserDao</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users <span class=\"token operator\">=</span> users<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updated<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getUpdated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> updated<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 테스트에 사용되지 않는 메소드</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UnsupportedOperationException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UnsupportedOperationException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":154,"column":1,"offset":3693},"end":{"line":184,"column":4,"offset":4371},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#2-고립-단위-테스팅의-장점","title":null,"children":[],"data":{"hProperties":{"aria-label":"2 고립 단위 테스팅의 장점 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2) 고립 단위 테스팅의 장점","position":{"start":{"line":186,"column":6,"offset":4378},"end":{"line":186,"column":22,"offset":4394},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":4373},"end":{"line":186,"column":22,"offset":4394},"indent":[]},"data":{"id":"2-고립-단위-테스팅의-장점","htmlAttributes":{"id":"2-고립-단위-테스팅의-장점"},"hProperties":{"id":"2-고립-단위-테스팅의-장점","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"테스트만을 위해 완전히 독립적으로 동작하는 테스트 대상을 사용하기 때문에 스프링 컨테이너에서 빈을 가져올 필요가 없습니다.","position":{"start":{"line":188,"column":3,"offset":4398},"end":{"line":188,"column":71,"offset":4466},"indent":[]}}],"position":{"start":{"line":188,"column":3,"offset":4398},"end":{"line":188,"column":71,"offset":4466},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":4396},"end":{"line":188,"column":71,"offset":4466},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"DB 연동, 실행 & 메일 서버 등을 이용하지 않으므로 테스트의 수행 성능이 향상됩니다.","position":{"start":{"line":189,"column":3,"offset":4469},"end":{"line":189,"column":52,"offset":4518},"indent":[]}}],"position":{"start":{"line":189,"column":3,"offset":4469},"end":{"line":189,"column":52,"offset":4518},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":4467},"end":{"line":189,"column":52,"offset":4518},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":4396},"end":{"line":189,"column":52,"offset":4518},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#3-단위-테스트와-통합-테스트","title":null,"children":[],"data":{"hProperties":{"aria-label":"3 단위 테스트와 통합 테스트 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"3) 단위 테스트와 통합 테스트","position":{"start":{"line":191,"column":6,"offset":4525},"end":{"line":191,"column":23,"offset":4542},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":4520},"end":{"line":191,"column":23,"offset":4542},"indent":[]},"data":{"id":"3-단위-테스트와-통합-테스트","htmlAttributes":{"id":"3-단위-테스트와-통합-테스트"},"hProperties":{"id":"3-단위-테스트와-통합-테스트","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"이처럼 테스트 대상 클래스를 목 오브젝트 등의 테스트 대역을 사용해 의존 오브젝트나 외부의 리소스를 사용하지 않도록 고립시키는 테스트를 ","position":{"start":{"line":193,"column":1,"offset":4544},"end":{"line":193,"column":77,"offset":4620},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">단위 테스트</code>","position":{"start":{"line":193,"column":77,"offset":4620},"end":{"line":193,"column":85,"offset":4628},"indent":[]}},{"type":"text","value":"라고 합니다.","position":{"start":{"line":193,"column":85,"offset":4628},"end":{"line":193,"column":92,"offset":4635},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":4544},"end":{"line":193,"column":92,"offset":4635},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"반면에, 다른 오브젝트가 연동하도록 만들어 테스트하거나, 외부의 DB나 파일, 서비스 등의 리소스가 참여하는 테스트를 ","position":{"start":{"line":195,"column":1,"offset":4637},"end":{"line":195,"column":67,"offset":4703},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">통합 테스트</code>","position":{"start":{"line":195,"column":67,"offset":4703},"end":{"line":195,"column":75,"offset":4711},"indent":[]}},{"type":"text","value":"라고 합니다.","position":{"start":{"line":195,"column":75,"offset":4711},"end":{"line":195,"column":82,"offset":4718},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":4637},"end":{"line":195,"column":82,"offset":4718},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#4-목-프레임워크","title":null,"children":[],"data":{"hProperties":{"aria-label":"4 목 프레임워크 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"4) 목 프레임워크","position":{"start":{"line":197,"column":6,"offset":4725},"end":{"line":197,"column":16,"offset":4735},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":4720},"end":{"line":197,"column":16,"offset":4735},"indent":[]},"data":{"id":"4-목-프레임워크","htmlAttributes":{"id":"4-목-프레임워크"},"hProperties":{"id":"4-목-프레임워크","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"단위 테스트를 만들기 위해서는 스텁이나 목 오브젝트의 사용이 필수적입니다.","position":{"start":{"line":199,"column":1,"offset":4737},"end":{"line":199,"column":42,"offset":4778},"indent":[]}},{"type":"break","position":{"start":{"line":199,"column":42,"offset":4778},"end":{"line":200,"column":1,"offset":4781},"indent":[1]}},{"type":"text","value":"단위 테스트가 많은 장점을 지니고 가장 우선시해야 할 테스트 방법이지만 작성이 번거롭다는 단점이 있습니다.","position":{"start":{"line":200,"column":1,"offset":4781},"end":{"line":200,"column":60,"offset":4840},"indent":[]}},{"type":"break","position":{"start":{"line":200,"column":60,"offset":4840},"end":{"line":201,"column":1,"offset":4843},"indent":[1]}},{"type":"text","value":"이러한 단점을 해결해주도록 도와주는 다양한 목 오브젝트 프레임워크가 있습니다.","position":{"start":{"line":201,"column":1,"offset":4843},"end":{"line":201,"column":44,"offset":4886},"indent":[]}}],"position":{"start":{"line":199,"column":1,"offset":4737},"end":{"line":201,"column":44,"offset":4886},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Mockito 프레임워크","position":{"start":{"line":203,"column":3,"offset":4890},"end":{"line":203,"column":16,"offset":4903},"indent":[]}}],"position":{"start":{"line":203,"column":1,"offset":4888},"end":{"line":203,"column":18,"offset":4905},"indent":[]}}],"position":{"start":{"line":203,"column":1,"offset":4888},"end":{"line":203,"column":18,"offset":4905},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Mockito와 같은 목 프레임워크의 특징은 목 클래스를 일일이 준비해둘 필요가 없다는 점입니다.","position":{"start":{"line":205,"column":1,"offset":4907},"end":{"line":205,"column":55,"offset":4961},"indent":[]}},{"type":"break","position":{"start":{"line":205,"column":55,"offset":4961},"end":{"line":206,"column":1,"offset":4964},"indent":[1]}},{"type":"text","value":"간단한 메소드 호출만으로 다이내믹하게 특정 인터페이스를 구현한 테스트용 목 오브젝트를 생성할 수 있습니다.","position":{"start":{"line":206,"column":1,"offset":4964},"end":{"line":206,"column":60,"offset":5023},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":4907},"end":{"line":206,"column":60,"offset":5023},"indent":[1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">UserDao</span> mockUserDao <span class=\"token operator\">=</span> <span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserDao</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":208,"column":1,"offset":5025},"end":{"line":210,"column":4,"offset":5090},"indent":[1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"mock() 메소드는 org.mockito.Matchers 클래스에 정의된 스태틱 메소드","position":{"start":{"line":212,"column":3,"offset":5094},"end":{"line":212,"column":52,"offset":5143},"indent":[]}}],"position":{"start":{"line":212,"column":3,"offset":5094},"end":{"line":212,"column":52,"offset":5143},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":5092},"end":{"line":212,"column":52,"offset":5143},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">getAll()</code>","position":{"start":{"line":214,"column":1,"offset":5145},"end":{"line":214,"column":11,"offset":5155},"indent":[]}},{"type":"text","value":" 메소드가 불려올 때 사용자 목록을 리턴하도록 스텁 기능을 추가해주고 싶다면 다음의 코드면 충분합니다.","position":{"start":{"line":214,"column":11,"offset":5155},"end":{"line":214,"column":68,"offset":5212},"indent":[]}}],"position":{"start":{"line":214,"column":1,"offset":5145},"end":{"line":214,"column":68,"offset":5212},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token function\">when</span><span class=\"token punctuation\">(</span>mockUserDao<span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">thenReturn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":216,"column":1,"offset":5214},"end":{"line":218,"column":4,"offset":5288},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"또한, Mockito를 통해 만들어진 목 오브젝트는 메소드의 호출과 관련된 모든 내용을 자동으로 저장해두고, 이를 간단한 메소드로 검증할 수 있게 해줍니다.","position":{"start":{"line":220,"column":1,"offset":5290},"end":{"line":220,"column":88,"offset":5377},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":5290},"end":{"line":220,"column":88,"offset":5377},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>mockUserDao<span class=\"token punctuation\">,</span> <span class=\"token function\">times</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token function\">any</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":222,"column":1,"offset":5379},"end":{"line":224,"column":4,"offset":5456},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Mockito 목 오브젝트는 아래의 4 단계를 거칩니다.","position":{"start":{"line":226,"column":1,"offset":5458},"end":{"line":226,"column":32,"offset":5489},"indent":[]}}],"position":{"start":{"line":226,"column":1,"offset":5458},"end":{"line":226,"column":32,"offset":5489},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"인터페이스를 이용해 목 오브젝트를 만든다.","position":{"start":{"line":228,"column":3,"offset":5493},"end":{"line":228,"column":26,"offset":5516},"indent":[]}}],"position":{"start":{"line":228,"column":3,"offset":5493},"end":{"line":228,"column":26,"offset":5516},"indent":[]}}],"position":{"start":{"line":228,"column":1,"offset":5491},"end":{"line":228,"column":26,"offset":5516},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"목 오브젝트가 리턴할 값이 있으면 이를 지정해준다. 메소드가 호출되면 예외를 강제로 던지게 만들수도 있다.","position":{"start":{"line":229,"column":3,"offset":5519},"end":{"line":229,"column":62,"offset":5578},"indent":[]}}],"position":{"start":{"line":229,"column":3,"offset":5519},"end":{"line":229,"column":62,"offset":5578},"indent":[]}}],"position":{"start":{"line":229,"column":1,"offset":5517},"end":{"line":229,"column":62,"offset":5578},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"테스트 대상 오브젝트에 DI 해서 목 오브젝트가 테스트 중에 사용되도록 만든다.","position":{"start":{"line":230,"column":3,"offset":5581},"end":{"line":230,"column":47,"offset":5625},"indent":[]}}],"position":{"start":{"line":230,"column":3,"offset":5581},"end":{"line":230,"column":47,"offset":5625},"indent":[]}}],"position":{"start":{"line":230,"column":1,"offset":5579},"end":{"line":230,"column":47,"offset":5625},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"테스트 대상 오브젝트를 사용한 후에 목 오브젝트의 특정 메소드가 호출됐는지, 어떤 값을 가지고 몇 번 호출됐는지를 검증한다.","position":{"start":{"line":231,"column":3,"offset":5628},"end":{"line":231,"column":72,"offset":5697},"indent":[]}}],"position":{"start":{"line":231,"column":3,"offset":5628},"end":{"line":231,"column":72,"offset":5697},"indent":[]}}],"position":{"start":{"line":231,"column":1,"offset":5626},"end":{"line":231,"column":72,"offset":5697},"indent":[]}}],"position":{"start":{"line":228,"column":1,"offset":5491},"end":{"line":231,"column":72,"offset":5697},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#3-다이내믹-프록시와-팩토리-빈","title":null,"children":[],"data":{"hProperties":{"aria-label":"3 다이내믹 프록시와 팩토리 빈 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"3. 다이내믹 프록시와 팩토리 빈","position":{"start":{"line":233,"column":4,"offset":5702},"end":{"line":233,"column":22,"offset":5720},"indent":[]}}],"position":{"start":{"line":233,"column":1,"offset":5699},"end":{"line":233,"column":22,"offset":5720},"indent":[]},"data":{"id":"3-다이내믹-프록시와-팩토리-빈","htmlAttributes":{"id":"3-다이내믹-프록시와-팩토리-빈"},"hProperties":{"id":"3-다이내믹-프록시와-팩토리-빈","style":"position:relative;"}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#1-프록시","title":null,"children":[],"data":{"hProperties":{"aria-label":"1 프록시 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"1) 프록시","position":{"start":{"line":235,"column":6,"offset":5727},"end":{"line":235,"column":12,"offset":5733},"indent":[]}}],"position":{"start":{"line":235,"column":1,"offset":5722},"end":{"line":235,"column":12,"offset":5733},"indent":[]},"data":{"id":"1-프록시","htmlAttributes":{"id":"1-프록시"},"hProperties":{"id":"1-프록시","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"트랜잭션이라는 기능은 비즈니스 로직과는 성격이 다르기 때문에 밖으로 분리할 수 있습니다.","position":{"start":{"line":237,"column":1,"offset":5735},"end":{"line":237,"column":50,"offset":5784},"indent":[]}},{"type":"break","position":{"start":{"line":237,"column":50,"offset":5784},"end":{"line":238,"column":1,"offset":5787},"indent":[1]}},{"type":"text","value":"트랜잭션 같은 부가기능은 원래 핵심기능을 가진 클래스로 ","position":{"start":{"line":238,"column":1,"offset":5787},"end":{"line":238,"column":32,"offset":5818},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">위임</code>","position":{"start":{"line":238,"column":32,"offset":5818},"end":{"line":238,"column":36,"offset":5822},"indent":[]}},{"type":"text","value":"해줘야 합니다.","position":{"start":{"line":238,"column":36,"offset":5822},"end":{"line":238,"column":44,"offset":5830},"indent":[]}},{"type":"break","position":{"start":{"line":238,"column":44,"offset":5830},"end":{"line":239,"column":1,"offset":5833},"indent":[1]}},{"type":"text","value":"즉, ","position":{"start":{"line":239,"column":1,"offset":5833},"end":{"line":239,"column":4,"offset":5836},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">부가기능이 핵심기능을 사용하는 구조</code>","position":{"start":{"line":239,"column":4,"offset":5836},"end":{"line":239,"column":25,"offset":5857},"indent":[]}},{"type":"text","value":"가 되는것입니다.","position":{"start":{"line":239,"column":25,"offset":5857},"end":{"line":239,"column":34,"offset":5866},"indent":[]}}],"position":{"start":{"line":237,"column":1,"offset":5735},"end":{"line":239,"column":34,"offset":5866},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"문제는 이렇게 구성했더라도 클라이언트가 핵심 기능을 가진 클래스를 직접 사용해버리면 부가기능이 적용될 기회가 없습니다.","position":{"start":{"line":241,"column":1,"offset":5868},"end":{"line":241,"column":67,"offset":5934},"indent":[]}},{"type":"break","position":{"start":{"line":241,"column":67,"offset":5934},"end":{"line":242,"column":1,"offset":5937},"indent":[1]}},{"type":"text","value":"그래서 클라이언트는 ","position":{"start":{"line":242,"column":1,"offset":5937},"end":{"line":242,"column":12,"offset":5948},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">인터페이스</code>","position":{"start":{"line":242,"column":12,"offset":5948},"end":{"line":242,"column":19,"offset":5955},"indent":[]}},{"type":"text","value":"를 통해서만 핵심기능을 사용하게 하고, 부가기능 자신도 같은 ","position":{"start":{"line":242,"column":19,"offset":5955},"end":{"line":242,"column":53,"offset":5989},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">인터페이스</code>","position":{"start":{"line":242,"column":53,"offset":5989},"end":{"line":242,"column":60,"offset":5996},"indent":[]}},{"type":"text","value":"를 구현한 뒤에 자신이 그 사이에 끼어드는 구조를 만들어야합니다.","position":{"start":{"line":242,"column":60,"offset":5996},"end":{"line":242,"column":96,"offset":6032},"indent":[]}}],"position":{"start":{"line":241,"column":1,"offset":5868},"end":{"line":242,"column":96,"offset":6032},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"이런 구조가 ","position":{"start":{"line":244,"column":1,"offset":6034},"end":{"line":244,"column":8,"offset":6041},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">프록시</code>","position":{"start":{"line":244,"column":8,"offset":6041},"end":{"line":244,"column":13,"offset":6046},"indent":[]}},{"type":"text","value":"입니다.","position":{"start":{"line":244,"column":13,"offset":6046},"end":{"line":244,"column":17,"offset":6050},"indent":[]}}],"position":{"start":{"line":244,"column":1,"offset":6034},"end":{"line":244,"column":17,"offset":6050},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-4.png","alt":"AOP 4","position":{"start":{"line":246,"column":1,"offset":6052},"end":{"line":246,"column":29,"offset":6080},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a22edb4252fe9629154cf8aef27eb824/f53a0/AOP-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.02127659574468%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAj0lEQVQI1z2OgQqFIBRD+/8vfAVaiCFRqWWRGrTYhZcwZLve45rzPBFCgNIK0zSBPsaI67rE932PYRiglELb/rCuq8ycc+i6DsYYubXW2LYNDQE8933jeR7UWvHPvPcia60szPOMZVkkG8cRwYcPyo+YNyklHMfxad93lFIESF9q+VrnnGVOT/EdIWzG1mS9KiHjX8eeHuwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 4\"\n        title=\"AOP 4\"\n        src=\"/static/a22edb4252fe9629154cf8aef27eb824/1d69c/AOP-4.png\"\n        srcset=\"/static/a22edb4252fe9629154cf8aef27eb824/4dcb9/AOP-4.png 188w,\n/static/a22edb4252fe9629154cf8aef27eb824/5ff7e/AOP-4.png 375w,\n/static/a22edb4252fe9629154cf8aef27eb824/1d69c/AOP-4.png 750w,\n/static/a22edb4252fe9629154cf8aef27eb824/f53a0/AOP-4.png 1062w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":246,"column":1,"offset":6052},"end":{"line":246,"column":29,"offset":6080},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"프록시 : 마치 자신이 클라이언트가 사용하려고 하는 실제 대상인 것처럼 위장해서 클라이언트의 요청을 받아주는 것을 대리자, 대리인과 같은 역할 (UserServiceTx)","position":{"start":{"line":248,"column":3,"offset":6084},"end":{"line":248,"column":98,"offset":6179},"indent":[]}}],"position":{"start":{"line":248,"column":3,"offset":6084},"end":{"line":248,"column":98,"offset":6179},"indent":[]}}],"position":{"start":{"line":248,"column":1,"offset":6082},"end":{"line":248,"column":98,"offset":6179},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"타깃 : 프록시를 통해 최종적으로 요청을 위임받아 처리하는 실제 오브젝트 (UserServiceImpl)","position":{"start":{"line":249,"column":3,"offset":6182},"end":{"line":249,"column":61,"offset":6240},"indent":[]}}],"position":{"start":{"line":249,"column":3,"offset":6182},"end":{"line":249,"column":61,"offset":6240},"indent":[]}}],"position":{"start":{"line":249,"column":1,"offset":6180},"end":{"line":249,"column":61,"offset":6240},"indent":[]}}],"position":{"start":{"line":248,"column":1,"offset":6082},"end":{"line":249,"column":61,"offset":6240},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"프록시는 사용 목적에 따라 2가지로 분류할 수 있습니다.","position":{"start":{"line":251,"column":1,"offset":6242},"end":{"line":251,"column":32,"offset":6273},"indent":[]}}],"position":{"start":{"line":251,"column":1,"offset":6242},"end":{"line":251,"column":32,"offset":6273},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"클라이언트가 타깃에 접근하는 방법을 제어하기 위해서","position":{"start":{"line":253,"column":4,"offset":6278},"end":{"line":253,"column":32,"offset":6306},"indent":[]}}],"position":{"start":{"line":253,"column":4,"offset":6278},"end":{"line":253,"column":32,"offset":6306},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":6275},"end":{"line":253,"column":32,"offset":6306},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"타깃에 부가적인 기능을 부여해주기 위해서","position":{"start":{"line":254,"column":4,"offset":6310},"end":{"line":254,"column":26,"offset":6332},"indent":[]}}],"position":{"start":{"line":254,"column":4,"offset":6310},"end":{"line":254,"column":26,"offset":6332},"indent":[]}}],"position":{"start":{"line":254,"column":1,"offset":6307},"end":{"line":254,"column":26,"offset":6332},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":6275},"end":{"line":254,"column":26,"offset":6332},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#2-데코레이터-패턴","title":null,"children":[],"data":{"hProperties":{"aria-label":"2 데코레이터 패턴 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2) 데코레이터 패턴","position":{"start":{"line":256,"column":6,"offset":6339},"end":{"line":256,"column":17,"offset":6350},"indent":[]}}],"position":{"start":{"line":256,"column":1,"offset":6334},"end":{"line":256,"column":17,"offset":6350},"indent":[]},"data":{"id":"2-데코레이터-패턴","htmlAttributes":{"id":"2-데코레이터-패턴"},"hProperties":{"id":"2-데코레이터-패턴","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">데코레이터 패턴</code>","position":{"start":{"line":258,"column":1,"offset":6352},"end":{"line":258,"column":11,"offset":6362},"indent":[]}},{"type":"text","value":"은 타깃에 부가적인 기능을 런타임 시 다이내믹하게 부여해주기 위해 프록시를 사용하는 패턴입니다.","position":{"start":{"line":258,"column":11,"offset":6362},"end":{"line":258,"column":64,"offset":6415},"indent":[]}},{"type":"break","position":{"start":{"line":258,"column":64,"offset":6415},"end":{"line":259,"column":1,"offset":6418},"indent":[1]}},{"type":"text","value":"‘다이내믹하게 기능을 부가한다’는 의미는 코드상에서는 ‘어떤 방법과 순서로 프록시와 타깃이 사용되는지 정해져 있지 않다’는 뜻입니다.","position":{"start":{"line":259,"column":1,"offset":6418},"end":{"line":259,"column":75,"offset":6492},"indent":[]}}],"position":{"start":{"line":258,"column":1,"offset":6352},"end":{"line":259,"column":75,"offset":6492},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-5.jpg","alt":"AOP 5","position":{"start":{"line":261,"column":1,"offset":6494},"end":{"line":261,"column":29,"offset":6522},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d7dff582febf0c1d47de073d28c2fe6/cd36b/AOP-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.808510638297875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdu4SD//xAAWEAADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCIv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABgQAQEAAwAAAAAAAAAAAAAAAAEAESGB/9oACAEBAAE/IV3i6gv/2gAMAwEAAgADAAAAEAAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAITFRYZH/2gAIAQEAAT8QLlRPcRm/UQ7O8z//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 5\"\n        title=\"AOP 5\"\n        src=\"/static/3d7dff582febf0c1d47de073d28c2fe6/acb04/AOP-5.jpg\"\n        srcset=\"/static/3d7dff582febf0c1d47de073d28c2fe6/bc01b/AOP-5.jpg 188w,\n/static/3d7dff582febf0c1d47de073d28c2fe6/bf173/AOP-5.jpg 375w,\n/static/3d7dff582febf0c1d47de073d28c2fe6/acb04/AOP-5.jpg 750w,\n/static/3d7dff582febf0c1d47de073d28c2fe6/ec605/AOP-5.jpg 1125w,\n/static/3d7dff582febf0c1d47de073d28c2fe6/c58a3/AOP-5.jpg 1500w,\n/static/3d7dff582febf0c1d47de073d28c2fe6/cd36b/AOP-5.jpg 3525w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":261,"column":1,"offset":6494},"end":{"line":261,"column":29,"offset":6522},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"자바 IO 패키지의 ","position":{"start":{"line":263,"column":1,"offset":6524},"end":{"line":263,"column":12,"offset":6535},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">InputStream</code>","position":{"start":{"line":263,"column":12,"offset":6535},"end":{"line":263,"column":25,"offset":6548},"indent":[]}},{"type":"text","value":"과 ","position":{"start":{"line":263,"column":25,"offset":6548},"end":{"line":263,"column":27,"offset":6550},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">OutputStream</code>","position":{"start":{"line":263,"column":27,"offset":6550},"end":{"line":263,"column":41,"offset":6564},"indent":[]}},{"type":"text","value":" 이 데코레이터 패턴의 대표적인 예입니다.","position":{"start":{"line":263,"column":41,"offset":6564},"end":{"line":263,"column":64,"offset":6587},"indent":[]}}],"position":{"start":{"line":263,"column":1,"offset":6524},"end":{"line":263,"column":64,"offset":6587},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">InputStream</span> is <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":265,"column":1,"offset":6589},"end":{"line":267,"column":4,"offset":6683},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"이러한 ","position":{"start":{"line":269,"column":1,"offset":6685},"end":{"line":269,"column":5,"offset":6689},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">데코레이터 패턴</code>","position":{"start":{"line":269,"column":5,"offset":6689},"end":{"line":269,"column":15,"offset":6699},"indent":[]}},{"type":"text","value":"은 타깃의 코드에 ","position":{"start":{"line":269,"column":15,"offset":6699},"end":{"line":269,"column":25,"offset":6709},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">손대지 않고</code>","position":{"start":{"line":269,"column":25,"offset":6709},"end":{"line":269,"column":33,"offset":6717},"indent":[]}},{"type":"text","value":", 클라이언트가 호출하는 방법도 ","position":{"start":{"line":269,"column":33,"offset":6717},"end":{"line":269,"column":51,"offset":6735},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">변경하지 않은 채</code>","position":{"start":{"line":269,"column":51,"offset":6735},"end":{"line":269,"column":62,"offset":6746},"indent":[]}},{"type":"text","value":"로 ","position":{"start":{"line":269,"column":62,"offset":6746},"end":{"line":269,"column":64,"offset":6748},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">새로운 기능을 추가</code>","position":{"start":{"line":269,"column":64,"offset":6748},"end":{"line":269,"column":76,"offset":6760},"indent":[]}},{"type":"text","value":"할 때 유용한 방법입니다.","position":{"start":{"line":269,"column":76,"offset":6760},"end":{"line":269,"column":90,"offset":6774},"indent":[]}}],"position":{"start":{"line":269,"column":1,"offset":6685},"end":{"line":269,"column":90,"offset":6774},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#3-프록시-패턴","title":null,"children":[],"data":{"hProperties":{"aria-label":"3 프록시 패턴 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"3) 프록시 패턴","position":{"start":{"line":271,"column":6,"offset":6781},"end":{"line":271,"column":15,"offset":6790},"indent":[]}}],"position":{"start":{"line":271,"column":1,"offset":6776},"end":{"line":271,"column":15,"offset":6790},"indent":[]},"data":{"id":"3-프록시-패턴","htmlAttributes":{"id":"3-프록시-패턴"},"hProperties":{"id":"3-프록시-패턴","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">프록시 패턴</code>","position":{"start":{"line":273,"column":1,"offset":6792},"end":{"line":273,"column":9,"offset":6800},"indent":[]}},{"type":"text","value":"의 프록시는 기존코드에 영향을 주지 않으면서 타깃의 기능을 확장하거나 ","position":{"start":{"line":273,"column":9,"offset":6800},"end":{"line":273,"column":48,"offset":6839},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">접근 방법을 제어</code>","position":{"start":{"line":273,"column":48,"offset":6839},"end":{"line":273,"column":59,"offset":6850},"indent":[]}},{"type":"text","value":"할 수 있는 유용한 방법입니다.","position":{"start":{"line":273,"column":59,"offset":6850},"end":{"line":273,"column":76,"offset":6867},"indent":[]}}],"position":{"start":{"line":273,"column":1,"offset":6792},"end":{"line":273,"column":76,"offset":6867},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#프록시-구성과-역할","title":null,"children":[],"data":{"hProperties":{"aria-label":"프록시 구성과 역할 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"프록시 구성과 역할","position":{"start":{"line":275,"column":7,"offset":6875},"end":{"line":275,"column":17,"offset":6885},"indent":[]}}],"position":{"start":{"line":275,"column":1,"offset":6869},"end":{"line":275,"column":17,"offset":6885},"indent":[]},"data":{"id":"프록시-구성과-역할","htmlAttributes":{"id":"프록시-구성과-역할"},"hProperties":{"id":"프록시-구성과-역할","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"프록시는 타깃과 같은 기능을 구현하고 있다가 메소드가 호출되면 타깃 오브젝트로 위임합니다.","position":{"start":{"line":277,"column":3,"offset":6889},"end":{"line":277,"column":53,"offset":6939},"indent":[]}}],"position":{"start":{"line":277,"column":3,"offset":6889},"end":{"line":277,"column":53,"offset":6939},"indent":[]}}],"position":{"start":{"line":277,"column":1,"offset":6887},"end":{"line":277,"column":53,"offset":6939},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"또한, 지정된 특정 요청에 대해서 부가 기능을 수행합니다.","position":{"start":{"line":278,"column":3,"offset":6942},"end":{"line":278,"column":35,"offset":6974},"indent":[]}}],"position":{"start":{"line":278,"column":3,"offset":6942},"end":{"line":278,"column":35,"offset":6974},"indent":[]}}],"position":{"start":{"line":278,"column":1,"offset":6940},"end":{"line":278,"column":35,"offset":6974},"indent":[]}}],"position":{"start":{"line":277,"column":1,"offset":6887},"end":{"line":278,"column":35,"offset":6974},"indent":[1]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#프록시-작성의-문제점","title":null,"children":[],"data":{"hProperties":{"aria-label":"프록시 작성의 문제점 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"프록시 작성의 문제점","position":{"start":{"line":280,"column":7,"offset":6982},"end":{"line":280,"column":18,"offset":6993},"indent":[]}}],"position":{"start":{"line":280,"column":1,"offset":6976},"end":{"line":280,"column":18,"offset":6993},"indent":[]},"data":{"id":"프록시-작성의-문제점","htmlAttributes":{"id":"프록시-작성의-문제점"},"hProperties":{"id":"프록시-작성의-문제점","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"부가기능이 필요 없는 메소드도 구현해서 타깃으로 위임하는 코드를 일일이 만들어줘야해서 ","position":{"start":{"line":282,"column":3,"offset":6997},"end":{"line":282,"column":51,"offset":7045},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">번거롭다</code>","position":{"start":{"line":282,"column":51,"offset":7045},"end":{"line":282,"column":57,"offset":7051},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":282,"column":57,"offset":7051},"end":{"line":282,"column":58,"offset":7052},"indent":[]}}],"position":{"start":{"line":282,"column":3,"offset":6997},"end":{"line":282,"column":58,"offset":7052},"indent":[]}}],"position":{"start":{"line":282,"column":1,"offset":6995},"end":{"line":282,"column":58,"offset":7052},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"부가기능 코드가 ","position":{"start":{"line":283,"column":3,"offset":7055},"end":{"line":283,"column":12,"offset":7064},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">중복</code>","position":{"start":{"line":283,"column":12,"offset":7064},"end":{"line":283,"column":16,"offset":7068},"indent":[]}},{"type":"text","value":"될 가능성이 많다.","position":{"start":{"line":283,"column":16,"offset":7068},"end":{"line":283,"column":26,"offset":7078},"indent":[]}}],"position":{"start":{"line":283,"column":3,"offset":7055},"end":{"line":283,"column":26,"offset":7078},"indent":[]}}],"position":{"start":{"line":283,"column":1,"offset":7053},"end":{"line":283,"column":26,"offset":7078},"indent":[]}}],"position":{"start":{"line":282,"column":1,"offset":6995},"end":{"line":283,"column":26,"offset":7078},"indent":[1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#4-다이내믹-프록시","title":null,"children":[],"data":{"hProperties":{"aria-label":"4 다이내믹 프록시 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"4) 다이내믹 프록시","position":{"start":{"line":285,"column":6,"offset":7085},"end":{"line":285,"column":17,"offset":7096},"indent":[]}}],"position":{"start":{"line":285,"column":1,"offset":7080},"end":{"line":285,"column":17,"offset":7096},"indent":[]},"data":{"id":"4-다이내믹-프록시","htmlAttributes":{"id":"4-다이내믹-프록시"},"hProperties":{"id":"4-다이내믹-프록시","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"자바에는 ","position":{"start":{"line":287,"column":1,"offset":7098},"end":{"line":287,"column":6,"offset":7103},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">java.lang.reflect</code>","position":{"start":{"line":287,"column":6,"offset":7103},"end":{"line":287,"column":25,"offset":7122},"indent":[]}},{"type":"text","value":" 패키지 안에 프록시를 손쉽게 만들수 있도록 지원해주는 클래스들이 있습니다.","position":{"start":{"line":287,"column":25,"offset":7122},"end":{"line":287,"column":67,"offset":7164},"indent":[]}},{"type":"break","position":{"start":{"line":287,"column":67,"offset":7164},"end":{"line":288,"column":1,"offset":7167},"indent":[1]}},{"type":"text","value":"목 프레임워크로 모든 Mock 객체를 생성하지 않은 것처럼, 프록시 클래스를 매번 정의하지 않고도 프록시처럼 동작하는 오브젝트를 다이내믹하게 생성할 수 있습니다.","position":{"start":{"line":288,"column":1,"offset":7167},"end":{"line":288,"column":91,"offset":7257},"indent":[]}}],"position":{"start":{"line":287,"column":1,"offset":7098},"end":{"line":288,"column":91,"offset":7257},"indent":[1]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#다이내믹-프록시-적용","title":null,"children":[],"data":{"hProperties":{"aria-label":"다이내믹 프록시 적용 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"다이내믹 프록시 적용","position":{"start":{"line":290,"column":7,"offset":7265},"end":{"line":290,"column":18,"offset":7276},"indent":[]}}],"position":{"start":{"line":290,"column":1,"offset":7259},"end":{"line":290,"column":18,"offset":7276},"indent":[]},"data":{"id":"다이내믹-프록시-적용","htmlAttributes":{"id":"다이내믹-프록시-적용"},"hProperties":{"id":"다이내믹-프록시-적용","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"다이내믹 프록시는 리플렉션 기능을 이용해서 프록시를 만들어줍니다.","position":{"start":{"line":292,"column":1,"offset":7278},"end":{"line":292,"column":37,"offset":7314},"indent":[]}}],"position":{"start":{"line":292,"column":1,"offset":7278},"end":{"line":292,"column":37,"offset":7314},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"리플렉션은 자바의 코드 자체를 추상화해서 접근하도록 만든 것","position":{"start":{"line":294,"column":3,"offset":7318},"end":{"line":294,"column":36,"offset":7351},"indent":[]}},{"type":"break","position":{"start":{"line":294,"column":36,"offset":7351},"end":{"line":295,"column":3,"offset":7356},"indent":[3]}},{"type":"text","value":"참고 : ","position":{"start":{"line":295,"column":3,"offset":7356},"end":{"line":295,"column":8,"offset":7361},"indent":[]}},{"type":"link","title":null,"url":"https://medium.com/msolo021015/%EC%9E%90%EB%B0%94-reflection%EC%9D%B4%EB%9E%80-ee71caf7eec5","children":[{"type":"text","value":"자바의 리플렉션이란?","position":{"start":{"line":295,"column":9,"offset":7362},"end":{"line":295,"column":20,"offset":7373},"indent":[]}}],"position":{"start":{"line":295,"column":8,"offset":7361},"end":{"line":295,"column":114,"offset":7467},"indent":[]}}],"position":{"start":{"line":294,"column":3,"offset":7318},"end":{"line":295,"column":114,"offset":7467},"indent":[3]}}],"position":{"start":{"line":294,"column":1,"offset":7316},"end":{"line":295,"column":114,"offset":7467},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"프록시로서 필요한 부가기능 제공 코드는 ","position":{"start":{"line":297,"column":1,"offset":7469},"end":{"line":297,"column":23,"offset":7491},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">InvocationHandler를 구현한 클래스</code>","position":{"start":{"line":297,"column":23,"offset":7491},"end":{"line":297,"column":51,"offset":7519},"indent":[]}},{"type":"text","value":"에 직접 작성해야 합니다.","position":{"start":{"line":297,"column":51,"offset":7519},"end":{"line":297,"column":65,"offset":7533},"indent":[]}},{"type":"break","position":{"start":{"line":297,"column":65,"offset":7533},"end":{"line":298,"column":1,"offset":7536},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">InvocationHandler</code>","position":{"start":{"line":298,"column":1,"offset":7536},"end":{"line":298,"column":20,"offset":7555},"indent":[]}},{"type":"text","value":" 인터페이스는 아래 메소드 하나만 가진 간단한 인터페이스입니다.","position":{"start":{"line":298,"column":20,"offset":7555},"end":{"line":298,"column":55,"offset":7590},"indent":[]}}],"position":{"start":{"line":297,"column":1,"offset":7469},"end":{"line":298,"column":55,"offset":7590},"indent":[1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> proxy<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":300,"column":1,"offset":7592},"end":{"line":302,"column":4,"offset":7697},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"InvocationHandler의 동작","position":{"start":{"line":304,"column":3,"offset":7701},"end":{"line":304,"column":24,"offset":7722},"indent":[]}}],"position":{"start":{"line":304,"column":1,"offset":7699},"end":{"line":304,"column":26,"offset":7724},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":304,"column":26,"offset":7724},"end":{"line":305,"column":1,"offset":7725},"indent":[1]}},{"type":"html","title":null,"url":"./images/AOP-6.png","alt":"AOP 6","position":{"start":{"line":305,"column":1,"offset":7725},"end":{"line":305,"column":29,"offset":7753},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b53eaeba6b0999cd826d08f6cac257a2/709cb/AOP-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0klEQVQY0z2QiYqFMAxF/f9PFPeqdQX3DTWvJ4NTCLS5ycltvKqqJI5jSZJEwjCUtm3leR5531fO83BaJFEUqRYEgQzDIBx07kVRaJ7+uq7FI0FxnhsBThIg57pOsbaUrus00D7gvu9SlqXryxXYNI0LBwRirZVlWTQY0Pe9AoBN0yTHcci2bToICPX0pWnq3oXM86xDqFWHFDB5HEcHzBVKY5Zl/828cWWMURCBM/IYue9bwR4CO/pEvoX49+VL3QJa11UH4uLTWBPr8n1fjdD7A8/Qd6FJd7fdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 6\"\n        title=\"AOP 6\"\n        src=\"/static/b53eaeba6b0999cd826d08f6cac257a2/1d69c/AOP-6.png\"\n        srcset=\"/static/b53eaeba6b0999cd826d08f6cac257a2/4dcb9/AOP-6.png 188w,\n/static/b53eaeba6b0999cd826d08f6cac257a2/5ff7e/AOP-6.png 375w,\n/static/b53eaeba6b0999cd826d08f6cac257a2/1d69c/AOP-6.png 750w,\n/static/b53eaeba6b0999cd826d08f6cac257a2/709cb/AOP-6.png 1034w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":304,"column":1,"offset":7699},"end":{"line":305,"column":29,"offset":7753},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"동작 과정을 요약하면 다음과 같습니다.","position":{"start":{"line":307,"column":1,"offset":7755},"end":{"line":307,"column":22,"offset":7776},"indent":[]}}],"position":{"start":{"line":307,"column":1,"offset":7755},"end":{"line":307,"column":22,"offset":7776},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Hello 인터페이스를 파라미터로 넘겨주면서 프록시 팩토리에게 다이내믹 프록시를 만들어달라고 요청하면 Hello 인터페이스의 모든 메소드를 구현한 프록시 오브젝트를 생성해줍니다.","position":{"start":{"line":309,"column":4,"offset":7781},"end":{"line":309,"column":103,"offset":7880},"indent":[]}}],"position":{"start":{"line":309,"column":4,"offset":7781},"end":{"line":309,"column":103,"offset":7880},"indent":[]}}],"position":{"start":{"line":309,"column":1,"offset":7778},"end":{"line":309,"column":103,"offset":7880},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"InvocationHandler 인터페이스를 구현한 오브젝트를 제공해주면 다이내믹 프록시가 받는 모든 요청을 InvocationHandler의 invoke() 메소드로 보내줍니다.","position":{"start":{"line":310,"column":4,"offset":7884},"end":{"line":310,"column":104,"offset":7984},"indent":[]}}],"position":{"start":{"line":310,"column":4,"offset":7884},"end":{"line":310,"column":104,"offset":7984},"indent":[]}}],"position":{"start":{"line":310,"column":1,"offset":7881},"end":{"line":310,"column":104,"offset":7984},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"결과적으로, Hello 인터페이스의 메소드가 아무리 많더라도 invoke() 메소드 하나로 처리할 수 있습니다.","position":{"start":{"line":311,"column":4,"offset":7988},"end":{"line":311,"column":66,"offset":8050},"indent":[]}}],"position":{"start":{"line":311,"column":4,"offset":7988},"end":{"line":311,"column":66,"offset":8050},"indent":[]}}],"position":{"start":{"line":311,"column":1,"offset":7985},"end":{"line":311,"column":66,"offset":8050},"indent":[]}}],"position":{"start":{"line":309,"column":1,"offset":7778},"end":{"line":311,"column":66,"offset":8050},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"그러면, 이제 위에서 만들었던 트랜잭션 기능을 ","position":{"start":{"line":313,"column":1,"offset":8052},"end":{"line":313,"column":27,"offset":8078},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">다이내믹 프록시</code>","position":{"start":{"line":313,"column":27,"offset":8078},"end":{"line":313,"column":37,"offset":8088},"indent":[]}},{"type":"text","value":"를 적용해 만들어봅시다.","position":{"start":{"line":313,"column":37,"offset":8088},"end":{"line":313,"column":50,"offset":8101},"indent":[]}}],"position":{"start":{"line":313,"column":1,"offset":8052},"end":{"line":313,"column":50,"offset":8101},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TransactionHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">InvocationHandler</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">PlatformTransactionManager</span> transactionManager<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> pattern<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setTarget</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setPattern</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> pattern<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pattern <span class=\"token operator\">=</span> pattern<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> proxy<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 트랜잭션 적용 대상 메소드 선별하여 트랜잭션 경계설정 기능 부여해준다.</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>method<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span>pattern<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">invokeInTransaction</span><span class=\"token punctuation\">(</span>method<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 트랜잭션 적용 O</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 트랜잭션 적용 X</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invokeInTransaction</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">TransactionStatus</span> status <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager\n            <span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultTransactionDefinition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 트랜잭션을 시작하고 타깃 오브젝트의 메소드를 호출한다.</span>\n            <span class=\"token class-name\">Object</span> ret <span class=\"token operator\">=</span> method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> ret<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InvocationTargetException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getTargetException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":315,"column":1,"offset":8103},"end":{"line":356,"column":4,"offset":9415},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"테스트","position":{"start":{"line":358,"column":3,"offset":9419},"end":{"line":358,"column":6,"offset":9422},"indent":[]}}],"position":{"start":{"line":358,"column":1,"offset":9417},"end":{"line":358,"column":8,"offset":9424},"indent":[]}}],"position":{"start":{"line":358,"column":1,"offset":9417},"end":{"line":358,"column":8,"offset":9424},"indent":[]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">upgradeAllOrNothing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token comment\">// 핸들러가 필요한 정보와 오브젝트를 DI</span>\n    <span class=\"token class-name\">TransactionHandler</span> txHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TransactionHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    txHandler<span class=\"token punctuation\">.</span><span class=\"token function\">setTransactionManager</span><span class=\"token punctuation\">(</span>transactionManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    txHandler<span class=\"token punctuation\">.</span><span class=\"token function\">setTarget</span><span class=\"token punctuation\">(</span>testUserService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    txHandler<span class=\"token punctuation\">.</span><span class=\"token function\">setPattern</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"upgradeLevels\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// UserService 인터페이스 타입의 다이내믹 프록시 생성</span>\n    <span class=\"token class-name\">UserService</span> txUserService <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UserService</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">newProxyInstance</span><span class=\"token punctuation\">(</span>\n        <span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\">UserService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> txHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":360,"column":1,"offset":9426},"end":{"line":375,"column":4,"offset":9956},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"이렇게 생성된 다이내믹 프록시는 일반적인 방법으로는 스프링의 빈으로 등록할 수 없습니다.","position":{"start":{"line":377,"column":1,"offset":9958},"end":{"line":377,"column":50,"offset":10007},"indent":[]}},{"type":"break","position":{"start":{"line":377,"column":50,"offset":10007},"end":{"line":378,"column":1,"offset":10010},"indent":[1]}},{"type":"text","value":"그래서 스프링은 디폴트 생성자, Setter 이외에도 빈으로 만들 수 있는 방법을 제공하는데, 대표적으로 팩토리 빈을 이용한 빈 생성 방법입니다.","position":{"start":{"line":378,"column":1,"offset":10010},"end":{"line":378,"column":82,"offset":10091},"indent":[]}},{"type":"break","position":{"start":{"line":378,"column":82,"offset":10091},"end":{"line":379,"column":1,"offset":10094},"indent":[1]}},{"type":"text","value":"팩토리 빈을 만드는 방법에는 여러 가지가 있는데, 가장 간단한 방법은 스프링의 FactoryBean이라는 인터페이스를 구현하는 방법이 있습니다.","position":{"start":{"line":379,"column":1,"offset":10094},"end":{"line":379,"column":81,"offset":10174},"indent":[]}}],"position":{"start":{"line":377,"column":1,"offset":9958},"end":{"line":379,"column":81,"offset":10174},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#4-스프링의-프록시-팩토리-빈","title":null,"children":[],"data":{"hProperties":{"aria-label":"4 스프링의 프록시 팩토리 빈 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"4. 스프링의 프록시 팩토리 빈","position":{"start":{"line":381,"column":4,"offset":10179},"end":{"line":381,"column":21,"offset":10196},"indent":[]}}],"position":{"start":{"line":381,"column":1,"offset":10176},"end":{"line":381,"column":21,"offset":10196},"indent":[]},"data":{"id":"4-스프링의-프록시-팩토리-빈","htmlAttributes":{"id":"4-스프링의-프록시-팩토리-빈"},"hProperties":{"id":"4-스프링의-프록시-팩토리-빈","style":"position:relative;"}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#1-proxyfactorybean","title":null,"children":[],"data":{"hProperties":{"aria-label":"1 proxyfactorybean permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"1) ProxyFactoryBean","position":{"start":{"line":383,"column":6,"offset":10203},"end":{"line":383,"column":25,"offset":10222},"indent":[]}}],"position":{"start":{"line":383,"column":1,"offset":10198},"end":{"line":383,"column":25,"offset":10222},"indent":[]},"data":{"id":"1-proxyfactorybean","htmlAttributes":{"id":"1-proxyfactorybean"},"hProperties":{"id":"1-proxyfactorybean","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"자바에는 JDK에서 제공하는 다이내믹 프록시 외에도 편리하게 프록시를 만들 수 있도록 지원해주는 다양한 기술이 존재합니다.","position":{"start":{"line":385,"column":1,"offset":10224},"end":{"line":385,"column":69,"offset":10292},"indent":[]}}],"position":{"start":{"line":385,"column":1,"offset":10224},"end":{"line":385,"column":69,"offset":10292},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"스프링이 트랜잭션 기술과 메일 발송 기술에 적용했던 서비스 추상화를 프록시 기술에 동일하게 적용해 프록시 오브젝트를 생성해주는 기술을 ","position":{"start":{"line":387,"column":1,"offset":10294},"end":{"line":387,"column":76,"offset":10369},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">추상화한 팩토리 빈</code>","position":{"start":{"line":387,"column":76,"offset":10369},"end":{"line":387,"column":88,"offset":10381},"indent":[]}},{"type":"text","value":"을 제공합니다.","position":{"start":{"line":387,"column":88,"offset":10381},"end":{"line":387,"column":96,"offset":10389},"indent":[]}}],"position":{"start":{"line":387,"column":1,"offset":10294},"end":{"line":387,"column":96,"offset":10389},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"ProxyFactoryBean이 생성하는 프록시에서 사용할 부가기능은 Methodlnterceptor 인터페이스를 구현해서 만듭니다.","position":{"start":{"line":389,"column":1,"offset":10391},"end":{"line":389,"column":75,"offset":10465},"indent":[]}}],"position":{"start":{"line":389,"column":1,"offset":10391},"end":{"line":389,"column":75,"offset":10465},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#methodlnterceptor-와-invocationhandler의-차이점","title":null,"children":[],"data":{"hProperties":{"aria-label":"methodlnterceptor 와 invocationhandler의 차이점 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Methodlnterceptor 와 InvocationHandler의 차이점","position":{"start":{"line":391,"column":7,"offset":10473},"end":{"line":391,"column":49,"offset":10515},"indent":[]}}],"position":{"start":{"line":391,"column":1,"offset":10467},"end":{"line":391,"column":49,"offset":10515},"indent":[]},"data":{"id":"methodlnterceptor-와-invocationhandler의-차이점","htmlAttributes":{"id":"methodlnterceptor-와-invocationhandler의-차이점"},"hProperties":{"id":"methodlnterceptor-와-invocationhandler의-차이점","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"InvocationHandler","position":{"start":{"line":393,"column":3,"offset":10519},"end":{"line":393,"column":20,"offset":10536},"indent":[]}}],"position":{"start":{"line":393,"column":1,"offset":10517},"end":{"line":393,"column":22,"offset":10538},"indent":[]}}],"position":{"start":{"line":393,"column":1,"offset":10517},"end":{"line":393,"column":22,"offset":10538},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"InvocationHandler의 invoke() 메소드는 타깃 오브젝트에 대한 정보를 제공하지 않습니다.","position":{"start":{"line":395,"column":3,"offset":10542},"end":{"line":395,"column":62,"offset":10601},"indent":[]}},{"type":"break","position":{"start":{"line":395,"column":62,"offset":10601},"end":{"line":396,"column":3,"offset":10606},"indent":[3]}},{"type":"text","value":"따라서 타깃은 InvocationHandler를 구현한 클래스가 직접 알고 있어야 합니다.","position":{"start":{"line":396,"column":3,"offset":10606},"end":{"line":396,"column":53,"offset":10656},"indent":[]}}],"position":{"start":{"line":395,"column":3,"offset":10542},"end":{"line":396,"column":53,"offset":10656},"indent":[3]}}],"position":{"start":{"line":395,"column":1,"offset":10540},"end":{"line":396,"column":53,"offset":10656},"indent":[1]}}],"position":{"start":{"line":395,"column":1,"offset":10540},"end":{"line":396,"column":53,"offset":10656},"indent":[1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Methodlnterceptor","position":{"start":{"line":398,"column":3,"offset":10660},"end":{"line":398,"column":20,"offset":10677},"indent":[]}}],"position":{"start":{"line":398,"column":1,"offset":10658},"end":{"line":398,"column":22,"offset":10679},"indent":[]}}],"position":{"start":{"line":398,"column":1,"offset":10658},"end":{"line":398,"column":22,"offset":10679},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Methodlnterceptor의 invoke() 메소드는 ProxyFactoryBean으로부터 ","position":{"start":{"line":400,"column":3,"offset":10683},"end":{"line":400,"column":57,"offset":10737},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">타깃 오브젝트에 대한 정보</code>","position":{"start":{"line":400,"column":57,"offset":10737},"end":{"line":400,"column":73,"offset":10753},"indent":[]}},{"type":"text","value":"까지도 함께 제공받습니다.","position":{"start":{"line":400,"column":73,"offset":10753},"end":{"line":400,"column":87,"offset":10767},"indent":[]}}],"position":{"start":{"line":400,"column":3,"offset":10683},"end":{"line":400,"column":87,"offset":10767},"indent":[]}}],"position":{"start":{"line":400,"column":1,"offset":10681},"end":{"line":400,"column":87,"offset":10767},"indent":[]}}],"position":{"start":{"line":400,"column":1,"offset":10681},"end":{"line":400,"column":87,"offset":10767},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#proxyfactorybean-예제","title":null,"children":[],"data":{"hProperties":{"aria-label":"proxyfactorybean 예제 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"ProxyFactoryBean 예제","position":{"start":{"line":402,"column":7,"offset":10775},"end":{"line":402,"column":26,"offset":10794},"indent":[]}}],"position":{"start":{"line":402,"column":1,"offset":10769},"end":{"line":402,"column":26,"offset":10794},"indent":[]},"data":{"id":"proxyfactorybean-예제","htmlAttributes":{"id":"proxyfactorybean-예제"},"hProperties":{"id":"proxyfactorybean-예제","style":"position:relative;"}}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token comment\">// ...</span>\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">proxyFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ProxyFactoryBean</span> pfBean <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ProxyFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pfBean<span class=\"token punctuation\">.</span><span class=\"token function\">setTarget</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloTarget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 타깃 설정</span>\n    pfBean<span class=\"token punctuation\">.</span><span class=\"token function\">addAdvice</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">UpperCaseAdvice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 부가 기능 어드바이스 설정</span>\n\n    <span class=\"token class-name\">Hello</span> proxiedHello <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">)</span> pfBean<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 생성된 프록시를 가져온다.</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>proxiedHello<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"woowon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HI WOOWON\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UppercaseAdvice</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MethodInterceptor</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodInvocation</span> invocation<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// MethodInvocation은 메소드 정보와 타깃 오브젝트를 모두 가지고 있다.</span>\n        <span class=\"token keyword\">return</span> invocation<span class=\"token punctuation\">.</span><span class=\"token function\">proceed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":404,"column":1,"offset":10796},"end":{"line":425,"column":4,"offset":11450},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#2-어드바이스--타깃이-필요-없는-순수한-부가기능","title":null,"children":[],"data":{"hProperties":{"aria-label":"2 어드바이스  타깃이 필요 없는 순수한 부가기능 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"2) 어드바이스 : 타깃이 필요 없는 순수한 부가기능","position":{"start":{"line":427,"column":6,"offset":11457},"end":{"line":427,"column":35,"offset":11486},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":11452},"end":{"line":427,"column":35,"offset":11486},"indent":[]},"data":{"id":"2-어드바이스--타깃이-필요-없는-순수한-부가기능","htmlAttributes":{"id":"2-어드바이스--타깃이-필요-없는-순수한-부가기능"},"hProperties":{"id":"2-어드바이스--타깃이-필요-없는-순수한-부가기능","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"스프링에서는 타깃 오브젝트에 적용하는 부가기능을 담은 오브젝트를 ","position":{"start":{"line":429,"column":1,"offset":11488},"end":{"line":429,"column":37,"offset":11524},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">어드바이스(advice)</code>","position":{"start":{"line":429,"column":37,"offset":11524},"end":{"line":429,"column":52,"offset":11539},"indent":[]}},{"type":"text","value":"라고 부릅니다.","position":{"start":{"line":429,"column":52,"offset":11539},"end":{"line":429,"column":60,"offset":11547},"indent":[]}}],"position":{"start":{"line":429,"column":1,"offset":11488},"end":{"line":429,"column":60,"offset":11547},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Methodlnterceptor에는 메소드 정보와 함께 타깃 오브젝트가 담긴 Methodlnvocation 오브젝트가 전달됩니다.","position":{"start":{"line":431,"column":1,"offset":11549},"end":{"line":431,"column":73,"offset":11621},"indent":[]}}],"position":{"start":{"line":431,"column":1,"offset":11549},"end":{"line":431,"column":73,"offset":11621},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Methodlnvocation은 일종의 콜백 오브젝트로, proceed() 메소드를 실행하면 타깃 오브젝트의 메소드를 내부적으로 실행해주는 기능","position":{"start":{"line":433,"column":3,"offset":11625},"end":{"line":433,"column":83,"offset":11705},"indent":[]}}],"position":{"start":{"line":433,"column":3,"offset":11625},"end":{"line":433,"column":83,"offset":11705},"indent":[]}}],"position":{"start":{"line":433,"column":1,"offset":11623},"end":{"line":433,"column":83,"offset":11705},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"ProxyFactoryBean은 작은 단위의 ","position":{"start":{"line":435,"column":1,"offset":11707},"end":{"line":435,"column":26,"offset":11732},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">템플릿/콜백 구조</code>","position":{"start":{"line":435,"column":26,"offset":11732},"end":{"line":435,"column":37,"offset":11743},"indent":[]}},{"type":"text","value":"를 응용해서 적용했기 때문에 템플릿 역할을 하는 Methodlnvocation을 ","position":{"start":{"line":435,"column":37,"offset":11743},"end":{"line":435,"column":82,"offset":11788},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">싱글톤</code>","position":{"start":{"line":435,"column":82,"offset":11788},"end":{"line":435,"column":87,"offset":11793},"indent":[]}},{"type":"text","value":"으로 두고 ","position":{"start":{"line":435,"column":87,"offset":11793},"end":{"line":435,"column":93,"offset":11799},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">공유</code>","position":{"start":{"line":435,"column":93,"offset":11799},"end":{"line":435,"column":97,"offset":11803},"indent":[]}},{"type":"text","value":"할 수 있습니다.","position":{"start":{"line":435,"column":97,"offset":11803},"end":{"line":435,"column":106,"offset":11812},"indent":[]}}],"position":{"start":{"line":435,"column":1,"offset":11707},"end":{"line":435,"column":106,"offset":11812},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"addAdvice() 메소드를 통해 ProxyFactoryBean에는 여러 개의 Methodlnterceptor를 추가할 수 있습니다.","position":{"start":{"line":437,"column":1,"offset":11814},"end":{"line":437,"column":76,"offset":11889},"indent":[]}}],"position":{"start":{"line":437,"column":1,"offset":11814},"end":{"line":437,"column":76,"offset":11889},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"ProxyFactoryBean 하나만으로 여러 개의 부가 기능을 제공해주는 프록시를 만들 수 있다는 의미","position":{"start":{"line":439,"column":3,"offset":11893},"end":{"line":439,"column":61,"offset":11951},"indent":[]}}],"position":{"start":{"line":439,"column":3,"offset":11893},"end":{"line":439,"column":61,"offset":11951},"indent":[]}}],"position":{"start":{"line":439,"column":1,"offset":11891},"end":{"line":439,"column":61,"offset":11951},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#3-포인트컷--부가기능-적용-대상-메소드-선정-방법","title":null,"children":[],"data":{"hProperties":{"aria-label":"3 포인트컷  부가기능 적용 대상 메소드 선정 방법 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"3) 포인트컷 : 부가기능 적용 대상 메소드 선정 방법","position":{"start":{"line":441,"column":6,"offset":11958},"end":{"line":441,"column":36,"offset":11988},"indent":[]}}],"position":{"start":{"line":441,"column":1,"offset":11953},"end":{"line":441,"column":36,"offset":11988},"indent":[]},"data":{"id":"3-포인트컷--부가기능-적용-대상-메소드-선정-방법","htmlAttributes":{"id":"3-포인트컷--부가기능-적용-대상-메소드-선정-방법"},"hProperties":{"id":"3-포인트컷--부가기능-적용-대상-메소드-선정-방법","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"스프링에서는 메소드 선정 알고리즘을 담은 오브젝트를 ","position":{"start":{"line":443,"column":1,"offset":11990},"end":{"line":443,"column":30,"offset":12019},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">포인트컷(pointcut)</code>","position":{"start":{"line":443,"column":30,"offset":12019},"end":{"line":443,"column":46,"offset":12035},"indent":[]}},{"type":"text","value":"이라고 부릅니다.","position":{"start":{"line":443,"column":46,"offset":12035},"end":{"line":443,"column":55,"offset":12044},"indent":[]}}],"position":{"start":{"line":443,"column":1,"offset":11990},"end":{"line":443,"column":55,"offset":12044},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"기존의 JDK 다이내믹 프록시 방식","position":{"start":{"line":445,"column":3,"offset":12048},"end":{"line":445,"column":22,"offset":12067},"indent":[]}}],"position":{"start":{"line":445,"column":1,"offset":12046},"end":{"line":445,"column":24,"offset":12069},"indent":[]}}],"position":{"start":{"line":445,"column":1,"offset":12046},"end":{"line":445,"column":24,"offset":12069},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-7.png","alt":"AOP 7","position":{"start":{"line":447,"column":1,"offset":12071},"end":{"line":447,"column":29,"offset":12099},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aaf27703d67b778e992d168b0aa4d297/dd104/AOP-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqElEQVQY06VOywqDQBDz/79N8CIoXjz4ml2f9V1QUhJa6LkdGLLJZjITOOeQ5zmKohDWdY3runDf908dzPOMdV1RVRW6rgP5P6VA7z3iONaF4ziCV1MjcskwDNLbthWSmzMdsiyLPNu2iSuQhmmahPzs+16cbzODNYYwDJFlGR5vvSxLhR/HIf95PjUTMIQiN+z7rtDvMmsUlCQJoihCmqbysYjszzzxBax+fvfkHb2RAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 7\"\n        title=\"AOP 7\"\n        src=\"/static/aaf27703d67b778e992d168b0aa4d297/1d69c/AOP-7.png\"\n        srcset=\"/static/aaf27703d67b778e992d168b0aa4d297/4dcb9/AOP-7.png 188w,\n/static/aaf27703d67b778e992d168b0aa4d297/5ff7e/AOP-7.png 375w,\n/static/aaf27703d67b778e992d168b0aa4d297/1d69c/AOP-7.png 750w,\n/static/aaf27703d67b778e992d168b0aa4d297/dd104/AOP-7.png 1064w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":447,"column":1,"offset":12071},"end":{"line":447,"column":29,"offset":12099},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"기존 방식의 문제점","position":{"start":{"line":449,"column":3,"offset":12103},"end":{"line":449,"column":13,"offset":12113},"indent":[]}}],"position":{"start":{"line":449,"column":1,"offset":12101},"end":{"line":449,"column":15,"offset":12115},"indent":[]}}],"position":{"start":{"line":449,"column":1,"offset":12101},"end":{"line":449,"column":15,"offset":12115},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"부가 기능을 가진 InvocationHandler가 타깃과 메소드 선정 알고리즘에 의존하고 있다는 점입니다.","position":{"start":{"line":451,"column":3,"offset":12119},"end":{"line":451,"column":63,"offset":12179},"indent":[]}}],"position":{"start":{"line":451,"column":3,"offset":12119},"end":{"line":451,"column":63,"offset":12179},"indent":[]}}],"position":{"start":{"line":451,"column":1,"offset":12117},"end":{"line":451,"column":63,"offset":12179},"indent":[]}}],"position":{"start":{"line":451,"column":1,"offset":12117},"end":{"line":451,"column":63,"offset":12179},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":453,"column":1,"offset":12181},"end":{"line":453,"column":4,"offset":12184},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"만약 타깃이 다르고 메소드 선정 방식이 다른 경우, InvocationHandler 오브젝트를 여러 프록시가 공유할 수 없습니다.","position":{"start":{"line":455,"column":1,"offset":12186},"end":{"line":455,"column":73,"offset":12258},"indent":[]}}],"position":{"start":{"line":455,"column":1,"offset":12186},"end":{"line":455,"column":73,"offset":12258},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"이러한 ","position":{"start":{"line":457,"column":1,"offset":12260},"end":{"line":457,"column":5,"offset":12264},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">문제점을 해결하기 위해</code>","position":{"start":{"line":457,"column":5,"offset":12264},"end":{"line":457,"column":19,"offset":12278},"indent":[]}},{"type":"text","value":" 스프링의 ProxyFactoryBean 방식은 두 가지 확장 기능인 ","position":{"start":{"line":457,"column":19,"offset":12278},"end":{"line":457,"column":58,"offset":12317},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">부가기능</code>","position":{"start":{"line":457,"column":58,"offset":12317},"end":{"line":457,"column":64,"offset":12323},"indent":[]}},{"type":"text","value":"과 ","position":{"start":{"line":457,"column":64,"offset":12323},"end":{"line":457,"column":66,"offset":12325},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">메소드 선정 알고리즘</code>","position":{"start":{"line":457,"column":66,"offset":12325},"end":{"line":457,"column":79,"offset":12338},"indent":[]}},{"type":"text","value":"을 활용하는 ","position":{"start":{"line":457,"column":79,"offset":12338},"end":{"line":457,"column":86,"offset":12345},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">독립적인 구조</code>","position":{"start":{"line":457,"column":86,"offset":12345},"end":{"line":457,"column":95,"offset":12354},"indent":[]}},{"type":"text","value":"를 제공한다.","position":{"start":{"line":457,"column":95,"offset":12354},"end":{"line":457,"column":102,"offset":12361},"indent":[]}}],"position":{"start":{"line":457,"column":1,"offset":12260},"end":{"line":457,"column":102,"offset":12361},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"ProxyFactoryBean의 동작 방식","position":{"start":{"line":459,"column":3,"offset":12365},"end":{"line":459,"column":26,"offset":12388},"indent":[]}}],"position":{"start":{"line":459,"column":1,"offset":12363},"end":{"line":459,"column":28,"offset":12390},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":459,"column":28,"offset":12390},"end":{"line":460,"column":1,"offset":12391},"indent":[1]}},{"type":"html","title":null,"url":"./images/AOP-8.png","alt":"AOP 8","position":{"start":{"line":460,"column":1,"offset":12391},"end":{"line":460,"column":29,"offset":12419},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/63379b1a87a5c574d66bd727bbf7b57e/bb2fd/AOP-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.659574468085108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+0lEQVQY011R2aqDUAz0/39MfPFBqWJdKm51X6qiYutcJyD0NjDkmBNnMjlK27ZomgbMxL7veL/fOI4D8zxjXVds2yb4PX8+H+m7MqGkaYogCOC6HpIkxTRNKMvyRHXWXNzvd6mxT1VV+R6GF/I8xziOYPwjHIbhJHzAtm3w/I2qqhBFEcIwxO12g2ma0HUdnkfxRBxchBcU/pRlGZ7PpxBwWt8PzokyOI4DTdNgGIaQMVOYdeZlWfAbyqXA6LpOrNAep/B9XyzWdS2ilmXJxBTmfVEUYrtp6rNWyxso3A/BCxKFj1CIvldwPVrf9yJKAek9V0FncRyLM+Y/s+rB3exIcSIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 8\"\n        title=\"AOP 8\"\n        src=\"/static/63379b1a87a5c574d66bd727bbf7b57e/1d69c/AOP-8.png\"\n        srcset=\"/static/63379b1a87a5c574d66bd727bbf7b57e/4dcb9/AOP-8.png 188w,\n/static/63379b1a87a5c574d66bd727bbf7b57e/5ff7e/AOP-8.png 375w,\n/static/63379b1a87a5c574d66bd727bbf7b57e/1d69c/AOP-8.png 750w,\n/static/63379b1a87a5c574d66bd727bbf7b57e/bb2fd/AOP-8.png 1058w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":459,"column":1,"offset":12363},"end":{"line":460,"column":29,"offset":12419},"indent":[1]}},{"type":"html","value":"<div class=\"gatsby-code-title\">Java</div>"},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">proxyFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ProxyFactoryBean</span> pfBean <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProxyFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pfBean<span class=\"token punctuation\">.</span><span class=\"token function\">setTarget</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloTarget</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 메소드 이름을 비교해서 대상을 선정하는 포인트 컷 설정</span>\n    <span class=\"token class-name\">NameMatchMethodPointcut</span> pointcut <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NameMatchMethodPointcut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pointcut<span class=\"token punctuation\">.</span><span class=\"token function\">setMappedName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sayH*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 이름 비교 조건 설정</span>\n\n    <span class=\"token comment\">// 포인트컷과 어드바이스를 Advisor로 묶어서 추가</span>\n    pfBean<span class=\"token punctuation\">.</span><span class=\"token function\">addAdvisor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultPointcutAdvisor</span><span class=\"token punctuation\">(</span>pointcut<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UpperCaseAdvice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Hello</span> proxiedHello <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">)</span> pfBean<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 부가 기능 적용</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>proxiedHello<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"woowon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HI WOOWON\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 포인트컷 선정조건에 맞지 않아서 부가 기능이 적용 안됨</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>proxiedHello<span class=\"token punctuation\">.</span><span class=\"token function\">sayThankYou</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"woowon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Thank You woowon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":462,"column":1,"offset":12421},"end":{"line":482,"column":4,"offset":13109},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"포인트 컷과 어드바이스를 묶은 오브젝트를 ","position":{"start":{"line":484,"column":1,"offset":13111},"end":{"line":484,"column":24,"offset":13134},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">어드바이저(advisor)</code>","position":{"start":{"line":484,"column":24,"offset":13134},"end":{"line":484,"column":40,"offset":13150},"indent":[]}},{"type":"text","value":"라고 합니다.","position":{"start":{"line":484,"column":40,"offset":13150},"end":{"line":484,"column":47,"offset":13157},"indent":[]}},{"type":"break","position":{"start":{"line":484,"column":47,"offset":13157},"end":{"line":485,"column":1,"offset":13160},"indent":[1]}},{"type":"text","value":"두 가지를 묶어서 등록하는 이유는 따로 등록하면 어떤 어드바이스에 대해 포인트컷을 적용할지 애매해지기 때문에 함께 묶어서 등록합니다.","position":{"start":{"line":485,"column":1,"offset":13160},"end":{"line":485,"column":75,"offset":13234},"indent":[]}}],"position":{"start":{"line":484,"column":1,"offset":13111},"end":{"line":485,"column":75,"offset":13234},"indent":[1]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#어드바이스와-포인트컷의-재사용","title":null,"children":[],"data":{"hProperties":{"aria-label":"어드바이스와 포인트컷의 재사용 permalink","class":"anchor-header before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"어드바이스와 포인트컷의 재사용","position":{"start":{"line":487,"column":7,"offset":13242},"end":{"line":487,"column":23,"offset":13258},"indent":[]}}],"position":{"start":{"line":487,"column":1,"offset":13236},"end":{"line":487,"column":23,"offset":13258},"indent":[]},"data":{"id":"어드바이스와-포인트컷의-재사용","htmlAttributes":{"id":"어드바이스와-포인트컷의-재사용"},"hProperties":{"id":"어드바이스와-포인트컷의-재사용","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"ProxyFactoryBean은 스프링의 DI와 템플릿/콜백 패턴, 서비스 추상화 등의 기법이 모두 적용되어서 ","position":{"start":{"line":489,"column":1,"offset":13260},"end":{"line":489,"column":63,"offset":13322},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">독립적</code>","position":{"start":{"line":489,"column":63,"offset":13322},"end":{"line":489,"column":68,"offset":13327},"indent":[]}},{"type":"text","value":"이며 여러 프록시가 ","position":{"start":{"line":489,"column":68,"offset":13327},"end":{"line":489,"column":79,"offset":13338},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">공유</code>","position":{"start":{"line":489,"column":79,"offset":13338},"end":{"line":489,"column":83,"offset":13342},"indent":[]}},{"type":"text","value":"할 수 있는 ","position":{"start":{"line":489,"column":83,"offset":13342},"end":{"line":489,"column":90,"offset":13349},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">어드바이스</code>","position":{"start":{"line":489,"column":90,"offset":13349},"end":{"line":489,"column":97,"offset":13356},"indent":[]}},{"type":"text","value":"와 ","position":{"start":{"line":489,"column":97,"offset":13356},"end":{"line":489,"column":99,"offset":13358},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">포인트컷</code>","position":{"start":{"line":489,"column":99,"offset":13358},"end":{"line":489,"column":105,"offset":13364},"indent":[]}},{"type":"text","value":"으로 확장 기능을 분리할 수 있었다.","position":{"start":{"line":489,"column":105,"offset":13364},"end":{"line":489,"column":125,"offset":13384},"indent":[]}}],"position":{"start":{"line":489,"column":1,"offset":13260},"end":{"line":489,"column":125,"offset":13384},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./images/AOP-9.png","alt":"AOP 9","position":{"start":{"line":491,"column":1,"offset":13386},"end":{"line":491,"column":29,"offset":13414},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0148a6e32b3962ce1a73a2165bfe1aad/c6ff8/AOP-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.148936170212764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRElEQVQoz1WS67KCMAyEff+nU/85eAcBL4AXWhTUPX7BMp7O7KQN6XazYfR6vQTe77fatlVVVSrLUtfrVd57Q9M0A+73u+VCDHnvvJ7Pp0YQAdbtdtN6vdZsNtP5fLYcxZfLRdvtVpvNxr7Hcaw8z+3MPo4THQ4He2TUdZ0A7K52dnm1WilNM1PqnPuQeiPY7XZKkkRZlul0Olkkn2W51RphFEVaLBaGyWRqRcfjcbhEW3Vd2xlCkKap9vv9UIs6rGqar0K8QyEtQ0J7y+VS4/HYWkd1UEeL7CEkBpVlUZo9/zxEDYSoRdXj8VBRFJaHlLZQwiNEvrEHDNEIw5RZkKACs/EuLJRDBnqS6kveEwFqBoWBECXhpZ6kMiUArwFWhKFF0VzzeQ9at6H8/ofEMHHvnfnEADDdfPqowobfjsKAEAHHH7Ygq/tmCZHfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AOP 9\"\n        title=\"AOP 9\"\n        src=\"/static/0148a6e32b3962ce1a73a2165bfe1aad/1d69c/AOP-9.png\"\n        srcset=\"/static/0148a6e32b3962ce1a73a2165bfe1aad/4dcb9/AOP-9.png 188w,\n/static/0148a6e32b3962ce1a73a2165bfe1aad/5ff7e/AOP-9.png 375w,\n/static/0148a6e32b3962ce1a73a2165bfe1aad/1d69c/AOP-9.png 750w,\n/static/0148a6e32b3962ce1a73a2165bfe1aad/c6ff8/AOP-9.png 1088w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>"}],"position":{"start":{"line":491,"column":1,"offset":13386},"end":{"line":491,"column":29,"offset":13414},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":492,"column":1,"offset":13415}}}}