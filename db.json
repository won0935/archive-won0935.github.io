{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/Chic/source/favicon.ico","path":"favicon.ico","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/base.styl","path":"css/base.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/custom.styl","path":"css/custom.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/font.styl","path":"css/font.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/layout.styl","path":"css/layout.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/media.styl","path":"css/media.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/normalize.styl","path":"css/normalize.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/css/variable.styl","path":"css/variable.styl","modified":1,"renderable":1},{"_id":"themes/Chic/source/image/avatar.jpeg","path":"image/avatar.jpeg","modified":1,"renderable":1},{"_id":"themes/Chic/source/image/avatar.gif","path":"image/avatar.gif","modified":1,"renderable":1},{"_id":"themes/Chic/source/js/mathjax2.7.5.js","path":"js/mathjax2.7.5.js","modified":1,"renderable":1},{"_id":"themes/Chic/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"themes/Chic/source/js/tocbot.min.js","path":"js/tocbot.min.js","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/demo.css","path":"fonts/iconfont/demo.css","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/demo_index.html","path":"fonts/iconfont/demo_index.html","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.css","path":"fonts/iconfont/iconfont.css","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.eot","path":"fonts/iconfont/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.json","path":"fonts/iconfont/iconfont.json","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.js","path":"fonts/iconfont/iconfont.js","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.svg","path":"fonts/iconfont/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.ttf","path":"fonts/iconfont/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.woff","path":"fonts/iconfont/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.woff2","path":"fonts/iconfont/iconfont.woff2","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/lanting/lanting.TTF","path":"fonts/lanting/lanting.TTF","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/lanting/lanting.eot","path":"fonts/lanting/lanting.eot","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/lanting/lanting.woff","path":"fonts/lanting/lanting.woff","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/lanting/lanting.otf","path":"fonts/lanting/lanting.otf","modified":1,"renderable":1},{"_id":"themes/Chic/source/fonts/lanting/lanting.woff2","path":"fonts/lanting/lanting.woff2","modified":1,"renderable":1}],"Cache":[{"_id":"source/category/index.md","hash":"461f352b6ac6e01a3264b47756f77bbb38b9e3d3","modified":1635772048555},{"_id":"source/tag/index.md","hash":"7ee4c2654cc0a4e3fb9f7cee1ef95b226c522efe","modified":1635772072742},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-11-16-분산-시스템을-위한-유일-ID-생성기-설계.md","hash":"24688d27a6b31ec7a2775b7e9651d384ff3a05b4","modified":1637069836889},{"_id":"source/_posts/기타/2021-10-30-m1-league-of-legend.md","hash":"f57f380e440b7426c5339aecb3f9849ef354798c","modified":1636781516948},{"_id":"source/_posts/자바/2021-11-21-EnumUtils.md","hash":"8bf9e433d15578d04967a52e747eebe203aeec5a","modified":1637665585501},{"_id":"source/_posts/자바/2021-11-23-ObjectMapper.md","hash":"1c739775a2a3bd0985d88819582380645490b450","modified":1637665628363},{"_id":"source/_posts/디자인-패턴/2021-11-08-어댑터-파사드-패턴.md","hash":"9482c012944ce3bf0cdcd2d9c700b4946fce7d2a","modified":1637665343084},{"_id":"source/_posts/디자인-패턴/2021-11-09-템플릿-메소드-패턴.md","hash":"f1edffb001c0d12cf4bbd935eba6d337fb9a135a","modified":1636457607687},{"_id":"source/_posts/디자인-패턴/2021-11-11-이터레이터-패턴.md","hash":"f9ce6d180935722fdc1114f93059975a29659498","modified":1636623049905},{"_id":"source/_posts/디자인-패턴/2021-11-13-데코레이터-패턴.md","hash":"3cd5f6f2d626b9a0a34afcab02a4f625920c1252","modified":1636788616915},{"_id":"source/_posts/디자인-패턴/2021-11-11-컴포지트-패턴.md","hash":"8ad654a3e6332d3acb13c26f49e6e263f3408228","modified":1636625119599},{"_id":"source/_posts/디자인-패턴/2021-11-12-스트레티지-패턴.md","hash":"8cdd76fd781cdc3f90b2d9e09106589ade327341","modified":1636704358357},{"_id":"source/_posts/디자인-패턴/2021-11-13-옵저버-패턴.md","hash":"81d536a12e8788a72490881c80a2c49cb89ec359","modified":1636785611478},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-시스템-설계-면접-공략법/2021-10-13-시스템-설계-면접-공략법.md","hash":"d0fff4f054477f4c0e3cf73048e43154aedf0015","modified":1635252750866},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-개략적인-규모-추정/2021-10-13-개략적인-규모-추정.md","hash":"25a2eb4bd58a58b08d54a66e2a53b31c2e6bea62","modified":1635252750856},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-사용자-수에-따른-규모-확장성/2021-10-13-사용자-수에-따른-규모-확장성.md","hash":"59e630bb4c1220b4798c566e8ac84e7374a7da45","modified":1635252602725},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-안정-해시-설계/2021-10-13-안정-해시-설계.md","hash":"0f6e91ffebca80df965031e26dd7d734e8947b34","modified":1635252810299},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/2021-10-13-처리율-제한-장치의-설계.md","hash":"4b4c881e99a3bf50cdbeb2be36073a730c13b1c6","modified":1635253024929},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-키-값-저장소-설계/2021-10-13-키-값-저장소-설계.md","hash":"64aa6b25c3d24f972699a4f21410d84b5f991e82","modified":1635252750860},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/Untitled.png","hash":"4adf1cab45abd59ff5f4427cd7e37315970b60a5","modified":1635248760363},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/Untitled 2.png","hash":"cff745fbcd6d7caf3dfdb4c68ac79151e136bdc4","modified":1635248760363},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-키-값-저장소-설계/image-file-1.png","hash":"561912face0b03e806b168f7cbb94ba274da95f2","modified":1635248760364},{"_id":"source/_posts/디자인-패턴/2021-10-19-싱글톤-패턴/2021-10-19-싱글톤-패턴.md","hash":"d15fde3e7bd7bb136cecae5226eec056e1d07594","modified":1635342495469},{"_id":"source/_posts/디자인-패턴/2021-10-20-팩토리-패턴/image.jpg","hash":"1e6a30173de8b35ec387adfcdf7aca2996b6c3d7","modified":1635248760364},{"_id":"source/_posts/디자인-패턴/2021-10-20-팩토리-패턴/image2.jpg","hash":"1e6a30173de8b35ec387adfcdf7aca2996b6c3d7","modified":1635248760365},{"_id":"source/_posts/디자인-패턴/2021-10-20-팩토리-패턴/image3.jpg","hash":"15eccd51cb7a5d8de178cf52e5c5e26d17161f21","modified":1635248760365},{"_id":"source/_posts/디자인-패턴/2021-11-06-커맨드-패턴/2021-11-06-커맨드-패턴.md","hash":"580f08b9225757377ce1590675c4b6c47834a291","modified":1636289918901},{"_id":"source/_posts/디자인-패턴/2021-10-20-팩토리-패턴/2021-10-20-팩토리-패턴.md","hash":"9ae96e8e43e066b4ffca9e1872b7e1740e97a324","modified":1636781537631},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-안정-해시-설계/Untitled 1.png","hash":"56829c047947123467995c39a24d84a2f00eafc2","modified":1635248760361},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-안정-해시-설계/Untitled.png","hash":"b7f3ae1b47c6589ce2b245aa04008b553495d59e","modified":1635248760362},{"_id":"source/_posts/디자인-패턴/2021-10-20-팩토리-패턴/image4.jpg","hash":"f2f115186198d01cfa3ce9fe19e0e64a8adb9d92","modified":1635248760365},{"_id":"themes/Chic/ChangeLogs.md","hash":"06653c18d7a861f784269c9fe9dd69aa72b0c242","modified":1635647622859},{"_id":"source/_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/Untitled 1.png","hash":"9e51ec13443764bdea1a2c1ed3d50bab6f8dedf7","modified":1635248760363},{"_id":"themes/Chic/LICENSE.md","hash":"9911bdafa287bd65a822f84cc12012980bd10247","modified":1635647622860},{"_id":"themes/Chic/README-CN.md","hash":"af0765f26b72d49f1b29afe1a9d0c4a492912aaa","modified":1635647622860},{"_id":"themes/Chic/_config.yml","hash":"2112eb0b964fee8a2563aba0a9e0f084ad2f6d4a","modified":1636458536927},{"_id":"themes/Chic/README.md","hash":"e0bd27664e1d0b4ed1c8101d2bf69886c66c31d9","modified":1635647622860},{"_id":"themes/Chic/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1635647622860},{"_id":"themes/Chic/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1635647622861},{"_id":"themes/Chic/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1635647622861},{"_id":"themes/Chic/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1635647622861},{"_id":"themes/Chic/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1635647622861},{"_id":"themes/Chic/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1635647622861},{"_id":"themes/Chic/package.json","hash":"8b4072879307eed0e74ae35390825c5e03b9229c","modified":1635647622865},{"_id":"themes/Chic/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1635647622861},{"_id":"themes/Chic/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1635647622861},{"_id":"themes/Chic/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1635647622861},{"_id":"themes/Chic/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1635647622861},{"_id":"themes/Chic/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1635647622862},{"_id":"themes/Chic/layout/archive.ejs","hash":"48cdf67b628eb6a1c24d484ed252f5b0e3f06ddf","modified":1635647622864},{"_id":"themes/Chic/layout/category.ejs","hash":"cae7483c92ff639f74f8efe67959f37c97350800","modified":1635647622864},{"_id":"themes/Chic/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1635647622862},{"_id":"themes/Chic/layout/layout.ejs","hash":"8565bbea5e904e75e8d1ff5186b3a53650a7fa70","modified":1635647622864},{"_id":"themes/Chic/layout/index.ejs","hash":"b3344720176ad12dc88745cc5b31d497356ca4fa","modified":1635647622864},{"_id":"themes/Chic/layout/page.ejs","hash":"3179c527694a789760742e1923c7ac5f94b4997c","modified":1635647622864},{"_id":"themes/Chic/layout/post.ejs","hash":"a23f83d6c559ce88588472267468a54488d50e8e","modified":1635647622864},{"_id":"themes/Chic/scripts/imageTag.js","hash":"4b69804c1e4bf638eda7022499c440ce24e28587","modified":1635647622865},{"_id":"themes/Chic/layout/tag.ejs","hash":"d85ca78392be138b1589499cba95186b20c3a902","modified":1635647622864},{"_id":"themes/Chic/layout/_page/archive.ejs","hash":"464549286c92ea0d6cb057c6936e0f1a5d1c1dd2","modified":1635647622862},{"_id":"themes/Chic/layout/_page/post.ejs","hash":"6eb9cd3ee904e99ff78509298ae31a29fdbf49cf","modified":1635647622863},{"_id":"themes/Chic/layout/_page/page.ejs","hash":"1d875d59cf4d6b681cc8cf755f19b5355e5d1144","modified":1635647622862},{"_id":"themes/Chic/layout/_page/category.ejs","hash":"e8464e11d08a711fe815ea1cd101aa41d7310ebf","modified":1635647622862},{"_id":"themes/Chic/layout/_page/profile.ejs","hash":"c6d3cf2ef90e5d0fd580e7cff1db47c28fb36037","modified":1635647622863},{"_id":"themes/Chic/layout/_partial/footer.ejs","hash":"e1c332fab0d6cd713e36d46ccc14d0991067ba40","modified":1635647622863},{"_id":"themes/Chic/layout/_page/tag.ejs","hash":"0c20ff00532103f9a59639ca9956fc0bce4aabc2","modified":1635647622863},{"_id":"themes/Chic/source/favicon.ico","hash":"610338d8da8051fd7047783009c2cc6d8af44a04","modified":1635772707790},{"_id":"themes/Chic/layout/_partial/header.ejs","hash":"8f1e5272a4de96a3ed94de1db988b05b34515463","modified":1635647622863},{"_id":"themes/Chic/layout/_partial/head.ejs","hash":"8c8a2d95e0858cf0be9bf60d0ddf26876e1d9d35","modified":1635647622863},{"_id":"themes/Chic/layout/_partial/paginator.ejs","hash":"ab59d5db77f2aa64dfe03656e72fd49702c62e23","modified":1635647622863},{"_id":"themes/Chic/layout/_partial/toc.ejs","hash":"10bb9c303c948f5615149981cd85cbbd3e7c781c","modified":1635647622863},{"_id":"themes/Chic/layout/_plugins/mathjax.ejs","hash":"53f088fe44d51c4d9fb61aeac4c23b3cfcc19762","modified":1635647622864},{"_id":"themes/Chic/source/css/base.styl","hash":"72aef06d738853f13f1697b091002d6d776bd56d","modified":1635647622873},{"_id":"themes/Chic/source/css/custom.styl","hash":"bf8dee1a094b104d87a53b43f6daa7ba43b67574","modified":1635647622873},{"_id":"themes/Chic/source/css/font.styl","hash":"8c1da30e223c0a3d7ef452abc9f0e4cc71dbc140","modified":1635647622873},{"_id":"themes/Chic/source/css/layout.styl","hash":"9942d05bb2c55cf035d4bf9af325e1e81766a510","modified":1635647622873},{"_id":"themes/Chic/source/css/media.styl","hash":"f96c0dbb9653667906a6dc271f637543ac5c7212","modified":1635647622874},{"_id":"themes/Chic/source/css/normalize.styl","hash":"b3337320133b7a336db7033aa6bbe94b054c0b21","modified":1635647622874},{"_id":"themes/Chic/source/css/style.styl","hash":"a13f2c38070a89b06a2ede599f5ce5fd160e11c9","modified":1635647622874},{"_id":"themes/Chic/source/css/variable.styl","hash":"906faa95457eba70118a0705e13b8f43409e502f","modified":1635647622874},{"_id":"themes/Chic/source/image/avatar.jpeg","hash":"5d46dc78e55390dfab0149798249bf655dd03fca","modified":1635647622928},{"_id":"themes/Chic/source/css/_highlight/agate.styl","hash":"53027913ed8d4f75ac3e49e76aad824f0df62da3","modified":1635647622865},{"_id":"themes/Chic/source/js/script.js","hash":"ee0a12f2a33e71ee368d5a00270ef443cfc16d27","modified":1635647622929},{"_id":"themes/Chic/source/css/_highlight/androidstudio.styl","hash":"2af0861725f97f0ee2ded67c3d2d4548c62b2d16","modified":1635647622865},{"_id":"themes/Chic/source/js/mathjax2.7.5.js","hash":"7ba18c783d543cfb4b45a0118ccb73d3f68cd46e","modified":1635647622928},{"_id":"themes/Chic/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1635647622865},{"_id":"themes/Chic/source/css/_highlight/arta.styl","hash":"b3e81e3e694ceb8deed178adb8b91013c5120e30","modified":1635647622865},{"_id":"themes/Chic/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-cave-dark.styl","hash":"ce63dd8548688d88254405eedfa75b1d7c82449e","modified":1635647622866},{"_id":"themes/Chic/source/js/tocbot.min.js","hash":"bae97e8a24a05a99335f8e725641c8ca9c50502a","modified":1635647622929},{"_id":"themes/Chic/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-dune-dark.styl","hash":"c196ff0ee064af0e507823694ae39020addfc280","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-estuary-dark.styl","hash":"0bb16a4eff93688f40787abc2f9e56e7d5cc93e7","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-forest-dark.styl","hash":"effbc5d75fa87203c847039869c22031b40d5b7d","modified":1635647622866},{"_id":"themes/Chic/source/css/_highlight/atelier-heath-dark.styl","hash":"9a2e9a1d0a01bbdf158560c3ed1c134e098b2c68","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-lakeside-dark.styl","hash":"10ee3882fca7b97a37bd309d2d35fce9868647bb","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-plateau-dark.styl","hash":"84c80e6f67f62fce958d25817c277d2360272617","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-savanna-dark.styl","hash":"e32c1c70def8060fce5e790979a126da650ac642","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-seaside-dark.styl","hash":"2edf385215bbe1985b1a10106525d362667d28c2","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1635647622867},{"_id":"themes/Chic/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"538a14321193cd8abf2ddc484306631e54149ffb","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/brown-paper.styl","hash":"329b85ae9130a5587a6fb1c6f80396f9cca5ddc1","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/codepen-embed.styl","hash":"8b7b34484f76a6c2c3b1a9e49abb9b382f439ae8","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/dark.styl","hash":"f5e6e75958de59e87fc6be3a1668e870e20bc836","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/darkula.styl","hash":"9717efa9194837ba3fb4d762997d33075dcf8bfa","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/far.styl","hash":"aaac3028f5e33123cd123a583cddc9290c45ec8e","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1635647622868},{"_id":"themes/Chic/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/gruvbox-dark.styl","hash":"76b744c14fd5600bea64731c05df97c2df75523f","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/highlightjs.styl","hash":"65b5981dc3c57cedd1cb668c0e377230987e08d1","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/hybrid.styl","hash":"b8eb5c69d12f2ee5ebc50265ae271699d7f1a8d3","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/hopscotch.styl","hash":"1378a6bc67a32c0cbff72ab771268b53f9aa586d","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/ir-black.styl","hash":"53e5d74326a4527b92272bbd6946d4fec92720e8","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/index.styl","hash":"002d5596f6379cc87dbd43d9145bc764aa666be1","modified":1635647622869},{"_id":"themes/Chic/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/kimbie.styl","hash":"51b889ca7c6fe178cfbbe28d875a6ea427184441","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/monokai-sublime.styl","hash":"c385b11345894be7e6ce3c5f08663e199933b8e4","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/monokai.styl","hash":"f87be027848ea6bee623a08ad1e17b2f5b7937ee","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/obsidian.styl","hash":"199e28326be8590883f0813ebbd54fcfaa4750fd","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/paraiso.styl","hash":"75f181eece6b71d033ea0c8d6cf00ae7efb9e29b","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1635647622870},{"_id":"themes/Chic/source/css/_highlight/pojoaque.styl","hash":"2601b4285803a7cea5ccded8d624ca95f80e3d88","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/railscasts.styl","hash":"b6674db9210e0c4444e4835fff2d1361f3ebd64c","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/rainbow.styl","hash":"c0cf97aae3e10fdcd10414547a711c9effbc39b8","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/school-book.styl","hash":"beabbbcc7930f8de19159381a01c0ba41dc2291f","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/solarized-dark.styl","hash":"90c9da5aa594383697e5b18892a7f95beb053f55","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/sunburst.styl","hash":"af3eec0fd56151e55bbd49c31b151f36717611d8","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/tomorrow-night-blue.styl","hash":"f24c17d0ab815dcfaab3438cb9fe2ab4839f5e0d","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/tomorrow-night-bright.styl","hash":"7674fecb6d27350727dc0d2dc93bc018382ebbd0","modified":1635647622871},{"_id":"themes/Chic/source/css/_highlight/tomorrow-night-eighties.styl","hash":"28d751075ebabf7d0327a36f725076fe82fdf626","modified":1635647622872},{"_id":"themes/Chic/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1635647622872},{"_id":"themes/Chic/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1635647622872},{"_id":"themes/Chic/source/css/_highlight/tomorrow-night.styl","hash":"16ba09b2db501e4e3e2e7d62595d9bf935bf27c4","modified":1635647622872},{"_id":"themes/Chic/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1635647622872},{"_id":"themes/Chic/source/css/_highlight/zenburn.styl","hash":"68ff9332ccc03f9389b15b713415cde016f8088f","modified":1635647622872},{"_id":"themes/Chic/source/css/_lib/looper.css","hash":"863144dc9af7c1e181670515bc85eaf768f4e287","modified":1635647622872},{"_id":"themes/Chic/source/css/_lib/tocbot.css","hash":"15601837bf8557c2fd111e4450ed4c8495fd11a0","modified":1635647622872},{"_id":"themes/Chic/source/css/_page/archive.styl","hash":"71ea842f068b29b4418dd09450db09d27dcf0947","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/page.styl","hash":"34e33b52d2e046aa2f5494e81ff4ac2d5ca78058","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/profile.styl","hash":"5ef6d5a06132f26b7aa01b2fbf4bbfb8ee862b7b","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/category.styl","hash":"cead361269616b7a6ddec3090d9fa34c3c6ac722","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/tag.styl","hash":"55b220cc58011876fb3a470cd1fde8ed87c93079","modified":1635647622873},{"_id":"themes/Chic/source/css/_partial/footer.styl","hash":"4f58e607eaa59cda3b5a9fdb3404ffb75c4d1a03","modified":1635647622873},{"_id":"themes/Chic/source/css/_partial/header.styl","hash":"be70b4ab3bcc977f1055664899742804c716929d","modified":1635647622873},{"_id":"themes/Chic/source/css/_partial/paginator.styl","hash":"b4f4a5180c4cbc70d186792b8a1fd0f5855bd86a","modified":1635647622873},{"_id":"themes/Chic/source/fonts/iconfont/demo.css","hash":"65c50db528a5abe06426b1a20735feaf1f2a0d9b","modified":1635647622874},{"_id":"themes/Chic/source/fonts/iconfont/demo_index.html","hash":"16e01463756a77b4acd15ade4e6b73f0376d75e1","modified":1635647622874},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.css","hash":"1e5540dca41dc53879226750f936e72daf616662","modified":1635647622874},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.eot","hash":"d18736f7885569e497698d17f49b9167add67dc6","modified":1635647622874},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.json","hash":"eae94b803d34035008842855d0bead92d2035281","modified":1635647622875},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.js","hash":"87bfdaae31251f4d605646c5ae9c67196f6cc4e2","modified":1635647622875},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.svg","hash":"5c9c4e44179a7435d0f91df4ce1154dd677ad8c2","modified":1635647622875},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.ttf","hash":"41c4f4dc82e42452dcfd19caed6c7dc333ee769e","modified":1635647622875},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.woff","hash":"a57593c49b56c16ac1def0e1f3dbca3f658b3579","modified":1635647622875},{"_id":"themes/Chic/source/fonts/iconfont/iconfont.woff2","hash":"39d97a0f72417487f5c1e0a0abf8e27dd6ebda31","modified":1635647622875},{"_id":"themes/Chic/source/css/_page/_post/post_code.styl","hash":"06c3a3524ffd4b27e03e79489001997ea5d727d3","modified":1635647622872},{"_id":"themes/Chic/source/css/_page/_post/post_copyright.styl","hash":"64fd9f07ed45f035057d46740af0db70218714aa","modified":1635647622872},{"_id":"themes/Chic/source/css/_page/_post/post_content.styl","hash":"5e3d63077549d8e2e5ff8c452e809760f5a99c17","modified":1635647622872},{"_id":"themes/Chic/source/css/_page/_post/post_header.styl","hash":"d37b032bc5edca92c84bf62070a28fa40939df55","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/_post/post_tags.styl","hash":"2ff93677aa4d81da83c659b4dd4e3cb482d9ce7d","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/_post/post_nav.styl","hash":"03accaba13c995cbe65a05a88549ff74e992eb3f","modified":1635647622873},{"_id":"themes/Chic/source/css/_page/_post/post_toc.styl","hash":"15e1ec7af93f41184f986aba21991a79923b0a0e","modified":1635647622873},{"_id":"source/_posts/기타/스크린샷 2021-10-30 오후 3.59.23.png","hash":"10e725e16e4b4ad1e49f36661a1f6da586f5f3f7","modified":1635577168756},{"_id":"source/_posts/기타/스크린샷 2021-10-30 오후 4.01.39.png","hash":"0d24012b8b87164dc068bd4b26d1f1e554470dcf","modified":1635577301919},{"_id":"source/_posts/기타/스크린샷 2021-10-30 오후 3.56.07.png","hash":"04173aedf5b95d2aadbe52325af4cba638fb12f9","modified":1635576971697},{"_id":"source/_posts/기타/스크린샷 2021-10-30 오후 3.42.38.png","hash":"a6f8fa352dc5bd07d27854969a85da3c6a783075","modified":1635576169810},{"_id":"themes/Chic/source/fonts/lanting/lanting.woff2","hash":"5f325fcd2726a5b44e08b7004a5219e14847cbfa","modified":1635647622928},{"_id":"themes/Chic/source/fonts/lanting/lanting.woff","hash":"642ad1f17d27d4b1010d1a0571d1b44cbc823d9d","modified":1635647622927},{"_id":"themes/Chic/source/fonts/lanting/lanting.eot","hash":"3e184614f037939a6f98d607da3ed7dffb350e65","modified":1635647622906},{"_id":"themes/Chic/source/fonts/lanting/lanting.TTF","hash":"97e9a4538cceef4b17d54c7dc589524905d1b685","modified":1635647622892},{"_id":"themes/Chic/source/image/avatar.gif","hash":"79ca51f5937675da46a646a5622ea414be1e0677","modified":1635773872955},{"_id":"themes/Chic/source/fonts/lanting/lanting.otf","hash":"4e184da596772d3ef6e5763cdee3e46a1ce2f2dd","modified":1635647622925},{"_id":"public/atom.xml","hash":"bb87bd9ac6f1029d32b10df8dae227aa628fe64a","modified":1637925974199},{"_id":"public/post-sitemap.xml","hash":"e02e611240bc4be9aff7436a8138c37573010744","modified":1637925974199},{"_id":"public/page-sitemap.xml","hash":"df22c240575b98af8ae0adace2e88907df3cafa7","modified":1637925974199},{"_id":"public/category-sitemap.xml","hash":"b478729524cf2ddae3a8b8b897b4cc2883936971","modified":1637925974199},{"_id":"public/tag-sitemap.xml","hash":"dc1cfb67be32e00998db2533fdc1cd12731d9250","modified":1637925974199},{"_id":"public/sitemap.xsl","hash":"4321fa69dc1b8811d32b7a1478e5603e038cea1a","modified":1637925974199},{"_id":"public/sitemap.xml","hash":"6020f465604038efefc7150c54771487e12f2f3f","modified":1637925974199},{"_id":"public/robots.txt","hash":"7e49dfd97319f5dd7cdaea8518cf43e0e8d01e5a","modified":1637925974199},{"_id":"public/category/index.html","hash":"eef90d13f1f8d95f18bf07ec14027c1fab03aa03","modified":1637925974199},{"_id":"public/tag/index.html","hash":"c388187d8af52d31399181115e6bf7f899423b36","modified":1637925974199},{"_id":"public/2021/11/23/자바/2021-11-23-ObjectMapper/index.html","hash":"f6c5d339b9ebc4239fb094d9303c95ccf7edd411","modified":1637925974199},{"_id":"public/2021/11/23/자바/2021-11-21-EnumUtils/index.html","hash":"0d15c9f5cd44aaf7c1a4cc4ecc8cd8e9f3b6bdff","modified":1637925974199},{"_id":"public/2021/10/30/기타/2021-10-30-m1-league-of-legend/index.html","hash":"63c8939c71ba14086c2a9d7660ff8f9e57909e92","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-안정-해시-설계/2021-10-13-안정-해시-설계/index.html","hash":"3831e9f66f737f5aff6432b05b54b7bd28c5b00f","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-시스템-설계-면접-공략법/2021-10-13-시스템-설계-면접-공략법/index.html","hash":"b3ed03635c9b177c83d16322747cd90ad5d19daa","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-키-값-저장소-설계/2021-10-13-키-값-저장소-설계/index.html","hash":"4ec02a57f87469298b7da80c77cc83c608164511","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-개략적인-규모-추정/2021-10-13-개략적인-규모-추정/index.html","hash":"ca3d538a24296ba9bd97fbb030bde151159e9a38","modified":1637925974199},{"_id":"public/archives/index.html","hash":"df36e61c675324a3a3e52bb0a4e07cc36854a77d","modified":1637925974199},{"_id":"public/archives/page/2/index.html","hash":"5050aa4b8c7e0abff0f8cd0413fee4e346f61456","modified":1637925974199},{"_id":"public/archives/2021/index.html","hash":"7be813d87faefa568d94d519a4c7b5a29345bb0f","modified":1637925974199},{"_id":"public/archives/2021/page/2/index.html","hash":"8da5c16427b4a8d9be746de83408acea460d966f","modified":1637925974199},{"_id":"public/archives/2021/10/index.html","hash":"98fa15e4372b5cd902d084846993eeeaf65dd20e","modified":1637925974199},{"_id":"public/archives/2021/11/index.html","hash":"98770e38585969f4293a73dbec57208ab130742d","modified":1637925974199},{"_id":"public/index.html","hash":"9a7881297936001df9e9f7fe5bc22fb6101417b8","modified":1637925974199},{"_id":"public/page/2/index.html","hash":"9a7881297936001df9e9f7fe5bc22fb6101417b8","modified":1637925974199},{"_id":"public/categories/가상면접-사례로-배우는-대규모-시스템-설계기초/index.html","hash":"85d711ac401082f70dc8c67681322f35eb27475e","modified":1637925974199},{"_id":"public/categories/기타/index.html","hash":"68dbbe3a44ae294fc8361ffbdb2efcaf6d8ffb6d","modified":1637925974199},{"_id":"public/categories/자바/index.html","hash":"d9ff617f73c16afcda4c8ac2a90fcbeaf8b0c492","modified":1637925974199},{"_id":"public/categories/디자인패턴/index.html","hash":"2ede949613e61cf52ec3ee0a71eb80f9943b38c0","modified":1637925974199},{"_id":"public/tags/시스템설계/index.html","hash":"2802330be241c8d0fe842b705ca74e1a56b5fae2","modified":1637925974199},{"_id":"public/tags/대규모설계/index.html","hash":"81035fde75a5534874053296f4401faa5a07de1b","modified":1637925974199},{"_id":"public/tags/Primary-Key/index.html","hash":"5038212351610d25bbbd951292441595f94072a7","modified":1637925974199},{"_id":"public/tags/DataBase/index.html","hash":"65a011c0872ef57e3a408b560e33afff76ddb69c","modified":1637925974199},{"_id":"public/tags/m1/index.html","hash":"fbe50d9c3e6af4cebf47089b6cb9763ab7672c69","modified":1637925974199},{"_id":"public/tags/롤/index.html","hash":"73f81b122af48842fa8902c562dfe33e5830360a","modified":1637925974199},{"_id":"public/tags/league-of-legend/index.html","hash":"aabc85542579d94bc75f7f20351b4e3a306ae993","modified":1637925974199},{"_id":"public/tags/mac-on-metal/index.html","hash":"525367c7ae31c19cb0928b70bca5524a322215bb","modified":1637925974199},{"_id":"public/tags/자바/index.html","hash":"bdb5d184162e9f16cd185af312f06baa530700c7","modified":1637925974199},{"_id":"public/tags/Util/index.html","hash":"bc70f9eafb8d3fb83d29455f3edddf4893fb4547","modified":1637925974199},{"_id":"public/tags/Enum/index.html","hash":"6e832996b4c91f503b45364354d1ee14377c3294","modified":1637925974199},{"_id":"public/tags/ObjectMapper/index.html","hash":"8c3fd4fb006d3e69cb9a03d8bdbb3815fb7e5e74","modified":1637925974199},{"_id":"public/tags/디자인패턴/index.html","hash":"221f055fc0500651893ae3f7a4a8d9c8fbf07071","modified":1637925974199},{"_id":"public/tags/어댑터/index.html","hash":"15aef76ecfb849f8a231696e35db1ee3c55c87af","modified":1637925974199},{"_id":"public/tags/이터레이터/index.html","hash":"4e2c3981893c225b5cf9e38bbd123d71f22b07a0","modified":1637925974199},{"_id":"public/tags/파사드/index.html","hash":"9644383508bd8e5fe870c181fd82ce51627e50e0","modified":1637925974199},{"_id":"public/tags/템플릿메소드/index.html","hash":"22b85e67073662f4d65eafc2ceb31b7b94497df7","modified":1637925974199},{"_id":"public/tags/스트레티지/index.html","hash":"b6925dc0a07af8db58600230cb330a0f920530c1","modified":1637925974199},{"_id":"public/tags/데코레이터/index.html","hash":"1706441b4a8808abea0df1d0cd8295440750874a","modified":1637925974199},{"_id":"public/tags/컴포지트/index.html","hash":"85e49cd0256ddb9718ca58febd285676d326cb84","modified":1637925974199},{"_id":"public/tags/옵저버/index.html","hash":"4be1abc04ee18618be7b1c7eb45e0b921ee9293a","modified":1637925974199},{"_id":"public/tags/면접/index.html","hash":"93a6e87673ef1dd76e7c232466a6810642a11432","modified":1637925974199},{"_id":"public/tags/DB설계/index.html","hash":"5e8fad2d08247aa4fae10ee3e36f901be189f5e5","modified":1637925974199},{"_id":"public/tags/서버설계/index.html","hash":"6461e0c2177b9093fdf85673e1ae9c6885e22ca9","modified":1637925974199},{"_id":"public/tags/분산설계/index.html","hash":"f5948520af6d51dd25dc022585ca8ae9048366ef","modified":1637925974199},{"_id":"public/tags/안정해시/index.html","hash":"6ab2bd1eec09530996d0a6594e89e4abc098dead","modified":1637925974199},{"_id":"public/tags/가상노드/index.html","hash":"b3a89542b7f330afb155fa256c519d207242f4b7","modified":1637925974199},{"_id":"public/tags/토큰버킷/index.html","hash":"66f4e3aceb34a1a2e0fea6b44a9c96ff6c473cef","modified":1637925974199},{"_id":"public/tags/처리율제한/index.html","hash":"c42afa966e4114250a8a934d323f6d01d941e005","modified":1637925974199},{"_id":"public/tags/누출버킷/index.html","hash":"e946d185d7f1575152526baf61f8c46da9c769a1","modified":1637925974199},{"_id":"public/tags/이동윈도로그/index.html","hash":"8a58d842d06a7aa021ec8489f1937e10c380bafe","modified":1637925974199},{"_id":"public/tags/고정윈도카운터/index.html","hash":"6ba98d1e5d8e7f391f26cf81a74b295c7abe4f9d","modified":1637925974199},{"_id":"public/tags/키값저장소/index.html","hash":"260067e7898a61a348a1d2f8250b9040602e8eeb","modified":1637925974199},{"_id":"public/2021/11/13/디자인-패턴/2021-11-13-데코레이터-패턴/index.html","hash":"0a181345eef6da29042847e594f8f44bf7f9dcfa","modified":1637925974199},{"_id":"public/2021/11/12/디자인-패턴/2021-11-13-옵저버-패턴/index.html","hash":"b451417fb2cc390bcabc1c37865f1c629ee030b3","modified":1637925974199},{"_id":"public/2021/11/11/디자인-패턴/2021-11-12-스트레티지-패턴/index.html","hash":"945c2fa3a0ef7d53af6d3dccf29bda0737b05ee8","modified":1637925974199},{"_id":"public/2021/11/11/디자인-패턴/2021-11-11-컴포지트-패턴/index.html","hash":"1effea9f8a90bc72b694f72009e3b185a21eb611","modified":1637925974199},{"_id":"public/2021/11/09/디자인-패턴/2021-11-11-이터레이터-패턴/index.html","hash":"907c27117f8ab8b19f8db694b8c4c71e3cc55b81","modified":1637925974199},{"_id":"public/2021/11/08/디자인-패턴/2021-11-09-템플릿-메소드-패턴/index.html","hash":"4edd4ffcd6b59b270c20b6de0321b56d0676fb4a","modified":1637925974199},{"_id":"public/2021/11/08/디자인-패턴/2021-11-08-어댑터-파사드-패턴/index.html","hash":"46e74cb8e45aca9c011cf8207f0e3e7fa7af6cc1","modified":1637925974199},{"_id":"public/2021/11/06/디자인-패턴/2021-11-06-커맨드-패턴/2021-11-06-커맨드-패턴/index.html","hash":"8db6d5cfd6bdb1f52c7781783410c2433b9c6923","modified":1637925974199},{"_id":"public/2021/10/28/디자인-패턴/2021-10-20-팩토리-패턴/2021-10-20-팩토리-패턴/index.html","hash":"009a657c98292946333e74ffea4b4af0ba2dbf8b","modified":1637925974199},{"_id":"public/2021/10/27/디자인-패턴/2021-10-19-싱글톤-패턴/2021-10-19-싱글톤-패턴/index.html","hash":"afce4f90d6692d44c1bbe3c370c24dab3759f74f","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/2021-10-13-처리율-제한-장치의-설계/index.html","hash":"cea4154c98e658e7630f6a2de746e161a865f443","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-11-16-분산-시스템을-위한-유일-ID-생성기-설계/index.html","hash":"23aa631ff52b011edb4744781faf498954266f26","modified":1637925974199},{"_id":"public/2021/10/26/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-사용자-수에-따른-규모-확장성/2021-10-13-사용자-수에-따른-규모-확장성/index.html","hash":"19d85b805768074e304fa689ec38a5d00a1fed42","modified":1637925974199},{"_id":"public/tags/싱글톤/index.html","hash":"290233e23603761e13f971e51abd2292be86ea5c","modified":1637925974199},{"_id":"public/tags/팩토리/index.html","hash":"466c6b869aba5f9f7688e9069943686d34ebd2a0","modified":1637925974199},{"_id":"public/tags/커맨드/index.html","hash":"9f7e1e869d193aa9ddab07d05e0c81a2255787f3","modified":1637925974199},{"_id":"public/favicon.ico","hash":"610338d8da8051fd7047783009c2cc6d8af44a04","modified":1637925974199},{"_id":"public/image/avatar.jpeg","hash":"5d46dc78e55390dfab0149798249bf655dd03fca","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.eot","hash":"d18736f7885569e497698d17f49b9167add67dc6","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.svg","hash":"5c9c4e44179a7435d0f91df4ce1154dd677ad8c2","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.ttf","hash":"41c4f4dc82e42452dcfd19caed6c7dc333ee769e","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.woff2","hash":"39d97a0f72417487f5c1e0a0abf8e27dd6ebda31","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.woff","hash":"a57593c49b56c16ac1def0e1f3dbca3f658b3579","modified":1637925974199},{"_id":"public/css/base.css","hash":"2fce73a3c2df8f93edeb5e34a53b7d83e5191d85","modified":1637925974199},{"_id":"public/css/custom.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1637925974199},{"_id":"public/css/font.css","hash":"87059edd1f2bfc4296f5599e73208893f2b06458","modified":1637925974199},{"_id":"public/css/layout.css","hash":"c81e2e01ff5e95a3e613064b8490045ff936c305","modified":1637925974199},{"_id":"public/css/media.css","hash":"5023ee404900a47d61ca0591b2d4e9eace0fe88e","modified":1637925974199},{"_id":"public/css/normalize.css","hash":"2d4b663b6a4c68295b6ba240fa2dd9fb3863093c","modified":1637925974199},{"_id":"public/css/variable.css","hash":"cb4180b3bbad471e30cf52ebb40e998d58a30d7d","modified":1637925974199},{"_id":"public/js/script.js","hash":"ee0a12f2a33e71ee368d5a00270ef443cfc16d27","modified":1637925974199},{"_id":"public/js/tocbot.min.js","hash":"bae97e8a24a05a99335f8e725641c8ca9c50502a","modified":1637925974199},{"_id":"public/fonts/iconfont/demo.css","hash":"65c50db528a5abe06426b1a20735feaf1f2a0d9b","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.css","hash":"1e5540dca41dc53879226750f936e72daf616662","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.json","hash":"3123aa840109e385d58a75d34e88a2d621e1ada8","modified":1637925974199},{"_id":"public/css/style.css","hash":"a348e7b97835a4865d295c4f9c863a55f6f99d72","modified":1637925974199},{"_id":"public/fonts/iconfont/demo_index.html","hash":"16e01463756a77b4acd15ade4e6b73f0376d75e1","modified":1637925974199},{"_id":"public/js/mathjax2.7.5.js","hash":"7ba18c783d543cfb4b45a0118ccb73d3f68cd46e","modified":1637925974199},{"_id":"public/fonts/iconfont/iconfont.js","hash":"87bfdaae31251f4d605646c5ae9c67196f6cc4e2","modified":1637925974199},{"_id":"public/fonts/lanting/lanting.woff2","hash":"5f325fcd2726a5b44e08b7004a5219e14847cbfa","modified":1637925974199},{"_id":"public/fonts/lanting/lanting.woff","hash":"642ad1f17d27d4b1010d1a0571d1b44cbc823d9d","modified":1637925974199},{"_id":"public/fonts/lanting/lanting.eot","hash":"3e184614f037939a6f98d607da3ed7dffb350e65","modified":1637925974199},{"_id":"public/fonts/lanting/lanting.TTF","hash":"97e9a4538cceef4b17d54c7dc589524905d1b685","modified":1637925974199},{"_id":"public/image/avatar.gif","hash":"79ca51f5937675da46a646a5622ea414be1e0677","modified":1637925974199},{"_id":"public/fonts/lanting/lanting.otf","hash":"4e184da596772d3ef6e5763cdee3e46a1ce2f2dd","modified":1637925974199}],"Category":[{"name":"가상면접 사례로 배우는 대규모 시스템 설계기초","_id":"ckwgau2fa0004jd9kfb7dfc44"},{"name":"기타","_id":"ckwgau2fd0009jd9kg7ij76r5"},{"name":"자바","_id":"ckwgau2fe000ejd9k7ufq1wt1"},{"name":"디자인패턴","_id":"ckwgau2fj000njd9k7z22fv7e"}],"Data":[],"Page":[{"title":"category","date":"2021-11-01T13:04:55.000Z","layout":"category","_content":"","source":"category/index.md","raw":"---\ntitle: category\ndate: 2021-11-01 22:04:55\nlayout: category\n---\n","updated":"2021-11-01T13:07:28.555Z","path":"category/index.html","comments":1,"_id":"ckwgau2f10000jd9k722efrbq","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Tag","date":"2021-11-01T13:04:37.000Z","layout":"tag","_content":"","source":"tag/index.md","raw":"---\ntitle: Tag\ndate: 2021-11-01 22:04:37\nlayout: tag\n---\n","updated":"2021-11-01T13:07:52.742Z","path":"tag/index.html","comments":1,"_id":"ckwgau2f80002jd9k8kxgf31s","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"분산 시스템을 위한 유일 ID 생성기 설계","_content":"\n\n데이터베이스의 PK 세팅 전략을 세우려 한다.\n\n> ~~그냥 DB에서 `auto_increment` 하면 되지 않나?~~\n> ➡️ 분산되어있는 환경이기 때문에 불가능하다.\n\n**분산 DB 환경**에선 생각보다 쉽지 않다. \n방법을 찾아보자.\n\n## 1단계 : 문제이해 및 설계범위 확정\n\n> _시스템 설계 면접의 첫 단계는 적절한 질문을 통해 모호함을 없애고 설계 방향을 정하는 것이다._\n\n### 지원자 vs 면접관 질문 예시\n\n    지원자 : ID는 어떤 특성을 갖나요?\n    면접관 : 유일해야 하고, 정렬 가능해야합니다\n    지원자 : 새로운 레코드에 붙일 ID는 항상 1만큼 큰 값이여야 하나요?\n    면접관 : ID의 값은 시간이 흐름에 따라 커지지만, 언제나 1씩 증가한다고는 할 수 없습니다.\n    지원자 : ID는 숫자로만 구성되나요?\n    면접관 : 그렇습니다.\n    지원자 : 시스템의 규모는 어느정도인가요?\n    면접관 : 초당 10,000 ID를 생성할 수 있어야 합니다.\n\n### 질문을 통해 유추할 수 있는 요구사항은 다음과 같다.\n\n1. ID는 **유일**해야 함\n2. ID는 **숫자**로만 구성되어야 함\n3. ID는 **64비트**로 표현될 수 있는 값이어야 함\n4. ID는 발급날짜에 따라 **정렬가능**해야 함\n5. 초당 **10,000** ID 를 생성할 수 있어야 함\n\n---\n\n## 2단계 : 개략적 설계안 제시 및 동의 구하기\n\n분산 시스템 상에서 ID 생성 전략을 알아보고 각각의 **장단점**과 위의 질문에 대해 **적합한 전략**인지 살펴보자.\n\n### 다중 마스터 복제\n\n![image](https://user-images.githubusercontent.com/55419159/141991101-f0657fa7-61da-4a9f-a90f-96a0b9223c44.png)\n\n이 접근법은 기본적으로 DB의 `auto_increment` 속성을 활용한다. \n1만큼 증가시키는 것이 아닌 `k`(DB의 숫자)만큼 증가시킨다.\n\n#### 단점\n- 규모를 확장하거나 축소할 때 문제가 있음\n\n\n### UUID\n\n![image](https://user-images.githubusercontent.com/55419159/141992063-ab125f8f-f171-4b29-9e82-1786ba96c29b.png)\n\nUUID는 컴퓨터 시스템에 저장되는 정보를 유일하게 식별하기 위한 **128비트 짜리 숫자**이다.\nUUID는 **충돌 가능성**이 지극히 낮다.(중복 UUID가 생길 확률은 초당 10억개의 UUID를 100년동안 만들어야 생김)\n\n#### 장점\n- 단순함\n- 서버 간 조율이 필요하지 않으므로 동기화 이슈 없음\n- 규모 확장 간편함\n\n#### 단점\n- 128비트로 길다\n- 시간 순으로 정렬할 수 없음\n- ID에 숫자가 아닌 값이 포함됨\n\n\n### 티켓 서버\n\n![image](https://user-images.githubusercontent.com/55419159/141993088-4e1ddc61-a711-4e93-8199-43f4e8c1fe23.png)\n\n티켓 서버는 auto_increment 기능을 하는 중앙 서버에서 유일키를 생성해 내려주는 방식이다.\n\n#### 장점\n- 유일성이 보장되는 숫자로만 구성된 ID를 쉽게 만들 수 있음\n- 구현이 쉽고 중소 규모의 어플리케이션에 적합\n\n#### 단점\n- 티켓서버가 SPOF(Single-Point-of_Failure)가 된다는 엄청난 단점\n\n\n### 트위터 스노플레이크 접근법\n\n![image](https://user-images.githubusercontent.com/55419159/141993807-cce535c1-5ff1-4a71-816a-932cd7f5aa89.png)\n\n<br>\n\n이 전략은 기본적으로 **ID를 여러 절로 분할**한다.\n\n| 섹션                           | 설명                                       |\n| --------------------------------- | ------------------------------------------ |\n| 사인 비트                | 1비트를 할당한다. 쓰임세가 없지만 음양수를 구별할 때 사용할 수 있다.     |\n| 타임스탬프 | 41비트를 할당한다. 기원시각으로부터 몇 밀리초가 지났는 지 알 수 있는 값이다.                 |\n| Work ID | 10비트를 할당한다.     |\n| 일련번호                     | 12비트를 할당한다. 각 서버에서는 ID를 생성할 때마다 1씩 증가시킨다. 1밀리초가 경과했을 때 0으로 초기화한다.                               |","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-11-16-분산-시스템을-위한-유일-ID-생성기-설계.md","raw":"---\ntitle: 분산 시스템을 위한 유일 ID 생성기 설계\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\n  - Primary Key\n  - DataBase\n---\n\n\n데이터베이스의 PK 세팅 전략을 세우려 한다.\n\n> ~~그냥 DB에서 `auto_increment` 하면 되지 않나?~~\n> ➡️ 분산되어있는 환경이기 때문에 불가능하다.\n\n**분산 DB 환경**에선 생각보다 쉽지 않다. \n방법을 찾아보자.\n\n## 1단계 : 문제이해 및 설계범위 확정\n\n> _시스템 설계 면접의 첫 단계는 적절한 질문을 통해 모호함을 없애고 설계 방향을 정하는 것이다._\n\n### 지원자 vs 면접관 질문 예시\n\n    지원자 : ID는 어떤 특성을 갖나요?\n    면접관 : 유일해야 하고, 정렬 가능해야합니다\n    지원자 : 새로운 레코드에 붙일 ID는 항상 1만큼 큰 값이여야 하나요?\n    면접관 : ID의 값은 시간이 흐름에 따라 커지지만, 언제나 1씩 증가한다고는 할 수 없습니다.\n    지원자 : ID는 숫자로만 구성되나요?\n    면접관 : 그렇습니다.\n    지원자 : 시스템의 규모는 어느정도인가요?\n    면접관 : 초당 10,000 ID를 생성할 수 있어야 합니다.\n\n### 질문을 통해 유추할 수 있는 요구사항은 다음과 같다.\n\n1. ID는 **유일**해야 함\n2. ID는 **숫자**로만 구성되어야 함\n3. ID는 **64비트**로 표현될 수 있는 값이어야 함\n4. ID는 발급날짜에 따라 **정렬가능**해야 함\n5. 초당 **10,000** ID 를 생성할 수 있어야 함\n\n---\n\n## 2단계 : 개략적 설계안 제시 및 동의 구하기\n\n분산 시스템 상에서 ID 생성 전략을 알아보고 각각의 **장단점**과 위의 질문에 대해 **적합한 전략**인지 살펴보자.\n\n### 다중 마스터 복제\n\n![image](https://user-images.githubusercontent.com/55419159/141991101-f0657fa7-61da-4a9f-a90f-96a0b9223c44.png)\n\n이 접근법은 기본적으로 DB의 `auto_increment` 속성을 활용한다. \n1만큼 증가시키는 것이 아닌 `k`(DB의 숫자)만큼 증가시킨다.\n\n#### 단점\n- 규모를 확장하거나 축소할 때 문제가 있음\n\n\n### UUID\n\n![image](https://user-images.githubusercontent.com/55419159/141992063-ab125f8f-f171-4b29-9e82-1786ba96c29b.png)\n\nUUID는 컴퓨터 시스템에 저장되는 정보를 유일하게 식별하기 위한 **128비트 짜리 숫자**이다.\nUUID는 **충돌 가능성**이 지극히 낮다.(중복 UUID가 생길 확률은 초당 10억개의 UUID를 100년동안 만들어야 생김)\n\n#### 장점\n- 단순함\n- 서버 간 조율이 필요하지 않으므로 동기화 이슈 없음\n- 규모 확장 간편함\n\n#### 단점\n- 128비트로 길다\n- 시간 순으로 정렬할 수 없음\n- ID에 숫자가 아닌 값이 포함됨\n\n\n### 티켓 서버\n\n![image](https://user-images.githubusercontent.com/55419159/141993088-4e1ddc61-a711-4e93-8199-43f4e8c1fe23.png)\n\n티켓 서버는 auto_increment 기능을 하는 중앙 서버에서 유일키를 생성해 내려주는 방식이다.\n\n#### 장점\n- 유일성이 보장되는 숫자로만 구성된 ID를 쉽게 만들 수 있음\n- 구현이 쉽고 중소 규모의 어플리케이션에 적합\n\n#### 단점\n- 티켓서버가 SPOF(Single-Point-of_Failure)가 된다는 엄청난 단점\n\n\n### 트위터 스노플레이크 접근법\n\n![image](https://user-images.githubusercontent.com/55419159/141993807-cce535c1-5ff1-4a71-816a-932cd7f5aa89.png)\n\n<br>\n\n이 전략은 기본적으로 **ID를 여러 절로 분할**한다.\n\n| 섹션                           | 설명                                       |\n| --------------------------------- | ------------------------------------------ |\n| 사인 비트                | 1비트를 할당한다. 쓰임세가 없지만 음양수를 구별할 때 사용할 수 있다.     |\n| 타임스탬프 | 41비트를 할당한다. 기원시각으로부터 몇 밀리초가 지났는 지 알 수 있는 값이다.                 |\n| Work ID | 10비트를 할당한다.     |\n| 일련번호                     | 12비트를 할당한다. 각 서버에서는 ID를 생성할 때마다 1씩 증가시킨다. 1밀리초가 경과했을 때 0으로 초기화한다.                               |","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-11-16-분산-시스템을-위한-유일-ID-생성기-설계","published":1,"date":"2021-10-26T12:52:30.860Z","updated":"2021-11-16T13:37:16.889Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2f40001jd9kc3o90u2g","content":"<p>데이터베이스의 PK 세팅 전략을 세우려 한다.</p>\n<blockquote>\n<p><del>그냥 DB에서 <code>auto_increment</code> 하면 되지 않나?</del><br>➡️ 분산되어있는 환경이기 때문에 불가능하다.</p>\n</blockquote>\n<p><strong>분산 DB 환경</strong>에선 생각보다 쉽지 않다.<br>방법을 찾아보자.</p>\n<h2 id=\"1단계-문제이해-및-설계범위-확정\"><a href=\"#1단계-문제이해-및-설계범위-확정\" class=\"headerlink\" title=\"1단계 : 문제이해 및 설계범위 확정\"></a>1단계 : 문제이해 및 설계범위 확정</h2><blockquote>\n<p><em>시스템 설계 면접의 첫 단계는 적절한 질문을 통해 모호함을 없애고 설계 방향을 정하는 것이다.</em></p>\n</blockquote>\n<h3 id=\"지원자-vs-면접관-질문-예시\"><a href=\"#지원자-vs-면접관-질문-예시\" class=\"headerlink\" title=\"지원자 vs 면접관 질문 예시\"></a>지원자 vs 면접관 질문 예시</h3><pre><code>지원자 : ID는 어떤 특성을 갖나요?\n면접관 : 유일해야 하고, 정렬 가능해야합니다\n지원자 : 새로운 레코드에 붙일 ID는 항상 1만큼 큰 값이여야 하나요?\n면접관 : ID의 값은 시간이 흐름에 따라 커지지만, 언제나 1씩 증가한다고는 할 수 없습니다.\n지원자 : ID는 숫자로만 구성되나요?\n면접관 : 그렇습니다.\n지원자 : 시스템의 규모는 어느정도인가요?\n면접관 : 초당 10,000 ID를 생성할 수 있어야 합니다.\n</code></pre>\n<h3 id=\"질문을-통해-유추할-수-있는-요구사항은-다음과-같다\"><a href=\"#질문을-통해-유추할-수-있는-요구사항은-다음과-같다\" class=\"headerlink\" title=\"질문을 통해 유추할 수 있는 요구사항은 다음과 같다.\"></a>질문을 통해 유추할 수 있는 요구사항은 다음과 같다.</h3><ol>\n<li>ID는 <strong>유일</strong>해야 함</li>\n<li>ID는 <strong>숫자</strong>로만 구성되어야 함</li>\n<li>ID는 <strong>64비트</strong>로 표현될 수 있는 값이어야 함</li>\n<li>ID는 발급날짜에 따라 <strong>정렬가능</strong>해야 함</li>\n<li>초당 <strong>10,000</strong> ID 를 생성할 수 있어야 함</li>\n</ol>\n<hr>\n<h2 id=\"2단계-개략적-설계안-제시-및-동의-구하기\"><a href=\"#2단계-개략적-설계안-제시-및-동의-구하기\" class=\"headerlink\" title=\"2단계 : 개략적 설계안 제시 및 동의 구하기\"></a>2단계 : 개략적 설계안 제시 및 동의 구하기</h2><p>분산 시스템 상에서 ID 생성 전략을 알아보고 각각의 <strong>장단점</strong>과 위의 질문에 대해 <strong>적합한 전략</strong>인지 살펴보자.</p>\n<h3 id=\"다중-마스터-복제\"><a href=\"#다중-마스터-복제\" class=\"headerlink\" title=\"다중 마스터 복제\"></a>다중 마스터 복제</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141991101-f0657fa7-61da-4a9f-a90f-96a0b9223c44.png\" alt=\"image\"></p>\n<p>이 접근법은 기본적으로 DB의 <code>auto_increment</code> 속성을 활용한다.<br>1만큼 증가시키는 것이 아닌 <code>k</code>(DB의 숫자)만큼 증가시킨다.</p>\n<h4 id=\"단점\"><a href=\"#단점\" class=\"headerlink\" title=\"단점\"></a>단점</h4><ul>\n<li>규모를 확장하거나 축소할 때 문제가 있음</li>\n</ul>\n<h3 id=\"UUID\"><a href=\"#UUID\" class=\"headerlink\" title=\"UUID\"></a>UUID</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141992063-ab125f8f-f171-4b29-9e82-1786ba96c29b.png\" alt=\"image\"></p>\n<p>UUID는 컴퓨터 시스템에 저장되는 정보를 유일하게 식별하기 위한 <strong>128비트 짜리 숫자</strong>이다.<br>UUID는 <strong>충돌 가능성</strong>이 지극히 낮다.(중복 UUID가 생길 확률은 초당 10억개의 UUID를 100년동안 만들어야 생김)</p>\n<h4 id=\"장점\"><a href=\"#장점\" class=\"headerlink\" title=\"장점\"></a>장점</h4><ul>\n<li>단순함</li>\n<li>서버 간 조율이 필요하지 않으므로 동기화 이슈 없음</li>\n<li>규모 확장 간편함</li>\n</ul>\n<h4 id=\"단점-1\"><a href=\"#단점-1\" class=\"headerlink\" title=\"단점\"></a>단점</h4><ul>\n<li>128비트로 길다</li>\n<li>시간 순으로 정렬할 수 없음</li>\n<li>ID에 숫자가 아닌 값이 포함됨</li>\n</ul>\n<h3 id=\"티켓-서버\"><a href=\"#티켓-서버\" class=\"headerlink\" title=\"티켓 서버\"></a>티켓 서버</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141993088-4e1ddc61-a711-4e93-8199-43f4e8c1fe23.png\" alt=\"image\"></p>\n<p>티켓 서버는 auto_increment 기능을 하는 중앙 서버에서 유일키를 생성해 내려주는 방식이다.</p>\n<h4 id=\"장점-1\"><a href=\"#장점-1\" class=\"headerlink\" title=\"장점\"></a>장점</h4><ul>\n<li>유일성이 보장되는 숫자로만 구성된 ID를 쉽게 만들 수 있음</li>\n<li>구현이 쉽고 중소 규모의 어플리케이션에 적합</li>\n</ul>\n<h4 id=\"단점-2\"><a href=\"#단점-2\" class=\"headerlink\" title=\"단점\"></a>단점</h4><ul>\n<li>티켓서버가 SPOF(Single-Point-of_Failure)가 된다는 엄청난 단점</li>\n</ul>\n<h3 id=\"트위터-스노플레이크-접근법\"><a href=\"#트위터-스노플레이크-접근법\" class=\"headerlink\" title=\"트위터 스노플레이크 접근법\"></a>트위터 스노플레이크 접근법</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141993807-cce535c1-5ff1-4a71-816a-932cd7f5aa89.png\" alt=\"image\"></p>\n<br>\n\n<p>이 전략은 기본적으로 <strong>ID를 여러 절로 분할</strong>한다.</p>\n<table>\n<thead>\n<tr>\n<th>섹션</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>사인 비트</td>\n<td>1비트를 할당한다. 쓰임세가 없지만 음양수를 구별할 때 사용할 수 있다.</td>\n</tr>\n<tr>\n<td>타임스탬프</td>\n<td>41비트를 할당한다. 기원시각으로부터 몇 밀리초가 지났는 지 알 수 있는 값이다.</td>\n</tr>\n<tr>\n<td>Work ID</td>\n<td>10비트를 할당한다.</td>\n</tr>\n<tr>\n<td>일련번호</td>\n<td>12비트를 할당한다. 각 서버에서는 ID를 생성할 때마다 1씩 증가시킨다. 1밀리초가 경과했을 때 0으로 초기화한다.</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<p>데이터베이스의 PK 세팅 전략을 세우려 한다.</p>\n<blockquote>\n<p><del>그냥 DB에서 <code>auto_increment</code> 하면 되지 않나?</del><br>➡️ 분산되어있는 환경이기 때문에 불가능하다.</p>\n</blockquote>\n<p><strong>분산 DB 환경</strong>에선 생각보다 쉽지 않다.<br>방법을 찾아보자.</p>\n<h2 id=\"1단계-문제이해-및-설계범위-확정\"><a href=\"#1단계-문제이해-및-설계범위-확정\" class=\"headerlink\" title=\"1단계 : 문제이해 및 설계범위 확정\"></a>1단계 : 문제이해 및 설계범위 확정</h2><blockquote>\n<p><em>시스템 설계 면접의 첫 단계는 적절한 질문을 통해 모호함을 없애고 설계 방향을 정하는 것이다.</em></p>\n</blockquote>\n<h3 id=\"지원자-vs-면접관-질문-예시\"><a href=\"#지원자-vs-면접관-질문-예시\" class=\"headerlink\" title=\"지원자 vs 면접관 질문 예시\"></a>지원자 vs 면접관 질문 예시</h3><pre><code>지원자 : ID는 어떤 특성을 갖나요?\n면접관 : 유일해야 하고, 정렬 가능해야합니다\n지원자 : 새로운 레코드에 붙일 ID는 항상 1만큼 큰 값이여야 하나요?\n면접관 : ID의 값은 시간이 흐름에 따라 커지지만, 언제나 1씩 증가한다고는 할 수 없습니다.\n지원자 : ID는 숫자로만 구성되나요?\n면접관 : 그렇습니다.\n지원자 : 시스템의 규모는 어느정도인가요?\n면접관 : 초당 10,000 ID를 생성할 수 있어야 합니다.\n</code></pre>\n<h3 id=\"질문을-통해-유추할-수-있는-요구사항은-다음과-같다\"><a href=\"#질문을-통해-유추할-수-있는-요구사항은-다음과-같다\" class=\"headerlink\" title=\"질문을 통해 유추할 수 있는 요구사항은 다음과 같다.\"></a>질문을 통해 유추할 수 있는 요구사항은 다음과 같다.</h3><ol>\n<li>ID는 <strong>유일</strong>해야 함</li>\n<li>ID는 <strong>숫자</strong>로만 구성되어야 함</li>\n<li>ID는 <strong>64비트</strong>로 표현될 수 있는 값이어야 함</li>\n<li>ID는 발급날짜에 따라 <strong>정렬가능</strong>해야 함</li>\n<li>초당 <strong>10,000</strong> ID 를 생성할 수 있어야 함</li>\n</ol>\n<hr>\n<h2 id=\"2단계-개략적-설계안-제시-및-동의-구하기\"><a href=\"#2단계-개략적-설계안-제시-및-동의-구하기\" class=\"headerlink\" title=\"2단계 : 개략적 설계안 제시 및 동의 구하기\"></a>2단계 : 개략적 설계안 제시 및 동의 구하기</h2><p>분산 시스템 상에서 ID 생성 전략을 알아보고 각각의 <strong>장단점</strong>과 위의 질문에 대해 <strong>적합한 전략</strong>인지 살펴보자.</p>\n<h3 id=\"다중-마스터-복제\"><a href=\"#다중-마스터-복제\" class=\"headerlink\" title=\"다중 마스터 복제\"></a>다중 마스터 복제</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141991101-f0657fa7-61da-4a9f-a90f-96a0b9223c44.png\" alt=\"image\"></p>\n<p>이 접근법은 기본적으로 DB의 <code>auto_increment</code> 속성을 활용한다.<br>1만큼 증가시키는 것이 아닌 <code>k</code>(DB의 숫자)만큼 증가시킨다.</p>\n<h4 id=\"단점\"><a href=\"#단점\" class=\"headerlink\" title=\"단점\"></a>단점</h4><ul>\n<li>규모를 확장하거나 축소할 때 문제가 있음</li>\n</ul>\n<h3 id=\"UUID\"><a href=\"#UUID\" class=\"headerlink\" title=\"UUID\"></a>UUID</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141992063-ab125f8f-f171-4b29-9e82-1786ba96c29b.png\" alt=\"image\"></p>\n<p>UUID는 컴퓨터 시스템에 저장되는 정보를 유일하게 식별하기 위한 <strong>128비트 짜리 숫자</strong>이다.<br>UUID는 <strong>충돌 가능성</strong>이 지극히 낮다.(중복 UUID가 생길 확률은 초당 10억개의 UUID를 100년동안 만들어야 생김)</p>\n<h4 id=\"장점\"><a href=\"#장점\" class=\"headerlink\" title=\"장점\"></a>장점</h4><ul>\n<li>단순함</li>\n<li>서버 간 조율이 필요하지 않으므로 동기화 이슈 없음</li>\n<li>규모 확장 간편함</li>\n</ul>\n<h4 id=\"단점-1\"><a href=\"#단점-1\" class=\"headerlink\" title=\"단점\"></a>단점</h4><ul>\n<li>128비트로 길다</li>\n<li>시간 순으로 정렬할 수 없음</li>\n<li>ID에 숫자가 아닌 값이 포함됨</li>\n</ul>\n<h3 id=\"티켓-서버\"><a href=\"#티켓-서버\" class=\"headerlink\" title=\"티켓 서버\"></a>티켓 서버</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141993088-4e1ddc61-a711-4e93-8199-43f4e8c1fe23.png\" alt=\"image\"></p>\n<p>티켓 서버는 auto_increment 기능을 하는 중앙 서버에서 유일키를 생성해 내려주는 방식이다.</p>\n<h4 id=\"장점-1\"><a href=\"#장점-1\" class=\"headerlink\" title=\"장점\"></a>장점</h4><ul>\n<li>유일성이 보장되는 숫자로만 구성된 ID를 쉽게 만들 수 있음</li>\n<li>구현이 쉽고 중소 규모의 어플리케이션에 적합</li>\n</ul>\n<h4 id=\"단점-2\"><a href=\"#단점-2\" class=\"headerlink\" title=\"단점\"></a>단점</h4><ul>\n<li>티켓서버가 SPOF(Single-Point-of_Failure)가 된다는 엄청난 단점</li>\n</ul>\n<h3 id=\"트위터-스노플레이크-접근법\"><a href=\"#트위터-스노플레이크-접근법\" class=\"headerlink\" title=\"트위터 스노플레이크 접근법\"></a>트위터 스노플레이크 접근법</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141993807-cce535c1-5ff1-4a71-816a-932cd7f5aa89.png\" alt=\"image\"></p>\n<br>\n\n<p>이 전략은 기본적으로 <strong>ID를 여러 절로 분할</strong>한다.</p>\n<table>\n<thead>\n<tr>\n<th>섹션</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>사인 비트</td>\n<td>1비트를 할당한다. 쓰임세가 없지만 음양수를 구별할 때 사용할 수 있다.</td>\n</tr>\n<tr>\n<td>타임스탬프</td>\n<td>41비트를 할당한다. 기원시각으로부터 몇 밀리초가 지났는 지 알 수 있는 값이다.</td>\n</tr>\n<tr>\n<td>Work ID</td>\n<td>10비트를 할당한다.</td>\n</tr>\n<tr>\n<td>일련번호</td>\n<td>12비트를 할당한다. 각 서버에서는 ID를 생성할 때마다 1씩 증가시킨다. 1밀리초가 경과했을 때 0으로 초기화한다.</td>\n</tr>\n</tbody></table>\n"},{"title":"m1 맥에서 144hz 롤하기","toc":false,"toc_label":"m1 맥에서 144hz 롤하기","_content":"\n\n> 결론부터 말하면 롤 **설정 값**을 바꿔주면 **m1 macbook Air**로 *144hz 방어*가 가능하다.\n>\n\n![](https://user-images.githubusercontent.com/55419159/139523580-e90497ce-2cab-444b-b137-c17ae0875f05.png)\n\n\n## 테스트 스펙\n- macbook air m1(2020) 8g 256gb (깡통 맥북에어 옵션)\n- qhd 165hz 외장모니터\n\n<br>\n\n\n## 방법\n\n### 1. finder - '응용 프로그램' - '리그오브레전드' 오른쪽클릭 '패키지 내용보기'\n\n   ![](https://user-images.githubusercontent.com/55419159/139523689-d613a586-55f2-426c-9e10-09e776c04450.png)\n\n<br>\n\n### 2. 아래의 경로로 들어감\n- LoL/Config/game.cfg\n- 텍스트 에디터로 열기\n\n![](https://user-images.githubusercontent.com/55419159/139523809-a896357e-4c3b-413a-8474-6fc4ec9ecca4.png)\n\n<br>\n\n### 3. [General] 마지막 항목에 \"MetalBetaTest=true\" 추가\n\n![](https://user-images.githubusercontent.com/55419159/139523849-60136e47-3f6b-4ae4-b22d-15f066f4f16b.png)\n\n\n## 결론\n\n- 상옵기준 매우 쾌적하게 플레이 가능 (심지어 발열도 없다.)\n- 심지어 한타중에도 프레임드랍이 없다...🤔\n- 게임하려고 맥북사는 사람들은 없겠지만 롤하려고 맥북은 사도 될지도...?\n\n<br>\n\n참고 : [Mac on Metal Beta Testing](![](https://devtrackers.gg/leagueoflegends/p/c1948cdc-mac-on-metal-beta-testing)\n)\n","source":"_posts/기타/2021-10-30-m1-league-of-legend.md","raw":"---\ntitle: \"m1 맥에서 144hz 롤하기\"\ncategories:\n  - 기타 \ntags:\n  - m1\n  - 롤\n  - league of legend\n  - mac on metal\ntoc: false\ntoc_label: \"m1 맥에서 144hz 롤하기\"\n---\n\n\n> 결론부터 말하면 롤 **설정 값**을 바꿔주면 **m1 macbook Air**로 *144hz 방어*가 가능하다.\n>\n\n![](https://user-images.githubusercontent.com/55419159/139523580-e90497ce-2cab-444b-b137-c17ae0875f05.png)\n\n\n## 테스트 스펙\n- macbook air m1(2020) 8g 256gb (깡통 맥북에어 옵션)\n- qhd 165hz 외장모니터\n\n<br>\n\n\n## 방법\n\n### 1. finder - '응용 프로그램' - '리그오브레전드' 오른쪽클릭 '패키지 내용보기'\n\n   ![](https://user-images.githubusercontent.com/55419159/139523689-d613a586-55f2-426c-9e10-09e776c04450.png)\n\n<br>\n\n### 2. 아래의 경로로 들어감\n- LoL/Config/game.cfg\n- 텍스트 에디터로 열기\n\n![](https://user-images.githubusercontent.com/55419159/139523809-a896357e-4c3b-413a-8474-6fc4ec9ecca4.png)\n\n<br>\n\n### 3. [General] 마지막 항목에 \"MetalBetaTest=true\" 추가\n\n![](https://user-images.githubusercontent.com/55419159/139523849-60136e47-3f6b-4ae4-b22d-15f066f4f16b.png)\n\n\n## 결론\n\n- 상옵기준 매우 쾌적하게 플레이 가능 (심지어 발열도 없다.)\n- 심지어 한타중에도 프레임드랍이 없다...🤔\n- 게임하려고 맥북사는 사람들은 없겠지만 롤하려고 맥북은 사도 될지도...?\n\n<br>\n\n참고 : [Mac on Metal Beta Testing](![](https://devtrackers.gg/leagueoflegends/p/c1948cdc-mac-on-metal-beta-testing)\n)\n","slug":"기타/2021-10-30-m1-league-of-legend","published":1,"date":"2021-10-30T07:18:02.729Z","updated":"2021-11-13T05:31:56.948Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2f80003jd9k06gc2qmo","content":"<blockquote>\n<p>결론부터 말하면 롤 <strong>설정 값</strong>을 바꿔주면 <strong>m1 macbook Air</strong>로 <em>144hz 방어</em>가 가능하다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139523580-e90497ce-2cab-444b-b137-c17ae0875f05.png\"></p>\n<h2 id=\"테스트-스펙\"><a href=\"#테스트-스펙\" class=\"headerlink\" title=\"테스트 스펙\"></a>테스트 스펙</h2><ul>\n<li>macbook air m1(2020) 8g 256gb (깡통 맥북에어 옵션)</li>\n<li>qhd 165hz 외장모니터</li>\n</ul>\n<br>\n\n\n<h2 id=\"방법\"><a href=\"#방법\" class=\"headerlink\" title=\"방법\"></a>방법</h2><h3 id=\"1-finder-‘응용-프로그램’-‘리그오브레전드’-오른쪽클릭-‘패키지-내용보기’\"><a href=\"#1-finder-‘응용-프로그램’-‘리그오브레전드’-오른쪽클릭-‘패키지-내용보기’\" class=\"headerlink\" title=\"1. finder - ‘응용 프로그램’ - ‘리그오브레전드’ 오른쪽클릭 ‘패키지 내용보기’\"></a>1. finder - ‘응용 프로그램’ - ‘리그오브레전드’ 오른쪽클릭 ‘패키지 내용보기’</h3><p>   <img src=\"https://user-images.githubusercontent.com/55419159/139523689-d613a586-55f2-426c-9e10-09e776c04450.png\"></p>\n<br>\n\n<h3 id=\"2-아래의-경로로-들어감\"><a href=\"#2-아래의-경로로-들어감\" class=\"headerlink\" title=\"2. 아래의 경로로 들어감\"></a>2. 아래의 경로로 들어감</h3><ul>\n<li>LoL/Config/game.cfg</li>\n<li>텍스트 에디터로 열기</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139523809-a896357e-4c3b-413a-8474-6fc4ec9ecca4.png\"></p>\n<br>\n\n<h3 id=\"3-General-마지막-항목에-“MetalBetaTest-true”-추가\"><a href=\"#3-General-마지막-항목에-“MetalBetaTest-true”-추가\" class=\"headerlink\" title=\"3. [General] 마지막 항목에 “MetalBetaTest=true” 추가\"></a>3. [General] 마지막 항목에 “MetalBetaTest=true” 추가</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/139523849-60136e47-3f6b-4ae4-b22d-15f066f4f16b.png\"></p>\n<h2 id=\"결론\"><a href=\"#결론\" class=\"headerlink\" title=\"결론\"></a>결론</h2><ul>\n<li>상옵기준 매우 쾌적하게 플레이 가능 (심지어 발열도 없다.)</li>\n<li>심지어 한타중에도 프레임드랍이 없다…🤔</li>\n<li>게임하려고 맥북사는 사람들은 없겠지만 롤하려고 맥북은 사도 될지도…?</li>\n</ul>\n<br>\n\n<p>참고 : <a href=\"!%5B%5D(https://devtrackers.gg/leagueoflegends/p/c1948cdc-mac-on-metal-beta-testing)\">Mac on Metal Beta Testing</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>결론부터 말하면 롤 <strong>설정 값</strong>을 바꿔주면 <strong>m1 macbook Air</strong>로 <em>144hz 방어</em>가 가능하다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139523580-e90497ce-2cab-444b-b137-c17ae0875f05.png\"></p>\n<h2 id=\"테스트-스펙\"><a href=\"#테스트-스펙\" class=\"headerlink\" title=\"테스트 스펙\"></a>테스트 스펙</h2><ul>\n<li>macbook air m1(2020) 8g 256gb (깡통 맥북에어 옵션)</li>\n<li>qhd 165hz 외장모니터</li>\n</ul>\n<br>\n\n\n<h2 id=\"방법\"><a href=\"#방법\" class=\"headerlink\" title=\"방법\"></a>방법</h2><h3 id=\"1-finder-‘응용-프로그램’-‘리그오브레전드’-오른쪽클릭-‘패키지-내용보기’\"><a href=\"#1-finder-‘응용-프로그램’-‘리그오브레전드’-오른쪽클릭-‘패키지-내용보기’\" class=\"headerlink\" title=\"1. finder - ‘응용 프로그램’ - ‘리그오브레전드’ 오른쪽클릭 ‘패키지 내용보기’\"></a>1. finder - ‘응용 프로그램’ - ‘리그오브레전드’ 오른쪽클릭 ‘패키지 내용보기’</h3><p>   <img src=\"https://user-images.githubusercontent.com/55419159/139523689-d613a586-55f2-426c-9e10-09e776c04450.png\"></p>\n<br>\n\n<h3 id=\"2-아래의-경로로-들어감\"><a href=\"#2-아래의-경로로-들어감\" class=\"headerlink\" title=\"2. 아래의 경로로 들어감\"></a>2. 아래의 경로로 들어감</h3><ul>\n<li>LoL/Config/game.cfg</li>\n<li>텍스트 에디터로 열기</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139523809-a896357e-4c3b-413a-8474-6fc4ec9ecca4.png\"></p>\n<br>\n\n<h3 id=\"3-General-마지막-항목에-“MetalBetaTest-true”-추가\"><a href=\"#3-General-마지막-항목에-“MetalBetaTest-true”-추가\" class=\"headerlink\" title=\"3. [General] 마지막 항목에 “MetalBetaTest=true” 추가\"></a>3. [General] 마지막 항목에 “MetalBetaTest=true” 추가</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/139523849-60136e47-3f6b-4ae4-b22d-15f066f4f16b.png\"></p>\n<h2 id=\"결론\"><a href=\"#결론\" class=\"headerlink\" title=\"결론\"></a>결론</h2><ul>\n<li>상옵기준 매우 쾌적하게 플레이 가능 (심지어 발열도 없다.)</li>\n<li>심지어 한타중에도 프레임드랍이 없다…🤔</li>\n<li>게임하려고 맥북사는 사람들은 없겠지만 롤하려고 맥북은 사도 될지도…?</li>\n</ul>\n<br>\n\n<p>참고 : <a href=\"!%5B%5D(https://devtrackers.gg/leagueoflegends/p/c1948cdc-mac-on-metal-beta-testing)\">Mac on Metal Beta Testing</a></p>\n"},{"title":"EnumUtils","_content":"\n# EnumUtils\n\n- `apache.commons`의 `EnumUtils`를 상속받음\n- `StringUtils`의 `defaultIfEmpty()` 메소드와 비슷하게 만들었음\n- wildcard로 동적으로 파라미터를 정함\n- `<T extends 제한타입>` => 제너릭타입의 상한 제한. 제한타입과 그 자손(타입)들만 가능\n\n```java\npublic class EnumUtils extends org.apache.commons.lang.enums.EnumUtils {\n    public static <E extends Enum> E defaultIfEmpty(E value, E defalutValue) {\n        return vlaue == null ? defaultValue : value;\n    }\n}\n```","source":"_posts/자바/2021-11-21-EnumUtils.md","raw":"---\ntitle: EnumUtils\ncategories:\n  - 자바\ntags:\n  - 자바\n  - Util\n  - Enum\n---\n\n# EnumUtils\n\n- `apache.commons`의 `EnumUtils`를 상속받음\n- `StringUtils`의 `defaultIfEmpty()` 메소드와 비슷하게 만들었음\n- wildcard로 동적으로 파라미터를 정함\n- `<T extends 제한타입>` => 제너릭타입의 상한 제한. 제한타입과 그 자손(타입)들만 가능\n\n```java\npublic class EnumUtils extends org.apache.commons.lang.enums.EnumUtils {\n    public static <E extends Enum> E defaultIfEmpty(E value, E defalutValue) {\n        return vlaue == null ? defaultValue : value;\n    }\n}\n```","slug":"자바/2021-11-21-EnumUtils","published":1,"date":"2021-11-23T11:01:01.220Z","updated":"2021-11-23T11:06:25.501Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fb0006jd9k5gg8djno","content":"<h1 id=\"EnumUtils\"><a href=\"#EnumUtils\" class=\"headerlink\" title=\"EnumUtils\"></a>EnumUtils</h1><ul>\n<li><code>apache.commons</code>의 <code>EnumUtils</code>를 상속받음</li>\n<li><code>StringUtils</code>의 <code>defaultIfEmpty()</code> 메소드와 비슷하게 만들었음</li>\n<li>wildcard로 동적으로 파라미터를 정함</li>\n<li><code>&lt;T extends 제한타입&gt;</code> =&gt; 제너릭타입의 상한 제한. 제한타입과 그 자손(타입)들만 가능</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnumUtils</span> <span class=\"keyword\">extends</span> <span class=\"title\">org</span>.<span class=\"title\">apache</span>.<span class=\"title\">commons</span>.<span class=\"title\">lang</span>.<span class=\"title\">enums</span>.<span class=\"title\">EnumUtils</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;E extends Enum&gt; <span class=\"function\">E <span class=\"title\">defaultIfEmpty</span><span class=\"params\">(E value, E defalutValue)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> vlaue == <span class=\"keyword\">null</span> ? defaultValue : value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"EnumUtils\"><a href=\"#EnumUtils\" class=\"headerlink\" title=\"EnumUtils\"></a>EnumUtils</h1><ul>\n<li><code>apache.commons</code>의 <code>EnumUtils</code>를 상속받음</li>\n<li><code>StringUtils</code>의 <code>defaultIfEmpty()</code> 메소드와 비슷하게 만들었음</li>\n<li>wildcard로 동적으로 파라미터를 정함</li>\n<li><code>&lt;T extends 제한타입&gt;</code> =&gt; 제너릭타입의 상한 제한. 제한타입과 그 자손(타입)들만 가능</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnumUtils</span> <span class=\"keyword\">extends</span> <span class=\"title\">org</span>.<span class=\"title\">apache</span>.<span class=\"title\">commons</span>.<span class=\"title\">lang</span>.<span class=\"title\">enums</span>.<span class=\"title\">EnumUtils</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;E extends Enum&gt; <span class=\"function\">E <span class=\"title\">defaultIfEmpty</span><span class=\"params\">(E value, E defalutValue)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> vlaue == <span class=\"keyword\">null</span> ? defaultValue : value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"ObjectMapper","_content":"\n# Jackson ObjectMapper\n\n- ObjectMapper는 생성 비용이 꽤 비싸기 때문에 멤버변수, bean, static으로 처리\n- ObjectMapper는 Thread Safe하기 때문에 굳이 매번 생성해서 따로 쓸 필요가 없음\n- Spring의 경우 Bean으로 등록해서 DI받아서 쓰는 것이 좋음\n\n## `readValue` vs `convertValue`\n\n- `readValue`\n\n  json String → Model\n\n- `convertValue`\n\n  Object → Model\n\n  Jackson 2.7.x+부터 멤버 변수 자체에 주석을 달 수 있는 방법이 있습니다.\n\n```java\n@JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)\nprivate List<String> newsletters;\n```","source":"_posts/자바/2021-11-23-ObjectMapper.md","raw":"---\ntitle: ObjectMapper\ncategories:\n  - 자바\ntags:\n  - 자바\n  - Util\n  - ObjectMapper\n---\n\n# Jackson ObjectMapper\n\n- ObjectMapper는 생성 비용이 꽤 비싸기 때문에 멤버변수, bean, static으로 처리\n- ObjectMapper는 Thread Safe하기 때문에 굳이 매번 생성해서 따로 쓸 필요가 없음\n- Spring의 경우 Bean으로 등록해서 DI받아서 쓰는 것이 좋음\n\n## `readValue` vs `convertValue`\n\n- `readValue`\n\n  json String → Model\n\n- `convertValue`\n\n  Object → Model\n\n  Jackson 2.7.x+부터 멤버 변수 자체에 주석을 달 수 있는 방법이 있습니다.\n\n```java\n@JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)\nprivate List<String> newsletters;\n```","slug":"자바/2021-11-23-ObjectMapper","published":1,"date":"2021-11-23T11:01:39.919Z","updated":"2021-11-23T11:07:08.363Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fc0007jd9k2rx07sig","content":"<h1 id=\"Jackson-ObjectMapper\"><a href=\"#Jackson-ObjectMapper\" class=\"headerlink\" title=\"Jackson ObjectMapper\"></a>Jackson ObjectMapper</h1><ul>\n<li>ObjectMapper는 생성 비용이 꽤 비싸기 때문에 멤버변수, bean, static으로 처리</li>\n<li>ObjectMapper는 Thread Safe하기 때문에 굳이 매번 생성해서 따로 쓸 필요가 없음</li>\n<li>Spring의 경우 Bean으로 등록해서 DI받아서 쓰는 것이 좋음</li>\n</ul>\n<h2 id=\"readValue-vs-convertValue\"><a href=\"#readValue-vs-convertValue\" class=\"headerlink\" title=\"readValue vs convertValue\"></a><code>readValue</code> vs <code>convertValue</code></h2><ul>\n<li><p><code>readValue</code></p>\n<p>json String → Model</p>\n</li>\n<li><p><code>convertValue</code></p>\n<p>Object → Model</p>\n<p>Jackson 2.7.x+부터 멤버 변수 자체에 주석을 달 수 있는 방법이 있습니다.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;String&gt; newsletters;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Jackson-ObjectMapper\"><a href=\"#Jackson-ObjectMapper\" class=\"headerlink\" title=\"Jackson ObjectMapper\"></a>Jackson ObjectMapper</h1><ul>\n<li>ObjectMapper는 생성 비용이 꽤 비싸기 때문에 멤버변수, bean, static으로 처리</li>\n<li>ObjectMapper는 Thread Safe하기 때문에 굳이 매번 생성해서 따로 쓸 필요가 없음</li>\n<li>Spring의 경우 Bean으로 등록해서 DI받아서 쓰는 것이 좋음</li>\n</ul>\n<h2 id=\"readValue-vs-convertValue\"><a href=\"#readValue-vs-convertValue\" class=\"headerlink\" title=\"readValue vs convertValue\"></a><code>readValue</code> vs <code>convertValue</code></h2><ul>\n<li><p><code>readValue</code></p>\n<p>json String → Model</p>\n</li>\n<li><p><code>convertValue</code></p>\n<p>Object → Model</p>\n<p>Jackson 2.7.x+부터 멤버 변수 자체에 주석을 달 수 있는 방법이 있습니다.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;String&gt; newsletters;</span><br></pre></td></tr></table></figure>"},{"title":"어댑터 & 파사드 패턴","_content":"\n## 🧤 어댑터 & 파사드 패턴이란\n\n### 어댑터 패턴\n\n> 한 클래스의 인터페이스를 클라이언트에서 사용하고자하는 다른 인터페이스로 **변환**한다.\n> 어댑터를 이용하면 인터페이스 **호환성** 문제 때문에 같이 쓸 수 없는 클래스들을 연결해서 쓸 수 있다.\n\n### 파사드 패턴\n\n> 어떤 서브시스템의 일련의 인터페이스에 대한 **통합된 인터페이스**를 제공한다.\n> 퍼사드에서 고수준 인터페이스를 정의하기 때문에 서브시스템을 더 쉽게 사용할수 있다.\n\n---\n\n## 🔧 어댑터 패턴의 이해\n\n![image](https://user-images.githubusercontent.com/55419159/140725965-84c06d1c-050a-4c09-bbe1-73d91d037601.png)\n\n![image](https://user-images.githubusercontent.com/55419159/140726207-74aafe97-0197-473f-84ad-e3ed5bea9407.png)\n\n### 🚀 활용 예시\n\n_칠면조를 오리로 변환하기 위해서는... (둘다 새이긴 하니까)_\n\n> Duck 객체가 모자라서 Turkey 객체를 대신 사용해야 하는 상황이라고 해보자.\n> 인터페이스가 다르기 때문에 Turkey객체를 바로 사용할 수는 없다.\n> 어댑터를 만들어 보자.\n\n#### 오리 인터페이스\n\n```java\npublic interface Duck {\n    public void quack(); //오리는 꽥꽥\n    public void fly();\n}\n```\n\n#### 오리 구현체\n\n```java\npublic class MallardDuck implements Duck {\n    @Override\n    public void quack() {\n        System.out.println(\"Quack\");\n    }\n\n    @Override\n    public void fly() {\n        System.out.println(\"I'm flying\");\n    }\n}\n```\n\n#### 칠면조 인터페이스\n\n```java\npublic interface Turkey {\n    public void gobble(); //칠면조는 이렇게 운다..\n    public void fly();\n}\n```\n\n#### 칠면조 구현체\n\n```java\npublic class WildTurkey implements Turkey {\n    @Override\n    public void gobble() {\n        System.out.println(\"Gobble gobble\");\n    }\n\n    @Override\n    public void fly() {\n        System.out.println(\"I'm flying a short distance\");\n    }\n}\n```\n\n#### **어댑터 구현**\n\n```java\npublic class TurkeyAdapter implements Duck { //오리인터페이스를 구현한다.\n    Turkey turkey;\n\n    public TurkeyAdapter(Turkey turkey) { //생성자에서 칠면조를 받는다.\n        this.turkey = turkey;\n    }\n\n    @Override\n    public void quack() {\n        turkey.gobble(); //변환 작업\n    }\n\n    @Override\n    public void fly() {\n        turkey.fly();\n    }\n}\n```\n\n#### 실행\n\n```java\npublic class DuckTestDrive {\n\n    public static void main(String[] args) {\n\n        MallardDuck duck = new MallardDuck();\n        WildTurkey turkey = new WildTurkey();\n\n        Duck turkeyAdapter = new TurkeyAdapter(turkey);\n\n        System.out.println(\"The turkey says...\");\n\n        turkey.gobble();\n        turkey.fly();\n\n        System.out.println(\"The Duck says...\");\n        testDuck(duck);\n\n        System.out.println(\"The TurkeyAdapter says...\");\n        testDuck(turkeyAdapter);\n    }\n\n    public static void testDuck(Duck duck) {\n        duck.quack();\n        duck.fly();\n    }\n}\n\n```\n\n### 🚌 정리\n\n- 클라이언트 -> `request()` -> 어댑터 - `translatedRequest()` -> 어댑티.\n- 클라이언트는 타겟 인터페이스에 맞게 구현, 어댑터는 타겟 인터페이스를 구현하며, 어댑티 인스턴스가 들어있음.\n\n---\n\n## 🗿 파사드 패턴의 이해\n\n> 패턴을 사용할때는 항상 패턴이 어떤 용도로 쓰이는지를 잘 알아둬야 한다.\n> 퍼사드 패턴은 단순화된 인터페이스를 통해서 서브시스템을 더 쉽게 사용할 수 있도록 하기위한 용도로 쓰인다.\n\n![image](https://user-images.githubusercontent.com/55419159/140728533-8bf247c6-484d-4375-9746-d49960e445c3.png)\n\n### 💿 DVD영화를 보려고하면..\n\n> 홈씨어터로 퍼사드 패턴을 구현해보자.\n> 전선과 프로젝터를 설치하고, 각 장치들을 케이블로 연결하고 등등 여러 인터페이스들이 나열되어 있다.\n\n![image](https://user-images.githubusercontent.com/55419159/140728598-7bcbeb79-d888-413f-bca6-368863c1e56d.png)\n\n```java\n1.팝콘 기계를켠다.\n2.팝콘 튀기기 시작.\n3.전등을 어둡게 조절\n4.스크린을 내린다.\n..\n..\n12.DVD 플레이어를 켠다\n13.DVD를 재생한다.\n\npoper.on();\npoper.pop();\nlight.dim(10)\nscreen.down();\n.....\ndvd.on();\ndvd.play(movie);\n```\n\n> _너무 복잡하다... 버튼하나로 모든 세팅이 끝나게 할 수는 없을까?_\n\n- 이런 경우에 퍼사드를 사용하면 된다.\n- 퍼사드 패턴은 **인터페이스를 단순화시키기 위해서** 인터페이스를 변경한다.\n- **통합 인터페이스**를 제공하는 **퍼사드 클래스**를 구현함으로써 복잡한 시스템을 훨씬 쉽게 사용할 수 있다.\n\n```java\npublic class HomeTheaterFacade { //영화 세팅의 모든것이 담겨있는 파사드 객체\n    Amplifier amp;\n    Tuner tuner;\n    Dvdplayer dvd;\n    CdPlayer cd;\n    Projector projector;\n    TheaterLights lights;\n    Screen screen;\n    PopcornPopper popper;\n\n    public HomeTheaterFacade(Amplifier amp,\n                             Tuner tuner,\n                             DvdPlayer dvd,\n                             CdPlayer cd,\n                             Projector projector,\n                             Screen screen,\n                             TheaterLights lights,\n                             PopcornPopper popper) {\n        this.amp = amp;\n        this.tunner = tuner;\n        this.dvd = dvd;\n        this.cd = cd;\n        this.projector = projector;\n        this.screen = screen;\n        this.lights = lights;\n        this.popper = popper;\n    }\n\n    public void watchMovie(String movie) {  //영화를 보고싶으면 그냥 이 메소드만 호출하면 된다!\n        System.out.println(\"Get ready to watch a movie...\");\n        popper.on();\n        popper.pop();\n        lights.dim(10);\n        screen.down();\n        projector.on();\n        projector.wideScreenMode();\n        amp.on();\n        amp.setDvd(dvd);\n        amp.setsurroundSound();\n        amp.setVolume(5);\n        dvd.on();\n        dvd.play(movie);\n    }\n\n    public void endMovie() { //끌 때도 마찬가지!\n        System.out.println(\"Shutting movie theater down...\");\n        popper.off();\n        lights.on();\n        screen.up();\n        projector.off();\n        amp.off();\n        dvd.stop();\n        dvd.eject();\n        dvd.off();\n    }\n}\n\npublic class HomeTheaterTestDrive {\n    public static void main(String[] args) {\n        // instantiate components here\n        HomeTheaterFacade homeTheater =\n                new HomeTheaterFacade(amp, tuner, dvd, cd, projector, screen, lights, popper);\n        homeTheater.watchMovie(\"타짜\");\n        homeTheater.endMovie();\n    }\n}\n```\n\n---\n\n## 💰 최소지식원칙\n\n> _'정말 친한 친구하고만 얘기하라'_\n\n어떤 객체든 그 객체와 상호작용을 하는 클래스의 개수에 주의해야 하며, 그런 객체들과 어떤 식으로 상호작용을 하는지에도 주의를 기울여야 한다는 뜻이다.\n\n### ⚙️ 최소지식원칙을 지키는 방법\n\n어떻게 하면 여러 객체하고 인연을 맺는 것을 피할 수 있을까 \n어떤 메소드에서든지 아래와 같은 **네 종류**의 객체의 `메소드`만을 호출하면 된다.\n\n1. 객체 **자체**\n2. 메소드에 **매개변수**로 전달된 객체\n3. 그 메소드에서 생성하거나 **인스턴스**를 만든 객체\n4. 그 객체에 속하는 **구성요소**\n\n### 🥊 활용 예시\n\n\n#### 원칙을 따르지 않은 경우\n\n```java\npublic float getTemp(){\n        Thermometer thermometer=station.getThermometer(); // station 오로부터 thermometer라는 객체를 받은다음\n        return thermometer.getTemperature(); //그 갹체의 getTemperature()메소드를 직접 호출.\n        }\n```\n\n#### 원칙을 따르는 경우\n\n```java\npublic float getTemp(){\n        return station.getTemperature(); // Station 클래스에 thermometer에 요청을 해주는 메소드를 추가\n        // 이렇게 하면 의존해야 하는 클래스의 개수를 줄일수 있다.\n        }\n```\n\n#### 자동차로 예시를 들면\n\n```java\npublic class Car {\n    Engine engine; //이 클래스의 구성요소. 이 구성요소의 메소드는 호출해도 된다.\n\n    public Car() {\n    }\n\n    public void start(Key key) { // 매개변수로 전달된 객체의 메소드는 호출해도 된다.\n\n        Doors doors = new Doors(); //새로운 객체 생성. 이 객체의 메소드는 호출해도 된다.\n        boolean authorized = key.turns(); //매개변수로 전달된 객체의 메소드는 호출해도 된다.\n\n        if (authorized) {\n            engine.start(); // 이 객체의 구성요소의 메소드는 호출해도 된다.\n            updateDashboardDisplay(); // 객체 내에 있는 메소드는 호출해도 된다.\n            doors.lock(); //직접 생성하거나 인스턴스를 만든 객체의 메소드는 호출해도 된다.\n        }\n    }\n\n    public void updateDashboardDisplay() {\n    }\n}\n```\n\n\n\n","source":"_posts/디자인-패턴/2021-11-08-어댑터-파사드-패턴.md","raw":"---\ntitle: 어댑터 & 파사드 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 어댑터\n  - 파사드\n---\n\n## 🧤 어댑터 & 파사드 패턴이란\n\n### 어댑터 패턴\n\n> 한 클래스의 인터페이스를 클라이언트에서 사용하고자하는 다른 인터페이스로 **변환**한다.\n> 어댑터를 이용하면 인터페이스 **호환성** 문제 때문에 같이 쓸 수 없는 클래스들을 연결해서 쓸 수 있다.\n\n### 파사드 패턴\n\n> 어떤 서브시스템의 일련의 인터페이스에 대한 **통합된 인터페이스**를 제공한다.\n> 퍼사드에서 고수준 인터페이스를 정의하기 때문에 서브시스템을 더 쉽게 사용할수 있다.\n\n---\n\n## 🔧 어댑터 패턴의 이해\n\n![image](https://user-images.githubusercontent.com/55419159/140725965-84c06d1c-050a-4c09-bbe1-73d91d037601.png)\n\n![image](https://user-images.githubusercontent.com/55419159/140726207-74aafe97-0197-473f-84ad-e3ed5bea9407.png)\n\n### 🚀 활용 예시\n\n_칠면조를 오리로 변환하기 위해서는... (둘다 새이긴 하니까)_\n\n> Duck 객체가 모자라서 Turkey 객체를 대신 사용해야 하는 상황이라고 해보자.\n> 인터페이스가 다르기 때문에 Turkey객체를 바로 사용할 수는 없다.\n> 어댑터를 만들어 보자.\n\n#### 오리 인터페이스\n\n```java\npublic interface Duck {\n    public void quack(); //오리는 꽥꽥\n    public void fly();\n}\n```\n\n#### 오리 구현체\n\n```java\npublic class MallardDuck implements Duck {\n    @Override\n    public void quack() {\n        System.out.println(\"Quack\");\n    }\n\n    @Override\n    public void fly() {\n        System.out.println(\"I'm flying\");\n    }\n}\n```\n\n#### 칠면조 인터페이스\n\n```java\npublic interface Turkey {\n    public void gobble(); //칠면조는 이렇게 운다..\n    public void fly();\n}\n```\n\n#### 칠면조 구현체\n\n```java\npublic class WildTurkey implements Turkey {\n    @Override\n    public void gobble() {\n        System.out.println(\"Gobble gobble\");\n    }\n\n    @Override\n    public void fly() {\n        System.out.println(\"I'm flying a short distance\");\n    }\n}\n```\n\n#### **어댑터 구현**\n\n```java\npublic class TurkeyAdapter implements Duck { //오리인터페이스를 구현한다.\n    Turkey turkey;\n\n    public TurkeyAdapter(Turkey turkey) { //생성자에서 칠면조를 받는다.\n        this.turkey = turkey;\n    }\n\n    @Override\n    public void quack() {\n        turkey.gobble(); //변환 작업\n    }\n\n    @Override\n    public void fly() {\n        turkey.fly();\n    }\n}\n```\n\n#### 실행\n\n```java\npublic class DuckTestDrive {\n\n    public static void main(String[] args) {\n\n        MallardDuck duck = new MallardDuck();\n        WildTurkey turkey = new WildTurkey();\n\n        Duck turkeyAdapter = new TurkeyAdapter(turkey);\n\n        System.out.println(\"The turkey says...\");\n\n        turkey.gobble();\n        turkey.fly();\n\n        System.out.println(\"The Duck says...\");\n        testDuck(duck);\n\n        System.out.println(\"The TurkeyAdapter says...\");\n        testDuck(turkeyAdapter);\n    }\n\n    public static void testDuck(Duck duck) {\n        duck.quack();\n        duck.fly();\n    }\n}\n\n```\n\n### 🚌 정리\n\n- 클라이언트 -> `request()` -> 어댑터 - `translatedRequest()` -> 어댑티.\n- 클라이언트는 타겟 인터페이스에 맞게 구현, 어댑터는 타겟 인터페이스를 구현하며, 어댑티 인스턴스가 들어있음.\n\n---\n\n## 🗿 파사드 패턴의 이해\n\n> 패턴을 사용할때는 항상 패턴이 어떤 용도로 쓰이는지를 잘 알아둬야 한다.\n> 퍼사드 패턴은 단순화된 인터페이스를 통해서 서브시스템을 더 쉽게 사용할 수 있도록 하기위한 용도로 쓰인다.\n\n![image](https://user-images.githubusercontent.com/55419159/140728533-8bf247c6-484d-4375-9746-d49960e445c3.png)\n\n### 💿 DVD영화를 보려고하면..\n\n> 홈씨어터로 퍼사드 패턴을 구현해보자.\n> 전선과 프로젝터를 설치하고, 각 장치들을 케이블로 연결하고 등등 여러 인터페이스들이 나열되어 있다.\n\n![image](https://user-images.githubusercontent.com/55419159/140728598-7bcbeb79-d888-413f-bca6-368863c1e56d.png)\n\n```java\n1.팝콘 기계를켠다.\n2.팝콘 튀기기 시작.\n3.전등을 어둡게 조절\n4.스크린을 내린다.\n..\n..\n12.DVD 플레이어를 켠다\n13.DVD를 재생한다.\n\npoper.on();\npoper.pop();\nlight.dim(10)\nscreen.down();\n.....\ndvd.on();\ndvd.play(movie);\n```\n\n> _너무 복잡하다... 버튼하나로 모든 세팅이 끝나게 할 수는 없을까?_\n\n- 이런 경우에 퍼사드를 사용하면 된다.\n- 퍼사드 패턴은 **인터페이스를 단순화시키기 위해서** 인터페이스를 변경한다.\n- **통합 인터페이스**를 제공하는 **퍼사드 클래스**를 구현함으로써 복잡한 시스템을 훨씬 쉽게 사용할 수 있다.\n\n```java\npublic class HomeTheaterFacade { //영화 세팅의 모든것이 담겨있는 파사드 객체\n    Amplifier amp;\n    Tuner tuner;\n    Dvdplayer dvd;\n    CdPlayer cd;\n    Projector projector;\n    TheaterLights lights;\n    Screen screen;\n    PopcornPopper popper;\n\n    public HomeTheaterFacade(Amplifier amp,\n                             Tuner tuner,\n                             DvdPlayer dvd,\n                             CdPlayer cd,\n                             Projector projector,\n                             Screen screen,\n                             TheaterLights lights,\n                             PopcornPopper popper) {\n        this.amp = amp;\n        this.tunner = tuner;\n        this.dvd = dvd;\n        this.cd = cd;\n        this.projector = projector;\n        this.screen = screen;\n        this.lights = lights;\n        this.popper = popper;\n    }\n\n    public void watchMovie(String movie) {  //영화를 보고싶으면 그냥 이 메소드만 호출하면 된다!\n        System.out.println(\"Get ready to watch a movie...\");\n        popper.on();\n        popper.pop();\n        lights.dim(10);\n        screen.down();\n        projector.on();\n        projector.wideScreenMode();\n        amp.on();\n        amp.setDvd(dvd);\n        amp.setsurroundSound();\n        amp.setVolume(5);\n        dvd.on();\n        dvd.play(movie);\n    }\n\n    public void endMovie() { //끌 때도 마찬가지!\n        System.out.println(\"Shutting movie theater down...\");\n        popper.off();\n        lights.on();\n        screen.up();\n        projector.off();\n        amp.off();\n        dvd.stop();\n        dvd.eject();\n        dvd.off();\n    }\n}\n\npublic class HomeTheaterTestDrive {\n    public static void main(String[] args) {\n        // instantiate components here\n        HomeTheaterFacade homeTheater =\n                new HomeTheaterFacade(amp, tuner, dvd, cd, projector, screen, lights, popper);\n        homeTheater.watchMovie(\"타짜\");\n        homeTheater.endMovie();\n    }\n}\n```\n\n---\n\n## 💰 최소지식원칙\n\n> _'정말 친한 친구하고만 얘기하라'_\n\n어떤 객체든 그 객체와 상호작용을 하는 클래스의 개수에 주의해야 하며, 그런 객체들과 어떤 식으로 상호작용을 하는지에도 주의를 기울여야 한다는 뜻이다.\n\n### ⚙️ 최소지식원칙을 지키는 방법\n\n어떻게 하면 여러 객체하고 인연을 맺는 것을 피할 수 있을까 \n어떤 메소드에서든지 아래와 같은 **네 종류**의 객체의 `메소드`만을 호출하면 된다.\n\n1. 객체 **자체**\n2. 메소드에 **매개변수**로 전달된 객체\n3. 그 메소드에서 생성하거나 **인스턴스**를 만든 객체\n4. 그 객체에 속하는 **구성요소**\n\n### 🥊 활용 예시\n\n\n#### 원칙을 따르지 않은 경우\n\n```java\npublic float getTemp(){\n        Thermometer thermometer=station.getThermometer(); // station 오로부터 thermometer라는 객체를 받은다음\n        return thermometer.getTemperature(); //그 갹체의 getTemperature()메소드를 직접 호출.\n        }\n```\n\n#### 원칙을 따르는 경우\n\n```java\npublic float getTemp(){\n        return station.getTemperature(); // Station 클래스에 thermometer에 요청을 해주는 메소드를 추가\n        // 이렇게 하면 의존해야 하는 클래스의 개수를 줄일수 있다.\n        }\n```\n\n#### 자동차로 예시를 들면\n\n```java\npublic class Car {\n    Engine engine; //이 클래스의 구성요소. 이 구성요소의 메소드는 호출해도 된다.\n\n    public Car() {\n    }\n\n    public void start(Key key) { // 매개변수로 전달된 객체의 메소드는 호출해도 된다.\n\n        Doors doors = new Doors(); //새로운 객체 생성. 이 객체의 메소드는 호출해도 된다.\n        boolean authorized = key.turns(); //매개변수로 전달된 객체의 메소드는 호출해도 된다.\n\n        if (authorized) {\n            engine.start(); // 이 객체의 구성요소의 메소드는 호출해도 된다.\n            updateDashboardDisplay(); // 객체 내에 있는 메소드는 호출해도 된다.\n            doors.lock(); //직접 생성하거나 인스턴스를 만든 객체의 메소드는 호출해도 된다.\n        }\n    }\n\n    public void updateDashboardDisplay() {\n    }\n}\n```\n\n\n\n","slug":"디자인-패턴/2021-11-08-어댑터-파사드-패턴","published":1,"date":"2021-11-08T10:23:29.584Z","updated":"2021-11-23T11:02:23.084Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fc0008jd9k4qx033jq","content":"<h2 id=\"🧤-어댑터-amp-파사드-패턴이란\"><a href=\"#🧤-어댑터-amp-파사드-패턴이란\" class=\"headerlink\" title=\"🧤 어댑터 &amp; 파사드 패턴이란\"></a>🧤 어댑터 &amp; 파사드 패턴이란</h2><h3 id=\"어댑터-패턴\"><a href=\"#어댑터-패턴\" class=\"headerlink\" title=\"어댑터 패턴\"></a>어댑터 패턴</h3><blockquote>\n<p>한 클래스의 인터페이스를 클라이언트에서 사용하고자하는 다른 인터페이스로 <strong>변환</strong>한다.<br>어댑터를 이용하면 인터페이스 <strong>호환성</strong> 문제 때문에 같이 쓸 수 없는 클래스들을 연결해서 쓸 수 있다.</p>\n</blockquote>\n<h3 id=\"파사드-패턴\"><a href=\"#파사드-패턴\" class=\"headerlink\" title=\"파사드 패턴\"></a>파사드 패턴</h3><blockquote>\n<p>어떤 서브시스템의 일련의 인터페이스에 대한 <strong>통합된 인터페이스</strong>를 제공한다.<br>퍼사드에서 고수준 인터페이스를 정의하기 때문에 서브시스템을 더 쉽게 사용할수 있다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🔧-어댑터-패턴의-이해\"><a href=\"#🔧-어댑터-패턴의-이해\" class=\"headerlink\" title=\"🔧 어댑터 패턴의 이해\"></a>🔧 어댑터 패턴의 이해</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/140725965-84c06d1c-050a-4c09-bbe1-73d91d037601.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/140726207-74aafe97-0197-473f-84ad-e3ed5bea9407.png\" alt=\"image\"></p>\n<h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>칠면조를 오리로 변환하기 위해서는… (둘다 새이긴 하니까)</em></p>\n<blockquote>\n<p>Duck 객체가 모자라서 Turkey 객체를 대신 사용해야 하는 상황이라고 해보자.<br>인터페이스가 다르기 때문에 Turkey객체를 바로 사용할 수는 없다.<br>어댑터를 만들어 보자.</p>\n</blockquote>\n<h4 id=\"오리-인터페이스\"><a href=\"#오리-인터페이스\" class=\"headerlink\" title=\"오리 인터페이스\"></a>오리 인터페이스</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span></span>; <span class=\"comment\">//오리는 꽥꽥</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"오리-구현체\"><a href=\"#오리-구현체\" class=\"headerlink\" title=\"오리 구현체\"></a>오리 구현체</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MallardDuck</span> <span class=\"keyword\">implements</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Quack&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;I&#x27;m flying&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"칠면조-인터페이스\"><a href=\"#칠면조-인터페이스\" class=\"headerlink\" title=\"칠면조 인터페이스\"></a>칠면조 인터페이스</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Turkey</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">gobble</span><span class=\"params\">()</span></span>; <span class=\"comment\">//칠면조는 이렇게 운다..</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"칠면조-구현체\"><a href=\"#칠면조-구현체\" class=\"headerlink\" title=\"칠면조 구현체\"></a>칠면조 구현체</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WildTurkey</span> <span class=\"keyword\">implements</span> <span class=\"title\">Turkey</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">gobble</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Gobble gobble&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;I&#x27;m flying a short distance&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"어댑터-구현\"><a href=\"#어댑터-구현\" class=\"headerlink\" title=\"어댑터 구현\"></a><strong>어댑터 구현</strong></h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TurkeyAdapter</span> <span class=\"keyword\">implements</span> <span class=\"title\">Duck</span> </span>&#123; <span class=\"comment\">//오리인터페이스를 구현한다.</span></span><br><span class=\"line\">    Turkey turkey;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TurkeyAdapter</span><span class=\"params\">(Turkey turkey)</span> </span>&#123; <span class=\"comment\">//생성자에서 칠면조를 받는다.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.turkey = turkey;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        turkey.gobble(); <span class=\"comment\">//변환 작업</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        turkey.fly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"실행\"><a href=\"#실행\" class=\"headerlink\" title=\"실행\"></a>실행</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DuckTestDrive</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        MallardDuck duck = <span class=\"keyword\">new</span> MallardDuck();</span><br><span class=\"line\">        WildTurkey turkey = <span class=\"keyword\">new</span> WildTurkey();</span><br><span class=\"line\"></span><br><span class=\"line\">        Duck turkeyAdapter = <span class=\"keyword\">new</span> TurkeyAdapter(turkey);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;The turkey says...&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        turkey.gobble();</span><br><span class=\"line\">        turkey.fly();</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;The Duck says...&quot;</span>);</span><br><span class=\"line\">        testDuck(duck);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;The TurkeyAdapter says...&quot;</span>);</span><br><span class=\"line\">        testDuck(turkeyAdapter);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testDuck</span><span class=\"params\">(Duck duck)</span> </span>&#123;</span><br><span class=\"line\">        duck.quack();</span><br><span class=\"line\">        duck.fly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"🚌-정리\"><a href=\"#🚌-정리\" class=\"headerlink\" title=\"🚌 정리\"></a>🚌 정리</h3><ul>\n<li>클라이언트 -&gt; <code>request()</code> -&gt; 어댑터 - <code>translatedRequest()</code> -&gt; 어댑티.</li>\n<li>클라이언트는 타겟 인터페이스에 맞게 구현, 어댑터는 타겟 인터페이스를 구현하며, 어댑티 인스턴스가 들어있음.</li>\n</ul>\n<hr>\n<h2 id=\"🗿-파사드-패턴의-이해\"><a href=\"#🗿-파사드-패턴의-이해\" class=\"headerlink\" title=\"🗿 파사드 패턴의 이해\"></a>🗿 파사드 패턴의 이해</h2><blockquote>\n<p>패턴을 사용할때는 항상 패턴이 어떤 용도로 쓰이는지를 잘 알아둬야 한다.<br>퍼사드 패턴은 단순화된 인터페이스를 통해서 서브시스템을 더 쉽게 사용할 수 있도록 하기위한 용도로 쓰인다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/140728533-8bf247c6-484d-4375-9746-d49960e445c3.png\" alt=\"image\"></p>\n<h3 id=\"💿-DVD영화를-보려고하면\"><a href=\"#💿-DVD영화를-보려고하면\" class=\"headerlink\" title=\"💿 DVD영화를 보려고하면..\"></a>💿 DVD영화를 보려고하면..</h3><blockquote>\n<p>홈씨어터로 퍼사드 패턴을 구현해보자.<br>전선과 프로젝터를 설치하고, 각 장치들을 케이블로 연결하고 등등 여러 인터페이스들이 나열되어 있다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/140728598-7bcbeb79-d888-413f-bca6-368863c1e56d.png\" alt=\"image\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span>팝콘 기계를켠다.</span><br><span class=\"line\"><span class=\"number\">2.</span>팝콘 튀기기 시작.</span><br><span class=\"line\"><span class=\"number\">3.</span>전등을 어둡게 조절</span><br><span class=\"line\"><span class=\"number\">4.</span>스크린을 내린다.</span><br><span class=\"line\">..</span><br><span class=\"line\">..</span><br><span class=\"line\"><span class=\"number\">12.</span>DVD 플레이어를 켠다</span><br><span class=\"line\"><span class=\"number\">13.</span>DVD를 재생한다.</span><br><span class=\"line\"></span><br><span class=\"line\">poper.on();</span><br><span class=\"line\">poper.pop();</span><br><span class=\"line\">light.dim(<span class=\"number\">10</span>)</span><br><span class=\"line\">screen.down();</span><br><span class=\"line\">.....</span><br><span class=\"line\">dvd.on();</span><br><span class=\"line\">dvd.play(movie);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><em>너무 복잡하다… 버튼하나로 모든 세팅이 끝나게 할 수는 없을까?</em></p>\n</blockquote>\n<ul>\n<li>이런 경우에 퍼사드를 사용하면 된다.</li>\n<li>퍼사드 패턴은 <strong>인터페이스를 단순화시키기 위해서</strong> 인터페이스를 변경한다.</li>\n<li><strong>통합 인터페이스</strong>를 제공하는 <strong>퍼사드 클래스</strong>를 구현함으로써 복잡한 시스템을 훨씬 쉽게 사용할 수 있다.</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HomeTheaterFacade</span> </span>&#123; <span class=\"comment\">//영화 세팅의 모든것이 담겨있는 파사드 객체</span></span><br><span class=\"line\">    Amplifier amp;</span><br><span class=\"line\">    Tuner tuner;</span><br><span class=\"line\">    Dvdplayer dvd;</span><br><span class=\"line\">    CdPlayer cd;</span><br><span class=\"line\">    Projector projector;</span><br><span class=\"line\">    TheaterLights lights;</span><br><span class=\"line\">    Screen screen;</span><br><span class=\"line\">    PopcornPopper popper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HomeTheaterFacade</span><span class=\"params\">(Amplifier amp,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             Tuner tuner,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             DvdPlayer dvd,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             CdPlayer cd,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             Projector projector,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             Screen screen,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             TheaterLights lights,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             PopcornPopper popper)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.amp = amp;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.tunner = tuner;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dvd = dvd;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cd = cd;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.projector = projector;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.screen = screen;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.lights = lights;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popper = popper;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">watchMovie</span><span class=\"params\">(String movie)</span> </span>&#123;  <span class=\"comment\">//영화를 보고싶으면 그냥 이 메소드만 호출하면 된다!</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Get ready to watch a movie...&quot;</span>);</span><br><span class=\"line\">        popper.on();</span><br><span class=\"line\">        popper.pop();</span><br><span class=\"line\">        lights.dim(<span class=\"number\">10</span>);</span><br><span class=\"line\">        screen.down();</span><br><span class=\"line\">        projector.on();</span><br><span class=\"line\">        projector.wideScreenMode();</span><br><span class=\"line\">        amp.on();</span><br><span class=\"line\">        amp.setDvd(dvd);</span><br><span class=\"line\">        amp.setsurroundSound();</span><br><span class=\"line\">        amp.setVolume(<span class=\"number\">5</span>);</span><br><span class=\"line\">        dvd.on();</span><br><span class=\"line\">        dvd.play(movie);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">endMovie</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//끌 때도 마찬가지!</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Shutting movie theater down...&quot;</span>);</span><br><span class=\"line\">        popper.off();</span><br><span class=\"line\">        lights.on();</span><br><span class=\"line\">        screen.up();</span><br><span class=\"line\">        projector.off();</span><br><span class=\"line\">        amp.off();</span><br><span class=\"line\">        dvd.stop();</span><br><span class=\"line\">        dvd.eject();</span><br><span class=\"line\">        dvd.off();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HomeTheaterTestDrive</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// instantiate components here</span></span><br><span class=\"line\">        HomeTheaterFacade homeTheater =</span><br><span class=\"line\">                <span class=\"keyword\">new</span> HomeTheaterFacade(amp, tuner, dvd, cd, projector, screen, lights, popper);</span><br><span class=\"line\">        homeTheater.watchMovie(<span class=\"string\">&quot;타짜&quot;</span>);</span><br><span class=\"line\">        homeTheater.endMovie();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"💰-최소지식원칙\"><a href=\"#💰-최소지식원칙\" class=\"headerlink\" title=\"💰 최소지식원칙\"></a>💰 최소지식원칙</h2><blockquote>\n<p><em>‘정말 친한 친구하고만 얘기하라’</em></p>\n</blockquote>\n<p>어떤 객체든 그 객체와 상호작용을 하는 클래스의 개수에 주의해야 하며, 그런 객체들과 어떤 식으로 상호작용을 하는지에도 주의를 기울여야 한다는 뜻이다.</p>\n<h3 id=\"⚙️-최소지식원칙을-지키는-방법\"><a href=\"#⚙️-최소지식원칙을-지키는-방법\" class=\"headerlink\" title=\"⚙️ 최소지식원칙을 지키는 방법\"></a>⚙️ 최소지식원칙을 지키는 방법</h3><p>어떻게 하면 여러 객체하고 인연을 맺는 것을 피할 수 있을까<br>어떤 메소드에서든지 아래와 같은 <strong>네 종류</strong>의 객체의 <code>메소드</code>만을 호출하면 된다.</p>\n<ol>\n<li>객체 <strong>자체</strong></li>\n<li>메소드에 <strong>매개변수</strong>로 전달된 객체</li>\n<li>그 메소드에서 생성하거나 <strong>인스턴스</strong>를 만든 객체</li>\n<li>그 객체에 속하는 <strong>구성요소</strong></li>\n</ol>\n<h3 id=\"🥊-활용-예시\"><a href=\"#🥊-활용-예시\" class=\"headerlink\" title=\"🥊 활용 예시\"></a>🥊 활용 예시</h3><h4 id=\"원칙을-따르지-않은-경우\"><a href=\"#원칙을-따르지-않은-경우\" class=\"headerlink\" title=\"원칙을 따르지 않은 경우\"></a>원칙을 따르지 않은 경우</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getTemp</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Thermometer thermometer=station.getThermometer(); <span class=\"comment\">// station 오로부터 thermometer라는 객체를 받은다음</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> thermometer.getTemperature(); <span class=\"comment\">//그 갹체의 getTemperature()메소드를 직접 호출.</span></span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"원칙을-따르는-경우\"><a href=\"#원칙을-따르는-경우\" class=\"headerlink\" title=\"원칙을 따르는 경우\"></a>원칙을 따르는 경우</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getTemp</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> station.getTemperature(); <span class=\"comment\">// Station 클래스에 thermometer에 요청을 해주는 메소드를 추가</span></span><br><span class=\"line\">        <span class=\"comment\">// 이렇게 하면 의존해야 하는 클래스의 개수를 줄일수 있다.</span></span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"자동차로-예시를-들면\"><a href=\"#자동차로-예시를-들면\" class=\"headerlink\" title=\"자동차로 예시를 들면\"></a>자동차로 예시를 들면</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Car</span> </span>&#123;</span><br><span class=\"line\">    Engine engine; <span class=\"comment\">//이 클래스의 구성요소. 이 구성요소의 메소드는 호출해도 된다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Car</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">start</span><span class=\"params\">(Key key)</span> </span>&#123; <span class=\"comment\">// 매개변수로 전달된 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        Doors doors = <span class=\"keyword\">new</span> Doors(); <span class=\"comment\">//새로운 객체 생성. 이 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> authorized = key.turns(); <span class=\"comment\">//매개변수로 전달된 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (authorized) &#123;</span><br><span class=\"line\">            engine.start(); <span class=\"comment\">// 이 객체의 구성요소의 메소드는 호출해도 된다.</span></span><br><span class=\"line\">            updateDashboardDisplay(); <span class=\"comment\">// 객체 내에 있는 메소드는 호출해도 된다.</span></span><br><span class=\"line\">            doors.lock(); <span class=\"comment\">//직접 생성하거나 인스턴스를 만든 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateDashboardDisplay</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"🧤-어댑터-amp-파사드-패턴이란\"><a href=\"#🧤-어댑터-amp-파사드-패턴이란\" class=\"headerlink\" title=\"🧤 어댑터 &amp; 파사드 패턴이란\"></a>🧤 어댑터 &amp; 파사드 패턴이란</h2><h3 id=\"어댑터-패턴\"><a href=\"#어댑터-패턴\" class=\"headerlink\" title=\"어댑터 패턴\"></a>어댑터 패턴</h3><blockquote>\n<p>한 클래스의 인터페이스를 클라이언트에서 사용하고자하는 다른 인터페이스로 <strong>변환</strong>한다.<br>어댑터를 이용하면 인터페이스 <strong>호환성</strong> 문제 때문에 같이 쓸 수 없는 클래스들을 연결해서 쓸 수 있다.</p>\n</blockquote>\n<h3 id=\"파사드-패턴\"><a href=\"#파사드-패턴\" class=\"headerlink\" title=\"파사드 패턴\"></a>파사드 패턴</h3><blockquote>\n<p>어떤 서브시스템의 일련의 인터페이스에 대한 <strong>통합된 인터페이스</strong>를 제공한다.<br>퍼사드에서 고수준 인터페이스를 정의하기 때문에 서브시스템을 더 쉽게 사용할수 있다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🔧-어댑터-패턴의-이해\"><a href=\"#🔧-어댑터-패턴의-이해\" class=\"headerlink\" title=\"🔧 어댑터 패턴의 이해\"></a>🔧 어댑터 패턴의 이해</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/140725965-84c06d1c-050a-4c09-bbe1-73d91d037601.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/140726207-74aafe97-0197-473f-84ad-e3ed5bea9407.png\" alt=\"image\"></p>\n<h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>칠면조를 오리로 변환하기 위해서는… (둘다 새이긴 하니까)</em></p>\n<blockquote>\n<p>Duck 객체가 모자라서 Turkey 객체를 대신 사용해야 하는 상황이라고 해보자.<br>인터페이스가 다르기 때문에 Turkey객체를 바로 사용할 수는 없다.<br>어댑터를 만들어 보자.</p>\n</blockquote>\n<h4 id=\"오리-인터페이스\"><a href=\"#오리-인터페이스\" class=\"headerlink\" title=\"오리 인터페이스\"></a>오리 인터페이스</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span></span>; <span class=\"comment\">//오리는 꽥꽥</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"오리-구현체\"><a href=\"#오리-구현체\" class=\"headerlink\" title=\"오리 구현체\"></a>오리 구현체</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MallardDuck</span> <span class=\"keyword\">implements</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Quack&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;I&#x27;m flying&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"칠면조-인터페이스\"><a href=\"#칠면조-인터페이스\" class=\"headerlink\" title=\"칠면조 인터페이스\"></a>칠면조 인터페이스</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Turkey</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">gobble</span><span class=\"params\">()</span></span>; <span class=\"comment\">//칠면조는 이렇게 운다..</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"칠면조-구현체\"><a href=\"#칠면조-구현체\" class=\"headerlink\" title=\"칠면조 구현체\"></a>칠면조 구현체</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WildTurkey</span> <span class=\"keyword\">implements</span> <span class=\"title\">Turkey</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">gobble</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Gobble gobble&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;I&#x27;m flying a short distance&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"어댑터-구현\"><a href=\"#어댑터-구현\" class=\"headerlink\" title=\"어댑터 구현\"></a><strong>어댑터 구현</strong></h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TurkeyAdapter</span> <span class=\"keyword\">implements</span> <span class=\"title\">Duck</span> </span>&#123; <span class=\"comment\">//오리인터페이스를 구현한다.</span></span><br><span class=\"line\">    Turkey turkey;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TurkeyAdapter</span><span class=\"params\">(Turkey turkey)</span> </span>&#123; <span class=\"comment\">//생성자에서 칠면조를 받는다.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.turkey = turkey;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        turkey.gobble(); <span class=\"comment\">//변환 작업</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        turkey.fly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"실행\"><a href=\"#실행\" class=\"headerlink\" title=\"실행\"></a>실행</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DuckTestDrive</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        MallardDuck duck = <span class=\"keyword\">new</span> MallardDuck();</span><br><span class=\"line\">        WildTurkey turkey = <span class=\"keyword\">new</span> WildTurkey();</span><br><span class=\"line\"></span><br><span class=\"line\">        Duck turkeyAdapter = <span class=\"keyword\">new</span> TurkeyAdapter(turkey);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;The turkey says...&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        turkey.gobble();</span><br><span class=\"line\">        turkey.fly();</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;The Duck says...&quot;</span>);</span><br><span class=\"line\">        testDuck(duck);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;The TurkeyAdapter says...&quot;</span>);</span><br><span class=\"line\">        testDuck(turkeyAdapter);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testDuck</span><span class=\"params\">(Duck duck)</span> </span>&#123;</span><br><span class=\"line\">        duck.quack();</span><br><span class=\"line\">        duck.fly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"🚌-정리\"><a href=\"#🚌-정리\" class=\"headerlink\" title=\"🚌 정리\"></a>🚌 정리</h3><ul>\n<li>클라이언트 -&gt; <code>request()</code> -&gt; 어댑터 - <code>translatedRequest()</code> -&gt; 어댑티.</li>\n<li>클라이언트는 타겟 인터페이스에 맞게 구현, 어댑터는 타겟 인터페이스를 구현하며, 어댑티 인스턴스가 들어있음.</li>\n</ul>\n<hr>\n<h2 id=\"🗿-파사드-패턴의-이해\"><a href=\"#🗿-파사드-패턴의-이해\" class=\"headerlink\" title=\"🗿 파사드 패턴의 이해\"></a>🗿 파사드 패턴의 이해</h2><blockquote>\n<p>패턴을 사용할때는 항상 패턴이 어떤 용도로 쓰이는지를 잘 알아둬야 한다.<br>퍼사드 패턴은 단순화된 인터페이스를 통해서 서브시스템을 더 쉽게 사용할 수 있도록 하기위한 용도로 쓰인다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/140728533-8bf247c6-484d-4375-9746-d49960e445c3.png\" alt=\"image\"></p>\n<h3 id=\"💿-DVD영화를-보려고하면\"><a href=\"#💿-DVD영화를-보려고하면\" class=\"headerlink\" title=\"💿 DVD영화를 보려고하면..\"></a>💿 DVD영화를 보려고하면..</h3><blockquote>\n<p>홈씨어터로 퍼사드 패턴을 구현해보자.<br>전선과 프로젝터를 설치하고, 각 장치들을 케이블로 연결하고 등등 여러 인터페이스들이 나열되어 있다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/140728598-7bcbeb79-d888-413f-bca6-368863c1e56d.png\" alt=\"image\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span>팝콘 기계를켠다.</span><br><span class=\"line\"><span class=\"number\">2.</span>팝콘 튀기기 시작.</span><br><span class=\"line\"><span class=\"number\">3.</span>전등을 어둡게 조절</span><br><span class=\"line\"><span class=\"number\">4.</span>스크린을 내린다.</span><br><span class=\"line\">..</span><br><span class=\"line\">..</span><br><span class=\"line\"><span class=\"number\">12.</span>DVD 플레이어를 켠다</span><br><span class=\"line\"><span class=\"number\">13.</span>DVD를 재생한다.</span><br><span class=\"line\"></span><br><span class=\"line\">poper.on();</span><br><span class=\"line\">poper.pop();</span><br><span class=\"line\">light.dim(<span class=\"number\">10</span>)</span><br><span class=\"line\">screen.down();</span><br><span class=\"line\">.....</span><br><span class=\"line\">dvd.on();</span><br><span class=\"line\">dvd.play(movie);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><em>너무 복잡하다… 버튼하나로 모든 세팅이 끝나게 할 수는 없을까?</em></p>\n</blockquote>\n<ul>\n<li>이런 경우에 퍼사드를 사용하면 된다.</li>\n<li>퍼사드 패턴은 <strong>인터페이스를 단순화시키기 위해서</strong> 인터페이스를 변경한다.</li>\n<li><strong>통합 인터페이스</strong>를 제공하는 <strong>퍼사드 클래스</strong>를 구현함으로써 복잡한 시스템을 훨씬 쉽게 사용할 수 있다.</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HomeTheaterFacade</span> </span>&#123; <span class=\"comment\">//영화 세팅의 모든것이 담겨있는 파사드 객체</span></span><br><span class=\"line\">    Amplifier amp;</span><br><span class=\"line\">    Tuner tuner;</span><br><span class=\"line\">    Dvdplayer dvd;</span><br><span class=\"line\">    CdPlayer cd;</span><br><span class=\"line\">    Projector projector;</span><br><span class=\"line\">    TheaterLights lights;</span><br><span class=\"line\">    Screen screen;</span><br><span class=\"line\">    PopcornPopper popper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HomeTheaterFacade</span><span class=\"params\">(Amplifier amp,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             Tuner tuner,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             DvdPlayer dvd,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             CdPlayer cd,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             Projector projector,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             Screen screen,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             TheaterLights lights,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                             PopcornPopper popper)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.amp = amp;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.tunner = tuner;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dvd = dvd;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cd = cd;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.projector = projector;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.screen = screen;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.lights = lights;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popper = popper;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">watchMovie</span><span class=\"params\">(String movie)</span> </span>&#123;  <span class=\"comment\">//영화를 보고싶으면 그냥 이 메소드만 호출하면 된다!</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Get ready to watch a movie...&quot;</span>);</span><br><span class=\"line\">        popper.on();</span><br><span class=\"line\">        popper.pop();</span><br><span class=\"line\">        lights.dim(<span class=\"number\">10</span>);</span><br><span class=\"line\">        screen.down();</span><br><span class=\"line\">        projector.on();</span><br><span class=\"line\">        projector.wideScreenMode();</span><br><span class=\"line\">        amp.on();</span><br><span class=\"line\">        amp.setDvd(dvd);</span><br><span class=\"line\">        amp.setsurroundSound();</span><br><span class=\"line\">        amp.setVolume(<span class=\"number\">5</span>);</span><br><span class=\"line\">        dvd.on();</span><br><span class=\"line\">        dvd.play(movie);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">endMovie</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//끌 때도 마찬가지!</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Shutting movie theater down...&quot;</span>);</span><br><span class=\"line\">        popper.off();</span><br><span class=\"line\">        lights.on();</span><br><span class=\"line\">        screen.up();</span><br><span class=\"line\">        projector.off();</span><br><span class=\"line\">        amp.off();</span><br><span class=\"line\">        dvd.stop();</span><br><span class=\"line\">        dvd.eject();</span><br><span class=\"line\">        dvd.off();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HomeTheaterTestDrive</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// instantiate components here</span></span><br><span class=\"line\">        HomeTheaterFacade homeTheater =</span><br><span class=\"line\">                <span class=\"keyword\">new</span> HomeTheaterFacade(amp, tuner, dvd, cd, projector, screen, lights, popper);</span><br><span class=\"line\">        homeTheater.watchMovie(<span class=\"string\">&quot;타짜&quot;</span>);</span><br><span class=\"line\">        homeTheater.endMovie();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"💰-최소지식원칙\"><a href=\"#💰-최소지식원칙\" class=\"headerlink\" title=\"💰 최소지식원칙\"></a>💰 최소지식원칙</h2><blockquote>\n<p><em>‘정말 친한 친구하고만 얘기하라’</em></p>\n</blockquote>\n<p>어떤 객체든 그 객체와 상호작용을 하는 클래스의 개수에 주의해야 하며, 그런 객체들과 어떤 식으로 상호작용을 하는지에도 주의를 기울여야 한다는 뜻이다.</p>\n<h3 id=\"⚙️-최소지식원칙을-지키는-방법\"><a href=\"#⚙️-최소지식원칙을-지키는-방법\" class=\"headerlink\" title=\"⚙️ 최소지식원칙을 지키는 방법\"></a>⚙️ 최소지식원칙을 지키는 방법</h3><p>어떻게 하면 여러 객체하고 인연을 맺는 것을 피할 수 있을까<br>어떤 메소드에서든지 아래와 같은 <strong>네 종류</strong>의 객체의 <code>메소드</code>만을 호출하면 된다.</p>\n<ol>\n<li>객체 <strong>자체</strong></li>\n<li>메소드에 <strong>매개변수</strong>로 전달된 객체</li>\n<li>그 메소드에서 생성하거나 <strong>인스턴스</strong>를 만든 객체</li>\n<li>그 객체에 속하는 <strong>구성요소</strong></li>\n</ol>\n<h3 id=\"🥊-활용-예시\"><a href=\"#🥊-활용-예시\" class=\"headerlink\" title=\"🥊 활용 예시\"></a>🥊 활용 예시</h3><h4 id=\"원칙을-따르지-않은-경우\"><a href=\"#원칙을-따르지-않은-경우\" class=\"headerlink\" title=\"원칙을 따르지 않은 경우\"></a>원칙을 따르지 않은 경우</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getTemp</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Thermometer thermometer=station.getThermometer(); <span class=\"comment\">// station 오로부터 thermometer라는 객체를 받은다음</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> thermometer.getTemperature(); <span class=\"comment\">//그 갹체의 getTemperature()메소드를 직접 호출.</span></span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"원칙을-따르는-경우\"><a href=\"#원칙을-따르는-경우\" class=\"headerlink\" title=\"원칙을 따르는 경우\"></a>원칙을 따르는 경우</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getTemp</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> station.getTemperature(); <span class=\"comment\">// Station 클래스에 thermometer에 요청을 해주는 메소드를 추가</span></span><br><span class=\"line\">        <span class=\"comment\">// 이렇게 하면 의존해야 하는 클래스의 개수를 줄일수 있다.</span></span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"자동차로-예시를-들면\"><a href=\"#자동차로-예시를-들면\" class=\"headerlink\" title=\"자동차로 예시를 들면\"></a>자동차로 예시를 들면</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Car</span> </span>&#123;</span><br><span class=\"line\">    Engine engine; <span class=\"comment\">//이 클래스의 구성요소. 이 구성요소의 메소드는 호출해도 된다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Car</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">start</span><span class=\"params\">(Key key)</span> </span>&#123; <span class=\"comment\">// 매개변수로 전달된 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        Doors doors = <span class=\"keyword\">new</span> Doors(); <span class=\"comment\">//새로운 객체 생성. 이 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> authorized = key.turns(); <span class=\"comment\">//매개변수로 전달된 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (authorized) &#123;</span><br><span class=\"line\">            engine.start(); <span class=\"comment\">// 이 객체의 구성요소의 메소드는 호출해도 된다.</span></span><br><span class=\"line\">            updateDashboardDisplay(); <span class=\"comment\">// 객체 내에 있는 메소드는 호출해도 된다.</span></span><br><span class=\"line\">            doors.lock(); <span class=\"comment\">//직접 생성하거나 인스턴스를 만든 객체의 메소드는 호출해도 된다.</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateDashboardDisplay</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"이터레이터 패턴","_content":"\n## 🎛 이터레이터 패턴이란\n\n> 컬렉션 구현 방법을 **노출시키지 않으면서도**, 그 집합체 안에 들어있는 **모든 항목에 접근할 수 있는 방법**을 제공한다.\n\n컬렉션 객체 안에 들어있는 모든 항목에 **접근하는 방식이 통일되어 있으면** 어떤 종류의 집합체에 대해서도 사용할 수 있는 다형적인 코드를 만들수 있다.\n\n`이터레이터 패턴`을 사용하면 모든 항목에 일일이 접근하는 작업을 컬렉션 객체가 아닌 **반복자 객체**에서 맡게 된다. \n이렇게 하면 집합체의 인터페이스 및 구현이 간단해질 뿐 아니라, 집합체에서는 반복작업에서 손을 떼고 원래 자신이 할 일(객체 컬렉션 관리)에만 전념할 수 있다\n\n\n---\n\n## 🔎 이터레이터 패턴의 이해\n\n![image](https://user-images.githubusercontent.com/55419159/141257200-343f3e03-e28d-4be6-bc54-9f613d0aaf71.png)\n\n\n### 🚀 활용 예시\n\n_두개의 서로 다른 식당이있고 각각의 식당에서 메뉴를 구현한다고 가정해보자_\n\n`java.util.Iterator` 인터페이스를 사용해서 `Iterator`를 적용시켜보자.\n\n\n#### 이터레이트 인터페이스\n\n```java\npublic interface Menu {\n    public Iterator<MenuItem> createIterator();\n}\n```\n\n#### 인터페이스를 구현하는 객체 생성\n\n```java\npublic class PancakeHouseMenu implements Menu {\n\n    ArrayList<MenuItem> menuItems; //이 객체는 메뉴들이 ArrayList 이다\n\n    public PancakeHouseMenu() {\n        this.menuItems = new ArrayList();\n        additem(\"K&B 팬케이크 세트\", \"스크램블드 에그와 토스트가 곁들여진 펜케이크\", true, 2.99);\n        additem(\"레귤러 팬케이크 세트\", \"달걀 후라이와 소시지가 곁들여진 펜케이크\", false, 2.99);\n        additem(\"블루베리 펜케이크\", \"신선한 블루베리와 블루베리 시럽으로 만든 펜케이크\", true, 3.49);\n        additem(\"와플\", \"와플, 취향에 따라 블루베리나 딸기를 얹을 수 있습니다.\", true, 3.59);\n    }\n\n    public void additem(string name, String description, boolean vegetarian, double price) {\n        MenuItem menuItem = new MenuItem(name, description, vegetarian, price);\n        menuItem.add(menuItem);\n    }\n\n    public ArrayList<MenuItem> getMenuItems() {\n        return menuItems;\n    }\n\n    @Override\n    public Iterator<MenuItem> createIterator() {\n        return menuItems.iterator(); //ArrayList 컬렉션은 반복자를 리턴하는 iterator() 라는 메소드가 있음.\n    }\n}\n\n\npublic class DinerMenu implements Menu {\n    \n    static final int MAX_ITEMS = 6;\n    int numberOfItems = 0;\n    MenuItem[] menuItems; //이 객체는 메뉴들이 배열 이다\n\n    public DinerMenu() {\n        this.menuItems = new MenuItem[MAX_ITEMS];\n        additem(\"채식주의자용 BLT\", \"통밀 위에 (식물성)베이컨, 상추, 토마토를 얹은 메뉴\", true, 2.99);\n        additem(\"BLT\", \"통밀 위에 베이컨, 상추, 토마토를 얹은 메뉴\", false, 2.99);\n        additem(\"오늘의 스프\", \"감자 샐러드를 곁들인 오늘의 스프\", false, 3.29);\n        additem(\"핫도그\", \"사워크라우트, 갖은 양념, 양파, 치즈가 곁들여진 핫도그\", false, 3.05);\n    }\n\n    public void additem(string name, String description, boolean vegetarian, double price) {\n        MenuItem menuItem = new MenuItem(name, description, vegetarian, price);\n        if (nemberOfItems >= MAX_ITEMS) {\n            System.err.println(\"죄송합니다, 메뉴가 꽉 찼습니다. 더 이상 추가할 수 없습니다.\");\n        } else {\n            menuItems[numberOfItems] = menuItem;\n            numberOfItems = numberOfItems + 1;\n        }\n    }\n\n    public MenuItem[] getMenuItems() {\n        return menuItems;\n    }\n\n    @Override\n    public Iterator<MenuItem> createIterator() {\n        return new DinerMenujIterator(menuItems);\n    }\n}\n```\n\n#### `java.util.Iterator` 인터페이스를 사용해서 `Iterator` 객체를 구현\n```java\npublic class DinerMenuIterator implements Iterator<MenuItem> {\n\n    Menuitem[] list;\n    int position = 0;\n    public DinerMenuIterator(MenuItem[] list) {\n        this.list = list;\n    }\n\n    @Override\n    public MenuItem next() {\n        MenuItem menuItem = list[position];\n        position += 1;\n        return menuItem;\n    }\n\n    @Override\n    public boolean hasNext() {\n        if (position >= list.length || list[position] == null) return false;\n        else return true;\n    }\n\n    @Override\n    public void remove() { // 반드시 기능을 제공하지 않아도됨 그렇다면 java.lang.UnsupportedOperationException을 던지도록 하면됨\n        if (position <= 0) Throw new IllegalStateException(\"next()가 한번도 호출되지 않음.\");\n        if (list[position - 1] != null) {\n            for (int i = position - 1; i < (list.length - 1); i++) {\n                list[i] = list[i + 1];\n            }\n            list[list.length - 1] = null;\n        }\n    }\n}\n\n// PancakeHouseMenu 는 ArrayList안에 이미 Iterator 구현되어 있기 때문에 생략해도 된다.\n```\n\n#### 클라이언트 객체에서의 활용\n```java\npublic class Waitress { \n    ArrayList<Menu> menus;\n\n    public Waitress(ArrayList<Menu> menus) {\n        this.menus = menus;\n    }\n\n    public void printMenu() {\n\n        Iterator menuIterator = menus.iterator();\n        while (menuIterator.hasNext()) {\n            Menu menu = menuIterator.next();\n            printMenu(menu.createIterator());\n        }\n    }\n\n    private void printMenu(Iterator<MenuItem> iterator) { //클라이언트 객체에서의 반복작업이 매우 간단해졌다\n        while (iterator.hasNext()) {\n            MenuItem menuItem = iterator.next();\n            System.out.println(menuItem.getName());\n            System.out.println(menuItem.getPrice());\n            System.out.println(menuItem.getDescription());\n        }\n    }\n}\n```\n\n#### 테스트\n```java\npublic class MenuTestDrive { \n    public static void main(String args[]) {\n        ArrayList<Menu> menuList = new ArrayList();\n        menuList.add(new PancakeHouseMenu());\n        menuList.add(new DinerMenu());\n        Waitress waitress = new Waitress(menuList);\n        waitress.printMenu();\n    }\n}\n```\n\n> 이제 **집합체 내**에서 어떤 식으로 일이 처리되는 지에 대해서 **전혀 모르는 상태**에서도 그 안에 들어있는 모든 항목들에 대해서 반복작업을 수행할수 있게 되었다.\n\n집합체에서 내부 컬랙션과 관련된 기능과 반복자용 메소드 관련기능을 전부 구현하도록 했다면 어떨까?\n\n우선 클래스에서 원래 그 클래스의 역할(집합체 관리) 외에 다른 역할(반복자 메소드)을 처리하도록 하면, 두 가지 이유로 인해 그 클래스가 바뀔 수 있게 된다.\n\n1. 컬렉션이 어떤 이유로 인해 바뀌게 되면 그 클래스의 **소스코드**를 바꿔야 한다. \n2. **반복자 관련 기능**이 바뀌었을 때도 클래스가 바뀌여야 한다.\n\n---\n\n## 🛡 디자인 원칙\n\n> _클래스를 바꾸는 이유는 **한 가지** 뿐이어야 한다._\n\n **클래스를 고치는 것은 최대한 피해야 한다.**\n\n 때문에 코드를 변경할 만한 이유가 두가지가 되면 그만큼 그 클래스를 나중에 고쳐야 할 가능성이 커지게 될 뿐 아니라, 디자인에 있어서 두 가지 부분이 동시에 영향이 미치게 된다.\n \n이 원칙에 따르면 **한 역할은 한 클래스에서만** 맡게 해야 한다.\n","source":"_posts/디자인-패턴/2021-11-11-이터레이터-패턴.md","raw":"---\ntitle: 이터레이터 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 이터레이터\n---\n\n## 🎛 이터레이터 패턴이란\n\n> 컬렉션 구현 방법을 **노출시키지 않으면서도**, 그 집합체 안에 들어있는 **모든 항목에 접근할 수 있는 방법**을 제공한다.\n\n컬렉션 객체 안에 들어있는 모든 항목에 **접근하는 방식이 통일되어 있으면** 어떤 종류의 집합체에 대해서도 사용할 수 있는 다형적인 코드를 만들수 있다.\n\n`이터레이터 패턴`을 사용하면 모든 항목에 일일이 접근하는 작업을 컬렉션 객체가 아닌 **반복자 객체**에서 맡게 된다. \n이렇게 하면 집합체의 인터페이스 및 구현이 간단해질 뿐 아니라, 집합체에서는 반복작업에서 손을 떼고 원래 자신이 할 일(객체 컬렉션 관리)에만 전념할 수 있다\n\n\n---\n\n## 🔎 이터레이터 패턴의 이해\n\n![image](https://user-images.githubusercontent.com/55419159/141257200-343f3e03-e28d-4be6-bc54-9f613d0aaf71.png)\n\n\n### 🚀 활용 예시\n\n_두개의 서로 다른 식당이있고 각각의 식당에서 메뉴를 구현한다고 가정해보자_\n\n`java.util.Iterator` 인터페이스를 사용해서 `Iterator`를 적용시켜보자.\n\n\n#### 이터레이트 인터페이스\n\n```java\npublic interface Menu {\n    public Iterator<MenuItem> createIterator();\n}\n```\n\n#### 인터페이스를 구현하는 객체 생성\n\n```java\npublic class PancakeHouseMenu implements Menu {\n\n    ArrayList<MenuItem> menuItems; //이 객체는 메뉴들이 ArrayList 이다\n\n    public PancakeHouseMenu() {\n        this.menuItems = new ArrayList();\n        additem(\"K&B 팬케이크 세트\", \"스크램블드 에그와 토스트가 곁들여진 펜케이크\", true, 2.99);\n        additem(\"레귤러 팬케이크 세트\", \"달걀 후라이와 소시지가 곁들여진 펜케이크\", false, 2.99);\n        additem(\"블루베리 펜케이크\", \"신선한 블루베리와 블루베리 시럽으로 만든 펜케이크\", true, 3.49);\n        additem(\"와플\", \"와플, 취향에 따라 블루베리나 딸기를 얹을 수 있습니다.\", true, 3.59);\n    }\n\n    public void additem(string name, String description, boolean vegetarian, double price) {\n        MenuItem menuItem = new MenuItem(name, description, vegetarian, price);\n        menuItem.add(menuItem);\n    }\n\n    public ArrayList<MenuItem> getMenuItems() {\n        return menuItems;\n    }\n\n    @Override\n    public Iterator<MenuItem> createIterator() {\n        return menuItems.iterator(); //ArrayList 컬렉션은 반복자를 리턴하는 iterator() 라는 메소드가 있음.\n    }\n}\n\n\npublic class DinerMenu implements Menu {\n    \n    static final int MAX_ITEMS = 6;\n    int numberOfItems = 0;\n    MenuItem[] menuItems; //이 객체는 메뉴들이 배열 이다\n\n    public DinerMenu() {\n        this.menuItems = new MenuItem[MAX_ITEMS];\n        additem(\"채식주의자용 BLT\", \"통밀 위에 (식물성)베이컨, 상추, 토마토를 얹은 메뉴\", true, 2.99);\n        additem(\"BLT\", \"통밀 위에 베이컨, 상추, 토마토를 얹은 메뉴\", false, 2.99);\n        additem(\"오늘의 스프\", \"감자 샐러드를 곁들인 오늘의 스프\", false, 3.29);\n        additem(\"핫도그\", \"사워크라우트, 갖은 양념, 양파, 치즈가 곁들여진 핫도그\", false, 3.05);\n    }\n\n    public void additem(string name, String description, boolean vegetarian, double price) {\n        MenuItem menuItem = new MenuItem(name, description, vegetarian, price);\n        if (nemberOfItems >= MAX_ITEMS) {\n            System.err.println(\"죄송합니다, 메뉴가 꽉 찼습니다. 더 이상 추가할 수 없습니다.\");\n        } else {\n            menuItems[numberOfItems] = menuItem;\n            numberOfItems = numberOfItems + 1;\n        }\n    }\n\n    public MenuItem[] getMenuItems() {\n        return menuItems;\n    }\n\n    @Override\n    public Iterator<MenuItem> createIterator() {\n        return new DinerMenujIterator(menuItems);\n    }\n}\n```\n\n#### `java.util.Iterator` 인터페이스를 사용해서 `Iterator` 객체를 구현\n```java\npublic class DinerMenuIterator implements Iterator<MenuItem> {\n\n    Menuitem[] list;\n    int position = 0;\n    public DinerMenuIterator(MenuItem[] list) {\n        this.list = list;\n    }\n\n    @Override\n    public MenuItem next() {\n        MenuItem menuItem = list[position];\n        position += 1;\n        return menuItem;\n    }\n\n    @Override\n    public boolean hasNext() {\n        if (position >= list.length || list[position] == null) return false;\n        else return true;\n    }\n\n    @Override\n    public void remove() { // 반드시 기능을 제공하지 않아도됨 그렇다면 java.lang.UnsupportedOperationException을 던지도록 하면됨\n        if (position <= 0) Throw new IllegalStateException(\"next()가 한번도 호출되지 않음.\");\n        if (list[position - 1] != null) {\n            for (int i = position - 1; i < (list.length - 1); i++) {\n                list[i] = list[i + 1];\n            }\n            list[list.length - 1] = null;\n        }\n    }\n}\n\n// PancakeHouseMenu 는 ArrayList안에 이미 Iterator 구현되어 있기 때문에 생략해도 된다.\n```\n\n#### 클라이언트 객체에서의 활용\n```java\npublic class Waitress { \n    ArrayList<Menu> menus;\n\n    public Waitress(ArrayList<Menu> menus) {\n        this.menus = menus;\n    }\n\n    public void printMenu() {\n\n        Iterator menuIterator = menus.iterator();\n        while (menuIterator.hasNext()) {\n            Menu menu = menuIterator.next();\n            printMenu(menu.createIterator());\n        }\n    }\n\n    private void printMenu(Iterator<MenuItem> iterator) { //클라이언트 객체에서의 반복작업이 매우 간단해졌다\n        while (iterator.hasNext()) {\n            MenuItem menuItem = iterator.next();\n            System.out.println(menuItem.getName());\n            System.out.println(menuItem.getPrice());\n            System.out.println(menuItem.getDescription());\n        }\n    }\n}\n```\n\n#### 테스트\n```java\npublic class MenuTestDrive { \n    public static void main(String args[]) {\n        ArrayList<Menu> menuList = new ArrayList();\n        menuList.add(new PancakeHouseMenu());\n        menuList.add(new DinerMenu());\n        Waitress waitress = new Waitress(menuList);\n        waitress.printMenu();\n    }\n}\n```\n\n> 이제 **집합체 내**에서 어떤 식으로 일이 처리되는 지에 대해서 **전혀 모르는 상태**에서도 그 안에 들어있는 모든 항목들에 대해서 반복작업을 수행할수 있게 되었다.\n\n집합체에서 내부 컬랙션과 관련된 기능과 반복자용 메소드 관련기능을 전부 구현하도록 했다면 어떨까?\n\n우선 클래스에서 원래 그 클래스의 역할(집합체 관리) 외에 다른 역할(반복자 메소드)을 처리하도록 하면, 두 가지 이유로 인해 그 클래스가 바뀔 수 있게 된다.\n\n1. 컬렉션이 어떤 이유로 인해 바뀌게 되면 그 클래스의 **소스코드**를 바꿔야 한다. \n2. **반복자 관련 기능**이 바뀌었을 때도 클래스가 바뀌여야 한다.\n\n---\n\n## 🛡 디자인 원칙\n\n> _클래스를 바꾸는 이유는 **한 가지** 뿐이어야 한다._\n\n **클래스를 고치는 것은 최대한 피해야 한다.**\n\n 때문에 코드를 변경할 만한 이유가 두가지가 되면 그만큼 그 클래스를 나중에 고쳐야 할 가능성이 커지게 될 뿐 아니라, 디자인에 있어서 두 가지 부분이 동시에 영향이 미치게 된다.\n \n이 원칙에 따르면 **한 역할은 한 클래스에서만** 맡게 해야 한다.\n","slug":"디자인-패턴/2021-11-11-이터레이터-패턴","published":1,"date":"2021-11-09T11:33:27.687Z","updated":"2021-11-11T09:30:49.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fd000bjd9kfhlug5vo","content":"<h2 id=\"🎛-이터레이터-패턴이란\"><a href=\"#🎛-이터레이터-패턴이란\" class=\"headerlink\" title=\"🎛 이터레이터 패턴이란\"></a>🎛 이터레이터 패턴이란</h2><blockquote>\n<p>컬렉션 구현 방법을 <strong>노출시키지 않으면서도</strong>, 그 집합체 안에 들어있는 <strong>모든 항목에 접근할 수 있는 방법</strong>을 제공한다.</p>\n</blockquote>\n<p>컬렉션 객체 안에 들어있는 모든 항목에 <strong>접근하는 방식이 통일되어 있으면</strong> 어떤 종류의 집합체에 대해서도 사용할 수 있는 다형적인 코드를 만들수 있다.</p>\n<p><code>이터레이터 패턴</code>을 사용하면 모든 항목에 일일이 접근하는 작업을 컬렉션 객체가 아닌 <strong>반복자 객체</strong>에서 맡게 된다.<br>이렇게 하면 집합체의 인터페이스 및 구현이 간단해질 뿐 아니라, 집합체에서는 반복작업에서 손을 떼고 원래 자신이 할 일(객체 컬렉션 관리)에만 전념할 수 있다</p>\n<hr>\n<h2 id=\"🔎-이터레이터-패턴의-이해\"><a href=\"#🔎-이터레이터-패턴의-이해\" class=\"headerlink\" title=\"🔎 이터레이터 패턴의 이해\"></a>🔎 이터레이터 패턴의 이해</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/141257200-343f3e03-e28d-4be6-bc54-9f613d0aaf71.png\" alt=\"image\"></p>\n<h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>두개의 서로 다른 식당이있고 각각의 식당에서 메뉴를 구현한다고 가정해보자</em></p>\n<p><code>java.util.Iterator</code> 인터페이스를 사용해서 <code>Iterator</code>를 적용시켜보자.</p>\n<h4 id=\"이터레이트-인터페이스\"><a href=\"#이터레이트-인터페이스\" class=\"headerlink\" title=\"이터레이트 인터페이스\"></a>이터레이트 인터페이스</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuItem&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"인터페이스를-구현하는-객체-생성\"><a href=\"#인터페이스를-구현하는-객체-생성\" class=\"headerlink\" title=\"인터페이스를 구현하는 객체 생성\"></a>인터페이스를 구현하는 객체 생성</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PancakeHouseMenu</span> <span class=\"keyword\">implements</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ArrayList&lt;MenuItem&gt; menuItems; <span class=\"comment\">//이 객체는 메뉴들이 ArrayList 이다</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PancakeHouseMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.menuItems = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;K&amp;B 팬케이크 세트&quot;</span>, <span class=\"string\">&quot;스크램블드 에그와 토스트가 곁들여진 펜케이크&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;레귤러 팬케이크 세트&quot;</span>, <span class=\"string\">&quot;달걀 후라이와 소시지가 곁들여진 펜케이크&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;블루베리 펜케이크&quot;</span>, <span class=\"string\">&quot;신선한 블루베리와 블루베리 시럽으로 만든 펜케이크&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">3.49</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;와플&quot;</span>, <span class=\"string\">&quot;와플, 취향에 따라 블루베리나 딸기를 얹을 수 있습니다.&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">3.59</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">additem</span><span class=\"params\">(string name, String description, <span class=\"keyword\">boolean</span> vegetarian, <span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">        MenuItem menuItem = <span class=\"keyword\">new</span> MenuItem(name, description, vegetarian, price);</span><br><span class=\"line\">        menuItem.add(menuItem);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ArrayList&lt;MenuItem&gt; <span class=\"title\">getMenuItems</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItems;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuItem&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItems.iterator(); <span class=\"comment\">//ArrayList 컬렉션은 반복자를 리턴하는 iterator() 라는 메소드가 있음.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DinerMenu</span> <span class=\"keyword\">implements</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_ITEMS = <span class=\"number\">6</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> numberOfItems = <span class=\"number\">0</span>;</span><br><span class=\"line\">    MenuItem[] menuItems; <span class=\"comment\">//이 객체는 메뉴들이 배열 이다</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DinerMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.menuItems = <span class=\"keyword\">new</span> MenuItem[MAX_ITEMS];</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;채식주의자용 BLT&quot;</span>, <span class=\"string\">&quot;통밀 위에 (식물성)베이컨, 상추, 토마토를 얹은 메뉴&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;BLT&quot;</span>, <span class=\"string\">&quot;통밀 위에 베이컨, 상추, 토마토를 얹은 메뉴&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;오늘의 스프&quot;</span>, <span class=\"string\">&quot;감자 샐러드를 곁들인 오늘의 스프&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">3.29</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;핫도그&quot;</span>, <span class=\"string\">&quot;사워크라우트, 갖은 양념, 양파, 치즈가 곁들여진 핫도그&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">3.05</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">additem</span><span class=\"params\">(string name, String description, <span class=\"keyword\">boolean</span> vegetarian, <span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">        MenuItem menuItem = <span class=\"keyword\">new</span> MenuItem(name, description, vegetarian, price);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (nemberOfItems &gt;= MAX_ITEMS) &#123;</span><br><span class=\"line\">            System.err.println(<span class=\"string\">&quot;죄송합니다, 메뉴가 꽉 찼습니다. 더 이상 추가할 수 없습니다.&quot;</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            menuItems[numberOfItems] = menuItem;</span><br><span class=\"line\">            numberOfItems = numberOfItems + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MenuItem[] getMenuItems() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItems;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuItem&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> DinerMenujIterator(menuItems);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"java-util-Iterator-인터페이스를-사용해서-Iterator-객체를-구현\"><a href=\"#java-util-Iterator-인터페이스를-사용해서-Iterator-객체를-구현\" class=\"headerlink\" title=\"java.util.Iterator 인터페이스를 사용해서 Iterator 객체를 구현\"></a><code>java.util.Iterator</code> 인터페이스를 사용해서 <code>Iterator</code> 객체를 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DinerMenuIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span>&lt;<span class=\"title\">MenuItem</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Menuitem[] list;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> position = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DinerMenuIterator</span><span class=\"params\">(MenuItem[] list)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.list = list;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuItem <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        MenuItem menuItem = list[position];</span><br><span class=\"line\">        position += <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItem;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (position &gt;= list.length || list[position] == <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">// 반드시 기능을 제공하지 않아도됨 그렇다면 java.lang.UnsupportedOperationException을 던지도록 하면됨</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (position &lt;= <span class=\"number\">0</span>) <span class=\"function\">Throw new <span class=\"title\">IllegalStateException</span><span class=\"params\">(<span class=\"string\">&quot;next()가 한번도 호출되지 않음.&quot;</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (list[position - <span class=\"number\">1</span>] != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = position - <span class=\"number\">1</span>; i &lt; (list.length - <span class=\"number\">1</span>); i++) &#123;</span><br><span class=\"line\">                list[i] = list[i + <span class=\"number\">1</span>];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            list[list.length - <span class=\"number\">1</span>] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PancakeHouseMenu 는 ArrayList안에 이미 Iterator 구현되어 있기 때문에 생략해도 된다.</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"클라이언트-객체에서의-활용\"><a href=\"#클라이언트-객체에서의-활용\" class=\"headerlink\" title=\"클라이언트 객체에서의 활용\"></a>클라이언트 객체에서의 활용</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Waitress</span> </span>&#123; </span><br><span class=\"line\">    ArrayList&lt;Menu&gt; menus;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Waitress</span><span class=\"params\">(ArrayList&lt;Menu&gt; menus)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.menus = menus;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Iterator menuIterator = menus.iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (menuIterator.hasNext()) &#123;</span><br><span class=\"line\">            Menu menu = menuIterator.next();</span><br><span class=\"line\">            printMenu(menu.createIterator());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">(Iterator&lt;MenuItem&gt; iterator)</span> </span>&#123; <span class=\"comment\">//클라이언트 객체에서의 반복작업이 매우 간단해졌다</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            MenuItem menuItem = iterator.next();</span><br><span class=\"line\">            System.out.println(menuItem.getName());</span><br><span class=\"line\">            System.out.println(menuItem.getPrice());</span><br><span class=\"line\">            System.out.println(menuItem.getDescription());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuTestDrive</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\">        ArrayList&lt;Menu&gt; menuList = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        menuList.add(<span class=\"keyword\">new</span> PancakeHouseMenu());</span><br><span class=\"line\">        menuList.add(<span class=\"keyword\">new</span> DinerMenu());</span><br><span class=\"line\">        Waitress waitress = <span class=\"keyword\">new</span> Waitress(menuList);</span><br><span class=\"line\">        waitress.printMenu();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>이제 <strong>집합체 내</strong>에서 어떤 식으로 일이 처리되는 지에 대해서 <strong>전혀 모르는 상태</strong>에서도 그 안에 들어있는 모든 항목들에 대해서 반복작업을 수행할수 있게 되었다.</p>\n</blockquote>\n<p>집합체에서 내부 컬랙션과 관련된 기능과 반복자용 메소드 관련기능을 전부 구현하도록 했다면 어떨까?</p>\n<p>우선 클래스에서 원래 그 클래스의 역할(집합체 관리) 외에 다른 역할(반복자 메소드)을 처리하도록 하면, 두 가지 이유로 인해 그 클래스가 바뀔 수 있게 된다.</p>\n<ol>\n<li>컬렉션이 어떤 이유로 인해 바뀌게 되면 그 클래스의 <strong>소스코드</strong>를 바꿔야 한다. </li>\n<li><strong>반복자 관련 기능</strong>이 바뀌었을 때도 클래스가 바뀌여야 한다.</li>\n</ol>\n<hr>\n<h2 id=\"🛡-디자인-원칙\"><a href=\"#🛡-디자인-원칙\" class=\"headerlink\" title=\"🛡 디자인 원칙\"></a>🛡 디자인 원칙</h2><blockquote>\n<p><em>클래스를 바꾸는 이유는 <strong>한 가지</strong> 뿐이어야 한다.</em></p>\n</blockquote>\n<p> <strong>클래스를 고치는 것은 최대한 피해야 한다.</strong></p>\n<p> 때문에 코드를 변경할 만한 이유가 두가지가 되면 그만큼 그 클래스를 나중에 고쳐야 할 가능성이 커지게 될 뿐 아니라, 디자인에 있어서 두 가지 부분이 동시에 영향이 미치게 된다.</p>\n<p>이 원칙에 따르면 <strong>한 역할은 한 클래스에서만</strong> 맡게 해야 한다.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"🎛-이터레이터-패턴이란\"><a href=\"#🎛-이터레이터-패턴이란\" class=\"headerlink\" title=\"🎛 이터레이터 패턴이란\"></a>🎛 이터레이터 패턴이란</h2><blockquote>\n<p>컬렉션 구현 방법을 <strong>노출시키지 않으면서도</strong>, 그 집합체 안에 들어있는 <strong>모든 항목에 접근할 수 있는 방법</strong>을 제공한다.</p>\n</blockquote>\n<p>컬렉션 객체 안에 들어있는 모든 항목에 <strong>접근하는 방식이 통일되어 있으면</strong> 어떤 종류의 집합체에 대해서도 사용할 수 있는 다형적인 코드를 만들수 있다.</p>\n<p><code>이터레이터 패턴</code>을 사용하면 모든 항목에 일일이 접근하는 작업을 컬렉션 객체가 아닌 <strong>반복자 객체</strong>에서 맡게 된다.<br>이렇게 하면 집합체의 인터페이스 및 구현이 간단해질 뿐 아니라, 집합체에서는 반복작업에서 손을 떼고 원래 자신이 할 일(객체 컬렉션 관리)에만 전념할 수 있다</p>\n<hr>\n<h2 id=\"🔎-이터레이터-패턴의-이해\"><a href=\"#🔎-이터레이터-패턴의-이해\" class=\"headerlink\" title=\"🔎 이터레이터 패턴의 이해\"></a>🔎 이터레이터 패턴의 이해</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/141257200-343f3e03-e28d-4be6-bc54-9f613d0aaf71.png\" alt=\"image\"></p>\n<h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>두개의 서로 다른 식당이있고 각각의 식당에서 메뉴를 구현한다고 가정해보자</em></p>\n<p><code>java.util.Iterator</code> 인터페이스를 사용해서 <code>Iterator</code>를 적용시켜보자.</p>\n<h4 id=\"이터레이트-인터페이스\"><a href=\"#이터레이트-인터페이스\" class=\"headerlink\" title=\"이터레이트 인터페이스\"></a>이터레이트 인터페이스</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuItem&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"인터페이스를-구현하는-객체-생성\"><a href=\"#인터페이스를-구현하는-객체-생성\" class=\"headerlink\" title=\"인터페이스를 구현하는 객체 생성\"></a>인터페이스를 구현하는 객체 생성</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PancakeHouseMenu</span> <span class=\"keyword\">implements</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ArrayList&lt;MenuItem&gt; menuItems; <span class=\"comment\">//이 객체는 메뉴들이 ArrayList 이다</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PancakeHouseMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.menuItems = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;K&amp;B 팬케이크 세트&quot;</span>, <span class=\"string\">&quot;스크램블드 에그와 토스트가 곁들여진 펜케이크&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;레귤러 팬케이크 세트&quot;</span>, <span class=\"string\">&quot;달걀 후라이와 소시지가 곁들여진 펜케이크&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;블루베리 펜케이크&quot;</span>, <span class=\"string\">&quot;신선한 블루베리와 블루베리 시럽으로 만든 펜케이크&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">3.49</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;와플&quot;</span>, <span class=\"string\">&quot;와플, 취향에 따라 블루베리나 딸기를 얹을 수 있습니다.&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">3.59</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">additem</span><span class=\"params\">(string name, String description, <span class=\"keyword\">boolean</span> vegetarian, <span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">        MenuItem menuItem = <span class=\"keyword\">new</span> MenuItem(name, description, vegetarian, price);</span><br><span class=\"line\">        menuItem.add(menuItem);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ArrayList&lt;MenuItem&gt; <span class=\"title\">getMenuItems</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItems;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuItem&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItems.iterator(); <span class=\"comment\">//ArrayList 컬렉션은 반복자를 리턴하는 iterator() 라는 메소드가 있음.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DinerMenu</span> <span class=\"keyword\">implements</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_ITEMS = <span class=\"number\">6</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> numberOfItems = <span class=\"number\">0</span>;</span><br><span class=\"line\">    MenuItem[] menuItems; <span class=\"comment\">//이 객체는 메뉴들이 배열 이다</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DinerMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.menuItems = <span class=\"keyword\">new</span> MenuItem[MAX_ITEMS];</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;채식주의자용 BLT&quot;</span>, <span class=\"string\">&quot;통밀 위에 (식물성)베이컨, 상추, 토마토를 얹은 메뉴&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;BLT&quot;</span>, <span class=\"string\">&quot;통밀 위에 베이컨, 상추, 토마토를 얹은 메뉴&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">2.99</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;오늘의 스프&quot;</span>, <span class=\"string\">&quot;감자 샐러드를 곁들인 오늘의 스프&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">3.29</span>);</span><br><span class=\"line\">        additem(<span class=\"string\">&quot;핫도그&quot;</span>, <span class=\"string\">&quot;사워크라우트, 갖은 양념, 양파, 치즈가 곁들여진 핫도그&quot;</span>, <span class=\"keyword\">false</span>, <span class=\"number\">3.05</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">additem</span><span class=\"params\">(string name, String description, <span class=\"keyword\">boolean</span> vegetarian, <span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">        MenuItem menuItem = <span class=\"keyword\">new</span> MenuItem(name, description, vegetarian, price);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (nemberOfItems &gt;= MAX_ITEMS) &#123;</span><br><span class=\"line\">            System.err.println(<span class=\"string\">&quot;죄송합니다, 메뉴가 꽉 찼습니다. 더 이상 추가할 수 없습니다.&quot;</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            menuItems[numberOfItems] = menuItem;</span><br><span class=\"line\">            numberOfItems = numberOfItems + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MenuItem[] getMenuItems() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItems;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuItem&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> DinerMenujIterator(menuItems);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"java-util-Iterator-인터페이스를-사용해서-Iterator-객체를-구현\"><a href=\"#java-util-Iterator-인터페이스를-사용해서-Iterator-객체를-구현\" class=\"headerlink\" title=\"java.util.Iterator 인터페이스를 사용해서 Iterator 객체를 구현\"></a><code>java.util.Iterator</code> 인터페이스를 사용해서 <code>Iterator</code> 객체를 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DinerMenuIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span>&lt;<span class=\"title\">MenuItem</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Menuitem[] list;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> position = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DinerMenuIterator</span><span class=\"params\">(MenuItem[] list)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.list = list;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuItem <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        MenuItem menuItem = list[position];</span><br><span class=\"line\">        position += <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuItem;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (position &gt;= list.length || list[position] == <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">// 반드시 기능을 제공하지 않아도됨 그렇다면 java.lang.UnsupportedOperationException을 던지도록 하면됨</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (position &lt;= <span class=\"number\">0</span>) <span class=\"function\">Throw new <span class=\"title\">IllegalStateException</span><span class=\"params\">(<span class=\"string\">&quot;next()가 한번도 호출되지 않음.&quot;</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (list[position - <span class=\"number\">1</span>] != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = position - <span class=\"number\">1</span>; i &lt; (list.length - <span class=\"number\">1</span>); i++) &#123;</span><br><span class=\"line\">                list[i] = list[i + <span class=\"number\">1</span>];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            list[list.length - <span class=\"number\">1</span>] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PancakeHouseMenu 는 ArrayList안에 이미 Iterator 구현되어 있기 때문에 생략해도 된다.</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"클라이언트-객체에서의-활용\"><a href=\"#클라이언트-객체에서의-활용\" class=\"headerlink\" title=\"클라이언트 객체에서의 활용\"></a>클라이언트 객체에서의 활용</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Waitress</span> </span>&#123; </span><br><span class=\"line\">    ArrayList&lt;Menu&gt; menus;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Waitress</span><span class=\"params\">(ArrayList&lt;Menu&gt; menus)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.menus = menus;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Iterator menuIterator = menus.iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (menuIterator.hasNext()) &#123;</span><br><span class=\"line\">            Menu menu = menuIterator.next();</span><br><span class=\"line\">            printMenu(menu.createIterator());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">(Iterator&lt;MenuItem&gt; iterator)</span> </span>&#123; <span class=\"comment\">//클라이언트 객체에서의 반복작업이 매우 간단해졌다</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            MenuItem menuItem = iterator.next();</span><br><span class=\"line\">            System.out.println(menuItem.getName());</span><br><span class=\"line\">            System.out.println(menuItem.getPrice());</span><br><span class=\"line\">            System.out.println(menuItem.getDescription());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuTestDrive</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\">        ArrayList&lt;Menu&gt; menuList = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        menuList.add(<span class=\"keyword\">new</span> PancakeHouseMenu());</span><br><span class=\"line\">        menuList.add(<span class=\"keyword\">new</span> DinerMenu());</span><br><span class=\"line\">        Waitress waitress = <span class=\"keyword\">new</span> Waitress(menuList);</span><br><span class=\"line\">        waitress.printMenu();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>이제 <strong>집합체 내</strong>에서 어떤 식으로 일이 처리되는 지에 대해서 <strong>전혀 모르는 상태</strong>에서도 그 안에 들어있는 모든 항목들에 대해서 반복작업을 수행할수 있게 되었다.</p>\n</blockquote>\n<p>집합체에서 내부 컬랙션과 관련된 기능과 반복자용 메소드 관련기능을 전부 구현하도록 했다면 어떨까?</p>\n<p>우선 클래스에서 원래 그 클래스의 역할(집합체 관리) 외에 다른 역할(반복자 메소드)을 처리하도록 하면, 두 가지 이유로 인해 그 클래스가 바뀔 수 있게 된다.</p>\n<ol>\n<li>컬렉션이 어떤 이유로 인해 바뀌게 되면 그 클래스의 <strong>소스코드</strong>를 바꿔야 한다. </li>\n<li><strong>반복자 관련 기능</strong>이 바뀌었을 때도 클래스가 바뀌여야 한다.</li>\n</ol>\n<hr>\n<h2 id=\"🛡-디자인-원칙\"><a href=\"#🛡-디자인-원칙\" class=\"headerlink\" title=\"🛡 디자인 원칙\"></a>🛡 디자인 원칙</h2><blockquote>\n<p><em>클래스를 바꾸는 이유는 <strong>한 가지</strong> 뿐이어야 한다.</em></p>\n</blockquote>\n<p> <strong>클래스를 고치는 것은 최대한 피해야 한다.</strong></p>\n<p> 때문에 코드를 변경할 만한 이유가 두가지가 되면 그만큼 그 클래스를 나중에 고쳐야 할 가능성이 커지게 될 뿐 아니라, 디자인에 있어서 두 가지 부분이 동시에 영향이 미치게 된다.</p>\n<p>이 원칙에 따르면 <strong>한 역할은 한 클래스에서만</strong> 맡게 해야 한다.</p>\n"},{"title":"템플릿메소드 패턴","_content":"\n## 📦 템플릿메소드 패턴이란\n\n> 메소드에서 알고리즘의 **골격**을 정의한다.\n> 알고리즘의 여러 단계 중 일부는 **서브클래스**에서 구현할 수 있다.\n> 템플릿 메소드를 이용하면 알고리즘의 _구조는 그대로 유지하면서_ 서브클래스에서 **특정 단계를 재정의** 할 수 있다.\n\n알고리즘의 틀을 만들기 위한 패턴이다.\n이 패턴에서 틀(템플릿)이란 일련의 단계들로 알고리즘을 정의한 메소드다. \n여러 던계 가운데 하나 이상이 추상 메소드로 정의되며, 그 추상 메소드는 서브클래스에서 구현된다. \n이렇게 하면 서브클래스에서 일부분의 단계를 구현할 수 있도록 하면서도 알고리즘의 구조는 바꾸지 않아도 되도록 할 수 있다.\n\n---\n\n## 🔎 템플릿메소드 패턴의 이해\n\n### 🚀 활용 예시\n\n_커피와 차가 만들어 지는법을 비교해보자._\n\n#### 커피 만드는 법\n```java\n1) 물을 끓인다.\n2) 끓는 물에 커피를 우려낸다.\n3) 커피를 컵에 따른다.\n4) 설탕과 우유를 추가한다. \n```\n\n#### 홍차 만드는 법\n```java\n1) 물을 끓인다. //동일\n2) 끓는 물에 차를 우려낸다. //~~ 우려낸다\n3) 차를 컵에 따른다. //동일\n4) 레몬을 추가한다. //~~ 추가한다\n```\n\n거의 동일하다.\n공통으로 사용할 수 있는 방법을 생각해보자.\n\n```java\npublic class Coffee {\n\n    void prepareRecipe() {\n        boilWater();\n        brewCoffeeGrinds();\n        pourInCup();\n        addSugarAndMilk();\n    }\n    \n    public void boilWater() {\n        System.out.println(\"물 끓이는 중\");\n    }\n    public void breqCoffeeGrinds() {\n        System.out.println(\"필터를 통해 커피를 우려내는 중\");\n    }\n    public void pourInCup() {\n        System.out.println(\"컵에 따르는 중\");\n    }\n    public void addSugarAndMilk() {\n        System.out.println(\"설탕과 우유를 추가하는 중\");\n    }\n}\n\npublic class Tea {\n\n    void prepareRecipe() {\n        boilWater();\n        steepTeaBag();\n        pourInCup();\n        addLemon();\n    }\n\n    public void boilWater() {\n        System.out.println(\"물 끓이는 중\");\n    }\n    public void steepTeaBag() {\n        System.out.println(\"차를 우려내는 중\");\n    }\n    public void pourInCup() {\n        System.out.println(\"컵에 따르는 중\");\n    }\n    public void addLemon() {\n        System.out.println(\"레몬을 추가하는 중\");\n    }\n}\n```\n\n#### 공통부분 추상화\n\n공통 단계를 묶어보면...\n\n```java\n\npublic abstract class CaffeineBeverage {\n\n    void final prepareRecipe() { //공통적인 단계는 수정할 수 없도록 final로 선언한다.\n        boilWater();\n        brew(); //공통으로 사용\n        pourInCup();\n        addcondiments();  //공통으로 사용\n    }\n\n    abstract void brew();  //상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다\n    abstract void addcondiments();  //상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다\n\n    void boilWater() {\n        System.out.println(\"물 끓이는 중\");\n    }\n    void pourInCup() {\n        System.out.println(\"컵에 따르는 중\");\n    }\n}\n\npublic class Coffee extends CaffeineBeverage {\n    @Override\n    void brew() {\n        System.out.println(\"필터를 통해 커피를 우려내는 중\");\n    }\n    @Override\n    public void addCondiments() {\n        System.out.println(\"설탕과 우유를 추가하는 중\");\n    }\n}\n\npublic class Tea extends CaffeineBeverage {\n    @Override\n    void brew() {\n        System.out.println(\"차를 우려내는 중\");\n    }\n    @Override\n    public void addCondiments() {\n        System.out.println(\"레몬을 추가하는 중\");\n    }\n}\n```\n\n---\n\n## 🚨 헐리우드 원칙\n\n_'먼저 연락하지 마세요. 저희가 연락 드리겠습니다.'_\n\n### 의존성 부패\n\n이 디자인 원칙을 확용하면 **의존성 부패**(dependency rot)를 방지 할수 있다.\n어떤 고수준 구성요소가 저수준 구성요소에 의존하고, 그 저수준 구성요소는 다시 고수준 구성요소에 의존하고, 그 고수준 구성요소는 다시 또 다른 구성요소에 의존하고.. \n\n이런 식으로 의존성이 복잡하게 꼬여있는 것을 **의존성 부패**라고 한다.\n\n**헐리우드 원칙**을 사용하면, 저수준 구성요소에서 시스템에 접속을 할수는 있지만, 언제 어떤 식으로 그 구성요소들을 사용할지는 **고수준 구성요소에서 결정**하게 된다.\n\n> 즉, 저수준 구성요소는 컴퓨테이션에 참여할 수는 있지만 절대 **고수준 구성요소를 직접 호출하면 안된다**는 것이다.\n\n\n#### CaffeineBeverage 디자인을 이용해 본다면..\n\n![image](https://user-images.githubusercontent.com/55419159/140914388-faeda3ca-a3f8-4fe1-9984-490453f4bd1e.png)\n\n`CaffeineBeverage`는 고수준 구성요소 이다. \n음료를 만드는 방법에 대당하는 알고리즘을 장악하고 있고, 메소드 구현이 필요한 상태에서만 서브클래스를 불러낸다.\n\n`Coffee`와 `Tea` 와 같은 서브클래스는 각각의 **메소드 구현을 제공하기 위한 용도**로만 쓰인다.\n\n이와같은 서브 클래스들은 고수준 구성요소인 `CaffeineBeverage` 클래스로부터 호출 당하기 전까지는 절대로 `CaffeineBeverage` 추상 클래스를 직접 호출하지 않는다.\n\n이렇게 함으로 `CaffeineBeverage` 클래스의 클라이언트에서는 `Tea`나 `Coffee` 같은 구상 클래스가 아닌 `CaffeineBeverage`에 추상화 되어 있는 부분에 의존하게 된다. \n\n그렇게 함으로써 **전체 시스템의 의존성**이 줄어들 수 있다.","source":"_posts/디자인-패턴/2021-11-09-템플릿-메소드-패턴.md","raw":"---\ntitle: 템플릿메소드 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 템플릿메소드\n---\n\n## 📦 템플릿메소드 패턴이란\n\n> 메소드에서 알고리즘의 **골격**을 정의한다.\n> 알고리즘의 여러 단계 중 일부는 **서브클래스**에서 구현할 수 있다.\n> 템플릿 메소드를 이용하면 알고리즘의 _구조는 그대로 유지하면서_ 서브클래스에서 **특정 단계를 재정의** 할 수 있다.\n\n알고리즘의 틀을 만들기 위한 패턴이다.\n이 패턴에서 틀(템플릿)이란 일련의 단계들로 알고리즘을 정의한 메소드다. \n여러 던계 가운데 하나 이상이 추상 메소드로 정의되며, 그 추상 메소드는 서브클래스에서 구현된다. \n이렇게 하면 서브클래스에서 일부분의 단계를 구현할 수 있도록 하면서도 알고리즘의 구조는 바꾸지 않아도 되도록 할 수 있다.\n\n---\n\n## 🔎 템플릿메소드 패턴의 이해\n\n### 🚀 활용 예시\n\n_커피와 차가 만들어 지는법을 비교해보자._\n\n#### 커피 만드는 법\n```java\n1) 물을 끓인다.\n2) 끓는 물에 커피를 우려낸다.\n3) 커피를 컵에 따른다.\n4) 설탕과 우유를 추가한다. \n```\n\n#### 홍차 만드는 법\n```java\n1) 물을 끓인다. //동일\n2) 끓는 물에 차를 우려낸다. //~~ 우려낸다\n3) 차를 컵에 따른다. //동일\n4) 레몬을 추가한다. //~~ 추가한다\n```\n\n거의 동일하다.\n공통으로 사용할 수 있는 방법을 생각해보자.\n\n```java\npublic class Coffee {\n\n    void prepareRecipe() {\n        boilWater();\n        brewCoffeeGrinds();\n        pourInCup();\n        addSugarAndMilk();\n    }\n    \n    public void boilWater() {\n        System.out.println(\"물 끓이는 중\");\n    }\n    public void breqCoffeeGrinds() {\n        System.out.println(\"필터를 통해 커피를 우려내는 중\");\n    }\n    public void pourInCup() {\n        System.out.println(\"컵에 따르는 중\");\n    }\n    public void addSugarAndMilk() {\n        System.out.println(\"설탕과 우유를 추가하는 중\");\n    }\n}\n\npublic class Tea {\n\n    void prepareRecipe() {\n        boilWater();\n        steepTeaBag();\n        pourInCup();\n        addLemon();\n    }\n\n    public void boilWater() {\n        System.out.println(\"물 끓이는 중\");\n    }\n    public void steepTeaBag() {\n        System.out.println(\"차를 우려내는 중\");\n    }\n    public void pourInCup() {\n        System.out.println(\"컵에 따르는 중\");\n    }\n    public void addLemon() {\n        System.out.println(\"레몬을 추가하는 중\");\n    }\n}\n```\n\n#### 공통부분 추상화\n\n공통 단계를 묶어보면...\n\n```java\n\npublic abstract class CaffeineBeverage {\n\n    void final prepareRecipe() { //공통적인 단계는 수정할 수 없도록 final로 선언한다.\n        boilWater();\n        brew(); //공통으로 사용\n        pourInCup();\n        addcondiments();  //공통으로 사용\n    }\n\n    abstract void brew();  //상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다\n    abstract void addcondiments();  //상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다\n\n    void boilWater() {\n        System.out.println(\"물 끓이는 중\");\n    }\n    void pourInCup() {\n        System.out.println(\"컵에 따르는 중\");\n    }\n}\n\npublic class Coffee extends CaffeineBeverage {\n    @Override\n    void brew() {\n        System.out.println(\"필터를 통해 커피를 우려내는 중\");\n    }\n    @Override\n    public void addCondiments() {\n        System.out.println(\"설탕과 우유를 추가하는 중\");\n    }\n}\n\npublic class Tea extends CaffeineBeverage {\n    @Override\n    void brew() {\n        System.out.println(\"차를 우려내는 중\");\n    }\n    @Override\n    public void addCondiments() {\n        System.out.println(\"레몬을 추가하는 중\");\n    }\n}\n```\n\n---\n\n## 🚨 헐리우드 원칙\n\n_'먼저 연락하지 마세요. 저희가 연락 드리겠습니다.'_\n\n### 의존성 부패\n\n이 디자인 원칙을 확용하면 **의존성 부패**(dependency rot)를 방지 할수 있다.\n어떤 고수준 구성요소가 저수준 구성요소에 의존하고, 그 저수준 구성요소는 다시 고수준 구성요소에 의존하고, 그 고수준 구성요소는 다시 또 다른 구성요소에 의존하고.. \n\n이런 식으로 의존성이 복잡하게 꼬여있는 것을 **의존성 부패**라고 한다.\n\n**헐리우드 원칙**을 사용하면, 저수준 구성요소에서 시스템에 접속을 할수는 있지만, 언제 어떤 식으로 그 구성요소들을 사용할지는 **고수준 구성요소에서 결정**하게 된다.\n\n> 즉, 저수준 구성요소는 컴퓨테이션에 참여할 수는 있지만 절대 **고수준 구성요소를 직접 호출하면 안된다**는 것이다.\n\n\n#### CaffeineBeverage 디자인을 이용해 본다면..\n\n![image](https://user-images.githubusercontent.com/55419159/140914388-faeda3ca-a3f8-4fe1-9984-490453f4bd1e.png)\n\n`CaffeineBeverage`는 고수준 구성요소 이다. \n음료를 만드는 방법에 대당하는 알고리즘을 장악하고 있고, 메소드 구현이 필요한 상태에서만 서브클래스를 불러낸다.\n\n`Coffee`와 `Tea` 와 같은 서브클래스는 각각의 **메소드 구현을 제공하기 위한 용도**로만 쓰인다.\n\n이와같은 서브 클래스들은 고수준 구성요소인 `CaffeineBeverage` 클래스로부터 호출 당하기 전까지는 절대로 `CaffeineBeverage` 추상 클래스를 직접 호출하지 않는다.\n\n이렇게 함으로 `CaffeineBeverage` 클래스의 클라이언트에서는 `Tea`나 `Coffee` 같은 구상 클래스가 아닌 `CaffeineBeverage`에 추상화 되어 있는 부분에 의존하게 된다. \n\n그렇게 함으로써 **전체 시스템의 의존성**이 줄어들 수 있다.","slug":"디자인-패턴/2021-11-09-템플릿-메소드-패턴","published":1,"date":"2021-11-08T11:12:10.891Z","updated":"2021-11-09T11:33:27.687Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fe000cjd9k070rej6j","content":"<h2 id=\"📦-템플릿메소드-패턴이란\"><a href=\"#📦-템플릿메소드-패턴이란\" class=\"headerlink\" title=\"📦 템플릿메소드 패턴이란\"></a>📦 템플릿메소드 패턴이란</h2><blockquote>\n<p>메소드에서 알고리즘의 <strong>골격</strong>을 정의한다.<br>알고리즘의 여러 단계 중 일부는 <strong>서브클래스</strong>에서 구현할 수 있다.<br>템플릿 메소드를 이용하면 알고리즘의 <em>구조는 그대로 유지하면서</em> 서브클래스에서 <strong>특정 단계를 재정의</strong> 할 수 있다.</p>\n</blockquote>\n<p>알고리즘의 틀을 만들기 위한 패턴이다.<br>이 패턴에서 틀(템플릿)이란 일련의 단계들로 알고리즘을 정의한 메소드다.<br>여러 던계 가운데 하나 이상이 추상 메소드로 정의되며, 그 추상 메소드는 서브클래스에서 구현된다.<br>이렇게 하면 서브클래스에서 일부분의 단계를 구현할 수 있도록 하면서도 알고리즘의 구조는 바꾸지 않아도 되도록 할 수 있다.</p>\n<hr>\n<h2 id=\"🔎-템플릿메소드-패턴의-이해\"><a href=\"#🔎-템플릿메소드-패턴의-이해\" class=\"headerlink\" title=\"🔎 템플릿메소드 패턴의 이해\"></a>🔎 템플릿메소드 패턴의 이해</h2><h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>커피와 차가 만들어 지는법을 비교해보자.</em></p>\n<h4 id=\"커피-만드는-법\"><a href=\"#커피-만드는-법\" class=\"headerlink\" title=\"커피 만드는 법\"></a>커피 만드는 법</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>) 물을 끓인다.</span><br><span class=\"line\"><span class=\"number\">2</span>) 끓는 물에 커피를 우려낸다.</span><br><span class=\"line\"><span class=\"number\">3</span>) 커피를 컵에 따른다.</span><br><span class=\"line\"><span class=\"number\">4</span>) 설탕과 우유를 추가한다. </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"홍차-만드는-법\"><a href=\"#홍차-만드는-법\" class=\"headerlink\" title=\"홍차 만드는 법\"></a>홍차 만드는 법</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>) 물을 끓인다. <span class=\"comment\">//동일</span></span><br><span class=\"line\"><span class=\"number\">2</span>) 끓는 물에 차를 우려낸다. <span class=\"comment\">//~~ 우려낸다</span></span><br><span class=\"line\"><span class=\"number\">3</span>) 차를 컵에 따른다. <span class=\"comment\">//동일</span></span><br><span class=\"line\"><span class=\"number\">4</span>) 레몬을 추가한다. <span class=\"comment\">//~~ 추가한다</span></span><br></pre></td></tr></table></figure>\n\n<p>거의 동일하다.<br>공통으로 사용할 수 있는 방법을 생각해보자.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Coffee</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">prepareRecipe</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        boilWater();</span><br><span class=\"line\">        brewCoffeeGrinds();</span><br><span class=\"line\">        pourInCup();</span><br><span class=\"line\">        addSugarAndMilk();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">boilWater</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물 끓이는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">breqCoffeeGrinds</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;필터를 통해 커피를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">pourInCup</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;컵에 따르는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addSugarAndMilk</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;설탕과 우유를 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tea</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">prepareRecipe</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        boilWater();</span><br><span class=\"line\">        steepTeaBag();</span><br><span class=\"line\">        pourInCup();</span><br><span class=\"line\">        addLemon();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">boilWater</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물 끓이는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">steepTeaBag</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;차를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">pourInCup</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;컵에 따르는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addLemon</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;레몬을 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"공통부분-추상화\"><a href=\"#공통부분-추상화\" class=\"headerlink\" title=\"공통부분 추상화\"></a>공통부분 추상화</h4><p>공통 단계를 묶어보면…</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CaffeineBeverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"keyword\">final</span> <span class=\"title\">prepareRecipe</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//공통적인 단계는 수정할 수 없도록 final로 선언한다.</span></span><br><span class=\"line\">        boilWater();</span><br><span class=\"line\">        brew(); <span class=\"comment\">//공통으로 사용</span></span><br><span class=\"line\">        pourInCup();</span><br><span class=\"line\">        addcondiments();  <span class=\"comment\">//공통으로 사용</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">brew</span><span class=\"params\">()</span></span>;  <span class=\"comment\">//상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">addcondiments</span><span class=\"params\">()</span></span>;  <span class=\"comment\">//상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">boilWater</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물 끓이는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pourInCup</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;컵에 따르는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Coffee</span> <span class=\"keyword\">extends</span> <span class=\"title\">CaffeineBeverage</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">brew</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;필터를 통해 커피를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addCondiments</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;설탕과 우유를 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tea</span> <span class=\"keyword\">extends</span> <span class=\"title\">CaffeineBeverage</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">brew</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;차를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addCondiments</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;레몬을 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"🚨-헐리우드-원칙\"><a href=\"#🚨-헐리우드-원칙\" class=\"headerlink\" title=\"🚨 헐리우드 원칙\"></a>🚨 헐리우드 원칙</h2><p><em>‘먼저 연락하지 마세요. 저희가 연락 드리겠습니다.’</em></p>\n<h3 id=\"의존성-부패\"><a href=\"#의존성-부패\" class=\"headerlink\" title=\"의존성 부패\"></a>의존성 부패</h3><p>이 디자인 원칙을 확용하면 <strong>의존성 부패</strong>(dependency rot)를 방지 할수 있다.<br>어떤 고수준 구성요소가 저수준 구성요소에 의존하고, 그 저수준 구성요소는 다시 고수준 구성요소에 의존하고, 그 고수준 구성요소는 다시 또 다른 구성요소에 의존하고.. </p>\n<p>이런 식으로 의존성이 복잡하게 꼬여있는 것을 <strong>의존성 부패</strong>라고 한다.</p>\n<p><strong>헐리우드 원칙</strong>을 사용하면, 저수준 구성요소에서 시스템에 접속을 할수는 있지만, 언제 어떤 식으로 그 구성요소들을 사용할지는 <strong>고수준 구성요소에서 결정</strong>하게 된다.</p>\n<blockquote>\n<p>즉, 저수준 구성요소는 컴퓨테이션에 참여할 수는 있지만 절대 <strong>고수준 구성요소를 직접 호출하면 안된다</strong>는 것이다.</p>\n</blockquote>\n<h4 id=\"CaffeineBeverage-디자인을-이용해-본다면\"><a href=\"#CaffeineBeverage-디자인을-이용해-본다면\" class=\"headerlink\" title=\"CaffeineBeverage 디자인을 이용해 본다면..\"></a>CaffeineBeverage 디자인을 이용해 본다면..</h4><p><img src=\"https://user-images.githubusercontent.com/55419159/140914388-faeda3ca-a3f8-4fe1-9984-490453f4bd1e.png\" alt=\"image\"></p>\n<p><code>CaffeineBeverage</code>는 고수준 구성요소 이다.<br>음료를 만드는 방법에 대당하는 알고리즘을 장악하고 있고, 메소드 구현이 필요한 상태에서만 서브클래스를 불러낸다.</p>\n<p><code>Coffee</code>와 <code>Tea</code> 와 같은 서브클래스는 각각의 <strong>메소드 구현을 제공하기 위한 용도</strong>로만 쓰인다.</p>\n<p>이와같은 서브 클래스들은 고수준 구성요소인 <code>CaffeineBeverage</code> 클래스로부터 호출 당하기 전까지는 절대로 <code>CaffeineBeverage</code> 추상 클래스를 직접 호출하지 않는다.</p>\n<p>이렇게 함으로 <code>CaffeineBeverage</code> 클래스의 클라이언트에서는 <code>Tea</code>나 <code>Coffee</code> 같은 구상 클래스가 아닌 <code>CaffeineBeverage</code>에 추상화 되어 있는 부분에 의존하게 된다. </p>\n<p>그렇게 함으로써 <strong>전체 시스템의 의존성</strong>이 줄어들 수 있다.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"📦-템플릿메소드-패턴이란\"><a href=\"#📦-템플릿메소드-패턴이란\" class=\"headerlink\" title=\"📦 템플릿메소드 패턴이란\"></a>📦 템플릿메소드 패턴이란</h2><blockquote>\n<p>메소드에서 알고리즘의 <strong>골격</strong>을 정의한다.<br>알고리즘의 여러 단계 중 일부는 <strong>서브클래스</strong>에서 구현할 수 있다.<br>템플릿 메소드를 이용하면 알고리즘의 <em>구조는 그대로 유지하면서</em> 서브클래스에서 <strong>특정 단계를 재정의</strong> 할 수 있다.</p>\n</blockquote>\n<p>알고리즘의 틀을 만들기 위한 패턴이다.<br>이 패턴에서 틀(템플릿)이란 일련의 단계들로 알고리즘을 정의한 메소드다.<br>여러 던계 가운데 하나 이상이 추상 메소드로 정의되며, 그 추상 메소드는 서브클래스에서 구현된다.<br>이렇게 하면 서브클래스에서 일부분의 단계를 구현할 수 있도록 하면서도 알고리즘의 구조는 바꾸지 않아도 되도록 할 수 있다.</p>\n<hr>\n<h2 id=\"🔎-템플릿메소드-패턴의-이해\"><a href=\"#🔎-템플릿메소드-패턴의-이해\" class=\"headerlink\" title=\"🔎 템플릿메소드 패턴의 이해\"></a>🔎 템플릿메소드 패턴의 이해</h2><h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>커피와 차가 만들어 지는법을 비교해보자.</em></p>\n<h4 id=\"커피-만드는-법\"><a href=\"#커피-만드는-법\" class=\"headerlink\" title=\"커피 만드는 법\"></a>커피 만드는 법</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>) 물을 끓인다.</span><br><span class=\"line\"><span class=\"number\">2</span>) 끓는 물에 커피를 우려낸다.</span><br><span class=\"line\"><span class=\"number\">3</span>) 커피를 컵에 따른다.</span><br><span class=\"line\"><span class=\"number\">4</span>) 설탕과 우유를 추가한다. </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"홍차-만드는-법\"><a href=\"#홍차-만드는-법\" class=\"headerlink\" title=\"홍차 만드는 법\"></a>홍차 만드는 법</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>) 물을 끓인다. <span class=\"comment\">//동일</span></span><br><span class=\"line\"><span class=\"number\">2</span>) 끓는 물에 차를 우려낸다. <span class=\"comment\">//~~ 우려낸다</span></span><br><span class=\"line\"><span class=\"number\">3</span>) 차를 컵에 따른다. <span class=\"comment\">//동일</span></span><br><span class=\"line\"><span class=\"number\">4</span>) 레몬을 추가한다. <span class=\"comment\">//~~ 추가한다</span></span><br></pre></td></tr></table></figure>\n\n<p>거의 동일하다.<br>공통으로 사용할 수 있는 방법을 생각해보자.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Coffee</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">prepareRecipe</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        boilWater();</span><br><span class=\"line\">        brewCoffeeGrinds();</span><br><span class=\"line\">        pourInCup();</span><br><span class=\"line\">        addSugarAndMilk();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">boilWater</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물 끓이는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">breqCoffeeGrinds</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;필터를 통해 커피를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">pourInCup</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;컵에 따르는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addSugarAndMilk</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;설탕과 우유를 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tea</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">prepareRecipe</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        boilWater();</span><br><span class=\"line\">        steepTeaBag();</span><br><span class=\"line\">        pourInCup();</span><br><span class=\"line\">        addLemon();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">boilWater</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물 끓이는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">steepTeaBag</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;차를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">pourInCup</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;컵에 따르는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addLemon</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;레몬을 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"공통부분-추상화\"><a href=\"#공통부분-추상화\" class=\"headerlink\" title=\"공통부분 추상화\"></a>공통부분 추상화</h4><p>공통 단계를 묶어보면…</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CaffeineBeverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"keyword\">final</span> <span class=\"title\">prepareRecipe</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//공통적인 단계는 수정할 수 없도록 final로 선언한다.</span></span><br><span class=\"line\">        boilWater();</span><br><span class=\"line\">        brew(); <span class=\"comment\">//공통으로 사용</span></span><br><span class=\"line\">        pourInCup();</span><br><span class=\"line\">        addcondiments();  <span class=\"comment\">//공통으로 사용</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">brew</span><span class=\"params\">()</span></span>;  <span class=\"comment\">//상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">addcondiments</span><span class=\"params\">()</span></span>;  <span class=\"comment\">//상속객체에서 직접 구현할 수 있도록 추상메소드로 선언한다</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">boilWater</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물 끓이는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pourInCup</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;컵에 따르는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Coffee</span> <span class=\"keyword\">extends</span> <span class=\"title\">CaffeineBeverage</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">brew</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;필터를 통해 커피를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addCondiments</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;설탕과 우유를 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tea</span> <span class=\"keyword\">extends</span> <span class=\"title\">CaffeineBeverage</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">brew</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;차를 우려내는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addCondiments</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;레몬을 추가하는 중&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"🚨-헐리우드-원칙\"><a href=\"#🚨-헐리우드-원칙\" class=\"headerlink\" title=\"🚨 헐리우드 원칙\"></a>🚨 헐리우드 원칙</h2><p><em>‘먼저 연락하지 마세요. 저희가 연락 드리겠습니다.’</em></p>\n<h3 id=\"의존성-부패\"><a href=\"#의존성-부패\" class=\"headerlink\" title=\"의존성 부패\"></a>의존성 부패</h3><p>이 디자인 원칙을 확용하면 <strong>의존성 부패</strong>(dependency rot)를 방지 할수 있다.<br>어떤 고수준 구성요소가 저수준 구성요소에 의존하고, 그 저수준 구성요소는 다시 고수준 구성요소에 의존하고, 그 고수준 구성요소는 다시 또 다른 구성요소에 의존하고.. </p>\n<p>이런 식으로 의존성이 복잡하게 꼬여있는 것을 <strong>의존성 부패</strong>라고 한다.</p>\n<p><strong>헐리우드 원칙</strong>을 사용하면, 저수준 구성요소에서 시스템에 접속을 할수는 있지만, 언제 어떤 식으로 그 구성요소들을 사용할지는 <strong>고수준 구성요소에서 결정</strong>하게 된다.</p>\n<blockquote>\n<p>즉, 저수준 구성요소는 컴퓨테이션에 참여할 수는 있지만 절대 <strong>고수준 구성요소를 직접 호출하면 안된다</strong>는 것이다.</p>\n</blockquote>\n<h4 id=\"CaffeineBeverage-디자인을-이용해-본다면\"><a href=\"#CaffeineBeverage-디자인을-이용해-본다면\" class=\"headerlink\" title=\"CaffeineBeverage 디자인을 이용해 본다면..\"></a>CaffeineBeverage 디자인을 이용해 본다면..</h4><p><img src=\"https://user-images.githubusercontent.com/55419159/140914388-faeda3ca-a3f8-4fe1-9984-490453f4bd1e.png\" alt=\"image\"></p>\n<p><code>CaffeineBeverage</code>는 고수준 구성요소 이다.<br>음료를 만드는 방법에 대당하는 알고리즘을 장악하고 있고, 메소드 구현이 필요한 상태에서만 서브클래스를 불러낸다.</p>\n<p><code>Coffee</code>와 <code>Tea</code> 와 같은 서브클래스는 각각의 <strong>메소드 구현을 제공하기 위한 용도</strong>로만 쓰인다.</p>\n<p>이와같은 서브 클래스들은 고수준 구성요소인 <code>CaffeineBeverage</code> 클래스로부터 호출 당하기 전까지는 절대로 <code>CaffeineBeverage</code> 추상 클래스를 직접 호출하지 않는다.</p>\n<p>이렇게 함으로 <code>CaffeineBeverage</code> 클래스의 클라이언트에서는 <code>Tea</code>나 <code>Coffee</code> 같은 구상 클래스가 아닌 <code>CaffeineBeverage</code>에 추상화 되어 있는 부분에 의존하게 된다. </p>\n<p>그렇게 함으로써 <strong>전체 시스템의 의존성</strong>이 줄어들 수 있다.</p>\n"},{"title":"스트레티지 패턴","_content":"\n## 📍 스트레티지 패턴이란\n\n> 알고리즘군을 정의하고 각각 **캡슐화**하여 교환해서 사용할 수 있도록 만든다.\n> 스트래티지패턴을 활용하면 알고리즘을 사용하는 클라이언트와는 **독립적으로** 알고리즘을 변경할수 있다.\n\n---\n\n## 🦆 활용예제 : 오리 게임 만들기\n\n오리 어플리케이션 게임을 운영하는 회사를 다니면서 오리게임을 만든다고 가정했을때. 표준적인 객체지향 기법을 사용하여 `Duck` 이라는 **슈퍼클래스**를 만든다음 그 **클래스를 확장**하여 다른 종류의 오리를\n만든다.\n\n\n### ☠️ 디자인패턴을 적용하지 않을 때\n\n![image](https://user-images.githubusercontent.com/55419159/141426069-89b87dc4-ca38-42dc-bf65-f53e8125d49e.png)\n\n추상클래스인 `Duck` 클래스를 `ReadHeadDuck` 클래스와 `MallardDuck` 클래스가 상속을 받아 추상메소드인 `display()`를 각각 구현한다.\n\n#### 문제의 시작1\n\n원래는 그럴 계획이 없었는데..\n오리들이 물에 떠있는 기능 이외에 날아다녀야하는 요구사항이 생겼다.\n\n![image](https://user-images.githubusercontent.com/55419159/141426644-cdd48f86-a3c7-4eda-9803-57a1bce59486.png)\n\n간단하네.. ?\n이제 모든 오리들에게 날수있는 기능이 추가되었다.\n그런데 날 수없는 오리가 있었다는 사실을 잊고있었다.\n\n![image](https://user-images.githubusercontent.com/55419159/141426734-0a0a532e-668b-4a32-82a1-89b1494d5f22.png)\n\n`Duck` 코드의 한부분만을 바꿈으로 해서 프로그램 전체에 부작용이 발생하였다. (장난감 고무오리가 날아다님)\n문제를 해결하기 위하여 `RubberDuck` 클래스에서 `fly()` 메소드와 `quack()` 메소드를 오버라이드 하여 소리와 날수있게 하는기능을 변경시켜주었다.\n\n![image](https://user-images.githubusercontent.com/55419159/141427908-0733cfdb-596a-424b-a934-92dbf3674d08.png)\n\n일단 문제는 해결되었지만.. 향후에 `RubberDuck`과 같은 가짜오리가 더 추가가 된다면 그때마다 **맞지않는 상속되는 메소드들을 오버라이드 해서 구현해야하는 문제**가 여전히 존재한다.\n\n#### 문제의 시작2\n\n회사에서 1개월마다 한번씩 새로운 오리를 업데이트 한다고 한다. 여러 오리가 새롭게 추가될것이고 그 규격도 계속 변할것이라고 한다.\n그렇다면 매번 모든 오리 서브클래스의 `fly()` 와 `quack()` 같은 메소드를 일일이 살펴봐야하고 상황에따라 오버라이드로 해야할수있다.\n\n상속활용이 맞는건가.. 다시생각해보자.\n\n그렇다면 인터페이스를 사용한다면?\n\n![image](https://user-images.githubusercontent.com/55419159/141428073-9d371761-e436-4073-a117-b51220dc1ada.png)\n\n코드중복이 엄청나겠지..\n메소드 몇게 오버라이드 해야하는것을 피하다가 날아가는 동작 바꾸기위해 새롭게 생긴 모든 `Duck` 서브클래스들을 전부 고쳐야하네.\n\n\n### ✅ 디자인패턴을 적용할 때\n\n상속을 사용하는것도 서브클래스들의 행동이 바뀔수 있는데도 모든 서브클래스들이 하나의 행동을 사용하는것이 문제가되고\n`Flyable`, `Quackable` 인터페이스 사용을 하는 방법도 코드재사용을 할수없다는 문제가 있다.\n(한가지의 행동을 바꿀때마다 그 행동이 정의되어있는 모든 서브클래스들은 전부 찾아서 코드를 일일히 고쳐야 하고, 그 과정에서 새로운 버그가 생길 가능성이 많음!)\n\n#### 디자인 원칙 1\n\n> _애플리케이션에서 **달라지는 부분**을 찾아내고, 달라지지 않는 부분으로부터 **분리**시킨다._\n\n\n달라지는 부분을 찾아서 나머지 코드에 영향을 주지 않도록 **캡슐화**한다.\n\n오리마다 달라지는 부분은.. `fly()` 와 `quack()` 이다.\n이러한 행동을 `Duck` 클래스로부터 분리시키기 위해 나타낼 새로운 **클래스의 집합**을 만들어 준다.\n\n\n![image](https://user-images.githubusercontent.com/55419159/141428230-1e024573-ef62-4224-8076-19ec12155a53.png)\n\n\n행동에 관한 인터페이스를 만들고, 구체적인 행동을 구현하는 클래스들을 만든다.\n이제 더이상 `Duck`에서 나는 행동과 소리를 내는 행동을 Duck 클래스나 그 서브클래스에서 구현하지않고 **다른클래스에게 위임**하게 된다.\n\n#### 디자인 원칙 2\n\n> _~~상속~~보다는 **구성**을 활용한다._\n\n#### 디자인 원칙 3\n\n> _~~구현~~이 아닌 **인터페이스**에 맞춰서 프로그래밍 한다._\n\n\n그리고 `Duck` 클래스는 두개의 인터페이스 형식의 인스턴스 변수가 추가가 된다.\n\n![image](https://user-images.githubusercontent.com/55419159/141428498-583654d3-79b9-4c32-9813-b9c92c3dc16e.png)\n\n`Duck` 클래스에서는 이제 행동을 직접 처리하는 대신 새로 만든 `performQuck()`, `performFly()` 메소드에서 각각 `FlyBehavior`, `QuackBehavior` 로 참조되는 객체에 그 행동을 위임해 줄것이다.\n\n\n--- \n\n## 🛒 정리\n\n### ⚙️ 소스코드\n\n#### `Duck` 추상클래스 구현\n```java\npublic abstract class Duck {\n\n    FlyBehavior flyBehavior;\n    QuackBehavior quackBehavior;\n\n    public void swim() {\n        System.out.println(\"물에 떠있습니다.\");\n    }\n\n    public abstract void display();\n\n    public void performQuack() {\n        quackBehavior.quack();\n    }\n\n    public void performFly() {\n        flyBehavior.fly();\n    }\n\n    public void setFlyBehavior(FlyBehavior flyBehavior) {\n        this.flyBehavior = flyBehavior;\n    }\n\n    public void setQuackBehavior(QuackBehavior quackBehavior) {\n        this.quackBehavior = quackBehavior;\n    }\n}\n```\n\n#### `FlyBehavior`, `QuackBehavior` 구현 및 구체적인 행동 클래스 구현\n```java\npublic interface FlyBehavior {\n    public void fly();\n}\n\npublic class FlyWithWings implements FlyBehavior {\n    @Override\n    public void fly() {\n        System.out.println(\"난다!!\");\n    }\n}\n\npublic class FlyNoWay implements FlyBehavior {\n    @Override\n    public void fly() {\n        System.out.println(\"날지못해요.\");\n    }\n}\n```\n\n```java\npublic interface QuackBehavior {\n    public void quack();\n}\n\npublic class Quack implements QuackBehavior {\n    @Override\n    public void quack() {\n        System.out.println(\"꿱꿱.\");\n    }\n}\n\npublic class Squack implements QuackBehavior {\n    @Override\n    public void quack() {\n        System.out.println(\"삑삑.\");\n    }\n}\n\npublic class MuteQuack implements QuackBehavior {\n    @Override\n    public void quack() {\n        System.out.prinln(\"조용.\");\n    }\n}\n```\n\n\n#### `Duck`을 상속해 `MallardDuck` 구현\n\n```java\npublic class MallardDuck extends Duck {\n    public MallardDuck() {\n        flyBehavior = new FlyWithWings();\n        quackBehavior = new Quack();\n    }\n\n    @Override\n    public void display() {\n        System.out.println(\"청둥오리 입니다.\");\n    }\n}\n```\n\n#### 활용\n```java\npublic class MiniDuckSimulator {\n    public static void main(String[] args) {\n        Duck mallard = new MallardDuck();\n\n        mallard.performQuack();\n        mallard.performFly();\n\n        mallard.setFlyBehavior(new FlyNoWay());\n        mallard.performFly();\n    }\n}\n```\n\n### 🔎 요약하자면..\n\n> 'A는 B이다' 보다 'A에는 B가 있다'가 나을 수 있다.\n\n각각의 오리들에게는 `FlyBehavior`와 `QuackBehavior`이 있으며 행동을 위임 받는다.\n\n![image](https://user-images.githubusercontent.com/55419159/141429071-35b99838-2961-4ecf-b606-f6358c62d4ec.png)\n\n\n\n이런 식으로 두클래스를 합치는 것을 **구성(composition)을 이용하는 것**이라고 한다.\n\n여기의 오리 클래스는 행동을 상속 받는 대신, 올바른 **행동 객체로 구성**됨으로써 행동을 부여받게 된다.","source":"_posts/디자인-패턴/2021-11-12-스트레티지-패턴.md","raw":"---\ntitle: 스트레티지 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 스트레티지\n---\n\n## 📍 스트레티지 패턴이란\n\n> 알고리즘군을 정의하고 각각 **캡슐화**하여 교환해서 사용할 수 있도록 만든다.\n> 스트래티지패턴을 활용하면 알고리즘을 사용하는 클라이언트와는 **독립적으로** 알고리즘을 변경할수 있다.\n\n---\n\n## 🦆 활용예제 : 오리 게임 만들기\n\n오리 어플리케이션 게임을 운영하는 회사를 다니면서 오리게임을 만든다고 가정했을때. 표준적인 객체지향 기법을 사용하여 `Duck` 이라는 **슈퍼클래스**를 만든다음 그 **클래스를 확장**하여 다른 종류의 오리를\n만든다.\n\n\n### ☠️ 디자인패턴을 적용하지 않을 때\n\n![image](https://user-images.githubusercontent.com/55419159/141426069-89b87dc4-ca38-42dc-bf65-f53e8125d49e.png)\n\n추상클래스인 `Duck` 클래스를 `ReadHeadDuck` 클래스와 `MallardDuck` 클래스가 상속을 받아 추상메소드인 `display()`를 각각 구현한다.\n\n#### 문제의 시작1\n\n원래는 그럴 계획이 없었는데..\n오리들이 물에 떠있는 기능 이외에 날아다녀야하는 요구사항이 생겼다.\n\n![image](https://user-images.githubusercontent.com/55419159/141426644-cdd48f86-a3c7-4eda-9803-57a1bce59486.png)\n\n간단하네.. ?\n이제 모든 오리들에게 날수있는 기능이 추가되었다.\n그런데 날 수없는 오리가 있었다는 사실을 잊고있었다.\n\n![image](https://user-images.githubusercontent.com/55419159/141426734-0a0a532e-668b-4a32-82a1-89b1494d5f22.png)\n\n`Duck` 코드의 한부분만을 바꿈으로 해서 프로그램 전체에 부작용이 발생하였다. (장난감 고무오리가 날아다님)\n문제를 해결하기 위하여 `RubberDuck` 클래스에서 `fly()` 메소드와 `quack()` 메소드를 오버라이드 하여 소리와 날수있게 하는기능을 변경시켜주었다.\n\n![image](https://user-images.githubusercontent.com/55419159/141427908-0733cfdb-596a-424b-a934-92dbf3674d08.png)\n\n일단 문제는 해결되었지만.. 향후에 `RubberDuck`과 같은 가짜오리가 더 추가가 된다면 그때마다 **맞지않는 상속되는 메소드들을 오버라이드 해서 구현해야하는 문제**가 여전히 존재한다.\n\n#### 문제의 시작2\n\n회사에서 1개월마다 한번씩 새로운 오리를 업데이트 한다고 한다. 여러 오리가 새롭게 추가될것이고 그 규격도 계속 변할것이라고 한다.\n그렇다면 매번 모든 오리 서브클래스의 `fly()` 와 `quack()` 같은 메소드를 일일이 살펴봐야하고 상황에따라 오버라이드로 해야할수있다.\n\n상속활용이 맞는건가.. 다시생각해보자.\n\n그렇다면 인터페이스를 사용한다면?\n\n![image](https://user-images.githubusercontent.com/55419159/141428073-9d371761-e436-4073-a117-b51220dc1ada.png)\n\n코드중복이 엄청나겠지..\n메소드 몇게 오버라이드 해야하는것을 피하다가 날아가는 동작 바꾸기위해 새롭게 생긴 모든 `Duck` 서브클래스들을 전부 고쳐야하네.\n\n\n### ✅ 디자인패턴을 적용할 때\n\n상속을 사용하는것도 서브클래스들의 행동이 바뀔수 있는데도 모든 서브클래스들이 하나의 행동을 사용하는것이 문제가되고\n`Flyable`, `Quackable` 인터페이스 사용을 하는 방법도 코드재사용을 할수없다는 문제가 있다.\n(한가지의 행동을 바꿀때마다 그 행동이 정의되어있는 모든 서브클래스들은 전부 찾아서 코드를 일일히 고쳐야 하고, 그 과정에서 새로운 버그가 생길 가능성이 많음!)\n\n#### 디자인 원칙 1\n\n> _애플리케이션에서 **달라지는 부분**을 찾아내고, 달라지지 않는 부분으로부터 **분리**시킨다._\n\n\n달라지는 부분을 찾아서 나머지 코드에 영향을 주지 않도록 **캡슐화**한다.\n\n오리마다 달라지는 부분은.. `fly()` 와 `quack()` 이다.\n이러한 행동을 `Duck` 클래스로부터 분리시키기 위해 나타낼 새로운 **클래스의 집합**을 만들어 준다.\n\n\n![image](https://user-images.githubusercontent.com/55419159/141428230-1e024573-ef62-4224-8076-19ec12155a53.png)\n\n\n행동에 관한 인터페이스를 만들고, 구체적인 행동을 구현하는 클래스들을 만든다.\n이제 더이상 `Duck`에서 나는 행동과 소리를 내는 행동을 Duck 클래스나 그 서브클래스에서 구현하지않고 **다른클래스에게 위임**하게 된다.\n\n#### 디자인 원칙 2\n\n> _~~상속~~보다는 **구성**을 활용한다._\n\n#### 디자인 원칙 3\n\n> _~~구현~~이 아닌 **인터페이스**에 맞춰서 프로그래밍 한다._\n\n\n그리고 `Duck` 클래스는 두개의 인터페이스 형식의 인스턴스 변수가 추가가 된다.\n\n![image](https://user-images.githubusercontent.com/55419159/141428498-583654d3-79b9-4c32-9813-b9c92c3dc16e.png)\n\n`Duck` 클래스에서는 이제 행동을 직접 처리하는 대신 새로 만든 `performQuck()`, `performFly()` 메소드에서 각각 `FlyBehavior`, `QuackBehavior` 로 참조되는 객체에 그 행동을 위임해 줄것이다.\n\n\n--- \n\n## 🛒 정리\n\n### ⚙️ 소스코드\n\n#### `Duck` 추상클래스 구현\n```java\npublic abstract class Duck {\n\n    FlyBehavior flyBehavior;\n    QuackBehavior quackBehavior;\n\n    public void swim() {\n        System.out.println(\"물에 떠있습니다.\");\n    }\n\n    public abstract void display();\n\n    public void performQuack() {\n        quackBehavior.quack();\n    }\n\n    public void performFly() {\n        flyBehavior.fly();\n    }\n\n    public void setFlyBehavior(FlyBehavior flyBehavior) {\n        this.flyBehavior = flyBehavior;\n    }\n\n    public void setQuackBehavior(QuackBehavior quackBehavior) {\n        this.quackBehavior = quackBehavior;\n    }\n}\n```\n\n#### `FlyBehavior`, `QuackBehavior` 구현 및 구체적인 행동 클래스 구현\n```java\npublic interface FlyBehavior {\n    public void fly();\n}\n\npublic class FlyWithWings implements FlyBehavior {\n    @Override\n    public void fly() {\n        System.out.println(\"난다!!\");\n    }\n}\n\npublic class FlyNoWay implements FlyBehavior {\n    @Override\n    public void fly() {\n        System.out.println(\"날지못해요.\");\n    }\n}\n```\n\n```java\npublic interface QuackBehavior {\n    public void quack();\n}\n\npublic class Quack implements QuackBehavior {\n    @Override\n    public void quack() {\n        System.out.println(\"꿱꿱.\");\n    }\n}\n\npublic class Squack implements QuackBehavior {\n    @Override\n    public void quack() {\n        System.out.println(\"삑삑.\");\n    }\n}\n\npublic class MuteQuack implements QuackBehavior {\n    @Override\n    public void quack() {\n        System.out.prinln(\"조용.\");\n    }\n}\n```\n\n\n#### `Duck`을 상속해 `MallardDuck` 구현\n\n```java\npublic class MallardDuck extends Duck {\n    public MallardDuck() {\n        flyBehavior = new FlyWithWings();\n        quackBehavior = new Quack();\n    }\n\n    @Override\n    public void display() {\n        System.out.println(\"청둥오리 입니다.\");\n    }\n}\n```\n\n#### 활용\n```java\npublic class MiniDuckSimulator {\n    public static void main(String[] args) {\n        Duck mallard = new MallardDuck();\n\n        mallard.performQuack();\n        mallard.performFly();\n\n        mallard.setFlyBehavior(new FlyNoWay());\n        mallard.performFly();\n    }\n}\n```\n\n### 🔎 요약하자면..\n\n> 'A는 B이다' 보다 'A에는 B가 있다'가 나을 수 있다.\n\n각각의 오리들에게는 `FlyBehavior`와 `QuackBehavior`이 있으며 행동을 위임 받는다.\n\n![image](https://user-images.githubusercontent.com/55419159/141429071-35b99838-2961-4ecf-b606-f6358c62d4ec.png)\n\n\n\n이런 식으로 두클래스를 합치는 것을 **구성(composition)을 이용하는 것**이라고 한다.\n\n여기의 오리 클래스는 행동을 상속 받는 대신, 올바른 **행동 객체로 구성**됨으로써 행동을 부여받게 된다.","slug":"디자인-패턴/2021-11-12-스트레티지-패턴","published":1,"date":"2021-11-11T10:05:19.598Z","updated":"2021-11-12T08:05:58.357Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fe000gjd9k38sy9jkz","content":"<h2 id=\"📍-스트레티지-패턴이란\"><a href=\"#📍-스트레티지-패턴이란\" class=\"headerlink\" title=\"📍 스트레티지 패턴이란\"></a>📍 스트레티지 패턴이란</h2><blockquote>\n<p>알고리즘군을 정의하고 각각 <strong>캡슐화</strong>하여 교환해서 사용할 수 있도록 만든다.<br>스트래티지패턴을 활용하면 알고리즘을 사용하는 클라이언트와는 <strong>독립적으로</strong> 알고리즘을 변경할수 있다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🦆-활용예제-오리-게임-만들기\"><a href=\"#🦆-활용예제-오리-게임-만들기\" class=\"headerlink\" title=\"🦆 활용예제 : 오리 게임 만들기\"></a>🦆 활용예제 : 오리 게임 만들기</h2><p>오리 어플리케이션 게임을 운영하는 회사를 다니면서 오리게임을 만든다고 가정했을때. 표준적인 객체지향 기법을 사용하여 <code>Duck</code> 이라는 <strong>슈퍼클래스</strong>를 만든다음 그 <strong>클래스를 확장</strong>하여 다른 종류의 오리를<br>만든다.</p>\n<h3 id=\"☠️-디자인패턴을-적용하지-않을-때\"><a href=\"#☠️-디자인패턴을-적용하지-않을-때\" class=\"headerlink\" title=\"☠️ 디자인패턴을 적용하지 않을 때\"></a>☠️ 디자인패턴을 적용하지 않을 때</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141426069-89b87dc4-ca38-42dc-bf65-f53e8125d49e.png\" alt=\"image\"></p>\n<p>추상클래스인 <code>Duck</code> 클래스를 <code>ReadHeadDuck</code> 클래스와 <code>MallardDuck</code> 클래스가 상속을 받아 추상메소드인 <code>display()</code>를 각각 구현한다.</p>\n<h4 id=\"문제의-시작1\"><a href=\"#문제의-시작1\" class=\"headerlink\" title=\"문제의 시작1\"></a>문제의 시작1</h4><p>원래는 그럴 계획이 없었는데..<br>오리들이 물에 떠있는 기능 이외에 날아다녀야하는 요구사항이 생겼다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141426644-cdd48f86-a3c7-4eda-9803-57a1bce59486.png\" alt=\"image\"></p>\n<p>간단하네.. ?<br>이제 모든 오리들에게 날수있는 기능이 추가되었다.<br>그런데 날 수없는 오리가 있었다는 사실을 잊고있었다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141426734-0a0a532e-668b-4a32-82a1-89b1494d5f22.png\" alt=\"image\"></p>\n<p><code>Duck</code> 코드의 한부분만을 바꿈으로 해서 프로그램 전체에 부작용이 발생하였다. (장난감 고무오리가 날아다님)<br>문제를 해결하기 위하여 <code>RubberDuck</code> 클래스에서 <code>fly()</code> 메소드와 <code>quack()</code> 메소드를 오버라이드 하여 소리와 날수있게 하는기능을 변경시켜주었다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141427908-0733cfdb-596a-424b-a934-92dbf3674d08.png\" alt=\"image\"></p>\n<p>일단 문제는 해결되었지만.. 향후에 <code>RubberDuck</code>과 같은 가짜오리가 더 추가가 된다면 그때마다 <strong>맞지않는 상속되는 메소드들을 오버라이드 해서 구현해야하는 문제</strong>가 여전히 존재한다.</p>\n<h4 id=\"문제의-시작2\"><a href=\"#문제의-시작2\" class=\"headerlink\" title=\"문제의 시작2\"></a>문제의 시작2</h4><p>회사에서 1개월마다 한번씩 새로운 오리를 업데이트 한다고 한다. 여러 오리가 새롭게 추가될것이고 그 규격도 계속 변할것이라고 한다.<br>그렇다면 매번 모든 오리 서브클래스의 <code>fly()</code> 와 <code>quack()</code> 같은 메소드를 일일이 살펴봐야하고 상황에따라 오버라이드로 해야할수있다.</p>\n<p>상속활용이 맞는건가.. 다시생각해보자.</p>\n<p>그렇다면 인터페이스를 사용한다면?</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141428073-9d371761-e436-4073-a117-b51220dc1ada.png\" alt=\"image\"></p>\n<p>코드중복이 엄청나겠지..<br>메소드 몇게 오버라이드 해야하는것을 피하다가 날아가는 동작 바꾸기위해 새롭게 생긴 모든 <code>Duck</code> 서브클래스들을 전부 고쳐야하네.</p>\n<h3 id=\"✅-디자인패턴을-적용할-때\"><a href=\"#✅-디자인패턴을-적용할-때\" class=\"headerlink\" title=\"✅ 디자인패턴을 적용할 때\"></a>✅ 디자인패턴을 적용할 때</h3><p>상속을 사용하는것도 서브클래스들의 행동이 바뀔수 있는데도 모든 서브클래스들이 하나의 행동을 사용하는것이 문제가되고<br><code>Flyable</code>, <code>Quackable</code> 인터페이스 사용을 하는 방법도 코드재사용을 할수없다는 문제가 있다.<br>(한가지의 행동을 바꿀때마다 그 행동이 정의되어있는 모든 서브클래스들은 전부 찾아서 코드를 일일히 고쳐야 하고, 그 과정에서 새로운 버그가 생길 가능성이 많음!)</p>\n<h4 id=\"디자인-원칙-1\"><a href=\"#디자인-원칙-1\" class=\"headerlink\" title=\"디자인 원칙 1\"></a>디자인 원칙 1</h4><blockquote>\n<p><em>애플리케이션에서 <strong>달라지는 부분</strong>을 찾아내고, 달라지지 않는 부분으로부터 <strong>분리</strong>시킨다.</em></p>\n</blockquote>\n<p>달라지는 부분을 찾아서 나머지 코드에 영향을 주지 않도록 <strong>캡슐화</strong>한다.</p>\n<p>오리마다 달라지는 부분은.. <code>fly()</code> 와 <code>quack()</code> 이다.<br>이러한 행동을 <code>Duck</code> 클래스로부터 분리시키기 위해 나타낼 새로운 <strong>클래스의 집합</strong>을 만들어 준다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141428230-1e024573-ef62-4224-8076-19ec12155a53.png\" alt=\"image\"></p>\n<p>행동에 관한 인터페이스를 만들고, 구체적인 행동을 구현하는 클래스들을 만든다.<br>이제 더이상 <code>Duck</code>에서 나는 행동과 소리를 내는 행동을 Duck 클래스나 그 서브클래스에서 구현하지않고 <strong>다른클래스에게 위임</strong>하게 된다.</p>\n<h4 id=\"디자인-원칙-2\"><a href=\"#디자인-원칙-2\" class=\"headerlink\" title=\"디자인 원칙 2\"></a>디자인 원칙 2</h4><blockquote>\n<p><em><del>상속</del>보다는 <strong>구성</strong>을 활용한다.</em></p>\n</blockquote>\n<h4 id=\"디자인-원칙-3\"><a href=\"#디자인-원칙-3\" class=\"headerlink\" title=\"디자인 원칙 3\"></a>디자인 원칙 3</h4><blockquote>\n<p><em><del>구현</del>이 아닌 <strong>인터페이스</strong>에 맞춰서 프로그래밍 한다.</em></p>\n</blockquote>\n<p>그리고 <code>Duck</code> 클래스는 두개의 인터페이스 형식의 인스턴스 변수가 추가가 된다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141428498-583654d3-79b9-4c32-9813-b9c92c3dc16e.png\" alt=\"image\"></p>\n<p><code>Duck</code> 클래스에서는 이제 행동을 직접 처리하는 대신 새로 만든 <code>performQuck()</code>, <code>performFly()</code> 메소드에서 각각 <code>FlyBehavior</code>, <code>QuackBehavior</code> 로 참조되는 객체에 그 행동을 위임해 줄것이다.</p>\n<hr>\n<h2 id=\"🛒-정리\"><a href=\"#🛒-정리\" class=\"headerlink\" title=\"🛒 정리\"></a>🛒 정리</h2><h3 id=\"⚙️-소스코드\"><a href=\"#⚙️-소스코드\" class=\"headerlink\" title=\"⚙️ 소스코드\"></a>⚙️ 소스코드</h3><h4 id=\"Duck-추상클래스-구현\"><a href=\"#Duck-추상클래스-구현\" class=\"headerlink\" title=\"Duck 추상클래스 구현\"></a><code>Duck</code> 추상클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    FlyBehavior flyBehavior;</span><br><span class=\"line\">    QuackBehavior quackBehavior;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swim</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물에 떠있습니다.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">performQuack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        quackBehavior.quack();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">performFly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        flyBehavior.fly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFlyBehavior</span><span class=\"params\">(FlyBehavior flyBehavior)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.flyBehavior = flyBehavior;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setQuackBehavior</span><span class=\"params\">(QuackBehavior quackBehavior)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.quackBehavior = quackBehavior;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"FlyBehavior-QuackBehavior-구현-및-구체적인-행동-클래스-구현\"><a href=\"#FlyBehavior-QuackBehavior-구현-및-구체적인-행동-클래스-구현\" class=\"headerlink\" title=\"FlyBehavior, QuackBehavior 구현 및 구체적인 행동 클래스 구현\"></a><code>FlyBehavior</code>, <code>QuackBehavior</code> 구현 및 구체적인 행동 클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">FlyBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyWithWings</span> <span class=\"keyword\">implements</span> <span class=\"title\">FlyBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;난다!!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyNoWay</span> <span class=\"keyword\">implements</span> <span class=\"title\">FlyBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;날지못해요.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Quack</span> <span class=\"keyword\">implements</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;꿱꿱.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Squack</span> <span class=\"keyword\">implements</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;삑삑.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MuteQuack</span> <span class=\"keyword\">implements</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.prinln(<span class=\"string\">&quot;조용.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Duck을-상속해-MallardDuck-구현\"><a href=\"#Duck을-상속해-MallardDuck-구현\" class=\"headerlink\" title=\"Duck을 상속해 MallardDuck 구현\"></a><code>Duck</code>을 상속해 <code>MallardDuck</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MallardDuck</span> <span class=\"keyword\">extends</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MallardDuck</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        flyBehavior = <span class=\"keyword\">new</span> FlyWithWings();</span><br><span class=\"line\">        quackBehavior = <span class=\"keyword\">new</span> Quack();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;청둥오리 입니다.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"활용\"><a href=\"#활용\" class=\"headerlink\" title=\"활용\"></a>활용</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MiniDuckSimulator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Duck mallard = <span class=\"keyword\">new</span> MallardDuck();</span><br><span class=\"line\"></span><br><span class=\"line\">        mallard.performQuack();</span><br><span class=\"line\">        mallard.performFly();</span><br><span class=\"line\"></span><br><span class=\"line\">        mallard.setFlyBehavior(<span class=\"keyword\">new</span> FlyNoWay());</span><br><span class=\"line\">        mallard.performFly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"🔎-요약하자면\"><a href=\"#🔎-요약하자면\" class=\"headerlink\" title=\"🔎 요약하자면..\"></a>🔎 요약하자면..</h3><blockquote>\n<p>‘A는 B이다’ 보다 ‘A에는 B가 있다’가 나을 수 있다.</p>\n</blockquote>\n<p>각각의 오리들에게는 <code>FlyBehavior</code>와 <code>QuackBehavior</code>이 있으며 행동을 위임 받는다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141429071-35b99838-2961-4ecf-b606-f6358c62d4ec.png\" alt=\"image\"></p>\n<p>이런 식으로 두클래스를 합치는 것을 <strong>구성(composition)을 이용하는 것</strong>이라고 한다.</p>\n<p>여기의 오리 클래스는 행동을 상속 받는 대신, 올바른 <strong>행동 객체로 구성</strong>됨으로써 행동을 부여받게 된다.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"📍-스트레티지-패턴이란\"><a href=\"#📍-스트레티지-패턴이란\" class=\"headerlink\" title=\"📍 스트레티지 패턴이란\"></a>📍 스트레티지 패턴이란</h2><blockquote>\n<p>알고리즘군을 정의하고 각각 <strong>캡슐화</strong>하여 교환해서 사용할 수 있도록 만든다.<br>스트래티지패턴을 활용하면 알고리즘을 사용하는 클라이언트와는 <strong>독립적으로</strong> 알고리즘을 변경할수 있다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🦆-활용예제-오리-게임-만들기\"><a href=\"#🦆-활용예제-오리-게임-만들기\" class=\"headerlink\" title=\"🦆 활용예제 : 오리 게임 만들기\"></a>🦆 활용예제 : 오리 게임 만들기</h2><p>오리 어플리케이션 게임을 운영하는 회사를 다니면서 오리게임을 만든다고 가정했을때. 표준적인 객체지향 기법을 사용하여 <code>Duck</code> 이라는 <strong>슈퍼클래스</strong>를 만든다음 그 <strong>클래스를 확장</strong>하여 다른 종류의 오리를<br>만든다.</p>\n<h3 id=\"☠️-디자인패턴을-적용하지-않을-때\"><a href=\"#☠️-디자인패턴을-적용하지-않을-때\" class=\"headerlink\" title=\"☠️ 디자인패턴을 적용하지 않을 때\"></a>☠️ 디자인패턴을 적용하지 않을 때</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141426069-89b87dc4-ca38-42dc-bf65-f53e8125d49e.png\" alt=\"image\"></p>\n<p>추상클래스인 <code>Duck</code> 클래스를 <code>ReadHeadDuck</code> 클래스와 <code>MallardDuck</code> 클래스가 상속을 받아 추상메소드인 <code>display()</code>를 각각 구현한다.</p>\n<h4 id=\"문제의-시작1\"><a href=\"#문제의-시작1\" class=\"headerlink\" title=\"문제의 시작1\"></a>문제의 시작1</h4><p>원래는 그럴 계획이 없었는데..<br>오리들이 물에 떠있는 기능 이외에 날아다녀야하는 요구사항이 생겼다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141426644-cdd48f86-a3c7-4eda-9803-57a1bce59486.png\" alt=\"image\"></p>\n<p>간단하네.. ?<br>이제 모든 오리들에게 날수있는 기능이 추가되었다.<br>그런데 날 수없는 오리가 있었다는 사실을 잊고있었다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141426734-0a0a532e-668b-4a32-82a1-89b1494d5f22.png\" alt=\"image\"></p>\n<p><code>Duck</code> 코드의 한부분만을 바꿈으로 해서 프로그램 전체에 부작용이 발생하였다. (장난감 고무오리가 날아다님)<br>문제를 해결하기 위하여 <code>RubberDuck</code> 클래스에서 <code>fly()</code> 메소드와 <code>quack()</code> 메소드를 오버라이드 하여 소리와 날수있게 하는기능을 변경시켜주었다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141427908-0733cfdb-596a-424b-a934-92dbf3674d08.png\" alt=\"image\"></p>\n<p>일단 문제는 해결되었지만.. 향후에 <code>RubberDuck</code>과 같은 가짜오리가 더 추가가 된다면 그때마다 <strong>맞지않는 상속되는 메소드들을 오버라이드 해서 구현해야하는 문제</strong>가 여전히 존재한다.</p>\n<h4 id=\"문제의-시작2\"><a href=\"#문제의-시작2\" class=\"headerlink\" title=\"문제의 시작2\"></a>문제의 시작2</h4><p>회사에서 1개월마다 한번씩 새로운 오리를 업데이트 한다고 한다. 여러 오리가 새롭게 추가될것이고 그 규격도 계속 변할것이라고 한다.<br>그렇다면 매번 모든 오리 서브클래스의 <code>fly()</code> 와 <code>quack()</code> 같은 메소드를 일일이 살펴봐야하고 상황에따라 오버라이드로 해야할수있다.</p>\n<p>상속활용이 맞는건가.. 다시생각해보자.</p>\n<p>그렇다면 인터페이스를 사용한다면?</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141428073-9d371761-e436-4073-a117-b51220dc1ada.png\" alt=\"image\"></p>\n<p>코드중복이 엄청나겠지..<br>메소드 몇게 오버라이드 해야하는것을 피하다가 날아가는 동작 바꾸기위해 새롭게 생긴 모든 <code>Duck</code> 서브클래스들을 전부 고쳐야하네.</p>\n<h3 id=\"✅-디자인패턴을-적용할-때\"><a href=\"#✅-디자인패턴을-적용할-때\" class=\"headerlink\" title=\"✅ 디자인패턴을 적용할 때\"></a>✅ 디자인패턴을 적용할 때</h3><p>상속을 사용하는것도 서브클래스들의 행동이 바뀔수 있는데도 모든 서브클래스들이 하나의 행동을 사용하는것이 문제가되고<br><code>Flyable</code>, <code>Quackable</code> 인터페이스 사용을 하는 방법도 코드재사용을 할수없다는 문제가 있다.<br>(한가지의 행동을 바꿀때마다 그 행동이 정의되어있는 모든 서브클래스들은 전부 찾아서 코드를 일일히 고쳐야 하고, 그 과정에서 새로운 버그가 생길 가능성이 많음!)</p>\n<h4 id=\"디자인-원칙-1\"><a href=\"#디자인-원칙-1\" class=\"headerlink\" title=\"디자인 원칙 1\"></a>디자인 원칙 1</h4><blockquote>\n<p><em>애플리케이션에서 <strong>달라지는 부분</strong>을 찾아내고, 달라지지 않는 부분으로부터 <strong>분리</strong>시킨다.</em></p>\n</blockquote>\n<p>달라지는 부분을 찾아서 나머지 코드에 영향을 주지 않도록 <strong>캡슐화</strong>한다.</p>\n<p>오리마다 달라지는 부분은.. <code>fly()</code> 와 <code>quack()</code> 이다.<br>이러한 행동을 <code>Duck</code> 클래스로부터 분리시키기 위해 나타낼 새로운 <strong>클래스의 집합</strong>을 만들어 준다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141428230-1e024573-ef62-4224-8076-19ec12155a53.png\" alt=\"image\"></p>\n<p>행동에 관한 인터페이스를 만들고, 구체적인 행동을 구현하는 클래스들을 만든다.<br>이제 더이상 <code>Duck</code>에서 나는 행동과 소리를 내는 행동을 Duck 클래스나 그 서브클래스에서 구현하지않고 <strong>다른클래스에게 위임</strong>하게 된다.</p>\n<h4 id=\"디자인-원칙-2\"><a href=\"#디자인-원칙-2\" class=\"headerlink\" title=\"디자인 원칙 2\"></a>디자인 원칙 2</h4><blockquote>\n<p><em><del>상속</del>보다는 <strong>구성</strong>을 활용한다.</em></p>\n</blockquote>\n<h4 id=\"디자인-원칙-3\"><a href=\"#디자인-원칙-3\" class=\"headerlink\" title=\"디자인 원칙 3\"></a>디자인 원칙 3</h4><blockquote>\n<p><em><del>구현</del>이 아닌 <strong>인터페이스</strong>에 맞춰서 프로그래밍 한다.</em></p>\n</blockquote>\n<p>그리고 <code>Duck</code> 클래스는 두개의 인터페이스 형식의 인스턴스 변수가 추가가 된다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141428498-583654d3-79b9-4c32-9813-b9c92c3dc16e.png\" alt=\"image\"></p>\n<p><code>Duck</code> 클래스에서는 이제 행동을 직접 처리하는 대신 새로 만든 <code>performQuck()</code>, <code>performFly()</code> 메소드에서 각각 <code>FlyBehavior</code>, <code>QuackBehavior</code> 로 참조되는 객체에 그 행동을 위임해 줄것이다.</p>\n<hr>\n<h2 id=\"🛒-정리\"><a href=\"#🛒-정리\" class=\"headerlink\" title=\"🛒 정리\"></a>🛒 정리</h2><h3 id=\"⚙️-소스코드\"><a href=\"#⚙️-소스코드\" class=\"headerlink\" title=\"⚙️ 소스코드\"></a>⚙️ 소스코드</h3><h4 id=\"Duck-추상클래스-구현\"><a href=\"#Duck-추상클래스-구현\" class=\"headerlink\" title=\"Duck 추상클래스 구현\"></a><code>Duck</code> 추상클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    FlyBehavior flyBehavior;</span><br><span class=\"line\">    QuackBehavior quackBehavior;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swim</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;물에 떠있습니다.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">performQuack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        quackBehavior.quack();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">performFly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        flyBehavior.fly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFlyBehavior</span><span class=\"params\">(FlyBehavior flyBehavior)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.flyBehavior = flyBehavior;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setQuackBehavior</span><span class=\"params\">(QuackBehavior quackBehavior)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.quackBehavior = quackBehavior;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"FlyBehavior-QuackBehavior-구현-및-구체적인-행동-클래스-구현\"><a href=\"#FlyBehavior-QuackBehavior-구현-및-구체적인-행동-클래스-구현\" class=\"headerlink\" title=\"FlyBehavior, QuackBehavior 구현 및 구체적인 행동 클래스 구현\"></a><code>FlyBehavior</code>, <code>QuackBehavior</code> 구현 및 구체적인 행동 클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">FlyBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyWithWings</span> <span class=\"keyword\">implements</span> <span class=\"title\">FlyBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;난다!!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyNoWay</span> <span class=\"keyword\">implements</span> <span class=\"title\">FlyBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">fly</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;날지못해요.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Quack</span> <span class=\"keyword\">implements</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;꿱꿱.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Squack</span> <span class=\"keyword\">implements</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;삑삑.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MuteQuack</span> <span class=\"keyword\">implements</span> <span class=\"title\">QuackBehavior</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">quack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.prinln(<span class=\"string\">&quot;조용.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Duck을-상속해-MallardDuck-구현\"><a href=\"#Duck을-상속해-MallardDuck-구현\" class=\"headerlink\" title=\"Duck을 상속해 MallardDuck 구현\"></a><code>Duck</code>을 상속해 <code>MallardDuck</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MallardDuck</span> <span class=\"keyword\">extends</span> <span class=\"title\">Duck</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MallardDuck</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        flyBehavior = <span class=\"keyword\">new</span> FlyWithWings();</span><br><span class=\"line\">        quackBehavior = <span class=\"keyword\">new</span> Quack();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;청둥오리 입니다.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"활용\"><a href=\"#활용\" class=\"headerlink\" title=\"활용\"></a>활용</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MiniDuckSimulator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Duck mallard = <span class=\"keyword\">new</span> MallardDuck();</span><br><span class=\"line\"></span><br><span class=\"line\">        mallard.performQuack();</span><br><span class=\"line\">        mallard.performFly();</span><br><span class=\"line\"></span><br><span class=\"line\">        mallard.setFlyBehavior(<span class=\"keyword\">new</span> FlyNoWay());</span><br><span class=\"line\">        mallard.performFly();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"🔎-요약하자면\"><a href=\"#🔎-요약하자면\" class=\"headerlink\" title=\"🔎 요약하자면..\"></a>🔎 요약하자면..</h3><blockquote>\n<p>‘A는 B이다’ 보다 ‘A에는 B가 있다’가 나을 수 있다.</p>\n</blockquote>\n<p>각각의 오리들에게는 <code>FlyBehavior</code>와 <code>QuackBehavior</code>이 있으며 행동을 위임 받는다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141429071-35b99838-2961-4ecf-b606-f6358c62d4ec.png\" alt=\"image\"></p>\n<p>이런 식으로 두클래스를 합치는 것을 <strong>구성(composition)을 이용하는 것</strong>이라고 한다.</p>\n<p>여기의 오리 클래스는 행동을 상속 받는 대신, 올바른 <strong>행동 객체로 구성</strong>됨으로써 행동을 부여받게 된다.</p>\n"},{"title":"데코레이터 패턴","_content":"\n## 🎁 데코레이터 패턴이란\n\n> 객체에 **추가적인 요건**을 동적으로 첨가한다.\n> 데코레이터는 **서브클래스**를 만드는 것을 통해서 기능을 유연하게 확장할 수 있는 방법을 제공한다.\n\n### 클래스 다이어그램\n\n![image](https://user-images.githubusercontent.com/55419159/141609476-9786bc6c-9a46-45d3-b2ad-63c6678abc0e.png)\n\n- `ConcreteComponent`에 **새로운 행동을 동적으로 추가**할 수 있다.\n각 데코레이터 안에는 구성요소(Component)에 대란 레퍼런스가 들어있는 인스턴스 변수가있다.\n\n- `Decorator`는 자신이 장식할 구성요소(Component)와 같은 인터페이스 또는 **추상 클래스를 구현**한다.\n\n- `ConcreteDecoratorA`, `ConcreteDecoratorB` 에는 그 객체가 장식하고있는(데코레이터가 감싸고 있는 Component객체)을 위한 인스턴스 변수가 있다. \n따라서 데코레이터는 `Component`의 **상태를 확장**할 수 있다.\n\n- `ConcreteDecoratorA`, `ConcreteDecoratorB` 데코레이터에서 **새로운 메소드를 추가**할 수도 있다. \n하지만 일반적으로 새로운 메소드를 추가하는 대신 `Component`에 원래 있던 메소드를 호출하기 전, 또는 후에 **별도의 작업을 처리하는 방식**으로 새로운 기능을 추가한다.\n\n---\n\n## 활용예제\n\n### ☕️ 카페 주문시스템 만들기\n\n> _커피를 주문할 때는 스팀 우유나 두유, 모카를 추가하고, 그 위에 휘핑 크림을 얹기도 한다.\n> 각각을 추가할 때마다 커피 가격이 올라가기 때문에 주문 시스템에서도 그런 점들을 모두 고려해야 한다._\n\n기존의 코드는 **건드리지 않은 채로** 확장을 통해서 새로운 행동을 간단하게 추가할 수 있는 **데코레이터 패턴**을 사용해보자.\n\n우선 특정 음료에서 시작해서 첨가물로 그 음료를 장식 해보자.\n\n1. `DarkRoast` 객체를 가져온다.\n2. `Mocha` 객체로 장식한다.\n3. `Whip` 객체로 장식한다.\n4. `cost()` 메소드를 호출한다. 이때 첨가물의 가격을 계산하는 일은 해당 객체들에게 위임된다.\n\n디자인을 바탕으로 코드를 만들어보자.\n\n![image](https://user-images.githubusercontent.com/55419159/141609675-00fe88e7-909c-4349-9dc8-88f3eeca5d05.png)\n\n\n#### `Beverage` 추상클래스 구현\n\n```java\npublic abstract class Beverage {\n\n    private String description = \"Empty\";\n\n    public String getDescription() {\n        return this.description;\n    }\n\n    public abstract int cost();\n}\n```\n\n#### `Beverage` 를 확장하는 `CondimentDecorator` 구현\n\n```java\npublic abstract class CondimentDecorator extends Beverage {\n    \n    public abstract String getDescription();\n    \n}\n```\n\n#### `Beverage` 를 활용해 음료 객체 구현\n\n```java\npublic class Espresso extends Beverage {\n\n    public Espresso() {\n        this.description = \"에스프레소\";\n    }\n\n    @Override\n    public int cost() {\n        return 3500;\n    }\n}\n\npublic class HouseBlend extends Beverage {\n\n    public HouseBlend() {\n        this.description = \"하우스블렌드\";\n    }\n\n    @Override\n    public int cost() {\n        return 2000;\n    }\n}\n```\n\n\n#### `CondimentDecorator` 를 활용해 꾸며진 객체 구현\n\n```java\npublic class Mocha extends CondimentDecorator {\n\n    private Beverage beverage;\n\n    public Mocha(Beverage beverage) {\n        this.beverage = beverage;\n    }\n\n    @Override\n    public String getDescription() {\n        return beverage.getDescription() + \", 모카\";\n    }\n\n    @Override\n    public int cost() {\n        return 500 + beverage.cost();\n    }\n}\n```\n\n#### 테스트\n\n```java\npublic class CoffeeStore {\n\n    public static void main(String args[]) {\n        Beverage beverage = new Espresso();\n        System.out.println(beverage.getDescription() + \" cost : \" + beverage.cost());\n\n        Beverage beverage1 = new DarkRoast();\n        beverage1 = new Mocha(beverage1);\n        beverage1 = new Mocha(beverage1);\n        beverage1 = new Whip(beverage1);\n        System.out.println(beverage1.getDescription() + \" cost : \" + beverage1.cost());\n\n        Beverage beverage2 = new HouseBlend();\n        beverage2 = new Soy(beverage2);\n        beverage2 = new Mocha(beverage2);\n        beverage2 = new Whip(beverage2);\n        System.out.println(beverage2.getDescription() + \" cost : \" + beverage2.cost());\n    }\n}\n```\n\n### 디자인 원칙\n\n> **OCP(Open-Closed principle)**\n> _클래스는 확장에 대해서는 열려 있어야하지만 코드 변경에 대해서는 닫혀 있어야 한다._\n\n---\n\n## 데코레이터가 적용된 예 : 자바 I/O\n\n개발하면서 스트림의 개념이 잘 잡히지 않았을때.. 자바 I/O API를 보고 한숨을 쉬는 사람들이 나말고도 많았을 거라 생각한다. \n기반스트림과 보조스트림을 데코레이터 패턴을 배우고 나서 머리속에서 다시 정리해보면 많은 클래스들이 좀더 친근하게 다가 온다.\n\n실제 자바에서 클래스 다이어그램을 그려보면\n\n![image](https://user-images.githubusercontent.com/55419159/141609807-708dd839-da97-46a2-832b-2c82ecc82bd4.png)\n\n`InputStream` 이 추상구성요소이고 모든 보조스트림의 조상인 `FilterInputStream` 이 추상 데코레이터 이다. \n`FilterInputStream`을 상속받아 구현하는 `BufferedInputStream` 클래스들이 구상 데코레이터이다. \n`InputStream`을 상속받는 `FileInputStream` 같은 기반 스트림들은 데코레이터로 포장될 구상 구성요소 역할을 한다.","source":"_posts/디자인-패턴/2021-11-13-데코레이터-패턴.md","raw":"---\ntitle: 데코레이터 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 데코레이터\n---\n\n## 🎁 데코레이터 패턴이란\n\n> 객체에 **추가적인 요건**을 동적으로 첨가한다.\n> 데코레이터는 **서브클래스**를 만드는 것을 통해서 기능을 유연하게 확장할 수 있는 방법을 제공한다.\n\n### 클래스 다이어그램\n\n![image](https://user-images.githubusercontent.com/55419159/141609476-9786bc6c-9a46-45d3-b2ad-63c6678abc0e.png)\n\n- `ConcreteComponent`에 **새로운 행동을 동적으로 추가**할 수 있다.\n각 데코레이터 안에는 구성요소(Component)에 대란 레퍼런스가 들어있는 인스턴스 변수가있다.\n\n- `Decorator`는 자신이 장식할 구성요소(Component)와 같은 인터페이스 또는 **추상 클래스를 구현**한다.\n\n- `ConcreteDecoratorA`, `ConcreteDecoratorB` 에는 그 객체가 장식하고있는(데코레이터가 감싸고 있는 Component객체)을 위한 인스턴스 변수가 있다. \n따라서 데코레이터는 `Component`의 **상태를 확장**할 수 있다.\n\n- `ConcreteDecoratorA`, `ConcreteDecoratorB` 데코레이터에서 **새로운 메소드를 추가**할 수도 있다. \n하지만 일반적으로 새로운 메소드를 추가하는 대신 `Component`에 원래 있던 메소드를 호출하기 전, 또는 후에 **별도의 작업을 처리하는 방식**으로 새로운 기능을 추가한다.\n\n---\n\n## 활용예제\n\n### ☕️ 카페 주문시스템 만들기\n\n> _커피를 주문할 때는 스팀 우유나 두유, 모카를 추가하고, 그 위에 휘핑 크림을 얹기도 한다.\n> 각각을 추가할 때마다 커피 가격이 올라가기 때문에 주문 시스템에서도 그런 점들을 모두 고려해야 한다._\n\n기존의 코드는 **건드리지 않은 채로** 확장을 통해서 새로운 행동을 간단하게 추가할 수 있는 **데코레이터 패턴**을 사용해보자.\n\n우선 특정 음료에서 시작해서 첨가물로 그 음료를 장식 해보자.\n\n1. `DarkRoast` 객체를 가져온다.\n2. `Mocha` 객체로 장식한다.\n3. `Whip` 객체로 장식한다.\n4. `cost()` 메소드를 호출한다. 이때 첨가물의 가격을 계산하는 일은 해당 객체들에게 위임된다.\n\n디자인을 바탕으로 코드를 만들어보자.\n\n![image](https://user-images.githubusercontent.com/55419159/141609675-00fe88e7-909c-4349-9dc8-88f3eeca5d05.png)\n\n\n#### `Beverage` 추상클래스 구현\n\n```java\npublic abstract class Beverage {\n\n    private String description = \"Empty\";\n\n    public String getDescription() {\n        return this.description;\n    }\n\n    public abstract int cost();\n}\n```\n\n#### `Beverage` 를 확장하는 `CondimentDecorator` 구현\n\n```java\npublic abstract class CondimentDecorator extends Beverage {\n    \n    public abstract String getDescription();\n    \n}\n```\n\n#### `Beverage` 를 활용해 음료 객체 구현\n\n```java\npublic class Espresso extends Beverage {\n\n    public Espresso() {\n        this.description = \"에스프레소\";\n    }\n\n    @Override\n    public int cost() {\n        return 3500;\n    }\n}\n\npublic class HouseBlend extends Beverage {\n\n    public HouseBlend() {\n        this.description = \"하우스블렌드\";\n    }\n\n    @Override\n    public int cost() {\n        return 2000;\n    }\n}\n```\n\n\n#### `CondimentDecorator` 를 활용해 꾸며진 객체 구현\n\n```java\npublic class Mocha extends CondimentDecorator {\n\n    private Beverage beverage;\n\n    public Mocha(Beverage beverage) {\n        this.beverage = beverage;\n    }\n\n    @Override\n    public String getDescription() {\n        return beverage.getDescription() + \", 모카\";\n    }\n\n    @Override\n    public int cost() {\n        return 500 + beverage.cost();\n    }\n}\n```\n\n#### 테스트\n\n```java\npublic class CoffeeStore {\n\n    public static void main(String args[]) {\n        Beverage beverage = new Espresso();\n        System.out.println(beverage.getDescription() + \" cost : \" + beverage.cost());\n\n        Beverage beverage1 = new DarkRoast();\n        beverage1 = new Mocha(beverage1);\n        beverage1 = new Mocha(beverage1);\n        beverage1 = new Whip(beverage1);\n        System.out.println(beverage1.getDescription() + \" cost : \" + beverage1.cost());\n\n        Beverage beverage2 = new HouseBlend();\n        beverage2 = new Soy(beverage2);\n        beverage2 = new Mocha(beverage2);\n        beverage2 = new Whip(beverage2);\n        System.out.println(beverage2.getDescription() + \" cost : \" + beverage2.cost());\n    }\n}\n```\n\n### 디자인 원칙\n\n> **OCP(Open-Closed principle)**\n> _클래스는 확장에 대해서는 열려 있어야하지만 코드 변경에 대해서는 닫혀 있어야 한다._\n\n---\n\n## 데코레이터가 적용된 예 : 자바 I/O\n\n개발하면서 스트림의 개념이 잘 잡히지 않았을때.. 자바 I/O API를 보고 한숨을 쉬는 사람들이 나말고도 많았을 거라 생각한다. \n기반스트림과 보조스트림을 데코레이터 패턴을 배우고 나서 머리속에서 다시 정리해보면 많은 클래스들이 좀더 친근하게 다가 온다.\n\n실제 자바에서 클래스 다이어그램을 그려보면\n\n![image](https://user-images.githubusercontent.com/55419159/141609807-708dd839-da97-46a2-832b-2c82ecc82bd4.png)\n\n`InputStream` 이 추상구성요소이고 모든 보조스트림의 조상인 `FilterInputStream` 이 추상 데코레이터 이다. \n`FilterInputStream`을 상속받아 구현하는 `BufferedInputStream` 클래스들이 구상 데코레이터이다. \n`InputStream`을 상속받는 `FileInputStream` 같은 기반 스트림들은 데코레이터로 포장될 구상 구성요소 역할을 한다.","slug":"디자인-패턴/2021-11-13-데코레이터-패턴","published":1,"date":"2021-11-13T06:40:11.478Z","updated":"2021-11-13T07:30:16.915Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2ff000hjd9k2agq8lp1","content":"<h2 id=\"🎁-데코레이터-패턴이란\"><a href=\"#🎁-데코레이터-패턴이란\" class=\"headerlink\" title=\"🎁 데코레이터 패턴이란\"></a>🎁 데코레이터 패턴이란</h2><blockquote>\n<p>객체에 <strong>추가적인 요건</strong>을 동적으로 첨가한다.<br>데코레이터는 <strong>서브클래스</strong>를 만드는 것을 통해서 기능을 유연하게 확장할 수 있는 방법을 제공한다.</p>\n</blockquote>\n<h3 id=\"클래스-다이어그램\"><a href=\"#클래스-다이어그램\" class=\"headerlink\" title=\"클래스 다이어그램\"></a>클래스 다이어그램</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141609476-9786bc6c-9a46-45d3-b2ad-63c6678abc0e.png\" alt=\"image\"></p>\n<ul>\n<li><p><code>ConcreteComponent</code>에 <strong>새로운 행동을 동적으로 추가</strong>할 수 있다.<br>각 데코레이터 안에는 구성요소(Component)에 대란 레퍼런스가 들어있는 인스턴스 변수가있다.</p>\n</li>\n<li><p><code>Decorator</code>는 자신이 장식할 구성요소(Component)와 같은 인터페이스 또는 <strong>추상 클래스를 구현</strong>한다.</p>\n</li>\n<li><p><code>ConcreteDecoratorA</code>, <code>ConcreteDecoratorB</code> 에는 그 객체가 장식하고있는(데코레이터가 감싸고 있는 Component객체)을 위한 인스턴스 변수가 있다.<br>따라서 데코레이터는 <code>Component</code>의 <strong>상태를 확장</strong>할 수 있다.</p>\n</li>\n<li><p><code>ConcreteDecoratorA</code>, <code>ConcreteDecoratorB</code> 데코레이터에서 <strong>새로운 메소드를 추가</strong>할 수도 있다.<br>하지만 일반적으로 새로운 메소드를 추가하는 대신 <code>Component</code>에 원래 있던 메소드를 호출하기 전, 또는 후에 <strong>별도의 작업을 처리하는 방식</strong>으로 새로운 기능을 추가한다.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"활용예제\"><a href=\"#활용예제\" class=\"headerlink\" title=\"활용예제\"></a>활용예제</h2><h3 id=\"☕️-카페-주문시스템-만들기\"><a href=\"#☕️-카페-주문시스템-만들기\" class=\"headerlink\" title=\"☕️ 카페 주문시스템 만들기\"></a>☕️ 카페 주문시스템 만들기</h3><blockquote>\n<p><em>커피를 주문할 때는 스팀 우유나 두유, 모카를 추가하고, 그 위에 휘핑 크림을 얹기도 한다.<br>각각을 추가할 때마다 커피 가격이 올라가기 때문에 주문 시스템에서도 그런 점들을 모두 고려해야 한다.</em></p>\n</blockquote>\n<p>기존의 코드는 <strong>건드리지 않은 채로</strong> 확장을 통해서 새로운 행동을 간단하게 추가할 수 있는 <strong>데코레이터 패턴</strong>을 사용해보자.</p>\n<p>우선 특정 음료에서 시작해서 첨가물로 그 음료를 장식 해보자.</p>\n<ol>\n<li><code>DarkRoast</code> 객체를 가져온다.</li>\n<li><code>Mocha</code> 객체로 장식한다.</li>\n<li><code>Whip</code> 객체로 장식한다.</li>\n<li><code>cost()</code> 메소드를 호출한다. 이때 첨가물의 가격을 계산하는 일은 해당 객체들에게 위임된다.</li>\n</ol>\n<p>디자인을 바탕으로 코드를 만들어보자.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141609675-00fe88e7-909c-4349-9dc8-88f3eeca5d05.png\" alt=\"image\"></p>\n<h4 id=\"Beverage-추상클래스-구현\"><a href=\"#Beverage-추상클래스-구현\" class=\"headerlink\" title=\"Beverage 추상클래스 구현\"></a><code>Beverage</code> 추상클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String description = <span class=\"string\">&quot;Empty&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Beverage-를-확장하는-CondimentDecorator-구현\"><a href=\"#Beverage-를-확장하는-CondimentDecorator-구현\" class=\"headerlink\" title=\"Beverage 를 확장하는 CondimentDecorator 구현\"></a><code>Beverage</code> 를 확장하는 <code>CondimentDecorator</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CondimentDecorator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Beverage-를-활용해-음료-객체-구현\"><a href=\"#Beverage-를-활용해-음료-객체-구현\" class=\"headerlink\" title=\"Beverage 를 활용해 음료 객체 구현\"></a><code>Beverage</code> 를 활용해 음료 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Espresso</span> <span class=\"keyword\">extends</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Espresso</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = <span class=\"string\">&quot;에스프레소&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3500</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HouseBlend</span> <span class=\"keyword\">extends</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HouseBlend</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = <span class=\"string\">&quot;하우스블렌드&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2000</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"CondimentDecorator-를-활용해-꾸며진-객체-구현\"><a href=\"#CondimentDecorator-를-활용해-꾸며진-객체-구현\" class=\"headerlink\" title=\"CondimentDecorator 를 활용해 꾸며진 객체 구현\"></a><code>CondimentDecorator</code> 를 활용해 꾸며진 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Mocha</span> <span class=\"keyword\">extends</span> <span class=\"title\">CondimentDecorator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Beverage beverage;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Mocha</span><span class=\"params\">(Beverage beverage)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.beverage = beverage;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> beverage.getDescription() + <span class=\"string\">&quot;, 모카&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">500</span> + beverage.cost();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CoffeeStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\">        Beverage beverage = <span class=\"keyword\">new</span> Espresso();</span><br><span class=\"line\">        System.out.println(beverage.getDescription() + <span class=\"string\">&quot; cost : &quot;</span> + beverage.cost());</span><br><span class=\"line\"></span><br><span class=\"line\">        Beverage beverage1 = <span class=\"keyword\">new</span> DarkRoast();</span><br><span class=\"line\">        beverage1 = <span class=\"keyword\">new</span> Mocha(beverage1);</span><br><span class=\"line\">        beverage1 = <span class=\"keyword\">new</span> Mocha(beverage1);</span><br><span class=\"line\">        beverage1 = <span class=\"keyword\">new</span> Whip(beverage1);</span><br><span class=\"line\">        System.out.println(beverage1.getDescription() + <span class=\"string\">&quot; cost : &quot;</span> + beverage1.cost());</span><br><span class=\"line\"></span><br><span class=\"line\">        Beverage beverage2 = <span class=\"keyword\">new</span> HouseBlend();</span><br><span class=\"line\">        beverage2 = <span class=\"keyword\">new</span> Soy(beverage2);</span><br><span class=\"line\">        beverage2 = <span class=\"keyword\">new</span> Mocha(beverage2);</span><br><span class=\"line\">        beverage2 = <span class=\"keyword\">new</span> Whip(beverage2);</span><br><span class=\"line\">        System.out.println(beverage2.getDescription() + <span class=\"string\">&quot; cost : &quot;</span> + beverage2.cost());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"디자인-원칙\"><a href=\"#디자인-원칙\" class=\"headerlink\" title=\"디자인 원칙\"></a>디자인 원칙</h3><blockquote>\n<p><strong>OCP(Open-Closed principle)</strong><br><em>클래스는 확장에 대해서는 열려 있어야하지만 코드 변경에 대해서는 닫혀 있어야 한다.</em></p>\n</blockquote>\n<hr>\n<h2 id=\"데코레이터가-적용된-예-자바-I-O\"><a href=\"#데코레이터가-적용된-예-자바-I-O\" class=\"headerlink\" title=\"데코레이터가 적용된 예 : 자바 I/O\"></a>데코레이터가 적용된 예 : 자바 I/O</h2><p>개발하면서 스트림의 개념이 잘 잡히지 않았을때.. 자바 I/O API를 보고 한숨을 쉬는 사람들이 나말고도 많았을 거라 생각한다.<br>기반스트림과 보조스트림을 데코레이터 패턴을 배우고 나서 머리속에서 다시 정리해보면 많은 클래스들이 좀더 친근하게 다가 온다.</p>\n<p>실제 자바에서 클래스 다이어그램을 그려보면</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141609807-708dd839-da97-46a2-832b-2c82ecc82bd4.png\" alt=\"image\"></p>\n<p><code>InputStream</code> 이 추상구성요소이고 모든 보조스트림의 조상인 <code>FilterInputStream</code> 이 추상 데코레이터 이다.<br><code>FilterInputStream</code>을 상속받아 구현하는 <code>BufferedInputStream</code> 클래스들이 구상 데코레이터이다.<br><code>InputStream</code>을 상속받는 <code>FileInputStream</code> 같은 기반 스트림들은 데코레이터로 포장될 구상 구성요소 역할을 한다.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"🎁-데코레이터-패턴이란\"><a href=\"#🎁-데코레이터-패턴이란\" class=\"headerlink\" title=\"🎁 데코레이터 패턴이란\"></a>🎁 데코레이터 패턴이란</h2><blockquote>\n<p>객체에 <strong>추가적인 요건</strong>을 동적으로 첨가한다.<br>데코레이터는 <strong>서브클래스</strong>를 만드는 것을 통해서 기능을 유연하게 확장할 수 있는 방법을 제공한다.</p>\n</blockquote>\n<h3 id=\"클래스-다이어그램\"><a href=\"#클래스-다이어그램\" class=\"headerlink\" title=\"클래스 다이어그램\"></a>클래스 다이어그램</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141609476-9786bc6c-9a46-45d3-b2ad-63c6678abc0e.png\" alt=\"image\"></p>\n<ul>\n<li><p><code>ConcreteComponent</code>에 <strong>새로운 행동을 동적으로 추가</strong>할 수 있다.<br>각 데코레이터 안에는 구성요소(Component)에 대란 레퍼런스가 들어있는 인스턴스 변수가있다.</p>\n</li>\n<li><p><code>Decorator</code>는 자신이 장식할 구성요소(Component)와 같은 인터페이스 또는 <strong>추상 클래스를 구현</strong>한다.</p>\n</li>\n<li><p><code>ConcreteDecoratorA</code>, <code>ConcreteDecoratorB</code> 에는 그 객체가 장식하고있는(데코레이터가 감싸고 있는 Component객체)을 위한 인스턴스 변수가 있다.<br>따라서 데코레이터는 <code>Component</code>의 <strong>상태를 확장</strong>할 수 있다.</p>\n</li>\n<li><p><code>ConcreteDecoratorA</code>, <code>ConcreteDecoratorB</code> 데코레이터에서 <strong>새로운 메소드를 추가</strong>할 수도 있다.<br>하지만 일반적으로 새로운 메소드를 추가하는 대신 <code>Component</code>에 원래 있던 메소드를 호출하기 전, 또는 후에 <strong>별도의 작업을 처리하는 방식</strong>으로 새로운 기능을 추가한다.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"활용예제\"><a href=\"#활용예제\" class=\"headerlink\" title=\"활용예제\"></a>활용예제</h2><h3 id=\"☕️-카페-주문시스템-만들기\"><a href=\"#☕️-카페-주문시스템-만들기\" class=\"headerlink\" title=\"☕️ 카페 주문시스템 만들기\"></a>☕️ 카페 주문시스템 만들기</h3><blockquote>\n<p><em>커피를 주문할 때는 스팀 우유나 두유, 모카를 추가하고, 그 위에 휘핑 크림을 얹기도 한다.<br>각각을 추가할 때마다 커피 가격이 올라가기 때문에 주문 시스템에서도 그런 점들을 모두 고려해야 한다.</em></p>\n</blockquote>\n<p>기존의 코드는 <strong>건드리지 않은 채로</strong> 확장을 통해서 새로운 행동을 간단하게 추가할 수 있는 <strong>데코레이터 패턴</strong>을 사용해보자.</p>\n<p>우선 특정 음료에서 시작해서 첨가물로 그 음료를 장식 해보자.</p>\n<ol>\n<li><code>DarkRoast</code> 객체를 가져온다.</li>\n<li><code>Mocha</code> 객체로 장식한다.</li>\n<li><code>Whip</code> 객체로 장식한다.</li>\n<li><code>cost()</code> 메소드를 호출한다. 이때 첨가물의 가격을 계산하는 일은 해당 객체들에게 위임된다.</li>\n</ol>\n<p>디자인을 바탕으로 코드를 만들어보자.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141609675-00fe88e7-909c-4349-9dc8-88f3eeca5d05.png\" alt=\"image\"></p>\n<h4 id=\"Beverage-추상클래스-구현\"><a href=\"#Beverage-추상클래스-구현\" class=\"headerlink\" title=\"Beverage 추상클래스 구현\"></a><code>Beverage</code> 추상클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String description = <span class=\"string\">&quot;Empty&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Beverage-를-확장하는-CondimentDecorator-구현\"><a href=\"#Beverage-를-확장하는-CondimentDecorator-구현\" class=\"headerlink\" title=\"Beverage 를 확장하는 CondimentDecorator 구현\"></a><code>Beverage</code> 를 확장하는 <code>CondimentDecorator</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CondimentDecorator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Beverage-를-활용해-음료-객체-구현\"><a href=\"#Beverage-를-활용해-음료-객체-구현\" class=\"headerlink\" title=\"Beverage 를 활용해 음료 객체 구현\"></a><code>Beverage</code> 를 활용해 음료 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Espresso</span> <span class=\"keyword\">extends</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Espresso</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = <span class=\"string\">&quot;에스프레소&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3500</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HouseBlend</span> <span class=\"keyword\">extends</span> <span class=\"title\">Beverage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HouseBlend</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = <span class=\"string\">&quot;하우스블렌드&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2000</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"CondimentDecorator-를-활용해-꾸며진-객체-구현\"><a href=\"#CondimentDecorator-를-활용해-꾸며진-객체-구현\" class=\"headerlink\" title=\"CondimentDecorator 를 활용해 꾸며진 객체 구현\"></a><code>CondimentDecorator</code> 를 활용해 꾸며진 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Mocha</span> <span class=\"keyword\">extends</span> <span class=\"title\">CondimentDecorator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Beverage beverage;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Mocha</span><span class=\"params\">(Beverage beverage)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.beverage = beverage;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> beverage.getDescription() + <span class=\"string\">&quot;, 모카&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">cost</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">500</span> + beverage.cost();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CoffeeStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\">        Beverage beverage = <span class=\"keyword\">new</span> Espresso();</span><br><span class=\"line\">        System.out.println(beverage.getDescription() + <span class=\"string\">&quot; cost : &quot;</span> + beverage.cost());</span><br><span class=\"line\"></span><br><span class=\"line\">        Beverage beverage1 = <span class=\"keyword\">new</span> DarkRoast();</span><br><span class=\"line\">        beverage1 = <span class=\"keyword\">new</span> Mocha(beverage1);</span><br><span class=\"line\">        beverage1 = <span class=\"keyword\">new</span> Mocha(beverage1);</span><br><span class=\"line\">        beverage1 = <span class=\"keyword\">new</span> Whip(beverage1);</span><br><span class=\"line\">        System.out.println(beverage1.getDescription() + <span class=\"string\">&quot; cost : &quot;</span> + beverage1.cost());</span><br><span class=\"line\"></span><br><span class=\"line\">        Beverage beverage2 = <span class=\"keyword\">new</span> HouseBlend();</span><br><span class=\"line\">        beverage2 = <span class=\"keyword\">new</span> Soy(beverage2);</span><br><span class=\"line\">        beverage2 = <span class=\"keyword\">new</span> Mocha(beverage2);</span><br><span class=\"line\">        beverage2 = <span class=\"keyword\">new</span> Whip(beverage2);</span><br><span class=\"line\">        System.out.println(beverage2.getDescription() + <span class=\"string\">&quot; cost : &quot;</span> + beverage2.cost());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"디자인-원칙\"><a href=\"#디자인-원칙\" class=\"headerlink\" title=\"디자인 원칙\"></a>디자인 원칙</h3><blockquote>\n<p><strong>OCP(Open-Closed principle)</strong><br><em>클래스는 확장에 대해서는 열려 있어야하지만 코드 변경에 대해서는 닫혀 있어야 한다.</em></p>\n</blockquote>\n<hr>\n<h2 id=\"데코레이터가-적용된-예-자바-I-O\"><a href=\"#데코레이터가-적용된-예-자바-I-O\" class=\"headerlink\" title=\"데코레이터가 적용된 예 : 자바 I/O\"></a>데코레이터가 적용된 예 : 자바 I/O</h2><p>개발하면서 스트림의 개념이 잘 잡히지 않았을때.. 자바 I/O API를 보고 한숨을 쉬는 사람들이 나말고도 많았을 거라 생각한다.<br>기반스트림과 보조스트림을 데코레이터 패턴을 배우고 나서 머리속에서 다시 정리해보면 많은 클래스들이 좀더 친근하게 다가 온다.</p>\n<p>실제 자바에서 클래스 다이어그램을 그려보면</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141609807-708dd839-da97-46a2-832b-2c82ecc82bd4.png\" alt=\"image\"></p>\n<p><code>InputStream</code> 이 추상구성요소이고 모든 보조스트림의 조상인 <code>FilterInputStream</code> 이 추상 데코레이터 이다.<br><code>FilterInputStream</code>을 상속받아 구현하는 <code>BufferedInputStream</code> 클래스들이 구상 데코레이터이다.<br><code>InputStream</code>을 상속받는 <code>FileInputStream</code> 같은 기반 스트림들은 데코레이터로 포장될 구상 구성요소 역할을 한다.</p>\n"},{"title":"컴포지트 패턴","_content":"\n## 🌲 컴포지트 패턴이란\n\n> 객체들을 트리 구조로 구성하여 부분과 전체를 나타내는 계층구조로 만들수 있다.\n> 클라이언트에서 개별 객체와 다른 객체들오 구성된 복합 객체(composite)를 똑같은 방법으로 다룰 수 있다.\n\n식당 메뉴를 예로들어 생각해본다면\n중첩되어 있는 메뉴 그룹과 메뉴 항목을 똑같은 구조 내에서 처리할수 있게끔 하는 것이다.\n\n메뉴와 메뉴항목을 같은 구조에 집어넣어서 **부분-전체 계층구조**를 생성할수 있다.\n\n이런 복합구조를 사용하면 복합 객체와 개별 객체에 대해 구분없이 똑같은 작업을 적용할 수 있다.\n\n---\n\n## ⛵️ 컴포지트 패턴의 이해\n\n![image](https://user-images.githubusercontent.com/55419159/141273718-978b7d56-3eb8-496d-99cb-367e5a2380b6.png)\n\n### 🚀 활용 예시\n\n_컴포지트 패턴을 메뉴에 적용시켜본다면..._\n\n우선 구성요소 **인터페이스를 만드는 것**부터 시작해보자.\n\n이 인터페이스는 메뉴와 메뉴 항목 모두에 적용되는 **공통 인터페이스** 역할을 하며, 이 인터페이스가 있어야만 그 들을 **똑같은 방법**으로 처리할 수 있다. \n\n즉 메뉴와 메뉴 항목에 대해서 같은 메소드를 호출 할 수 있게 된다.\n\n![image](https://user-images.githubusercontent.com/55419159/141273915-f2bb7cba-e951-4955-92e0-2ab3eb8ed03a.png)\n\n#### `Component` 추상클래스 구현\n\n```java\npublic abstract class MenuComponent {\n    \n    public void add(MenuComponent menuComponent) {\n        throw new UnsupportedOperationException();\n    }\n    \n    public void remove(MenuComponent menuComponent) {\n        throw new UnsupportedOperationException();\n    }\n    \n    public MenuComponent getChild(int i) {\n        throw new UnsupportedOperationException();\n    }\n    \n    public String getName() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public String getDescription() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public double getPrice() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public boolean isVegetarian() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public void print() {\n        throw new UnsupportedOperationException();\n    }\n}\n```\n\n#### `Component` 를 상속받는 `Leaf` 객체 구현\n\n```java\npublic class MenuItem extends MenuComponent { //MenuItem은 Leaf에 해당한다.\n\n    String name;\n    String description;\n    boolean vegetarian;\n    double price;\n\n    public MenuItem(String name, String description, boolean vegetarian, double price) {\n        this.name = name;\n        this.description = description;\n        this.vegetarian = vegetarian;\n        this.price = price;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public double getPrice() {\n        return price;\n    }\n\n    public boolean isVegetarian() {\n        return vegetarian;\n    }\n\n    public void print() { //중요 - Composite 객체에서 공유하게 된다.\n        System.out.println(getName());\n        if (isVegetarian()) System.out.println(\"(v)\");\n        System.out.println(getPrice());\n        System.out.println(getDescription());\n    }\n}\n```\n\n#### `Component` 를 상속받는 `Composite` 객체 구현\n\n```java\npublic class Menu extends Menucomponent {\n\n    ArrayList<Menucomponent> menuComponents = new ArrayList();\n    String name;\n    String description;\n\n    public Menu(String name, String description) {\n        this.name = name;\n        this.description = description;\n    }\n\n    public void add(MenuComponent menuComponent) {\n        menuComponents.add(menuComponent);\n    }\n\n    public void remove(MenuComponent menuComponent) {\n        menuComponents.remove(menuComponent);\n    }\n\n    public MenuComponent getChild(int i) {\n        return menuComponents.get(i);\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void print() { //중요 - Leaf 객체에서 공유하게 된다.\n        System.out.println(getName());\n        System.out.println(getDescription());\n        System.out.println(\"----------------------------------------------------\");\n        Iterator<MenuComponent> iterator = menuComponents.iterator();    //Menu 정보 뿐아니라 Menu안의 아이템까지 출력\n        while (iterator.hasNext()) {\n            MenuComponent menuComponent = iterator.next();\n            menuComponent.print();\n        }\n    }\n}\n```\n\n\n#### `Client` 객체 구현\n\n```java\npublic class Waitress {\n\n    MenuComponent allMenus;\n\n    public Waitress(menuComponent allMenus) {\n        this.allMenus = allMenus;\n    }\n\n    public void printMenu() {\n        allMenus.print();\n    }\n}\n```\n\n\n#### 테스트\n\n```java\npublic class MenuTestDrive {\n    public static void main(String args[]) {\n\n        MenuComponent pancakeHouseMenu = new Menu(\"펜케이크 하우스 메뉴\", \"아침 메뉴\");\n        MenuComponent dinerMenu = new Menu(\"객체마을 식당 메뉴\", \"점심 메뉴\");\n        MenuComponent cafeMenu = new Menu(\"카페 메뉴\", \"저녁 메뉴\");\n        MenuComponent dessertMenu = new Menu(\"디저트 메뉴\", \"디저트를 즐겨 보세요\");\n        MenuComponent allMenus = new Menu(\"전체 메뉴\", \"전체 메뉴\");\n\n        allMenus.add(pancakeHouseMenu);\n        allMenus.add(dinerMenu);\n        allMenus.add(cafeMenu);\n\n        dinerMenu.add(new menuItem(\"파스타\", \"마리나라 소스 스파게티.\", true, 3.89));\n        dinerMenu.add(dessertMenu);\n\n        dessertMenu.add(new menuItem(\"애플 파이\", \"바삭바삭한 크러스트에 바닐라아이스크림이\", true, 1.59));\n\n        Waitress waitress = new Waitress(allMenus);\n        waitress.printMenu();\n    }\n}\n```\n\n---\n\n## 🧨 컴포지트패턴 vs 단일역할원칙\n\n한 클래스에서 한 역할만 맡아야 한다고 했는데, \n여기서는 **계층구조를 관리하는 역할**과 **메뉴관련 작업을 처리하는 역할** 두 가지를 처리하고 있다\n\n> 컴포지트 패턴은 **단일 역할 원칙**을 깨면서, 대신에 **투명성을 확보**하기 위한 패턴이다.\n\n\n---\n\n## 🛠 컴포지트 + 이터레이터 패턴 적용\n\n### 컴포지트 패턴 내에서 이터레이터 패턴을 활용해보자\n\n#### `Composite`, `Leaf` 객체에 이터레이터 적용\n\n```java\npublic class Menu extends MenuComponent {\n//나머지 코드는 그대로\n\n    public Iterator<MenuComponent> createIterator() {\n        return new CompositeIterator(menucomponents.iterator());\n    }\n}\n\npublic class MenuItem extends MenuComponent {\n//나머지 코드는 그대로\n\n    public Iterator<MenuComponent> createIterator() {\n        return new NullIterator();//널 반복자.\n    }\n}\n```\n\n#### `NullIterator` 란\n\n`MenuItem`에 대해서는 반복작업을 할 대상이없다. 그래서 `createIterator()`메소드를 구현하기가 애매해진다.\n\n1. 그냥 null을 리턴한다. 그렇다면 클라이언트에서 리턴값이 널인지 아닌지를 판단하기 위해 조건문을 써야하는 단점이있다. \n2. hasNext()가 호출되었을 때 무조건 false 를 리턴하는 반복자를 리턴한다.\n\n두번째 방법은 여전히 반복자를 리턴할수 있기 때문에 클라이언트에서는 리턴된 객체가 **널 객체인지에 대해 신경 쓸 필요가 없다.**\n\n이렇게 아무일도 하지 않는 반복자를 `NullIterator`라고 부른다.\n\n```java\npublic class NullIterator implements Iterator<Object> {\n    @Override\n    public boolean hasNext() {\n        return false;\n    }\n\n    @Override\n    public Object next() {\n        return null;\n    }\n\n    @Override\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n}\n```\n\n#### `Iterator` 구현\n\n```java\npublic class CompositeIterator implements Iterator {\n\n    Stack<Iterator<MenuComponent>> stack = new Stack();\n\n    public CompositeIterator(Iterator iterator) {\n        stack.push(iterator);\n    }\n\n    public MenuComponent next() {\n        Iterator<MenuComponent> iterator = stack.peek();\n        MenuComponent component = iterator.next();\n        if (component instanceof Menu) stack.push(((Menu) component).iterator());\n        return component;\n    }\n\n    public boolean hasNext() {\n        if (stack.empty()) return false;\n\n        Iterator<MenuComponent> iterator = stack.peek();\n\n        if (!iterator.hasNext()) {\n            stack.pop();\n            return hasNext();\n        } else {\n            return true;\n        }\n    }\n\n    public void remove() {\n        throw new UnsupporttedOperationException();\n    }\n}\n```\n\n#### `Iterator` 를 적용한 `Client` 구현\n\n```java\npublic class Waitress {\n\n    MenuComponent allMenus;\n\n    public Waitress(MenuComponent allMenus) {\n        this.allMenus = allMenus;\n    }\n\n    public void printMenu() {\n        allMenus.print();\n    }\n\n    public void printVegetarianMenu() { //이 메소드는 '채식메뉴 인 것'만 추려낸다\n        Iterator<MenuComponent> iterator = allMenus.createIterator();\n        while (iterator.hasNext()) {\n            Menucomponent menuComponent = iterator.next();\n            try {\n                if (menuComponent.isVegetarian()) menuComponent.print();\n            } catch (UnsupportedOpoerationException e) {\n            }\n        }\n    }\n}\n```\n\n### try 문을 쓴 이유\n\n- 위와 같이 `try/catch` 코드를 쓴이유는 `instanceof` 를 써서 실행중에 형식을 확인하여 `isVegetarian()`을 호출할 수도 있다.\n하지만 그렇게하면 `Menu`와 `MenuItem`을 **똑같이 다루지 않게 되는 셈**이되어 **투명성**을 잃어버리게 된다.\n\n- `Menu` 의 `isVegetarian()`메소드에서 무조건 `false`를 리턴하도록 하는 방법도 있다. \n이렇게하면 코드도 간단해지고 **투명성도 계속 유지**할수 있다. \n\n- 하지만 위 예제에서는 `Menu`에서는 그 메소드가 **지원되지 않는다는 것**을 분명하게 나타내기 위해서 사용되었다.\n\n\n\n","source":"_posts/디자인-패턴/2021-11-11-컴포지트-패턴.md","raw":"---\ntitle: 컴포지트 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 컴포지트\n---\n\n## 🌲 컴포지트 패턴이란\n\n> 객체들을 트리 구조로 구성하여 부분과 전체를 나타내는 계층구조로 만들수 있다.\n> 클라이언트에서 개별 객체와 다른 객체들오 구성된 복합 객체(composite)를 똑같은 방법으로 다룰 수 있다.\n\n식당 메뉴를 예로들어 생각해본다면\n중첩되어 있는 메뉴 그룹과 메뉴 항목을 똑같은 구조 내에서 처리할수 있게끔 하는 것이다.\n\n메뉴와 메뉴항목을 같은 구조에 집어넣어서 **부분-전체 계층구조**를 생성할수 있다.\n\n이런 복합구조를 사용하면 복합 객체와 개별 객체에 대해 구분없이 똑같은 작업을 적용할 수 있다.\n\n---\n\n## ⛵️ 컴포지트 패턴의 이해\n\n![image](https://user-images.githubusercontent.com/55419159/141273718-978b7d56-3eb8-496d-99cb-367e5a2380b6.png)\n\n### 🚀 활용 예시\n\n_컴포지트 패턴을 메뉴에 적용시켜본다면..._\n\n우선 구성요소 **인터페이스를 만드는 것**부터 시작해보자.\n\n이 인터페이스는 메뉴와 메뉴 항목 모두에 적용되는 **공통 인터페이스** 역할을 하며, 이 인터페이스가 있어야만 그 들을 **똑같은 방법**으로 처리할 수 있다. \n\n즉 메뉴와 메뉴 항목에 대해서 같은 메소드를 호출 할 수 있게 된다.\n\n![image](https://user-images.githubusercontent.com/55419159/141273915-f2bb7cba-e951-4955-92e0-2ab3eb8ed03a.png)\n\n#### `Component` 추상클래스 구현\n\n```java\npublic abstract class MenuComponent {\n    \n    public void add(MenuComponent menuComponent) {\n        throw new UnsupportedOperationException();\n    }\n    \n    public void remove(MenuComponent menuComponent) {\n        throw new UnsupportedOperationException();\n    }\n    \n    public MenuComponent getChild(int i) {\n        throw new UnsupportedOperationException();\n    }\n    \n    public String getName() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public String getDescription() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public double getPrice() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public boolean isVegetarian() {\n        throw new UnsupportedOperationException();\n    }\n    \n    public void print() {\n        throw new UnsupportedOperationException();\n    }\n}\n```\n\n#### `Component` 를 상속받는 `Leaf` 객체 구현\n\n```java\npublic class MenuItem extends MenuComponent { //MenuItem은 Leaf에 해당한다.\n\n    String name;\n    String description;\n    boolean vegetarian;\n    double price;\n\n    public MenuItem(String name, String description, boolean vegetarian, double price) {\n        this.name = name;\n        this.description = description;\n        this.vegetarian = vegetarian;\n        this.price = price;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public double getPrice() {\n        return price;\n    }\n\n    public boolean isVegetarian() {\n        return vegetarian;\n    }\n\n    public void print() { //중요 - Composite 객체에서 공유하게 된다.\n        System.out.println(getName());\n        if (isVegetarian()) System.out.println(\"(v)\");\n        System.out.println(getPrice());\n        System.out.println(getDescription());\n    }\n}\n```\n\n#### `Component` 를 상속받는 `Composite` 객체 구현\n\n```java\npublic class Menu extends Menucomponent {\n\n    ArrayList<Menucomponent> menuComponents = new ArrayList();\n    String name;\n    String description;\n\n    public Menu(String name, String description) {\n        this.name = name;\n        this.description = description;\n    }\n\n    public void add(MenuComponent menuComponent) {\n        menuComponents.add(menuComponent);\n    }\n\n    public void remove(MenuComponent menuComponent) {\n        menuComponents.remove(menuComponent);\n    }\n\n    public MenuComponent getChild(int i) {\n        return menuComponents.get(i);\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void print() { //중요 - Leaf 객체에서 공유하게 된다.\n        System.out.println(getName());\n        System.out.println(getDescription());\n        System.out.println(\"----------------------------------------------------\");\n        Iterator<MenuComponent> iterator = menuComponents.iterator();    //Menu 정보 뿐아니라 Menu안의 아이템까지 출력\n        while (iterator.hasNext()) {\n            MenuComponent menuComponent = iterator.next();\n            menuComponent.print();\n        }\n    }\n}\n```\n\n\n#### `Client` 객체 구현\n\n```java\npublic class Waitress {\n\n    MenuComponent allMenus;\n\n    public Waitress(menuComponent allMenus) {\n        this.allMenus = allMenus;\n    }\n\n    public void printMenu() {\n        allMenus.print();\n    }\n}\n```\n\n\n#### 테스트\n\n```java\npublic class MenuTestDrive {\n    public static void main(String args[]) {\n\n        MenuComponent pancakeHouseMenu = new Menu(\"펜케이크 하우스 메뉴\", \"아침 메뉴\");\n        MenuComponent dinerMenu = new Menu(\"객체마을 식당 메뉴\", \"점심 메뉴\");\n        MenuComponent cafeMenu = new Menu(\"카페 메뉴\", \"저녁 메뉴\");\n        MenuComponent dessertMenu = new Menu(\"디저트 메뉴\", \"디저트를 즐겨 보세요\");\n        MenuComponent allMenus = new Menu(\"전체 메뉴\", \"전체 메뉴\");\n\n        allMenus.add(pancakeHouseMenu);\n        allMenus.add(dinerMenu);\n        allMenus.add(cafeMenu);\n\n        dinerMenu.add(new menuItem(\"파스타\", \"마리나라 소스 스파게티.\", true, 3.89));\n        dinerMenu.add(dessertMenu);\n\n        dessertMenu.add(new menuItem(\"애플 파이\", \"바삭바삭한 크러스트에 바닐라아이스크림이\", true, 1.59));\n\n        Waitress waitress = new Waitress(allMenus);\n        waitress.printMenu();\n    }\n}\n```\n\n---\n\n## 🧨 컴포지트패턴 vs 단일역할원칙\n\n한 클래스에서 한 역할만 맡아야 한다고 했는데, \n여기서는 **계층구조를 관리하는 역할**과 **메뉴관련 작업을 처리하는 역할** 두 가지를 처리하고 있다\n\n> 컴포지트 패턴은 **단일 역할 원칙**을 깨면서, 대신에 **투명성을 확보**하기 위한 패턴이다.\n\n\n---\n\n## 🛠 컴포지트 + 이터레이터 패턴 적용\n\n### 컴포지트 패턴 내에서 이터레이터 패턴을 활용해보자\n\n#### `Composite`, `Leaf` 객체에 이터레이터 적용\n\n```java\npublic class Menu extends MenuComponent {\n//나머지 코드는 그대로\n\n    public Iterator<MenuComponent> createIterator() {\n        return new CompositeIterator(menucomponents.iterator());\n    }\n}\n\npublic class MenuItem extends MenuComponent {\n//나머지 코드는 그대로\n\n    public Iterator<MenuComponent> createIterator() {\n        return new NullIterator();//널 반복자.\n    }\n}\n```\n\n#### `NullIterator` 란\n\n`MenuItem`에 대해서는 반복작업을 할 대상이없다. 그래서 `createIterator()`메소드를 구현하기가 애매해진다.\n\n1. 그냥 null을 리턴한다. 그렇다면 클라이언트에서 리턴값이 널인지 아닌지를 판단하기 위해 조건문을 써야하는 단점이있다. \n2. hasNext()가 호출되었을 때 무조건 false 를 리턴하는 반복자를 리턴한다.\n\n두번째 방법은 여전히 반복자를 리턴할수 있기 때문에 클라이언트에서는 리턴된 객체가 **널 객체인지에 대해 신경 쓸 필요가 없다.**\n\n이렇게 아무일도 하지 않는 반복자를 `NullIterator`라고 부른다.\n\n```java\npublic class NullIterator implements Iterator<Object> {\n    @Override\n    public boolean hasNext() {\n        return false;\n    }\n\n    @Override\n    public Object next() {\n        return null;\n    }\n\n    @Override\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n}\n```\n\n#### `Iterator` 구현\n\n```java\npublic class CompositeIterator implements Iterator {\n\n    Stack<Iterator<MenuComponent>> stack = new Stack();\n\n    public CompositeIterator(Iterator iterator) {\n        stack.push(iterator);\n    }\n\n    public MenuComponent next() {\n        Iterator<MenuComponent> iterator = stack.peek();\n        MenuComponent component = iterator.next();\n        if (component instanceof Menu) stack.push(((Menu) component).iterator());\n        return component;\n    }\n\n    public boolean hasNext() {\n        if (stack.empty()) return false;\n\n        Iterator<MenuComponent> iterator = stack.peek();\n\n        if (!iterator.hasNext()) {\n            stack.pop();\n            return hasNext();\n        } else {\n            return true;\n        }\n    }\n\n    public void remove() {\n        throw new UnsupporttedOperationException();\n    }\n}\n```\n\n#### `Iterator` 를 적용한 `Client` 구현\n\n```java\npublic class Waitress {\n\n    MenuComponent allMenus;\n\n    public Waitress(MenuComponent allMenus) {\n        this.allMenus = allMenus;\n    }\n\n    public void printMenu() {\n        allMenus.print();\n    }\n\n    public void printVegetarianMenu() { //이 메소드는 '채식메뉴 인 것'만 추려낸다\n        Iterator<MenuComponent> iterator = allMenus.createIterator();\n        while (iterator.hasNext()) {\n            Menucomponent menuComponent = iterator.next();\n            try {\n                if (menuComponent.isVegetarian()) menuComponent.print();\n            } catch (UnsupportedOpoerationException e) {\n            }\n        }\n    }\n}\n```\n\n### try 문을 쓴 이유\n\n- 위와 같이 `try/catch` 코드를 쓴이유는 `instanceof` 를 써서 실행중에 형식을 확인하여 `isVegetarian()`을 호출할 수도 있다.\n하지만 그렇게하면 `Menu`와 `MenuItem`을 **똑같이 다루지 않게 되는 셈**이되어 **투명성**을 잃어버리게 된다.\n\n- `Menu` 의 `isVegetarian()`메소드에서 무조건 `false`를 리턴하도록 하는 방법도 있다. \n이렇게하면 코드도 간단해지고 **투명성도 계속 유지**할수 있다. \n\n- 하지만 위 예제에서는 `Menu`에서는 그 메소드가 **지원되지 않는다는 것**을 분명하게 나타내기 위해서 사용되었다.\n\n\n\n","slug":"디자인-패턴/2021-11-11-컴포지트-패턴","published":1,"date":"2021-11-11T07:52:55.365Z","updated":"2021-11-11T10:05:19.599Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fg000ljd9k4s2fcdqc","content":"<h2 id=\"🌲-컴포지트-패턴이란\"><a href=\"#🌲-컴포지트-패턴이란\" class=\"headerlink\" title=\"🌲 컴포지트 패턴이란\"></a>🌲 컴포지트 패턴이란</h2><blockquote>\n<p>객체들을 트리 구조로 구성하여 부분과 전체를 나타내는 계층구조로 만들수 있다.<br>클라이언트에서 개별 객체와 다른 객체들오 구성된 복합 객체(composite)를 똑같은 방법으로 다룰 수 있다.</p>\n</blockquote>\n<p>식당 메뉴를 예로들어 생각해본다면<br>중첩되어 있는 메뉴 그룹과 메뉴 항목을 똑같은 구조 내에서 처리할수 있게끔 하는 것이다.</p>\n<p>메뉴와 메뉴항목을 같은 구조에 집어넣어서 <strong>부분-전체 계층구조</strong>를 생성할수 있다.</p>\n<p>이런 복합구조를 사용하면 복합 객체와 개별 객체에 대해 구분없이 똑같은 작업을 적용할 수 있다.</p>\n<hr>\n<h2 id=\"⛵️-컴포지트-패턴의-이해\"><a href=\"#⛵️-컴포지트-패턴의-이해\" class=\"headerlink\" title=\"⛵️ 컴포지트 패턴의 이해\"></a>⛵️ 컴포지트 패턴의 이해</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/141273718-978b7d56-3eb8-496d-99cb-367e5a2380b6.png\" alt=\"image\"></p>\n<h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>컴포지트 패턴을 메뉴에 적용시켜본다면…</em></p>\n<p>우선 구성요소 <strong>인터페이스를 만드는 것</strong>부터 시작해보자.</p>\n<p>이 인터페이스는 메뉴와 메뉴 항목 모두에 적용되는 <strong>공통 인터페이스</strong> 역할을 하며, 이 인터페이스가 있어야만 그 들을 <strong>똑같은 방법</strong>으로 처리할 수 있다. </p>\n<p>즉 메뉴와 메뉴 항목에 대해서 같은 메소드를 호출 할 수 있게 된다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141273915-f2bb7cba-e951-4955-92e0-2ab3eb8ed03a.png\" alt=\"image\"></p>\n<h4 id=\"Component-추상클래스-구현\"><a href=\"#Component-추상클래스-구현\" class=\"headerlink\" title=\"Component 추상클래스 구현\"></a><code>Component</code> 추상클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuComponent</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuComponent <span class=\"title\">getChild</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isVegetarian</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Component-를-상속받는-Leaf-객체-구현\"><a href=\"#Component-를-상속받는-Leaf-객체-구현\" class=\"headerlink\" title=\"Component 를 상속받는 Leaf 객체 구현\"></a><code>Component</code> 를 상속받는 <code>Leaf</code> 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuItem</span> <span class=\"keyword\">extends</span> <span class=\"title\">MenuComponent</span> </span>&#123; <span class=\"comment\">//MenuItem은 Leaf에 해당한다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    String description;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> vegetarian;</span><br><span class=\"line\">    <span class=\"keyword\">double</span> price;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MenuItem</span><span class=\"params\">(String name, String description, <span class=\"keyword\">boolean</span> vegetarian, <span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = description;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.vegetarian = vegetarian;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.price = price;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isVegetarian</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> vegetarian;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//중요 - Composite 객체에서 공유하게 된다.</span></span><br><span class=\"line\">        System.out.println(getName());</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isVegetarian()) System.out.println(<span class=\"string\">&quot;(v)&quot;</span>);</span><br><span class=\"line\">        System.out.println(getPrice());</span><br><span class=\"line\">        System.out.println(getDescription());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Component-를-상속받는-Composite-객체-구현\"><a href=\"#Component-를-상속받는-Composite-객체-구현\" class=\"headerlink\" title=\"Component 를 상속받는 Composite 객체 구현\"></a><code>Component</code> 를 상속받는 <code>Composite</code> 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">Menucomponent</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ArrayList&lt;Menucomponent&gt; menuComponents = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    String description;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Menu</span><span class=\"params\">(String name, String description)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        menuComponents.add(menuComponent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        menuComponents.remove(menuComponent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuComponent <span class=\"title\">getChild</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuComponents.get(i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//중요 - Leaf 객체에서 공유하게 된다.</span></span><br><span class=\"line\">        System.out.println(getName());</span><br><span class=\"line\">        System.out.println(getDescription());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;----------------------------------------------------&quot;</span>);</span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = menuComponents.iterator();    <span class=\"comment\">//Menu 정보 뿐아니라 Menu안의 아이템까지 출력</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            MenuComponent menuComponent = iterator.next();</span><br><span class=\"line\">            menuComponent.print();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Client-객체-구현\"><a href=\"#Client-객체-구현\" class=\"headerlink\" title=\"Client 객체 구현\"></a><code>Client</code> 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Waitress</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    MenuComponent allMenus;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Waitress</span><span class=\"params\">(menuComponent allMenus)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.allMenus = allMenus;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        allMenus.print();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuTestDrive</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        MenuComponent pancakeHouseMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;펜케이크 하우스 메뉴&quot;</span>, <span class=\"string\">&quot;아침 메뉴&quot;</span>);</span><br><span class=\"line\">        MenuComponent dinerMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;객체마을 식당 메뉴&quot;</span>, <span class=\"string\">&quot;점심 메뉴&quot;</span>);</span><br><span class=\"line\">        MenuComponent cafeMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;카페 메뉴&quot;</span>, <span class=\"string\">&quot;저녁 메뉴&quot;</span>);</span><br><span class=\"line\">        MenuComponent dessertMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;디저트 메뉴&quot;</span>, <span class=\"string\">&quot;디저트를 즐겨 보세요&quot;</span>);</span><br><span class=\"line\">        MenuComponent allMenus = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;전체 메뉴&quot;</span>, <span class=\"string\">&quot;전체 메뉴&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        allMenus.add(pancakeHouseMenu);</span><br><span class=\"line\">        allMenus.add(dinerMenu);</span><br><span class=\"line\">        allMenus.add(cafeMenu);</span><br><span class=\"line\"></span><br><span class=\"line\">        dinerMenu.add(<span class=\"keyword\">new</span> menuItem(<span class=\"string\">&quot;파스타&quot;</span>, <span class=\"string\">&quot;마리나라 소스 스파게티.&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">3.89</span>));</span><br><span class=\"line\">        dinerMenu.add(dessertMenu);</span><br><span class=\"line\"></span><br><span class=\"line\">        dessertMenu.add(<span class=\"keyword\">new</span> menuItem(<span class=\"string\">&quot;애플 파이&quot;</span>, <span class=\"string\">&quot;바삭바삭한 크러스트에 바닐라아이스크림이&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">1.59</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        Waitress waitress = <span class=\"keyword\">new</span> Waitress(allMenus);</span><br><span class=\"line\">        waitress.printMenu();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"🧨-컴포지트패턴-vs-단일역할원칙\"><a href=\"#🧨-컴포지트패턴-vs-단일역할원칙\" class=\"headerlink\" title=\"🧨 컴포지트패턴 vs 단일역할원칙\"></a>🧨 컴포지트패턴 vs 단일역할원칙</h2><p>한 클래스에서 한 역할만 맡아야 한다고 했는데,<br>여기서는 <strong>계층구조를 관리하는 역할</strong>과 <strong>메뉴관련 작업을 처리하는 역할</strong> 두 가지를 처리하고 있다</p>\n<blockquote>\n<p>컴포지트 패턴은 <strong>단일 역할 원칙</strong>을 깨면서, 대신에 <strong>투명성을 확보</strong>하기 위한 패턴이다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🛠-컴포지트-이터레이터-패턴-적용\"><a href=\"#🛠-컴포지트-이터레이터-패턴-적용\" class=\"headerlink\" title=\"🛠 컴포지트 + 이터레이터 패턴 적용\"></a>🛠 컴포지트 + 이터레이터 패턴 적용</h2><h3 id=\"컴포지트-패턴-내에서-이터레이터-패턴을-활용해보자\"><a href=\"#컴포지트-패턴-내에서-이터레이터-패턴을-활용해보자\" class=\"headerlink\" title=\"컴포지트 패턴 내에서 이터레이터 패턴을 활용해보자\"></a>컴포지트 패턴 내에서 이터레이터 패턴을 활용해보자</h3><h4 id=\"Composite-Leaf-객체에-이터레이터-적용\"><a href=\"#Composite-Leaf-객체에-이터레이터-적용\" class=\"headerlink\" title=\"Composite, Leaf 객체에 이터레이터 적용\"></a><code>Composite</code>, <code>Leaf</code> 객체에 이터레이터 적용</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">MenuComponent</span> </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//나머지 코드는 그대로</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuComponent&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CompositeIterator(menucomponents.iterator());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuItem</span> <span class=\"keyword\">extends</span> <span class=\"title\">MenuComponent</span> </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//나머지 코드는 그대로</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuComponent&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> NullIterator();<span class=\"comment\">//널 반복자.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"NullIterator-란\"><a href=\"#NullIterator-란\" class=\"headerlink\" title=\"NullIterator 란\"></a><code>NullIterator</code> 란</h4><p><code>MenuItem</code>에 대해서는 반복작업을 할 대상이없다. 그래서 <code>createIterator()</code>메소드를 구현하기가 애매해진다.</p>\n<ol>\n<li>그냥 null을 리턴한다. 그렇다면 클라이언트에서 리턴값이 널인지 아닌지를 판단하기 위해 조건문을 써야하는 단점이있다. </li>\n<li>hasNext()가 호출되었을 때 무조건 false 를 리턴하는 반복자를 리턴한다.</li>\n</ol>\n<p>두번째 방법은 여전히 반복자를 리턴할수 있기 때문에 클라이언트에서는 리턴된 객체가 <strong>널 객체인지에 대해 신경 쓸 필요가 없다.</strong></p>\n<p>이렇게 아무일도 하지 않는 반복자를 <code>NullIterator</code>라고 부른다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NullIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Iterator-구현\"><a href=\"#Iterator-구현\" class=\"headerlink\" title=\"Iterator 구현\"></a><code>Iterator</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CompositeIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Stack&lt;Iterator&lt;MenuComponent&gt;&gt; stack = <span class=\"keyword\">new</span> Stack();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CompositeIterator</span><span class=\"params\">(Iterator iterator)</span> </span>&#123;</span><br><span class=\"line\">        stack.push(iterator);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuComponent <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = stack.peek();</span><br><span class=\"line\">        MenuComponent component = iterator.next();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (component <span class=\"keyword\">instanceof</span> Menu) stack.push(((Menu) component).iterator());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> component;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (stack.empty()) <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = stack.peek();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!iterator.hasNext()) &#123;</span><br><span class=\"line\">            stack.pop();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> hasNext();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupporttedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Iterator-를-적용한-Client-구현\"><a href=\"#Iterator-를-적용한-Client-구현\" class=\"headerlink\" title=\"Iterator 를 적용한 Client 구현\"></a><code>Iterator</code> 를 적용한 <code>Client</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Waitress</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    MenuComponent allMenus;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Waitress</span><span class=\"params\">(MenuComponent allMenus)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.allMenus = allMenus;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        allMenus.print();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printVegetarianMenu</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//이 메소드는 &#x27;채식메뉴 인 것&#x27;만 추려낸다</span></span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = allMenus.createIterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            Menucomponent menuComponent = iterator.next();</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (menuComponent.isVegetarian()) menuComponent.print();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (UnsupportedOpoerationException e) &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"try-문을-쓴-이유\"><a href=\"#try-문을-쓴-이유\" class=\"headerlink\" title=\"try 문을 쓴 이유\"></a>try 문을 쓴 이유</h3><ul>\n<li><p>위와 같이 <code>try/catch</code> 코드를 쓴이유는 <code>instanceof</code> 를 써서 실행중에 형식을 확인하여 <code>isVegetarian()</code>을 호출할 수도 있다.<br>하지만 그렇게하면 <code>Menu</code>와 <code>MenuItem</code>을 <strong>똑같이 다루지 않게 되는 셈</strong>이되어 <strong>투명성</strong>을 잃어버리게 된다.</p>\n</li>\n<li><p><code>Menu</code> 의 <code>isVegetarian()</code>메소드에서 무조건 <code>false</code>를 리턴하도록 하는 방법도 있다.<br>이렇게하면 코드도 간단해지고 <strong>투명성도 계속 유지</strong>할수 있다. </p>\n</li>\n<li><p>하지만 위 예제에서는 <code>Menu</code>에서는 그 메소드가 <strong>지원되지 않는다는 것</strong>을 분명하게 나타내기 위해서 사용되었다.</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"🌲-컴포지트-패턴이란\"><a href=\"#🌲-컴포지트-패턴이란\" class=\"headerlink\" title=\"🌲 컴포지트 패턴이란\"></a>🌲 컴포지트 패턴이란</h2><blockquote>\n<p>객체들을 트리 구조로 구성하여 부분과 전체를 나타내는 계층구조로 만들수 있다.<br>클라이언트에서 개별 객체와 다른 객체들오 구성된 복합 객체(composite)를 똑같은 방법으로 다룰 수 있다.</p>\n</blockquote>\n<p>식당 메뉴를 예로들어 생각해본다면<br>중첩되어 있는 메뉴 그룹과 메뉴 항목을 똑같은 구조 내에서 처리할수 있게끔 하는 것이다.</p>\n<p>메뉴와 메뉴항목을 같은 구조에 집어넣어서 <strong>부분-전체 계층구조</strong>를 생성할수 있다.</p>\n<p>이런 복합구조를 사용하면 복합 객체와 개별 객체에 대해 구분없이 똑같은 작업을 적용할 수 있다.</p>\n<hr>\n<h2 id=\"⛵️-컴포지트-패턴의-이해\"><a href=\"#⛵️-컴포지트-패턴의-이해\" class=\"headerlink\" title=\"⛵️ 컴포지트 패턴의 이해\"></a>⛵️ 컴포지트 패턴의 이해</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/141273718-978b7d56-3eb8-496d-99cb-367e5a2380b6.png\" alt=\"image\"></p>\n<h3 id=\"🚀-활용-예시\"><a href=\"#🚀-활용-예시\" class=\"headerlink\" title=\"🚀 활용 예시\"></a>🚀 활용 예시</h3><p><em>컴포지트 패턴을 메뉴에 적용시켜본다면…</em></p>\n<p>우선 구성요소 <strong>인터페이스를 만드는 것</strong>부터 시작해보자.</p>\n<p>이 인터페이스는 메뉴와 메뉴 항목 모두에 적용되는 <strong>공통 인터페이스</strong> 역할을 하며, 이 인터페이스가 있어야만 그 들을 <strong>똑같은 방법</strong>으로 처리할 수 있다. </p>\n<p>즉 메뉴와 메뉴 항목에 대해서 같은 메소드를 호출 할 수 있게 된다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141273915-f2bb7cba-e951-4955-92e0-2ab3eb8ed03a.png\" alt=\"image\"></p>\n<h4 id=\"Component-추상클래스-구현\"><a href=\"#Component-추상클래스-구현\" class=\"headerlink\" title=\"Component 추상클래스 구현\"></a><code>Component</code> 추상클래스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuComponent</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuComponent <span class=\"title\">getChild</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isVegetarian</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Component-를-상속받는-Leaf-객체-구현\"><a href=\"#Component-를-상속받는-Leaf-객체-구현\" class=\"headerlink\" title=\"Component 를 상속받는 Leaf 객체 구현\"></a><code>Component</code> 를 상속받는 <code>Leaf</code> 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuItem</span> <span class=\"keyword\">extends</span> <span class=\"title\">MenuComponent</span> </span>&#123; <span class=\"comment\">//MenuItem은 Leaf에 해당한다.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    String description;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> vegetarian;</span><br><span class=\"line\">    <span class=\"keyword\">double</span> price;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MenuItem</span><span class=\"params\">(String name, String description, <span class=\"keyword\">boolean</span> vegetarian, <span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = description;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.vegetarian = vegetarian;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.price = price;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getPrice</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isVegetarian</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> vegetarian;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//중요 - Composite 객체에서 공유하게 된다.</span></span><br><span class=\"line\">        System.out.println(getName());</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isVegetarian()) System.out.println(<span class=\"string\">&quot;(v)&quot;</span>);</span><br><span class=\"line\">        System.out.println(getPrice());</span><br><span class=\"line\">        System.out.println(getDescription());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Component-를-상속받는-Composite-객체-구현\"><a href=\"#Component-를-상속받는-Composite-객체-구현\" class=\"headerlink\" title=\"Component 를 상속받는 Composite 객체 구현\"></a><code>Component</code> 를 상속받는 <code>Composite</code> 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">Menucomponent</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ArrayList&lt;Menucomponent&gt; menuComponents = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    String description;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Menu</span><span class=\"params\">(String name, String description)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.description = description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        menuComponents.add(menuComponent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class=\"line\">        menuComponents.remove(menuComponent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuComponent <span class=\"title\">getChild</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> menuComponents.get(i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> description;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//중요 - Leaf 객체에서 공유하게 된다.</span></span><br><span class=\"line\">        System.out.println(getName());</span><br><span class=\"line\">        System.out.println(getDescription());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;----------------------------------------------------&quot;</span>);</span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = menuComponents.iterator();    <span class=\"comment\">//Menu 정보 뿐아니라 Menu안의 아이템까지 출력</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            MenuComponent menuComponent = iterator.next();</span><br><span class=\"line\">            menuComponent.print();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Client-객체-구현\"><a href=\"#Client-객체-구현\" class=\"headerlink\" title=\"Client 객체 구현\"></a><code>Client</code> 객체 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Waitress</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    MenuComponent allMenus;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Waitress</span><span class=\"params\">(menuComponent allMenus)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.allMenus = allMenus;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        allMenus.print();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuTestDrive</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        MenuComponent pancakeHouseMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;펜케이크 하우스 메뉴&quot;</span>, <span class=\"string\">&quot;아침 메뉴&quot;</span>);</span><br><span class=\"line\">        MenuComponent dinerMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;객체마을 식당 메뉴&quot;</span>, <span class=\"string\">&quot;점심 메뉴&quot;</span>);</span><br><span class=\"line\">        MenuComponent cafeMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;카페 메뉴&quot;</span>, <span class=\"string\">&quot;저녁 메뉴&quot;</span>);</span><br><span class=\"line\">        MenuComponent dessertMenu = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;디저트 메뉴&quot;</span>, <span class=\"string\">&quot;디저트를 즐겨 보세요&quot;</span>);</span><br><span class=\"line\">        MenuComponent allMenus = <span class=\"keyword\">new</span> Menu(<span class=\"string\">&quot;전체 메뉴&quot;</span>, <span class=\"string\">&quot;전체 메뉴&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        allMenus.add(pancakeHouseMenu);</span><br><span class=\"line\">        allMenus.add(dinerMenu);</span><br><span class=\"line\">        allMenus.add(cafeMenu);</span><br><span class=\"line\"></span><br><span class=\"line\">        dinerMenu.add(<span class=\"keyword\">new</span> menuItem(<span class=\"string\">&quot;파스타&quot;</span>, <span class=\"string\">&quot;마리나라 소스 스파게티.&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">3.89</span>));</span><br><span class=\"line\">        dinerMenu.add(dessertMenu);</span><br><span class=\"line\"></span><br><span class=\"line\">        dessertMenu.add(<span class=\"keyword\">new</span> menuItem(<span class=\"string\">&quot;애플 파이&quot;</span>, <span class=\"string\">&quot;바삭바삭한 크러스트에 바닐라아이스크림이&quot;</span>, <span class=\"keyword\">true</span>, <span class=\"number\">1.59</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        Waitress waitress = <span class=\"keyword\">new</span> Waitress(allMenus);</span><br><span class=\"line\">        waitress.printMenu();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"🧨-컴포지트패턴-vs-단일역할원칙\"><a href=\"#🧨-컴포지트패턴-vs-단일역할원칙\" class=\"headerlink\" title=\"🧨 컴포지트패턴 vs 단일역할원칙\"></a>🧨 컴포지트패턴 vs 단일역할원칙</h2><p>한 클래스에서 한 역할만 맡아야 한다고 했는데,<br>여기서는 <strong>계층구조를 관리하는 역할</strong>과 <strong>메뉴관련 작업을 처리하는 역할</strong> 두 가지를 처리하고 있다</p>\n<blockquote>\n<p>컴포지트 패턴은 <strong>단일 역할 원칙</strong>을 깨면서, 대신에 <strong>투명성을 확보</strong>하기 위한 패턴이다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🛠-컴포지트-이터레이터-패턴-적용\"><a href=\"#🛠-컴포지트-이터레이터-패턴-적용\" class=\"headerlink\" title=\"🛠 컴포지트 + 이터레이터 패턴 적용\"></a>🛠 컴포지트 + 이터레이터 패턴 적용</h2><h3 id=\"컴포지트-패턴-내에서-이터레이터-패턴을-활용해보자\"><a href=\"#컴포지트-패턴-내에서-이터레이터-패턴을-활용해보자\" class=\"headerlink\" title=\"컴포지트 패턴 내에서 이터레이터 패턴을 활용해보자\"></a>컴포지트 패턴 내에서 이터레이터 패턴을 활용해보자</h3><h4 id=\"Composite-Leaf-객체에-이터레이터-적용\"><a href=\"#Composite-Leaf-객체에-이터레이터-적용\" class=\"headerlink\" title=\"Composite, Leaf 객체에 이터레이터 적용\"></a><code>Composite</code>, <code>Leaf</code> 객체에 이터레이터 적용</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">MenuComponent</span> </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//나머지 코드는 그대로</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuComponent&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CompositeIterator(menucomponents.iterator());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MenuItem</span> <span class=\"keyword\">extends</span> <span class=\"title\">MenuComponent</span> </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//나머지 코드는 그대로</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Iterator&lt;MenuComponent&gt; <span class=\"title\">createIterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> NullIterator();<span class=\"comment\">//널 반복자.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"NullIterator-란\"><a href=\"#NullIterator-란\" class=\"headerlink\" title=\"NullIterator 란\"></a><code>NullIterator</code> 란</h4><p><code>MenuItem</code>에 대해서는 반복작업을 할 대상이없다. 그래서 <code>createIterator()</code>메소드를 구현하기가 애매해진다.</p>\n<ol>\n<li>그냥 null을 리턴한다. 그렇다면 클라이언트에서 리턴값이 널인지 아닌지를 판단하기 위해 조건문을 써야하는 단점이있다. </li>\n<li>hasNext()가 호출되었을 때 무조건 false 를 리턴하는 반복자를 리턴한다.</li>\n</ol>\n<p>두번째 방법은 여전히 반복자를 리턴할수 있기 때문에 클라이언트에서는 리턴된 객체가 <strong>널 객체인지에 대해 신경 쓸 필요가 없다.</strong></p>\n<p>이렇게 아무일도 하지 않는 반복자를 <code>NullIterator</code>라고 부른다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NullIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Iterator-구현\"><a href=\"#Iterator-구현\" class=\"headerlink\" title=\"Iterator 구현\"></a><code>Iterator</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CompositeIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Stack&lt;Iterator&lt;MenuComponent&gt;&gt; stack = <span class=\"keyword\">new</span> Stack();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CompositeIterator</span><span class=\"params\">(Iterator iterator)</span> </span>&#123;</span><br><span class=\"line\">        stack.push(iterator);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MenuComponent <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = stack.peek();</span><br><span class=\"line\">        MenuComponent component = iterator.next();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (component <span class=\"keyword\">instanceof</span> Menu) stack.push(((Menu) component).iterator());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> component;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (stack.empty()) <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = stack.peek();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!iterator.hasNext()) &#123;</span><br><span class=\"line\">            stack.pop();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> hasNext();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupporttedOperationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Iterator-를-적용한-Client-구현\"><a href=\"#Iterator-를-적용한-Client-구현\" class=\"headerlink\" title=\"Iterator 를 적용한 Client 구현\"></a><code>Iterator</code> 를 적용한 <code>Client</code> 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Waitress</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    MenuComponent allMenus;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Waitress</span><span class=\"params\">(MenuComponent allMenus)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.allMenus = allMenus;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMenu</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        allMenus.print();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printVegetarianMenu</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">//이 메소드는 &#x27;채식메뉴 인 것&#x27;만 추려낸다</span></span><br><span class=\"line\">        Iterator&lt;MenuComponent&gt; iterator = allMenus.createIterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            Menucomponent menuComponent = iterator.next();</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (menuComponent.isVegetarian()) menuComponent.print();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (UnsupportedOpoerationException e) &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"try-문을-쓴-이유\"><a href=\"#try-문을-쓴-이유\" class=\"headerlink\" title=\"try 문을 쓴 이유\"></a>try 문을 쓴 이유</h3><ul>\n<li><p>위와 같이 <code>try/catch</code> 코드를 쓴이유는 <code>instanceof</code> 를 써서 실행중에 형식을 확인하여 <code>isVegetarian()</code>을 호출할 수도 있다.<br>하지만 그렇게하면 <code>Menu</code>와 <code>MenuItem</code>을 <strong>똑같이 다루지 않게 되는 셈</strong>이되어 <strong>투명성</strong>을 잃어버리게 된다.</p>\n</li>\n<li><p><code>Menu</code> 의 <code>isVegetarian()</code>메소드에서 무조건 <code>false</code>를 리턴하도록 하는 방법도 있다.<br>이렇게하면 코드도 간단해지고 <strong>투명성도 계속 유지</strong>할수 있다. </p>\n</li>\n<li><p>하지만 위 예제에서는 <code>Menu</code>에서는 그 메소드가 <strong>지원되지 않는다는 것</strong>을 분명하게 나타내기 위해서 사용되었다.</p>\n</li>\n</ul>\n"},{"title":"옵저버 패턴","_content":"\n## 🔭 옵저버 패턴이란\n\n> 옵저버 패턴(observer pattern)은 객체의 상태 변화를 관찰하는 **관찰자**들,\n> 즉 옵저버들의 목록을 객체에 등록하여 **상태 변화가 있을 때마다** 메서드 등을 통해 객체가 직접 목록의 각 **옵저버에게 통지하도록** 하는 디자인 패턴이다.\n\n### 클래스 다이어그램\n\n![image](https://user-images.githubusercontent.com/55419159/141607954-d5fd0a63-b644-4e8d-8004-5af5dc53da83.png)\n\n옵저버 패턴은 주제와 옵저버가 **느슨하게** 결합되어 있는 객체 디자인을 제공한다. 주제가 옵저버에 대해서 아는 것은 옵저버가 특정 인터페이스(Observer 인터페이스)를 구현 한다는 것 뿐이다.\n\n- 옵저버는 언제든지 새로 추가할 수 있음. (주제는 Observer인터페이스 구현하는 객체 목록에만 의존하기때문)\n- 새로운 형식의 옵저버를 추가하려해도 주제를 전혀 변경할 필요가 없음. (새로운 클래스에서 Observer 인터페이스만 구현해주면됨)\n- 주제나 옵저버가 바뀌더라도 서로에게 전혀 영향을 주지않음. 그래서 주제와 옵저버는 서로 독립적으로 재 사용할수 있음.\n\n느슨하게 결합하는 디자인을 사용하면 변경 사항이 생겨도 무난히 처리할 수 있는 유연한 객체지향 시스템을 구축할수 있다. (객체 사이의 상호 의존성을 최소화 할 수 있기 때문)\n\n### 디자인 원칙\n\n> 서로 상호작용을 하는 객체 사이에서는 가능하면 **느슨하게 결합**하는 디자인을 사용해야 한다.\n\n---\n\n## 활용예제\n\n### ☀️ 기상데이터 관찰\n\n날씨 데이터를 가지고 있는 회사와 데이터를 연동하여 여러종류의 각각의 디스플레이에 날씨데이터를 출력해줘야 하는 업무가 생겼다고 가정했을때. 아래의 기능이 필요하다.\n\n```java\ngetTemperature():온도\n\n        getHumidity():습도\n\n        getPressure():기압\n\n        measurementsChanged():새로운 기상 측정 데이터가 나올때마다 자동으로 호출되는 부분.\n```\n\n### 1. 옵저버 패턴 구현해보기\n\n![image](https://user-images.githubusercontent.com/55419159/141608207-0b9249cf-e475-4169-97c1-7c7d3e7a92a0.png)\n\n#### `Subject` 인터페이스 구현\n\n```java\npublic interface Subject {\n    void registerobserver(Observer observer);\n    void removeObserver(Observer observer);\n    void notifyObservers();\n}\n```\n\n#### `Observer` 인테페이스 구현\n\n```java\npublic interface Observer {\n    void update(float temp, float humidity, float pressure);\n}\n\npublic interface DisplayElement {\n    void display();\n}\n```\n\n#### `Subject`를 구현하는 `WeatherData` 생성\n\n```java\npublic class WeatherData implements Subject {\n\n    private List<Observer> observers = new ArrayList<>();\n    private float temperature;\n    private float humidity;\n    private float pressure;\n\n    public void measurementsChanged() {\n        this.notifyObservers();\n    }\n\n    public void setMeasurementsChanged(float t, float h, float p) {    //값이 세팅된다고 가정.\n        this.temperature = t;\n        this.humidity = h;\n        this.pressure = p;\n        this.measurementsChanged();\n    }\n\n    @Override\n    public void notifyObservers() {\n        for (Observer observer : observers) {\n            observer.update(this.temperature, this.humidity, this.pressure);\n        }\n    }\n\n    @Override\n    public void registerobserver(Observer observer) {\n        this.observers.add(observer);\n    }\n\n    @Override\n    public void removeObserver(Observer observer) {\n        if (observers.contains(observer)) observers.remove(observer);\n    }\n}\n```\n\n#### `Observer`를 구현하는 `CurrentConditions` 생성\n\n```java\npublic class CurrentConditions implements Observer, DisplayElement {\n\n    private float temperature;\n    private float humidity;\n    private Subject weatherData;\n\n    public CurrentConditions(Subject weatherData) {\n        this.weatherData = weatherData;\n        this.weatherData.registerobserver(this);    //옵저버 등록\n    }\n\n    @Override\n    public void display() {\n        System.out.println(\"Current conditions : \" + temperature + \" , \" + humidity);\n    }\n\n    @Override\n    public void update(float temp, float humidity, float pressure) {\n        this.temperature = temp;\n        this.humidity = humidity;\n        this.display();\n    }\n}\n```\n\n#### 테스트\n\n```java\npublic class WeatherStation {\n    public static void main(String[] args) {\n\n        WeatherData weatherData = new WeatherData();\n\n        CurrentConditions currentConditions = new CurrentConditions(weatherData);\n        StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);\n        ForecastDisplay forecastDisplay = new ForecastDisplay(weatherData);\n\n        weatherData.setMeasurementsChanged(85, 62, 36.7f);\n    }\n}\n```\n\n### 2. 자바 내장 옵저버 패턴 사용\n\n`java.util.Observer` 인터페이스와 `java.util.Observable` 클래스를 사용할수 있다.\n\n![image](https://user-images.githubusercontent.com/55419159/141608538-b814feab-5924-497c-bfb4-885ff8473279.png)\n\n#### `java.util.Observable`를 구현한 `WeatherData` 생성\n\n- 이전에 구현 했던것과 마찬가지로 `java.util.Observer` 인터페이스를 구현하고 `java.util.Observable` 객체의\n`addObserver()` 메소드를 호출하면 옵저버 목록에 추가되고, `deleteObserver()`를 호출하면 옵저버 목록에서 제거된다.\n\n- **연락을 돌리는 방법**은 `java.util.Observable`를 상속받는 주제 클래스에서 `setChanged()` 메소드를 호출해서 객체의 상태가 바뀌었다는 것을 알린 후 `notifyObservers()` 또는 `notifyObserver(Object arg)` 메소드를 호출하면 된다. (인자값을 넣어주는 메소드는 푸시방식으로 쓰임.)\n\n```java\npublic class WeatherData extends Observable {\n    private float temperature;\n    private float humidity;\n    private float pressure;\n\n    public void measurementsChanged() {\n        this.setChanged();    //상태가 바뀌었다는 플래그값을 바꿔줌.\n        this.notifyObservers(); //풀 방식을 사용해서 알림\n    }\n\n    public void setMeasurementsChanged(float t, float h, float p) {    //값이 세팅된다고 가정.\n        this.temperature = t;\n        this.humidity = h;\n        this.pressure = p;\n        this.measurementsChanged();\n    }\n\n    public float getTemperature() {\n        return temperature;\n    }\n    public float getHumidity() {\n        return humidity;\n    }\n    public float getPressure() {\n        return pressure;\n    }\n}\n```\n\n#### `java.util.Observer`를 구현한 `CurrentConditions` 생성\n\n- 옵저버 객체가 **연락을 받는 방법**은 `update(Observable o, Object arg)` 메소드를 구현한다.\n- `Observable o` 에는 연락을 보내는 주제 객체가 인자로 전달되고, `Object arg` 에는 `notifyObservers(Object arg)` 메소드에서 인자로 전달된 데이터 객체가 넘어온다. (데이터 객체가 지정되지 않은경우 `null`)\n\n```java\npublic class CurrentConditions implements Observer, DisplayElement {\n    private Observable observable;\n    private float temperature;\n    private float humidity;\n\n    public CurrentConditions(Observable observable) {\n        this.observable = observable;\n        this.observable.addObserver(this);\n    }\n\n    @Override\n    public void display() {\n        System.out.println(\"Current conditions : \" + temperature + \" , \" + humidity);\n    }\n\n    @Override\n    public void update(Observable o, Object arg) {\n        if (o instanceof WeatherData) {\n            WeatherData weatherData = (WeatherData) o;\n            this.temperature = weatherData.getTemperature();\n            this.humidity = weatherData.getHumidity();\n            this.display();\n        }\n    }\n}\n```\n\n#### `java.util.Observable` 의 단점\n\n1. `Observable` 은 클래스이기 때문에 **서브클래스**를 만들어야 한다. 이미 다른 수퍼클래스를 확장하고 있는 클래스에 `Observable`의 기능을 추가할수가 없어서 **재사용성에 제약**이 생긴다.\n2. `Observable` 인터페이스라는 것이 없기 때문에 자바에 내장된 Observer API 하고 잘 맞는 클래스를 직접 구현하는 것이 불가능하다.\n\n--- \n\n## 결론\n\n`java.util.Observable`을 확장한 클래스를 쓸 수 있는 상황이면\n`Observable API`를 쓰는 것도 괜찮지만 상황에 따라 직접 구현해야 할수도 있다.\n\n어떤방법을 쓰든 옵저버 패턴만 제대로 알고 있다면 그 패턴을 활용하는 API는 어떤 것이든 잘 활용할 수 있다.","source":"_posts/디자인-패턴/2021-11-13-옵저버-패턴.md","raw":"---\ntitle: 옵저버 패턴 \ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 옵저버\n---\n\n## 🔭 옵저버 패턴이란\n\n> 옵저버 패턴(observer pattern)은 객체의 상태 변화를 관찰하는 **관찰자**들,\n> 즉 옵저버들의 목록을 객체에 등록하여 **상태 변화가 있을 때마다** 메서드 등을 통해 객체가 직접 목록의 각 **옵저버에게 통지하도록** 하는 디자인 패턴이다.\n\n### 클래스 다이어그램\n\n![image](https://user-images.githubusercontent.com/55419159/141607954-d5fd0a63-b644-4e8d-8004-5af5dc53da83.png)\n\n옵저버 패턴은 주제와 옵저버가 **느슨하게** 결합되어 있는 객체 디자인을 제공한다. 주제가 옵저버에 대해서 아는 것은 옵저버가 특정 인터페이스(Observer 인터페이스)를 구현 한다는 것 뿐이다.\n\n- 옵저버는 언제든지 새로 추가할 수 있음. (주제는 Observer인터페이스 구현하는 객체 목록에만 의존하기때문)\n- 새로운 형식의 옵저버를 추가하려해도 주제를 전혀 변경할 필요가 없음. (새로운 클래스에서 Observer 인터페이스만 구현해주면됨)\n- 주제나 옵저버가 바뀌더라도 서로에게 전혀 영향을 주지않음. 그래서 주제와 옵저버는 서로 독립적으로 재 사용할수 있음.\n\n느슨하게 결합하는 디자인을 사용하면 변경 사항이 생겨도 무난히 처리할 수 있는 유연한 객체지향 시스템을 구축할수 있다. (객체 사이의 상호 의존성을 최소화 할 수 있기 때문)\n\n### 디자인 원칙\n\n> 서로 상호작용을 하는 객체 사이에서는 가능하면 **느슨하게 결합**하는 디자인을 사용해야 한다.\n\n---\n\n## 활용예제\n\n### ☀️ 기상데이터 관찰\n\n날씨 데이터를 가지고 있는 회사와 데이터를 연동하여 여러종류의 각각의 디스플레이에 날씨데이터를 출력해줘야 하는 업무가 생겼다고 가정했을때. 아래의 기능이 필요하다.\n\n```java\ngetTemperature():온도\n\n        getHumidity():습도\n\n        getPressure():기압\n\n        measurementsChanged():새로운 기상 측정 데이터가 나올때마다 자동으로 호출되는 부분.\n```\n\n### 1. 옵저버 패턴 구현해보기\n\n![image](https://user-images.githubusercontent.com/55419159/141608207-0b9249cf-e475-4169-97c1-7c7d3e7a92a0.png)\n\n#### `Subject` 인터페이스 구현\n\n```java\npublic interface Subject {\n    void registerobserver(Observer observer);\n    void removeObserver(Observer observer);\n    void notifyObservers();\n}\n```\n\n#### `Observer` 인테페이스 구현\n\n```java\npublic interface Observer {\n    void update(float temp, float humidity, float pressure);\n}\n\npublic interface DisplayElement {\n    void display();\n}\n```\n\n#### `Subject`를 구현하는 `WeatherData` 생성\n\n```java\npublic class WeatherData implements Subject {\n\n    private List<Observer> observers = new ArrayList<>();\n    private float temperature;\n    private float humidity;\n    private float pressure;\n\n    public void measurementsChanged() {\n        this.notifyObservers();\n    }\n\n    public void setMeasurementsChanged(float t, float h, float p) {    //값이 세팅된다고 가정.\n        this.temperature = t;\n        this.humidity = h;\n        this.pressure = p;\n        this.measurementsChanged();\n    }\n\n    @Override\n    public void notifyObservers() {\n        for (Observer observer : observers) {\n            observer.update(this.temperature, this.humidity, this.pressure);\n        }\n    }\n\n    @Override\n    public void registerobserver(Observer observer) {\n        this.observers.add(observer);\n    }\n\n    @Override\n    public void removeObserver(Observer observer) {\n        if (observers.contains(observer)) observers.remove(observer);\n    }\n}\n```\n\n#### `Observer`를 구현하는 `CurrentConditions` 생성\n\n```java\npublic class CurrentConditions implements Observer, DisplayElement {\n\n    private float temperature;\n    private float humidity;\n    private Subject weatherData;\n\n    public CurrentConditions(Subject weatherData) {\n        this.weatherData = weatherData;\n        this.weatherData.registerobserver(this);    //옵저버 등록\n    }\n\n    @Override\n    public void display() {\n        System.out.println(\"Current conditions : \" + temperature + \" , \" + humidity);\n    }\n\n    @Override\n    public void update(float temp, float humidity, float pressure) {\n        this.temperature = temp;\n        this.humidity = humidity;\n        this.display();\n    }\n}\n```\n\n#### 테스트\n\n```java\npublic class WeatherStation {\n    public static void main(String[] args) {\n\n        WeatherData weatherData = new WeatherData();\n\n        CurrentConditions currentConditions = new CurrentConditions(weatherData);\n        StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);\n        ForecastDisplay forecastDisplay = new ForecastDisplay(weatherData);\n\n        weatherData.setMeasurementsChanged(85, 62, 36.7f);\n    }\n}\n```\n\n### 2. 자바 내장 옵저버 패턴 사용\n\n`java.util.Observer` 인터페이스와 `java.util.Observable` 클래스를 사용할수 있다.\n\n![image](https://user-images.githubusercontent.com/55419159/141608538-b814feab-5924-497c-bfb4-885ff8473279.png)\n\n#### `java.util.Observable`를 구현한 `WeatherData` 생성\n\n- 이전에 구현 했던것과 마찬가지로 `java.util.Observer` 인터페이스를 구현하고 `java.util.Observable` 객체의\n`addObserver()` 메소드를 호출하면 옵저버 목록에 추가되고, `deleteObserver()`를 호출하면 옵저버 목록에서 제거된다.\n\n- **연락을 돌리는 방법**은 `java.util.Observable`를 상속받는 주제 클래스에서 `setChanged()` 메소드를 호출해서 객체의 상태가 바뀌었다는 것을 알린 후 `notifyObservers()` 또는 `notifyObserver(Object arg)` 메소드를 호출하면 된다. (인자값을 넣어주는 메소드는 푸시방식으로 쓰임.)\n\n```java\npublic class WeatherData extends Observable {\n    private float temperature;\n    private float humidity;\n    private float pressure;\n\n    public void measurementsChanged() {\n        this.setChanged();    //상태가 바뀌었다는 플래그값을 바꿔줌.\n        this.notifyObservers(); //풀 방식을 사용해서 알림\n    }\n\n    public void setMeasurementsChanged(float t, float h, float p) {    //값이 세팅된다고 가정.\n        this.temperature = t;\n        this.humidity = h;\n        this.pressure = p;\n        this.measurementsChanged();\n    }\n\n    public float getTemperature() {\n        return temperature;\n    }\n    public float getHumidity() {\n        return humidity;\n    }\n    public float getPressure() {\n        return pressure;\n    }\n}\n```\n\n#### `java.util.Observer`를 구현한 `CurrentConditions` 생성\n\n- 옵저버 객체가 **연락을 받는 방법**은 `update(Observable o, Object arg)` 메소드를 구현한다.\n- `Observable o` 에는 연락을 보내는 주제 객체가 인자로 전달되고, `Object arg` 에는 `notifyObservers(Object arg)` 메소드에서 인자로 전달된 데이터 객체가 넘어온다. (데이터 객체가 지정되지 않은경우 `null`)\n\n```java\npublic class CurrentConditions implements Observer, DisplayElement {\n    private Observable observable;\n    private float temperature;\n    private float humidity;\n\n    public CurrentConditions(Observable observable) {\n        this.observable = observable;\n        this.observable.addObserver(this);\n    }\n\n    @Override\n    public void display() {\n        System.out.println(\"Current conditions : \" + temperature + \" , \" + humidity);\n    }\n\n    @Override\n    public void update(Observable o, Object arg) {\n        if (o instanceof WeatherData) {\n            WeatherData weatherData = (WeatherData) o;\n            this.temperature = weatherData.getTemperature();\n            this.humidity = weatherData.getHumidity();\n            this.display();\n        }\n    }\n}\n```\n\n#### `java.util.Observable` 의 단점\n\n1. `Observable` 은 클래스이기 때문에 **서브클래스**를 만들어야 한다. 이미 다른 수퍼클래스를 확장하고 있는 클래스에 `Observable`의 기능을 추가할수가 없어서 **재사용성에 제약**이 생긴다.\n2. `Observable` 인터페이스라는 것이 없기 때문에 자바에 내장된 Observer API 하고 잘 맞는 클래스를 직접 구현하는 것이 불가능하다.\n\n--- \n\n## 결론\n\n`java.util.Observable`을 확장한 클래스를 쓸 수 있는 상황이면\n`Observable API`를 쓰는 것도 괜찮지만 상황에 따라 직접 구현해야 할수도 있다.\n\n어떤방법을 쓰든 옵저버 패턴만 제대로 알고 있다면 그 패턴을 활용하는 API는 어떤 것이든 잘 활용할 수 있다.","slug":"디자인-패턴/2021-11-13-옵저버-패턴","published":1,"date":"2021-11-12T08:05:58.356Z","updated":"2021-11-13T06:40:11.478Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fi000mjd9kfgwz8tla","content":"<h2 id=\"🔭-옵저버-패턴이란\"><a href=\"#🔭-옵저버-패턴이란\" class=\"headerlink\" title=\"🔭 옵저버 패턴이란\"></a>🔭 옵저버 패턴이란</h2><blockquote>\n<p>옵저버 패턴(observer pattern)은 객체의 상태 변화를 관찰하는 <strong>관찰자</strong>들,<br>즉 옵저버들의 목록을 객체에 등록하여 <strong>상태 변화가 있을 때마다</strong> 메서드 등을 통해 객체가 직접 목록의 각 <strong>옵저버에게 통지하도록</strong> 하는 디자인 패턴이다.</p>\n</blockquote>\n<h3 id=\"클래스-다이어그램\"><a href=\"#클래스-다이어그램\" class=\"headerlink\" title=\"클래스 다이어그램\"></a>클래스 다이어그램</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141607954-d5fd0a63-b644-4e8d-8004-5af5dc53da83.png\" alt=\"image\"></p>\n<p>옵저버 패턴은 주제와 옵저버가 <strong>느슨하게</strong> 결합되어 있는 객체 디자인을 제공한다. 주제가 옵저버에 대해서 아는 것은 옵저버가 특정 인터페이스(Observer 인터페이스)를 구현 한다는 것 뿐이다.</p>\n<ul>\n<li>옵저버는 언제든지 새로 추가할 수 있음. (주제는 Observer인터페이스 구현하는 객체 목록에만 의존하기때문)</li>\n<li>새로운 형식의 옵저버를 추가하려해도 주제를 전혀 변경할 필요가 없음. (새로운 클래스에서 Observer 인터페이스만 구현해주면됨)</li>\n<li>주제나 옵저버가 바뀌더라도 서로에게 전혀 영향을 주지않음. 그래서 주제와 옵저버는 서로 독립적으로 재 사용할수 있음.</li>\n</ul>\n<p>느슨하게 결합하는 디자인을 사용하면 변경 사항이 생겨도 무난히 처리할 수 있는 유연한 객체지향 시스템을 구축할수 있다. (객체 사이의 상호 의존성을 최소화 할 수 있기 때문)</p>\n<h3 id=\"디자인-원칙\"><a href=\"#디자인-원칙\" class=\"headerlink\" title=\"디자인 원칙\"></a>디자인 원칙</h3><blockquote>\n<p>서로 상호작용을 하는 객체 사이에서는 가능하면 <strong>느슨하게 결합</strong>하는 디자인을 사용해야 한다.</p>\n</blockquote>\n<hr>\n<h2 id=\"활용예제\"><a href=\"#활용예제\" class=\"headerlink\" title=\"활용예제\"></a>활용예제</h2><h3 id=\"☀️-기상데이터-관찰\"><a href=\"#☀️-기상데이터-관찰\" class=\"headerlink\" title=\"☀️ 기상데이터 관찰\"></a>☀️ 기상데이터 관찰</h3><p>날씨 데이터를 가지고 있는 회사와 데이터를 연동하여 여러종류의 각각의 디스플레이에 날씨데이터를 출력해줘야 하는 업무가 생겼다고 가정했을때. 아래의 기능이 필요하다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getTemperature():온도</span><br><span class=\"line\"></span><br><span class=\"line\">        getHumidity():습도</span><br><span class=\"line\"></span><br><span class=\"line\">        getPressure():기압</span><br><span class=\"line\"></span><br><span class=\"line\">        measurementsChanged():새로운 기상 측정 데이터가 나올때마다 자동으로 호출되는 부분.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-옵저버-패턴-구현해보기\"><a href=\"#1-옵저버-패턴-구현해보기\" class=\"headerlink\" title=\"1. 옵저버 패턴 구현해보기\"></a>1. 옵저버 패턴 구현해보기</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141608207-0b9249cf-e475-4169-97c1-7c7d3e7a92a0.png\" alt=\"image\"></p>\n<h4 id=\"Subject-인터페이스-구현\"><a href=\"#Subject-인터페이스-구현\" class=\"headerlink\" title=\"Subject 인터페이스 구현\"></a><code>Subject</code> 인터페이스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">registerobserver</span><span class=\"params\">(Observer observer)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">removeObserver</span><span class=\"params\">(Observer observer)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">notifyObservers</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Observer-인테페이스-구현\"><a href=\"#Observer-인테페이스-구현\" class=\"headerlink\" title=\"Observer 인테페이스 구현\"></a><code>Observer</code> 인테페이스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"keyword\">float</span> temp, <span class=\"keyword\">float</span> humidity, <span class=\"keyword\">float</span> pressure)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DisplayElement</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Subject를-구현하는-WeatherData-생성\"><a href=\"#Subject를-구현하는-WeatherData-생성\" class=\"headerlink\" title=\"Subject를 구현하는 WeatherData 생성\"></a><code>Subject</code>를 구현하는 <code>WeatherData</code> 생성</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeatherData</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Observer&gt; observers = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> pressure;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">measurementsChanged</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.notifyObservers();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMeasurementsChanged</span><span class=\"params\">(<span class=\"keyword\">float</span> t, <span class=\"keyword\">float</span> h, <span class=\"keyword\">float</span> p)</span> </span>&#123;    <span class=\"comment\">//값이 세팅된다고 가정.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.temperature = t;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.humidity = h;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pressure = p;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.measurementsChanged();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">notifyObservers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Observer observer : observers) &#123;</span><br><span class=\"line\">            observer.update(<span class=\"keyword\">this</span>.temperature, <span class=\"keyword\">this</span>.humidity, <span class=\"keyword\">this</span>.pressure);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">registerobserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.observers.add(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">removeObserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (observers.contains(observer)) observers.remove(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Observer를-구현하는-CurrentConditions-생성\"><a href=\"#Observer를-구현하는-CurrentConditions-생성\" class=\"headerlink\" title=\"Observer를 구현하는 CurrentConditions 생성\"></a><code>Observer</code>를 구현하는 <code>CurrentConditions</code> 생성</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CurrentConditions</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span>, <span class=\"title\">DisplayElement</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Subject weatherData;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CurrentConditions</span><span class=\"params\">(Subject weatherData)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.weatherData = weatherData;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.weatherData.registerobserver(<span class=\"keyword\">this</span>);    <span class=\"comment\">//옵저버 등록</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Current conditions : &quot;</span> + temperature + <span class=\"string\">&quot; , &quot;</span> + humidity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"keyword\">float</span> temp, <span class=\"keyword\">float</span> humidity, <span class=\"keyword\">float</span> pressure)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.temperature = temp;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.humidity = humidity;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.display();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeatherStation</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        WeatherData weatherData = <span class=\"keyword\">new</span> WeatherData();</span><br><span class=\"line\"></span><br><span class=\"line\">        CurrentConditions currentConditions = <span class=\"keyword\">new</span> CurrentConditions(weatherData);</span><br><span class=\"line\">        StatisticsDisplay statisticsDisplay = <span class=\"keyword\">new</span> StatisticsDisplay(weatherData);</span><br><span class=\"line\">        ForecastDisplay forecastDisplay = <span class=\"keyword\">new</span> ForecastDisplay(weatherData);</span><br><span class=\"line\"></span><br><span class=\"line\">        weatherData.setMeasurementsChanged(<span class=\"number\">85</span>, <span class=\"number\">62</span>, <span class=\"number\">36.7f</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-자바-내장-옵저버-패턴-사용\"><a href=\"#2-자바-내장-옵저버-패턴-사용\" class=\"headerlink\" title=\"2. 자바 내장 옵저버 패턴 사용\"></a>2. 자바 내장 옵저버 패턴 사용</h3><p><code>java.util.Observer</code> 인터페이스와 <code>java.util.Observable</code> 클래스를 사용할수 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141608538-b814feab-5924-497c-bfb4-885ff8473279.png\" alt=\"image\"></p>\n<h4 id=\"java-util-Observable를-구현한-WeatherData-생성\"><a href=\"#java-util-Observable를-구현한-WeatherData-생성\" class=\"headerlink\" title=\"java.util.Observable를 구현한 WeatherData 생성\"></a><code>java.util.Observable</code>를 구현한 <code>WeatherData</code> 생성</h4><ul>\n<li><p>이전에 구현 했던것과 마찬가지로 <code>java.util.Observer</code> 인터페이스를 구현하고 <code>java.util.Observable</code> 객체의<br><code>addObserver()</code> 메소드를 호출하면 옵저버 목록에 추가되고, <code>deleteObserver()</code>를 호출하면 옵저버 목록에서 제거된다.</p>\n</li>\n<li><p><strong>연락을 돌리는 방법</strong>은 <code>java.util.Observable</code>를 상속받는 주제 클래스에서 <code>setChanged()</code> 메소드를 호출해서 객체의 상태가 바뀌었다는 것을 알린 후 <code>notifyObservers()</code> 또는 <code>notifyObserver(Object arg)</code> 메소드를 호출하면 된다. (인자값을 넣어주는 메소드는 푸시방식으로 쓰임.)</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeatherData</span> <span class=\"keyword\">extends</span> <span class=\"title\">Observable</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> pressure;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">measurementsChanged</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setChanged();    <span class=\"comment\">//상태가 바뀌었다는 플래그값을 바꿔줌.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.notifyObservers(); <span class=\"comment\">//풀 방식을 사용해서 알림</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMeasurementsChanged</span><span class=\"params\">(<span class=\"keyword\">float</span> t, <span class=\"keyword\">float</span> h, <span class=\"keyword\">float</span> p)</span> </span>&#123;    <span class=\"comment\">//값이 세팅된다고 가정.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.temperature = t;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.humidity = h;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pressure = p;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.measurementsChanged();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getTemperature</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> temperature;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getHumidity</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> humidity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getPressure</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pressure;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"java-util-Observer를-구현한-CurrentConditions-생성\"><a href=\"#java-util-Observer를-구현한-CurrentConditions-생성\" class=\"headerlink\" title=\"java.util.Observer를 구현한 CurrentConditions 생성\"></a><code>java.util.Observer</code>를 구현한 <code>CurrentConditions</code> 생성</h4><ul>\n<li>옵저버 객체가 <strong>연락을 받는 방법</strong>은 <code>update(Observable o, Object arg)</code> 메소드를 구현한다.</li>\n<li><code>Observable o</code> 에는 연락을 보내는 주제 객체가 인자로 전달되고, <code>Object arg</code> 에는 <code>notifyObservers(Object arg)</code> 메소드에서 인자로 전달된 데이터 객체가 넘어온다. (데이터 객체가 지정되지 않은경우 <code>null</code>)</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CurrentConditions</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span>, <span class=\"title\">DisplayElement</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Observable observable;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CurrentConditions</span><span class=\"params\">(Observable observable)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.observable = observable;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.observable.addObserver(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Current conditions : &quot;</span> + temperature + <span class=\"string\">&quot; , &quot;</span> + humidity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(Observable o, Object arg)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (o <span class=\"keyword\">instanceof</span> WeatherData) &#123;</span><br><span class=\"line\">            WeatherData weatherData = (WeatherData) o;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.temperature = weatherData.getTemperature();</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.humidity = weatherData.getHumidity();</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.display();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"java-util-Observable-의-단점\"><a href=\"#java-util-Observable-의-단점\" class=\"headerlink\" title=\"java.util.Observable 의 단점\"></a><code>java.util.Observable</code> 의 단점</h4><ol>\n<li><code>Observable</code> 은 클래스이기 때문에 <strong>서브클래스</strong>를 만들어야 한다. 이미 다른 수퍼클래스를 확장하고 있는 클래스에 <code>Observable</code>의 기능을 추가할수가 없어서 <strong>재사용성에 제약</strong>이 생긴다.</li>\n<li><code>Observable</code> 인터페이스라는 것이 없기 때문에 자바에 내장된 Observer API 하고 잘 맞는 클래스를 직접 구현하는 것이 불가능하다.</li>\n</ol>\n<hr>\n<h2 id=\"결론\"><a href=\"#결론\" class=\"headerlink\" title=\"결론\"></a>결론</h2><p><code>java.util.Observable</code>을 확장한 클래스를 쓸 수 있는 상황이면<br><code>Observable API</code>를 쓰는 것도 괜찮지만 상황에 따라 직접 구현해야 할수도 있다.</p>\n<p>어떤방법을 쓰든 옵저버 패턴만 제대로 알고 있다면 그 패턴을 활용하는 API는 어떤 것이든 잘 활용할 수 있다.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"🔭-옵저버-패턴이란\"><a href=\"#🔭-옵저버-패턴이란\" class=\"headerlink\" title=\"🔭 옵저버 패턴이란\"></a>🔭 옵저버 패턴이란</h2><blockquote>\n<p>옵저버 패턴(observer pattern)은 객체의 상태 변화를 관찰하는 <strong>관찰자</strong>들,<br>즉 옵저버들의 목록을 객체에 등록하여 <strong>상태 변화가 있을 때마다</strong> 메서드 등을 통해 객체가 직접 목록의 각 <strong>옵저버에게 통지하도록</strong> 하는 디자인 패턴이다.</p>\n</blockquote>\n<h3 id=\"클래스-다이어그램\"><a href=\"#클래스-다이어그램\" class=\"headerlink\" title=\"클래스 다이어그램\"></a>클래스 다이어그램</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141607954-d5fd0a63-b644-4e8d-8004-5af5dc53da83.png\" alt=\"image\"></p>\n<p>옵저버 패턴은 주제와 옵저버가 <strong>느슨하게</strong> 결합되어 있는 객체 디자인을 제공한다. 주제가 옵저버에 대해서 아는 것은 옵저버가 특정 인터페이스(Observer 인터페이스)를 구현 한다는 것 뿐이다.</p>\n<ul>\n<li>옵저버는 언제든지 새로 추가할 수 있음. (주제는 Observer인터페이스 구현하는 객체 목록에만 의존하기때문)</li>\n<li>새로운 형식의 옵저버를 추가하려해도 주제를 전혀 변경할 필요가 없음. (새로운 클래스에서 Observer 인터페이스만 구현해주면됨)</li>\n<li>주제나 옵저버가 바뀌더라도 서로에게 전혀 영향을 주지않음. 그래서 주제와 옵저버는 서로 독립적으로 재 사용할수 있음.</li>\n</ul>\n<p>느슨하게 결합하는 디자인을 사용하면 변경 사항이 생겨도 무난히 처리할 수 있는 유연한 객체지향 시스템을 구축할수 있다. (객체 사이의 상호 의존성을 최소화 할 수 있기 때문)</p>\n<h3 id=\"디자인-원칙\"><a href=\"#디자인-원칙\" class=\"headerlink\" title=\"디자인 원칙\"></a>디자인 원칙</h3><blockquote>\n<p>서로 상호작용을 하는 객체 사이에서는 가능하면 <strong>느슨하게 결합</strong>하는 디자인을 사용해야 한다.</p>\n</blockquote>\n<hr>\n<h2 id=\"활용예제\"><a href=\"#활용예제\" class=\"headerlink\" title=\"활용예제\"></a>활용예제</h2><h3 id=\"☀️-기상데이터-관찰\"><a href=\"#☀️-기상데이터-관찰\" class=\"headerlink\" title=\"☀️ 기상데이터 관찰\"></a>☀️ 기상데이터 관찰</h3><p>날씨 데이터를 가지고 있는 회사와 데이터를 연동하여 여러종류의 각각의 디스플레이에 날씨데이터를 출력해줘야 하는 업무가 생겼다고 가정했을때. 아래의 기능이 필요하다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getTemperature():온도</span><br><span class=\"line\"></span><br><span class=\"line\">        getHumidity():습도</span><br><span class=\"line\"></span><br><span class=\"line\">        getPressure():기압</span><br><span class=\"line\"></span><br><span class=\"line\">        measurementsChanged():새로운 기상 측정 데이터가 나올때마다 자동으로 호출되는 부분.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-옵저버-패턴-구현해보기\"><a href=\"#1-옵저버-패턴-구현해보기\" class=\"headerlink\" title=\"1. 옵저버 패턴 구현해보기\"></a>1. 옵저버 패턴 구현해보기</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/141608207-0b9249cf-e475-4169-97c1-7c7d3e7a92a0.png\" alt=\"image\"></p>\n<h4 id=\"Subject-인터페이스-구현\"><a href=\"#Subject-인터페이스-구현\" class=\"headerlink\" title=\"Subject 인터페이스 구현\"></a><code>Subject</code> 인터페이스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">registerobserver</span><span class=\"params\">(Observer observer)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">removeObserver</span><span class=\"params\">(Observer observer)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">notifyObservers</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Observer-인테페이스-구현\"><a href=\"#Observer-인테페이스-구현\" class=\"headerlink\" title=\"Observer 인테페이스 구현\"></a><code>Observer</code> 인테페이스 구현</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"keyword\">float</span> temp, <span class=\"keyword\">float</span> humidity, <span class=\"keyword\">float</span> pressure)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DisplayElement</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Subject를-구현하는-WeatherData-생성\"><a href=\"#Subject를-구현하는-WeatherData-생성\" class=\"headerlink\" title=\"Subject를 구현하는 WeatherData 생성\"></a><code>Subject</code>를 구현하는 <code>WeatherData</code> 생성</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeatherData</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Observer&gt; observers = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> pressure;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">measurementsChanged</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.notifyObservers();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMeasurementsChanged</span><span class=\"params\">(<span class=\"keyword\">float</span> t, <span class=\"keyword\">float</span> h, <span class=\"keyword\">float</span> p)</span> </span>&#123;    <span class=\"comment\">//값이 세팅된다고 가정.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.temperature = t;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.humidity = h;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pressure = p;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.measurementsChanged();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">notifyObservers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Observer observer : observers) &#123;</span><br><span class=\"line\">            observer.update(<span class=\"keyword\">this</span>.temperature, <span class=\"keyword\">this</span>.humidity, <span class=\"keyword\">this</span>.pressure);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">registerobserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.observers.add(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">removeObserver</span><span class=\"params\">(Observer observer)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (observers.contains(observer)) observers.remove(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Observer를-구현하는-CurrentConditions-생성\"><a href=\"#Observer를-구현하는-CurrentConditions-생성\" class=\"headerlink\" title=\"Observer를 구현하는 CurrentConditions 생성\"></a><code>Observer</code>를 구현하는 <code>CurrentConditions</code> 생성</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CurrentConditions</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span>, <span class=\"title\">DisplayElement</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Subject weatherData;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CurrentConditions</span><span class=\"params\">(Subject weatherData)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.weatherData = weatherData;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.weatherData.registerobserver(<span class=\"keyword\">this</span>);    <span class=\"comment\">//옵저버 등록</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Current conditions : &quot;</span> + temperature + <span class=\"string\">&quot; , &quot;</span> + humidity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"keyword\">float</span> temp, <span class=\"keyword\">float</span> humidity, <span class=\"keyword\">float</span> pressure)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.temperature = temp;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.humidity = humidity;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.display();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"테스트\"><a href=\"#테스트\" class=\"headerlink\" title=\"테스트\"></a>테스트</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeatherStation</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        WeatherData weatherData = <span class=\"keyword\">new</span> WeatherData();</span><br><span class=\"line\"></span><br><span class=\"line\">        CurrentConditions currentConditions = <span class=\"keyword\">new</span> CurrentConditions(weatherData);</span><br><span class=\"line\">        StatisticsDisplay statisticsDisplay = <span class=\"keyword\">new</span> StatisticsDisplay(weatherData);</span><br><span class=\"line\">        ForecastDisplay forecastDisplay = <span class=\"keyword\">new</span> ForecastDisplay(weatherData);</span><br><span class=\"line\"></span><br><span class=\"line\">        weatherData.setMeasurementsChanged(<span class=\"number\">85</span>, <span class=\"number\">62</span>, <span class=\"number\">36.7f</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-자바-내장-옵저버-패턴-사용\"><a href=\"#2-자바-내장-옵저버-패턴-사용\" class=\"headerlink\" title=\"2. 자바 내장 옵저버 패턴 사용\"></a>2. 자바 내장 옵저버 패턴 사용</h3><p><code>java.util.Observer</code> 인터페이스와 <code>java.util.Observable</code> 클래스를 사용할수 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/141608538-b814feab-5924-497c-bfb4-885ff8473279.png\" alt=\"image\"></p>\n<h4 id=\"java-util-Observable를-구현한-WeatherData-생성\"><a href=\"#java-util-Observable를-구현한-WeatherData-생성\" class=\"headerlink\" title=\"java.util.Observable를 구현한 WeatherData 생성\"></a><code>java.util.Observable</code>를 구현한 <code>WeatherData</code> 생성</h4><ul>\n<li><p>이전에 구현 했던것과 마찬가지로 <code>java.util.Observer</code> 인터페이스를 구현하고 <code>java.util.Observable</code> 객체의<br><code>addObserver()</code> 메소드를 호출하면 옵저버 목록에 추가되고, <code>deleteObserver()</code>를 호출하면 옵저버 목록에서 제거된다.</p>\n</li>\n<li><p><strong>연락을 돌리는 방법</strong>은 <code>java.util.Observable</code>를 상속받는 주제 클래스에서 <code>setChanged()</code> 메소드를 호출해서 객체의 상태가 바뀌었다는 것을 알린 후 <code>notifyObservers()</code> 또는 <code>notifyObserver(Object arg)</code> 메소드를 호출하면 된다. (인자값을 넣어주는 메소드는 푸시방식으로 쓰임.)</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeatherData</span> <span class=\"keyword\">extends</span> <span class=\"title\">Observable</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> pressure;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">measurementsChanged</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setChanged();    <span class=\"comment\">//상태가 바뀌었다는 플래그값을 바꿔줌.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.notifyObservers(); <span class=\"comment\">//풀 방식을 사용해서 알림</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMeasurementsChanged</span><span class=\"params\">(<span class=\"keyword\">float</span> t, <span class=\"keyword\">float</span> h, <span class=\"keyword\">float</span> p)</span> </span>&#123;    <span class=\"comment\">//값이 세팅된다고 가정.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.temperature = t;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.humidity = h;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pressure = p;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.measurementsChanged();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getTemperature</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> temperature;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getHumidity</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> humidity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getPressure</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pressure;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"java-util-Observer를-구현한-CurrentConditions-생성\"><a href=\"#java-util-Observer를-구현한-CurrentConditions-생성\" class=\"headerlink\" title=\"java.util.Observer를 구현한 CurrentConditions 생성\"></a><code>java.util.Observer</code>를 구현한 <code>CurrentConditions</code> 생성</h4><ul>\n<li>옵저버 객체가 <strong>연락을 받는 방법</strong>은 <code>update(Observable o, Object arg)</code> 메소드를 구현한다.</li>\n<li><code>Observable o</code> 에는 연락을 보내는 주제 객체가 인자로 전달되고, <code>Object arg</code> 에는 <code>notifyObservers(Object arg)</code> 메소드에서 인자로 전달된 데이터 객체가 넘어온다. (데이터 객체가 지정되지 않은경우 <code>null</code>)</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CurrentConditions</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span>, <span class=\"title\">DisplayElement</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Observable observable;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> temperature;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> humidity;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CurrentConditions</span><span class=\"params\">(Observable observable)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.observable = observable;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.observable.addObserver(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">display</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Current conditions : &quot;</span> + temperature + <span class=\"string\">&quot; , &quot;</span> + humidity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(Observable o, Object arg)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (o <span class=\"keyword\">instanceof</span> WeatherData) &#123;</span><br><span class=\"line\">            WeatherData weatherData = (WeatherData) o;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.temperature = weatherData.getTemperature();</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.humidity = weatherData.getHumidity();</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.display();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"java-util-Observable-의-단점\"><a href=\"#java-util-Observable-의-단점\" class=\"headerlink\" title=\"java.util.Observable 의 단점\"></a><code>java.util.Observable</code> 의 단점</h4><ol>\n<li><code>Observable</code> 은 클래스이기 때문에 <strong>서브클래스</strong>를 만들어야 한다. 이미 다른 수퍼클래스를 확장하고 있는 클래스에 <code>Observable</code>의 기능을 추가할수가 없어서 <strong>재사용성에 제약</strong>이 생긴다.</li>\n<li><code>Observable</code> 인터페이스라는 것이 없기 때문에 자바에 내장된 Observer API 하고 잘 맞는 클래스를 직접 구현하는 것이 불가능하다.</li>\n</ol>\n<hr>\n<h2 id=\"결론\"><a href=\"#결론\" class=\"headerlink\" title=\"결론\"></a>결론</h2><p><code>java.util.Observable</code>을 확장한 클래스를 쓸 수 있는 상황이면<br><code>Observable API</code>를 쓰는 것도 괜찮지만 상황에 따라 직접 구현해야 할수도 있다.</p>\n<p>어떤방법을 쓰든 옵저버 패턴만 제대로 알고 있다면 그 패턴을 활용하는 API는 어떤 것이든 잘 활용할 수 있다.</p>\n"},{"title":"개략적인 규모 추정","toc":true,"toc_sticky":true,"toc_label":"개략적인 규모 추정","toc_icon":"sticky-note","_content":"\n\n\n# 2의 제곱 수\n\n- 최소단위는 1바이트, 8비트\n- 아스키 문자 하나 메모리크기가 1바이트\n\n# 모든 프로그래머가 알아야 하는 응답 지연 값\n\n- 메모리는 빠르지만 디스크는 아직도 느리다\n- 디스크 탐색은 가능한 한 피하라\n- 단순한 압축 알고리즘은 빠르다\n- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라\n- 데이터 센터는 보통 여러 지역에 분산되어있고, 센터들 간에 데이터를 주고 받는 데는 시간이 걸린다\n\n# 가용성에 관계된 수치들\n\n> 고가용성\n>\n>\n> 시스템이 오랜 기간동안 지속적으로 중단 없이 운영될 수 있는 능력\n\n---\n\n# 예제: 트위터 QPS와 저장소 요구량 추정\n\n## 가정\n\n- 월간 능동 사용자(mau) 3억 명\n- 50%가 매일 사용\n- 각 사용자는 매일 2건\n- 미디어 포함 10%\n- 데이터는 5년 보관\n\n## 추정\n\n- QPS(Query Per Second) 추정치\n- 일간 능동 사용자(dau) = 3억 x 50% = 1.5억\n- QPS = 1.5억 x 2건 / 24시간 / 3600초 = 약 3500\n- 최대 QPS = 2 x QPS = 약 7000\n\n## 미디어 저장을 위한 저장소 요구량\n\n- 평균 크기\n  - id = 64바이트\n  - body = 140바이트\n  - 미디어 = 1MB\n- 미디어 저장소 요구량 : 1.5억 x 2 x 10% x 1MB = 30TB/day\n- 5년간 미디어를 보관하기 위한 저장소 요구량 : 30TB x 365 x 5 = 약 55PB\n\n","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-개략적인-규모-추정/2021-10-13-개략적인-규모-추정.md","raw":"---\ntitle: \"개략적인 규모 추정\"\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\ntoc: true\ntoc_sticky: true\ntoc_label: \"개략적인 규모 추정\"\ntoc_icon: \"sticky-note\"\n---\n\n\n\n# 2의 제곱 수\n\n- 최소단위는 1바이트, 8비트\n- 아스키 문자 하나 메모리크기가 1바이트\n\n# 모든 프로그래머가 알아야 하는 응답 지연 값\n\n- 메모리는 빠르지만 디스크는 아직도 느리다\n- 디스크 탐색은 가능한 한 피하라\n- 단순한 압축 알고리즘은 빠르다\n- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라\n- 데이터 센터는 보통 여러 지역에 분산되어있고, 센터들 간에 데이터를 주고 받는 데는 시간이 걸린다\n\n# 가용성에 관계된 수치들\n\n> 고가용성\n>\n>\n> 시스템이 오랜 기간동안 지속적으로 중단 없이 운영될 수 있는 능력\n\n---\n\n# 예제: 트위터 QPS와 저장소 요구량 추정\n\n## 가정\n\n- 월간 능동 사용자(mau) 3억 명\n- 50%가 매일 사용\n- 각 사용자는 매일 2건\n- 미디어 포함 10%\n- 데이터는 5년 보관\n\n## 추정\n\n- QPS(Query Per Second) 추정치\n- 일간 능동 사용자(dau) = 3억 x 50% = 1.5억\n- QPS = 1.5억 x 2건 / 24시간 / 3600초 = 약 3500\n- 최대 QPS = 2 x QPS = 약 7000\n\n## 미디어 저장을 위한 저장소 요구량\n\n- 평균 크기\n  - id = 64바이트\n  - body = 140바이트\n  - 미디어 = 1MB\n- 미디어 저장소 요구량 : 1.5억 x 2 x 10% x 1MB = 30TB/day\n- 5년간 미디어를 보관하기 위한 저장소 요구량 : 30TB x 365 x 5 = 약 55PB\n\n","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-개략적인-규모-추정/2021-10-13-개략적인-규모-추정","published":1,"date":"2021-10-26T12:52:30.856Z","updated":"2021-10-26T12:52:30.856Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fk000qjd9kfzbtbshn","content":"<h1 id=\"2의-제곱-수\"><a href=\"#2의-제곱-수\" class=\"headerlink\" title=\"2의 제곱 수\"></a>2의 제곱 수</h1><ul>\n<li>최소단위는 1바이트, 8비트</li>\n<li>아스키 문자 하나 메모리크기가 1바이트</li>\n</ul>\n<h1 id=\"모든-프로그래머가-알아야-하는-응답-지연-값\"><a href=\"#모든-프로그래머가-알아야-하는-응답-지연-값\" class=\"headerlink\" title=\"모든 프로그래머가 알아야 하는 응답 지연 값\"></a>모든 프로그래머가 알아야 하는 응답 지연 값</h1><ul>\n<li>메모리는 빠르지만 디스크는 아직도 느리다</li>\n<li>디스크 탐색은 가능한 한 피하라</li>\n<li>단순한 압축 알고리즘은 빠르다</li>\n<li>데이터를 인터넷으로 전송하기 전에 가능하면 압축하라</li>\n<li>데이터 센터는 보통 여러 지역에 분산되어있고, 센터들 간에 데이터를 주고 받는 데는 시간이 걸린다</li>\n</ul>\n<h1 id=\"가용성에-관계된-수치들\"><a href=\"#가용성에-관계된-수치들\" class=\"headerlink\" title=\"가용성에 관계된 수치들\"></a>가용성에 관계된 수치들</h1><blockquote>\n<p>고가용성</p>\n<p>시스템이 오랜 기간동안 지속적으로 중단 없이 운영될 수 있는 능력</p>\n</blockquote>\n<hr>\n<h1 id=\"예제-트위터-QPS와-저장소-요구량-추정\"><a href=\"#예제-트위터-QPS와-저장소-요구량-추정\" class=\"headerlink\" title=\"예제: 트위터 QPS와 저장소 요구량 추정\"></a>예제: 트위터 QPS와 저장소 요구량 추정</h1><h2 id=\"가정\"><a href=\"#가정\" class=\"headerlink\" title=\"가정\"></a>가정</h2><ul>\n<li>월간 능동 사용자(mau) 3억 명</li>\n<li>50%가 매일 사용</li>\n<li>각 사용자는 매일 2건</li>\n<li>미디어 포함 10%</li>\n<li>데이터는 5년 보관</li>\n</ul>\n<h2 id=\"추정\"><a href=\"#추정\" class=\"headerlink\" title=\"추정\"></a>추정</h2><ul>\n<li>QPS(Query Per Second) 추정치</li>\n<li>일간 능동 사용자(dau) = 3억 x 50% = 1.5억</li>\n<li>QPS = 1.5억 x 2건 / 24시간 / 3600초 = 약 3500</li>\n<li>최대 QPS = 2 x QPS = 약 7000</li>\n</ul>\n<h2 id=\"미디어-저장을-위한-저장소-요구량\"><a href=\"#미디어-저장을-위한-저장소-요구량\" class=\"headerlink\" title=\"미디어 저장을 위한 저장소 요구량\"></a>미디어 저장을 위한 저장소 요구량</h2><ul>\n<li>평균 크기<ul>\n<li>id = 64바이트</li>\n<li>body = 140바이트</li>\n<li>미디어 = 1MB</li>\n</ul>\n</li>\n<li>미디어 저장소 요구량 : 1.5억 x 2 x 10% x 1MB = 30TB/day</li>\n<li>5년간 미디어를 보관하기 위한 저장소 요구량 : 30TB x 365 x 5 = 약 55PB</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"2의-제곱-수\"><a href=\"#2의-제곱-수\" class=\"headerlink\" title=\"2의 제곱 수\"></a>2의 제곱 수</h1><ul>\n<li>최소단위는 1바이트, 8비트</li>\n<li>아스키 문자 하나 메모리크기가 1바이트</li>\n</ul>\n<h1 id=\"모든-프로그래머가-알아야-하는-응답-지연-값\"><a href=\"#모든-프로그래머가-알아야-하는-응답-지연-값\" class=\"headerlink\" title=\"모든 프로그래머가 알아야 하는 응답 지연 값\"></a>모든 프로그래머가 알아야 하는 응답 지연 값</h1><ul>\n<li>메모리는 빠르지만 디스크는 아직도 느리다</li>\n<li>디스크 탐색은 가능한 한 피하라</li>\n<li>단순한 압축 알고리즘은 빠르다</li>\n<li>데이터를 인터넷으로 전송하기 전에 가능하면 압축하라</li>\n<li>데이터 센터는 보통 여러 지역에 분산되어있고, 센터들 간에 데이터를 주고 받는 데는 시간이 걸린다</li>\n</ul>\n<h1 id=\"가용성에-관계된-수치들\"><a href=\"#가용성에-관계된-수치들\" class=\"headerlink\" title=\"가용성에 관계된 수치들\"></a>가용성에 관계된 수치들</h1><blockquote>\n<p>고가용성</p>\n<p>시스템이 오랜 기간동안 지속적으로 중단 없이 운영될 수 있는 능력</p>\n</blockquote>\n<hr>\n<h1 id=\"예제-트위터-QPS와-저장소-요구량-추정\"><a href=\"#예제-트위터-QPS와-저장소-요구량-추정\" class=\"headerlink\" title=\"예제: 트위터 QPS와 저장소 요구량 추정\"></a>예제: 트위터 QPS와 저장소 요구량 추정</h1><h2 id=\"가정\"><a href=\"#가정\" class=\"headerlink\" title=\"가정\"></a>가정</h2><ul>\n<li>월간 능동 사용자(mau) 3억 명</li>\n<li>50%가 매일 사용</li>\n<li>각 사용자는 매일 2건</li>\n<li>미디어 포함 10%</li>\n<li>데이터는 5년 보관</li>\n</ul>\n<h2 id=\"추정\"><a href=\"#추정\" class=\"headerlink\" title=\"추정\"></a>추정</h2><ul>\n<li>QPS(Query Per Second) 추정치</li>\n<li>일간 능동 사용자(dau) = 3억 x 50% = 1.5억</li>\n<li>QPS = 1.5억 x 2건 / 24시간 / 3600초 = 약 3500</li>\n<li>최대 QPS = 2 x QPS = 약 7000</li>\n</ul>\n<h2 id=\"미디어-저장을-위한-저장소-요구량\"><a href=\"#미디어-저장을-위한-저장소-요구량\" class=\"headerlink\" title=\"미디어 저장을 위한 저장소 요구량\"></a>미디어 저장을 위한 저장소 요구량</h2><ul>\n<li>평균 크기<ul>\n<li>id = 64바이트</li>\n<li>body = 140바이트</li>\n<li>미디어 = 1MB</li>\n</ul>\n</li>\n<li>미디어 저장소 요구량 : 1.5억 x 2 x 10% x 1MB = 30TB/day</li>\n<li>5년간 미디어를 보관하기 위한 저장소 요구량 : 30TB x 365 x 5 = 약 55PB</li>\n</ul>\n"},{"title":"시스템 설계 면접 공략법","toc":true,"toc_sticky":true,"toc_label":"시스템 설계 면접 공략법","toc_icon":"sticky-note","_content":"\n\n# 효과적 면접을 위한 4단계 접근법\n\n## 1. 문제 이해 및 설계 범위 확정\n\n- 구체적으로 어떤 기능들을 만들어야 하나\n- 제품 사용자 수는 얼마나 되나\n- 회사의 규모는 얼마나 빨리 커지리라 예상하나? 석 달, 여섯 달, 일년 뒤의 규모는 얼마가 되리라 예상하는가\n- 회사가 주로 사용하는 기술 스택은 무엇인가\n- 설계를 단순화 하기 위한 기존 서비스로는 어떤 것이 있는가\n\n→ 중요한 것은 모호함을 없에는 것\n\n---\n\n## 2. 개략적인 설계안 제시 및 동의 구하기\n\n- 청사진을 만들고 의견을 구하라ㅋ\n- 화이트보드에 다이어그램 그리기\n    - 클라이언트, API, 웹서버, DB, 캐시, CDN, MQ 등\n- 청사진이 제약사항에 부합하는지 확인하라\n\n---\n\n## 3. 상세 설계\n\n- 시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인\n- 전체 설계의 개략적 청사진 마련\n- 해당 청사진에 대한 면접관의 의견 청취\n- 상세 설계에서 집중해야 할 영역들 확인\n\n---\n\n## 4. 마무리\n\n- 개선점 찾기 ex> 병목구간\n- 설계 핵심 요약\n- 운영 관련 이슈\n    - 메트릭, 모니터링, 로그, 배포 등\n- 시스템 확장 방식","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-시스템-설계-면접-공략법/2021-10-13-시스템-설계-면접-공략법.md","raw":"---\ntitle: \"시스템 설계 면접 공략법\"\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\n  - 면접\ntoc: true\ntoc_sticky: true \ntoc_label: \"시스템 설계 면접 공략법\"\ntoc_icon: \"sticky-note\"\n---\n\n\n# 효과적 면접을 위한 4단계 접근법\n\n## 1. 문제 이해 및 설계 범위 확정\n\n- 구체적으로 어떤 기능들을 만들어야 하나\n- 제품 사용자 수는 얼마나 되나\n- 회사의 규모는 얼마나 빨리 커지리라 예상하나? 석 달, 여섯 달, 일년 뒤의 규모는 얼마가 되리라 예상하는가\n- 회사가 주로 사용하는 기술 스택은 무엇인가\n- 설계를 단순화 하기 위한 기존 서비스로는 어떤 것이 있는가\n\n→ 중요한 것은 모호함을 없에는 것\n\n---\n\n## 2. 개략적인 설계안 제시 및 동의 구하기\n\n- 청사진을 만들고 의견을 구하라ㅋ\n- 화이트보드에 다이어그램 그리기\n    - 클라이언트, API, 웹서버, DB, 캐시, CDN, MQ 등\n- 청사진이 제약사항에 부합하는지 확인하라\n\n---\n\n## 3. 상세 설계\n\n- 시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인\n- 전체 설계의 개략적 청사진 마련\n- 해당 청사진에 대한 면접관의 의견 청취\n- 상세 설계에서 집중해야 할 영역들 확인\n\n---\n\n## 4. 마무리\n\n- 개선점 찾기 ex> 병목구간\n- 설계 핵심 요약\n- 운영 관련 이슈\n    - 메트릭, 모니터링, 로그, 배포 등\n- 시스템 확장 방식","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-시스템-설계-면접-공략법/2021-10-13-시스템-설계-면접-공략법","published":1,"date":"2021-10-26T12:52:30.866Z","updated":"2021-10-26T12:52:30.866Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fl000sjd9kbhzhhc9u","content":"<h1 id=\"효과적-면접을-위한-4단계-접근법\"><a href=\"#효과적-면접을-위한-4단계-접근법\" class=\"headerlink\" title=\"효과적 면접을 위한 4단계 접근법\"></a>효과적 면접을 위한 4단계 접근법</h1><h2 id=\"1-문제-이해-및-설계-범위-확정\"><a href=\"#1-문제-이해-및-설계-범위-확정\" class=\"headerlink\" title=\"1. 문제 이해 및 설계 범위 확정\"></a>1. 문제 이해 및 설계 범위 확정</h2><ul>\n<li>구체적으로 어떤 기능들을 만들어야 하나</li>\n<li>제품 사용자 수는 얼마나 되나</li>\n<li>회사의 규모는 얼마나 빨리 커지리라 예상하나? 석 달, 여섯 달, 일년 뒤의 규모는 얼마가 되리라 예상하는가</li>\n<li>회사가 주로 사용하는 기술 스택은 무엇인가</li>\n<li>설계를 단순화 하기 위한 기존 서비스로는 어떤 것이 있는가</li>\n</ul>\n<p>→ 중요한 것은 모호함을 없에는 것</p>\n<hr>\n<h2 id=\"2-개략적인-설계안-제시-및-동의-구하기\"><a href=\"#2-개략적인-설계안-제시-및-동의-구하기\" class=\"headerlink\" title=\"2. 개략적인 설계안 제시 및 동의 구하기\"></a>2. 개략적인 설계안 제시 및 동의 구하기</h2><ul>\n<li>청사진을 만들고 의견을 구하라ㅋ</li>\n<li>화이트보드에 다이어그램 그리기<ul>\n<li>클라이언트, API, 웹서버, DB, 캐시, CDN, MQ 등</li>\n</ul>\n</li>\n<li>청사진이 제약사항에 부합하는지 확인하라</li>\n</ul>\n<hr>\n<h2 id=\"3-상세-설계\"><a href=\"#3-상세-설계\" class=\"headerlink\" title=\"3. 상세 설계\"></a>3. 상세 설계</h2><ul>\n<li>시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인</li>\n<li>전체 설계의 개략적 청사진 마련</li>\n<li>해당 청사진에 대한 면접관의 의견 청취</li>\n<li>상세 설계에서 집중해야 할 영역들 확인</li>\n</ul>\n<hr>\n<h2 id=\"4-마무리\"><a href=\"#4-마무리\" class=\"headerlink\" title=\"4. 마무리\"></a>4. 마무리</h2><ul>\n<li>개선점 찾기 ex&gt; 병목구간</li>\n<li>설계 핵심 요약</li>\n<li>운영 관련 이슈<ul>\n<li>메트릭, 모니터링, 로그, 배포 등</li>\n</ul>\n</li>\n<li>시스템 확장 방식</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"효과적-면접을-위한-4단계-접근법\"><a href=\"#효과적-면접을-위한-4단계-접근법\" class=\"headerlink\" title=\"효과적 면접을 위한 4단계 접근법\"></a>효과적 면접을 위한 4단계 접근법</h1><h2 id=\"1-문제-이해-및-설계-범위-확정\"><a href=\"#1-문제-이해-및-설계-범위-확정\" class=\"headerlink\" title=\"1. 문제 이해 및 설계 범위 확정\"></a>1. 문제 이해 및 설계 범위 확정</h2><ul>\n<li>구체적으로 어떤 기능들을 만들어야 하나</li>\n<li>제품 사용자 수는 얼마나 되나</li>\n<li>회사의 규모는 얼마나 빨리 커지리라 예상하나? 석 달, 여섯 달, 일년 뒤의 규모는 얼마가 되리라 예상하는가</li>\n<li>회사가 주로 사용하는 기술 스택은 무엇인가</li>\n<li>설계를 단순화 하기 위한 기존 서비스로는 어떤 것이 있는가</li>\n</ul>\n<p>→ 중요한 것은 모호함을 없에는 것</p>\n<hr>\n<h2 id=\"2-개략적인-설계안-제시-및-동의-구하기\"><a href=\"#2-개략적인-설계안-제시-및-동의-구하기\" class=\"headerlink\" title=\"2. 개략적인 설계안 제시 및 동의 구하기\"></a>2. 개략적인 설계안 제시 및 동의 구하기</h2><ul>\n<li>청사진을 만들고 의견을 구하라ㅋ</li>\n<li>화이트보드에 다이어그램 그리기<ul>\n<li>클라이언트, API, 웹서버, DB, 캐시, CDN, MQ 등</li>\n</ul>\n</li>\n<li>청사진이 제약사항에 부합하는지 확인하라</li>\n</ul>\n<hr>\n<h2 id=\"3-상세-설계\"><a href=\"#3-상세-설계\" class=\"headerlink\" title=\"3. 상세 설계\"></a>3. 상세 설계</h2><ul>\n<li>시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인</li>\n<li>전체 설계의 개략적 청사진 마련</li>\n<li>해당 청사진에 대한 면접관의 의견 청취</li>\n<li>상세 설계에서 집중해야 할 영역들 확인</li>\n</ul>\n<hr>\n<h2 id=\"4-마무리\"><a href=\"#4-마무리\" class=\"headerlink\" title=\"4. 마무리\"></a>4. 마무리</h2><ul>\n<li>개선점 찾기 ex&gt; 병목구간</li>\n<li>설계 핵심 요약</li>\n<li>운영 관련 이슈<ul>\n<li>메트릭, 모니터링, 로그, 배포 등</li>\n</ul>\n</li>\n<li>시스템 확장 방식</li>\n</ul>\n"},{"title":"사용자 수에 따른 규모 확장성","toc":true,"toc_sticky":true,"toc_label":"사용자 수에 따른 규모 확장성","toc_icon":"sticky-note","_content":"\n- 요약\n    - 웹 계층은 무상태 계층으로\n    - 모든 계층에 다중화 도입\n    - 가능한 많은 데이터를 캐시할 것\n    - 여러 데이터 센터를 지원할 것\n    - 정적 콘텐츠는 CDN을 통해 서비스할 것\n    - 데이터 계층은 샤딩을 통에 그 규모를 확장할 것\n    - 각 계층은 독립적 서비스로 분할할 것\n    - 시스템을 지속적으로 모니터링 하고, 자동화 도구들을 활용할 것\n  \n---\n\n# 단일서버\n\n## 시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스\n\n1. 사용자가 도메인(api.mysite.com)으로 접속한다.\n2. DNS에 질의하여 IP주소로 반환된다. (DNS는 제3사업자임)\n3. IP주소로 HTTP 요청\n4. HTML or Json으로 응답\n\n---\n\n# 데이터베이스\n\n## RDBMS vs NoSQL\n\n- RDBMS\n    - 오라클, MySQL, PostegreSQL\n    - 열, 컬럼으로 표현\n    - Join으로 합침\n- NoSQL\n    - MongoDB ...\n    - Join 지원 안함\n\n## NoSQL 쓰는 경우\n\n- 속도 중요할 시\n- 비정형 데이터일 시\n- 데이터 직렬화, 역직렬화 용\n- 대량의 데이터\n\n---\n\n# 수직적 규모 확장 vs 수평적 규모 확장\n\n## Sacale-Up vs Sacale-Out\n\nScale-Up : 단일 서버 사양을 높임\n\nScale-Out : 서버 수를 추가\n\n## Sacale-Up 아닌 Sacale-Out이 유리한 이유\n\n- 한 대의 서버 메모리를 무한대로 증설할 방법이 없음\n- 장애에 대한 자동복구 방안이나 다중화 제시 X\n\n## 로드밸런서(LB)\n\n- 트래픽 분산의 역할\n\n## DB 다중화\n\n- 이중화 시 master-slave로 나눔\n- master는 write, slave는 read\n- 보통 read연산 비중이 훨씬 높고 slave DB가 더 많음 → 성능\n\n---\n\n# 캐시\n\n- 값비싼 연산 결과나 자주 참조되는 데이터를 저장하는 메모리\n\n## 캐시 사용 시 고려해야 할 것\n\n- 영속적인 데이터 X\n- 만료(expire) 방식\n    - LRU → 가장 자주 씀\n    - LFU\n    - FIFO\n- 데이터 일관성 유지 방식\n\n---\n\n# 콘텐츠 전송 네크워크(CDN)\n\n- 정적 콘텐츠 캐싱\n- CSS, JS, 이미지, 비디오\n\n---\n\n# 무상태(stateless) 웹 계층\n\n- Scale-Out 시 중요\n- 상태정보를 웹 계층에서 제거\n\n## 상태 정보를 웹 말고 DB에 저장\n\n- MSA시 **공유저장소**를 활용\n- Redis, NoSQL 활용\n\n---\n\n# 데이터센터\n\n- 통상적으로 지리적으로 가장 가까운 곳으로 라우팅(Geo-routing)\n\n## 구축 시 신경써야 할 것\n\n- 트래픽 우회\n- 데이터 동기화\n- 테스트와 배포\n\n→ Message Queue는 시스템이 독립적으로 확장할 수 있는 핵심전략\n\n---\n\n# 메시지 큐\n\n- 무손실, 비동기\n- pub-sub 방식\n\n\n---\n\n# 데이터베이스의 규모 확장\n\n## 샤딩(sharding)\n\n- DB를 scale-out 하는 것\n- **모든 샤드는 같은 스키마를 쓰지만 데이터 중복은 없음**\n- 샤딩 키를 정하는 것이 중요","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-사용자-수에-따른-규모-확장성/2021-10-13-사용자-수에-따른-규모-확장성.md","raw":"---\ntitle: \"사용자 수에 따른 규모 확장성\"\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\n  - DB설계\n  - 서버설계 \n  - 분산설계 \ntoc: true\ntoc_sticky: true\ntoc_label: \"사용자 수에 따른 규모 확장성\"\ntoc_icon: \"sticky-note\"\n---\n\n- 요약\n    - 웹 계층은 무상태 계층으로\n    - 모든 계층에 다중화 도입\n    - 가능한 많은 데이터를 캐시할 것\n    - 여러 데이터 센터를 지원할 것\n    - 정적 콘텐츠는 CDN을 통해 서비스할 것\n    - 데이터 계층은 샤딩을 통에 그 규모를 확장할 것\n    - 각 계층은 독립적 서비스로 분할할 것\n    - 시스템을 지속적으로 모니터링 하고, 자동화 도구들을 활용할 것\n  \n---\n\n# 단일서버\n\n## 시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스\n\n1. 사용자가 도메인(api.mysite.com)으로 접속한다.\n2. DNS에 질의하여 IP주소로 반환된다. (DNS는 제3사업자임)\n3. IP주소로 HTTP 요청\n4. HTML or Json으로 응답\n\n---\n\n# 데이터베이스\n\n## RDBMS vs NoSQL\n\n- RDBMS\n    - 오라클, MySQL, PostegreSQL\n    - 열, 컬럼으로 표현\n    - Join으로 합침\n- NoSQL\n    - MongoDB ...\n    - Join 지원 안함\n\n## NoSQL 쓰는 경우\n\n- 속도 중요할 시\n- 비정형 데이터일 시\n- 데이터 직렬화, 역직렬화 용\n- 대량의 데이터\n\n---\n\n# 수직적 규모 확장 vs 수평적 규모 확장\n\n## Sacale-Up vs Sacale-Out\n\nScale-Up : 단일 서버 사양을 높임\n\nScale-Out : 서버 수를 추가\n\n## Sacale-Up 아닌 Sacale-Out이 유리한 이유\n\n- 한 대의 서버 메모리를 무한대로 증설할 방법이 없음\n- 장애에 대한 자동복구 방안이나 다중화 제시 X\n\n## 로드밸런서(LB)\n\n- 트래픽 분산의 역할\n\n## DB 다중화\n\n- 이중화 시 master-slave로 나눔\n- master는 write, slave는 read\n- 보통 read연산 비중이 훨씬 높고 slave DB가 더 많음 → 성능\n\n---\n\n# 캐시\n\n- 값비싼 연산 결과나 자주 참조되는 데이터를 저장하는 메모리\n\n## 캐시 사용 시 고려해야 할 것\n\n- 영속적인 데이터 X\n- 만료(expire) 방식\n    - LRU → 가장 자주 씀\n    - LFU\n    - FIFO\n- 데이터 일관성 유지 방식\n\n---\n\n# 콘텐츠 전송 네크워크(CDN)\n\n- 정적 콘텐츠 캐싱\n- CSS, JS, 이미지, 비디오\n\n---\n\n# 무상태(stateless) 웹 계층\n\n- Scale-Out 시 중요\n- 상태정보를 웹 계층에서 제거\n\n## 상태 정보를 웹 말고 DB에 저장\n\n- MSA시 **공유저장소**를 활용\n- Redis, NoSQL 활용\n\n---\n\n# 데이터센터\n\n- 통상적으로 지리적으로 가장 가까운 곳으로 라우팅(Geo-routing)\n\n## 구축 시 신경써야 할 것\n\n- 트래픽 우회\n- 데이터 동기화\n- 테스트와 배포\n\n→ Message Queue는 시스템이 독립적으로 확장할 수 있는 핵심전략\n\n---\n\n# 메시지 큐\n\n- 무손실, 비동기\n- pub-sub 방식\n\n\n---\n\n# 데이터베이스의 규모 확장\n\n## 샤딩(sharding)\n\n- DB를 scale-out 하는 것\n- **모든 샤드는 같은 스키마를 쓰지만 데이터 중복은 없음**\n- 샤딩 키를 정하는 것이 중요","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-사용자-수에-따른-규모-확장성/2021-10-13-사용자-수에-따른-규모-확장성","published":1,"date":"2021-10-26T12:50:02.725Z","updated":"2021-10-26T12:50:02.725Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fn000wjd9kd39zgdz2","content":"<ul>\n<li>요약<ul>\n<li>웹 계층은 무상태 계층으로</li>\n<li>모든 계층에 다중화 도입</li>\n<li>가능한 많은 데이터를 캐시할 것</li>\n<li>여러 데이터 센터를 지원할 것</li>\n<li>정적 콘텐츠는 CDN을 통해 서비스할 것</li>\n<li>데이터 계층은 샤딩을 통에 그 규모를 확장할 것</li>\n<li>각 계층은 독립적 서비스로 분할할 것</li>\n<li>시스템을 지속적으로 모니터링 하고, 자동화 도구들을 활용할 것</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"단일서버\"><a href=\"#단일서버\" class=\"headerlink\" title=\"단일서버\"></a>단일서버</h1><h2 id=\"시스템이-단일-서버로-구현되어있다고-가정할-시-프로세스\"><a href=\"#시스템이-단일-서버로-구현되어있다고-가정할-시-프로세스\" class=\"headerlink\" title=\"시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스\"></a>시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스</h2><ol>\n<li>사용자가 도메인(api.mysite.com)으로 접속한다.</li>\n<li>DNS에 질의하여 IP주소로 반환된다. (DNS는 제3사업자임)</li>\n<li>IP주소로 HTTP 요청</li>\n<li>HTML or Json으로 응답</li>\n</ol>\n<hr>\n<h1 id=\"데이터베이스\"><a href=\"#데이터베이스\" class=\"headerlink\" title=\"데이터베이스\"></a>데이터베이스</h1><h2 id=\"RDBMS-vs-NoSQL\"><a href=\"#RDBMS-vs-NoSQL\" class=\"headerlink\" title=\"RDBMS vs NoSQL\"></a>RDBMS vs NoSQL</h2><ul>\n<li>RDBMS<ul>\n<li>오라클, MySQL, PostegreSQL</li>\n<li>열, 컬럼으로 표현</li>\n<li>Join으로 합침</li>\n</ul>\n</li>\n<li>NoSQL<ul>\n<li>MongoDB …</li>\n<li>Join 지원 안함</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"NoSQL-쓰는-경우\"><a href=\"#NoSQL-쓰는-경우\" class=\"headerlink\" title=\"NoSQL 쓰는 경우\"></a>NoSQL 쓰는 경우</h2><ul>\n<li>속도 중요할 시</li>\n<li>비정형 데이터일 시</li>\n<li>데이터 직렬화, 역직렬화 용</li>\n<li>대량의 데이터</li>\n</ul>\n<hr>\n<h1 id=\"수직적-규모-확장-vs-수평적-규모-확장\"><a href=\"#수직적-규모-확장-vs-수평적-규모-확장\" class=\"headerlink\" title=\"수직적 규모 확장 vs 수평적 규모 확장\"></a>수직적 규모 확장 vs 수평적 규모 확장</h1><h2 id=\"Sacale-Up-vs-Sacale-Out\"><a href=\"#Sacale-Up-vs-Sacale-Out\" class=\"headerlink\" title=\"Sacale-Up vs Sacale-Out\"></a>Sacale-Up vs Sacale-Out</h2><p>Scale-Up : 단일 서버 사양을 높임</p>\n<p>Scale-Out : 서버 수를 추가</p>\n<h2 id=\"Sacale-Up-아닌-Sacale-Out이-유리한-이유\"><a href=\"#Sacale-Up-아닌-Sacale-Out이-유리한-이유\" class=\"headerlink\" title=\"Sacale-Up 아닌 Sacale-Out이 유리한 이유\"></a>Sacale-Up 아닌 Sacale-Out이 유리한 이유</h2><ul>\n<li>한 대의 서버 메모리를 무한대로 증설할 방법이 없음</li>\n<li>장애에 대한 자동복구 방안이나 다중화 제시 X</li>\n</ul>\n<h2 id=\"로드밸런서-LB\"><a href=\"#로드밸런서-LB\" class=\"headerlink\" title=\"로드밸런서(LB)\"></a>로드밸런서(LB)</h2><ul>\n<li>트래픽 분산의 역할</li>\n</ul>\n<h2 id=\"DB-다중화\"><a href=\"#DB-다중화\" class=\"headerlink\" title=\"DB 다중화\"></a>DB 다중화</h2><ul>\n<li>이중화 시 master-slave로 나눔</li>\n<li>master는 write, slave는 read</li>\n<li>보통 read연산 비중이 훨씬 높고 slave DB가 더 많음 → 성능</li>\n</ul>\n<hr>\n<h1 id=\"캐시\"><a href=\"#캐시\" class=\"headerlink\" title=\"캐시\"></a>캐시</h1><ul>\n<li>값비싼 연산 결과나 자주 참조되는 데이터를 저장하는 메모리</li>\n</ul>\n<h2 id=\"캐시-사용-시-고려해야-할-것\"><a href=\"#캐시-사용-시-고려해야-할-것\" class=\"headerlink\" title=\"캐시 사용 시 고려해야 할 것\"></a>캐시 사용 시 고려해야 할 것</h2><ul>\n<li>영속적인 데이터 X</li>\n<li>만료(expire) 방식<ul>\n<li>LRU → 가장 자주 씀</li>\n<li>LFU</li>\n<li>FIFO</li>\n</ul>\n</li>\n<li>데이터 일관성 유지 방식</li>\n</ul>\n<hr>\n<h1 id=\"콘텐츠-전송-네크워크-CDN\"><a href=\"#콘텐츠-전송-네크워크-CDN\" class=\"headerlink\" title=\"콘텐츠 전송 네크워크(CDN)\"></a>콘텐츠 전송 네크워크(CDN)</h1><ul>\n<li>정적 콘텐츠 캐싱</li>\n<li>CSS, JS, 이미지, 비디오</li>\n</ul>\n<hr>\n<h1 id=\"무상태-stateless-웹-계층\"><a href=\"#무상태-stateless-웹-계층\" class=\"headerlink\" title=\"무상태(stateless) 웹 계층\"></a>무상태(stateless) 웹 계층</h1><ul>\n<li>Scale-Out 시 중요</li>\n<li>상태정보를 웹 계층에서 제거</li>\n</ul>\n<h2 id=\"상태-정보를-웹-말고-DB에-저장\"><a href=\"#상태-정보를-웹-말고-DB에-저장\" class=\"headerlink\" title=\"상태 정보를 웹 말고 DB에 저장\"></a>상태 정보를 웹 말고 DB에 저장</h2><ul>\n<li>MSA시 <strong>공유저장소</strong>를 활용</li>\n<li>Redis, NoSQL 활용</li>\n</ul>\n<hr>\n<h1 id=\"데이터센터\"><a href=\"#데이터센터\" class=\"headerlink\" title=\"데이터센터\"></a>데이터센터</h1><ul>\n<li>통상적으로 지리적으로 가장 가까운 곳으로 라우팅(Geo-routing)</li>\n</ul>\n<h2 id=\"구축-시-신경써야-할-것\"><a href=\"#구축-시-신경써야-할-것\" class=\"headerlink\" title=\"구축 시 신경써야 할 것\"></a>구축 시 신경써야 할 것</h2><ul>\n<li>트래픽 우회</li>\n<li>데이터 동기화</li>\n<li>테스트와 배포</li>\n</ul>\n<p>→ Message Queue는 시스템이 독립적으로 확장할 수 있는 핵심전략</p>\n<hr>\n<h1 id=\"메시지-큐\"><a href=\"#메시지-큐\" class=\"headerlink\" title=\"메시지 큐\"></a>메시지 큐</h1><ul>\n<li>무손실, 비동기</li>\n<li>pub-sub 방식</li>\n</ul>\n<hr>\n<h1 id=\"데이터베이스의-규모-확장\"><a href=\"#데이터베이스의-규모-확장\" class=\"headerlink\" title=\"데이터베이스의 규모 확장\"></a>데이터베이스의 규모 확장</h1><h2 id=\"샤딩-sharding\"><a href=\"#샤딩-sharding\" class=\"headerlink\" title=\"샤딩(sharding)\"></a>샤딩(sharding)</h2><ul>\n<li>DB를 scale-out 하는 것</li>\n<li><strong>모든 샤드는 같은 스키마를 쓰지만 데이터 중복은 없음</strong></li>\n<li>샤딩 키를 정하는 것이 중요</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>요약<ul>\n<li>웹 계층은 무상태 계층으로</li>\n<li>모든 계층에 다중화 도입</li>\n<li>가능한 많은 데이터를 캐시할 것</li>\n<li>여러 데이터 센터를 지원할 것</li>\n<li>정적 콘텐츠는 CDN을 통해 서비스할 것</li>\n<li>데이터 계층은 샤딩을 통에 그 규모를 확장할 것</li>\n<li>각 계층은 독립적 서비스로 분할할 것</li>\n<li>시스템을 지속적으로 모니터링 하고, 자동화 도구들을 활용할 것</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"단일서버\"><a href=\"#단일서버\" class=\"headerlink\" title=\"단일서버\"></a>단일서버</h1><h2 id=\"시스템이-단일-서버로-구현되어있다고-가정할-시-프로세스\"><a href=\"#시스템이-단일-서버로-구현되어있다고-가정할-시-프로세스\" class=\"headerlink\" title=\"시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스\"></a>시스템이 단일 서버로 구현되어있다고 가정할 시 프로세스</h2><ol>\n<li>사용자가 도메인(api.mysite.com)으로 접속한다.</li>\n<li>DNS에 질의하여 IP주소로 반환된다. (DNS는 제3사업자임)</li>\n<li>IP주소로 HTTP 요청</li>\n<li>HTML or Json으로 응답</li>\n</ol>\n<hr>\n<h1 id=\"데이터베이스\"><a href=\"#데이터베이스\" class=\"headerlink\" title=\"데이터베이스\"></a>데이터베이스</h1><h2 id=\"RDBMS-vs-NoSQL\"><a href=\"#RDBMS-vs-NoSQL\" class=\"headerlink\" title=\"RDBMS vs NoSQL\"></a>RDBMS vs NoSQL</h2><ul>\n<li>RDBMS<ul>\n<li>오라클, MySQL, PostegreSQL</li>\n<li>열, 컬럼으로 표현</li>\n<li>Join으로 합침</li>\n</ul>\n</li>\n<li>NoSQL<ul>\n<li>MongoDB …</li>\n<li>Join 지원 안함</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"NoSQL-쓰는-경우\"><a href=\"#NoSQL-쓰는-경우\" class=\"headerlink\" title=\"NoSQL 쓰는 경우\"></a>NoSQL 쓰는 경우</h2><ul>\n<li>속도 중요할 시</li>\n<li>비정형 데이터일 시</li>\n<li>데이터 직렬화, 역직렬화 용</li>\n<li>대량의 데이터</li>\n</ul>\n<hr>\n<h1 id=\"수직적-규모-확장-vs-수평적-규모-확장\"><a href=\"#수직적-규모-확장-vs-수평적-규모-확장\" class=\"headerlink\" title=\"수직적 규모 확장 vs 수평적 규모 확장\"></a>수직적 규모 확장 vs 수평적 규모 확장</h1><h2 id=\"Sacale-Up-vs-Sacale-Out\"><a href=\"#Sacale-Up-vs-Sacale-Out\" class=\"headerlink\" title=\"Sacale-Up vs Sacale-Out\"></a>Sacale-Up vs Sacale-Out</h2><p>Scale-Up : 단일 서버 사양을 높임</p>\n<p>Scale-Out : 서버 수를 추가</p>\n<h2 id=\"Sacale-Up-아닌-Sacale-Out이-유리한-이유\"><a href=\"#Sacale-Up-아닌-Sacale-Out이-유리한-이유\" class=\"headerlink\" title=\"Sacale-Up 아닌 Sacale-Out이 유리한 이유\"></a>Sacale-Up 아닌 Sacale-Out이 유리한 이유</h2><ul>\n<li>한 대의 서버 메모리를 무한대로 증설할 방법이 없음</li>\n<li>장애에 대한 자동복구 방안이나 다중화 제시 X</li>\n</ul>\n<h2 id=\"로드밸런서-LB\"><a href=\"#로드밸런서-LB\" class=\"headerlink\" title=\"로드밸런서(LB)\"></a>로드밸런서(LB)</h2><ul>\n<li>트래픽 분산의 역할</li>\n</ul>\n<h2 id=\"DB-다중화\"><a href=\"#DB-다중화\" class=\"headerlink\" title=\"DB 다중화\"></a>DB 다중화</h2><ul>\n<li>이중화 시 master-slave로 나눔</li>\n<li>master는 write, slave는 read</li>\n<li>보통 read연산 비중이 훨씬 높고 slave DB가 더 많음 → 성능</li>\n</ul>\n<hr>\n<h1 id=\"캐시\"><a href=\"#캐시\" class=\"headerlink\" title=\"캐시\"></a>캐시</h1><ul>\n<li>값비싼 연산 결과나 자주 참조되는 데이터를 저장하는 메모리</li>\n</ul>\n<h2 id=\"캐시-사용-시-고려해야-할-것\"><a href=\"#캐시-사용-시-고려해야-할-것\" class=\"headerlink\" title=\"캐시 사용 시 고려해야 할 것\"></a>캐시 사용 시 고려해야 할 것</h2><ul>\n<li>영속적인 데이터 X</li>\n<li>만료(expire) 방식<ul>\n<li>LRU → 가장 자주 씀</li>\n<li>LFU</li>\n<li>FIFO</li>\n</ul>\n</li>\n<li>데이터 일관성 유지 방식</li>\n</ul>\n<hr>\n<h1 id=\"콘텐츠-전송-네크워크-CDN\"><a href=\"#콘텐츠-전송-네크워크-CDN\" class=\"headerlink\" title=\"콘텐츠 전송 네크워크(CDN)\"></a>콘텐츠 전송 네크워크(CDN)</h1><ul>\n<li>정적 콘텐츠 캐싱</li>\n<li>CSS, JS, 이미지, 비디오</li>\n</ul>\n<hr>\n<h1 id=\"무상태-stateless-웹-계층\"><a href=\"#무상태-stateless-웹-계층\" class=\"headerlink\" title=\"무상태(stateless) 웹 계층\"></a>무상태(stateless) 웹 계층</h1><ul>\n<li>Scale-Out 시 중요</li>\n<li>상태정보를 웹 계층에서 제거</li>\n</ul>\n<h2 id=\"상태-정보를-웹-말고-DB에-저장\"><a href=\"#상태-정보를-웹-말고-DB에-저장\" class=\"headerlink\" title=\"상태 정보를 웹 말고 DB에 저장\"></a>상태 정보를 웹 말고 DB에 저장</h2><ul>\n<li>MSA시 <strong>공유저장소</strong>를 활용</li>\n<li>Redis, NoSQL 활용</li>\n</ul>\n<hr>\n<h1 id=\"데이터센터\"><a href=\"#데이터센터\" class=\"headerlink\" title=\"데이터센터\"></a>데이터센터</h1><ul>\n<li>통상적으로 지리적으로 가장 가까운 곳으로 라우팅(Geo-routing)</li>\n</ul>\n<h2 id=\"구축-시-신경써야-할-것\"><a href=\"#구축-시-신경써야-할-것\" class=\"headerlink\" title=\"구축 시 신경써야 할 것\"></a>구축 시 신경써야 할 것</h2><ul>\n<li>트래픽 우회</li>\n<li>데이터 동기화</li>\n<li>테스트와 배포</li>\n</ul>\n<p>→ Message Queue는 시스템이 독립적으로 확장할 수 있는 핵심전략</p>\n<hr>\n<h1 id=\"메시지-큐\"><a href=\"#메시지-큐\" class=\"headerlink\" title=\"메시지 큐\"></a>메시지 큐</h1><ul>\n<li>무손실, 비동기</li>\n<li>pub-sub 방식</li>\n</ul>\n<hr>\n<h1 id=\"데이터베이스의-규모-확장\"><a href=\"#데이터베이스의-규모-확장\" class=\"headerlink\" title=\"데이터베이스의 규모 확장\"></a>데이터베이스의 규모 확장</h1><h2 id=\"샤딩-sharding\"><a href=\"#샤딩-sharding\" class=\"headerlink\" title=\"샤딩(sharding)\"></a>샤딩(sharding)</h2><ul>\n<li>DB를 scale-out 하는 것</li>\n<li><strong>모든 샤드는 같은 스키마를 쓰지만 데이터 중복은 없음</strong></li>\n<li>샤딩 키를 정하는 것이 중요</li>\n</ul>\n"},{"title":"안정 해시 설계","toc":true,"toc_sticky":true,"toc_label":"안정 해시 설계","toc_icon":"sticky-note","_content":"\n\n> 수평적 규모 확장을 위해서는 요청 또는 데이터를 서버로 균등하게 나누는 것이 중요\n안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술\n>\n\n---\n\n## 안정 해시 설계의  이점\n\n- 서버가 추가되거나 삭제될 때 재배치되는 키의 수가 최소화된다.\n- 데이터가 보다 균등하게 분포하게 되므로 수평적 규모 확장성을 달성하기 쉽다.\n- 핫스팟(hotspot) 키 문제를 줄인다.\n\n---\n\n### 만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?\n\n### 기존 해시 테이블\n\n- 모든 키를 재배치함\n\n![](https://user-images.githubusercontent.com/55419159/138881514-e09e12fd-2764-40ee-9eef-2cf3a4a84f3f.png)\n\n### 안정 해시\n\n- 이상이 있는 부분만 재배치\n\n![](https://user-images.githubusercontent.com/55419159/138881565-e60403c1-c98e-48ab-bb80-8a8c5f10320b.png)\n\n---\n\n## 기본 구현법\n\n1. 서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치한다.\n2. 키의 위치에서 링을 시계 방향을 탐색하다 만나는 최초의 서버가 키가 저장될 서버다.\n\n**문제점**\n\n- 서버가 추가되거나 삭제될 때 파티션의 크기를 균등하게 유지하는게 불가능\n- 키의 균등 분포를 달성하기가 어려움\n\n---\n\n## 가상 노드\n\n> 기본 구현법의 문제를 해결하기 위한 방법\n실제 노드를 가르키는 가상 노드를 만들어 해시 링에 균등하게 배치하는 방법\n>\n","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-안정-해시-설계/2021-10-13-안정-해시-설계.md","raw":"---\ntitle: \"안정 해시 설계\"\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\n  - 안정해시\n  - 가상노드\ntoc: true\ntoc_sticky: true\ntoc_label: \"안정 해시 설계\"\ntoc_icon: \"sticky-note\"\n---\n\n\n> 수평적 규모 확장을 위해서는 요청 또는 데이터를 서버로 균등하게 나누는 것이 중요\n안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술\n>\n\n---\n\n## 안정 해시 설계의  이점\n\n- 서버가 추가되거나 삭제될 때 재배치되는 키의 수가 최소화된다.\n- 데이터가 보다 균등하게 분포하게 되므로 수평적 규모 확장성을 달성하기 쉽다.\n- 핫스팟(hotspot) 키 문제를 줄인다.\n\n---\n\n### 만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?\n\n### 기존 해시 테이블\n\n- 모든 키를 재배치함\n\n![](https://user-images.githubusercontent.com/55419159/138881514-e09e12fd-2764-40ee-9eef-2cf3a4a84f3f.png)\n\n### 안정 해시\n\n- 이상이 있는 부분만 재배치\n\n![](https://user-images.githubusercontent.com/55419159/138881565-e60403c1-c98e-48ab-bb80-8a8c5f10320b.png)\n\n---\n\n## 기본 구현법\n\n1. 서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치한다.\n2. 키의 위치에서 링을 시계 방향을 탐색하다 만나는 최초의 서버가 키가 저장될 서버다.\n\n**문제점**\n\n- 서버가 추가되거나 삭제될 때 파티션의 크기를 균등하게 유지하는게 불가능\n- 키의 균등 분포를 달성하기가 어려움\n\n---\n\n## 가상 노드\n\n> 기본 구현법의 문제를 해결하기 위한 방법\n실제 노드를 가르키는 가상 노드를 만들어 해시 링에 균등하게 배치하는 방법\n>\n","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-안정-해시-설계/2021-10-13-안정-해시-설계","published":1,"date":"2021-10-26T12:53:30.299Z","updated":"2021-10-26T12:53:30.299Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fp000zjd9k6sf5agrf","content":"<blockquote>\n<p>수평적 규모 확장을 위해서는 요청 또는 데이터를 서버로 균등하게 나누는 것이 중요<br>안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술</p>\n</blockquote>\n<hr>\n<h2 id=\"안정-해시-설계의-이점\"><a href=\"#안정-해시-설계의-이점\" class=\"headerlink\" title=\"안정 해시 설계의  이점\"></a>안정 해시 설계의  이점</h2><ul>\n<li>서버가 추가되거나 삭제될 때 재배치되는 키의 수가 최소화된다.</li>\n<li>데이터가 보다 균등하게 분포하게 되므로 수평적 규모 확장성을 달성하기 쉽다.</li>\n<li>핫스팟(hotspot) 키 문제를 줄인다.</li>\n</ul>\n<hr>\n<h3 id=\"만약-잘-분배가-되어있던-서버-하나가-죽었을-경우\"><a href=\"#만약-잘-분배가-되어있던-서버-하나가-죽었을-경우\" class=\"headerlink\" title=\"만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?\"></a>만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?</h3><h3 id=\"기존-해시-테이블\"><a href=\"#기존-해시-테이블\" class=\"headerlink\" title=\"기존 해시 테이블\"></a>기존 해시 테이블</h3><ul>\n<li>모든 키를 재배치함</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881514-e09e12fd-2764-40ee-9eef-2cf3a4a84f3f.png\"></p>\n<h3 id=\"안정-해시\"><a href=\"#안정-해시\" class=\"headerlink\" title=\"안정 해시\"></a>안정 해시</h3><ul>\n<li>이상이 있는 부분만 재배치</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881565-e60403c1-c98e-48ab-bb80-8a8c5f10320b.png\"></p>\n<hr>\n<h2 id=\"기본-구현법\"><a href=\"#기본-구현법\" class=\"headerlink\" title=\"기본 구현법\"></a>기본 구현법</h2><ol>\n<li>서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치한다.</li>\n<li>키의 위치에서 링을 시계 방향을 탐색하다 만나는 최초의 서버가 키가 저장될 서버다.</li>\n</ol>\n<p><strong>문제점</strong></p>\n<ul>\n<li>서버가 추가되거나 삭제될 때 파티션의 크기를 균등하게 유지하는게 불가능</li>\n<li>키의 균등 분포를 달성하기가 어려움</li>\n</ul>\n<hr>\n<h2 id=\"가상-노드\"><a href=\"#가상-노드\" class=\"headerlink\" title=\"가상 노드\"></a>가상 노드</h2><blockquote>\n<p>기본 구현법의 문제를 해결하기 위한 방법<br>실제 노드를 가르키는 가상 노드를 만들어 해시 링에 균등하게 배치하는 방법</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>수평적 규모 확장을 위해서는 요청 또는 데이터를 서버로 균등하게 나누는 것이 중요<br>안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술</p>\n</blockquote>\n<hr>\n<h2 id=\"안정-해시-설계의-이점\"><a href=\"#안정-해시-설계의-이점\" class=\"headerlink\" title=\"안정 해시 설계의  이점\"></a>안정 해시 설계의  이점</h2><ul>\n<li>서버가 추가되거나 삭제될 때 재배치되는 키의 수가 최소화된다.</li>\n<li>데이터가 보다 균등하게 분포하게 되므로 수평적 규모 확장성을 달성하기 쉽다.</li>\n<li>핫스팟(hotspot) 키 문제를 줄인다.</li>\n</ul>\n<hr>\n<h3 id=\"만약-잘-분배가-되어있던-서버-하나가-죽었을-경우\"><a href=\"#만약-잘-분배가-되어있던-서버-하나가-죽었을-경우\" class=\"headerlink\" title=\"만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?\"></a>만약 잘 분배가 되어있던 서버 하나가 죽었을 경우?</h3><h3 id=\"기존-해시-테이블\"><a href=\"#기존-해시-테이블\" class=\"headerlink\" title=\"기존 해시 테이블\"></a>기존 해시 테이블</h3><ul>\n<li>모든 키를 재배치함</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881514-e09e12fd-2764-40ee-9eef-2cf3a4a84f3f.png\"></p>\n<h3 id=\"안정-해시\"><a href=\"#안정-해시\" class=\"headerlink\" title=\"안정 해시\"></a>안정 해시</h3><ul>\n<li>이상이 있는 부분만 재배치</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881565-e60403c1-c98e-48ab-bb80-8a8c5f10320b.png\"></p>\n<hr>\n<h2 id=\"기본-구현법\"><a href=\"#기본-구현법\" class=\"headerlink\" title=\"기본 구현법\"></a>기본 구현법</h2><ol>\n<li>서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치한다.</li>\n<li>키의 위치에서 링을 시계 방향을 탐색하다 만나는 최초의 서버가 키가 저장될 서버다.</li>\n</ol>\n<p><strong>문제점</strong></p>\n<ul>\n<li>서버가 추가되거나 삭제될 때 파티션의 크기를 균등하게 유지하는게 불가능</li>\n<li>키의 균등 분포를 달성하기가 어려움</li>\n</ul>\n<hr>\n<h2 id=\"가상-노드\"><a href=\"#가상-노드\" class=\"headerlink\" title=\"가상 노드\"></a>가상 노드</h2><blockquote>\n<p>기본 구현법의 문제를 해결하기 위한 방법<br>실제 노드를 가르키는 가상 노드를 만들어 해시 링에 균등하게 배치하는 방법</p>\n</blockquote>\n"},{"title":"처리율 제한 장치의 설계","toc":true,"toc_sticky":true,"toc_label":"처리율 제한 장치의 설계","toc_icon":"sticky-note","_content":"\n\n# 처리율 제한 장치의 설계\n\n> API 요청횟수가 특정 임계치를 넘어가면 추가로 도달한 요청은 처리를 중단하는 것\n>\n\n---\n\n## 장점\n\n1. DoS공격 방지\n2. 비용절감\n3. 서버 과부하 방지\n\n---\n\n# 처리율 제한 알고리즘\n\n## 토큰 버킷\n    \n    > 토큰을 발급하고 토큰의 갯수 만큼만 API 요청을 버킷에 담음\n    버킷이 가득 찬 경우 API요청은 버려짐(overflow)\n    >\n\n![image](https://user-images.githubusercontent.com/55419159/138881073-2532be82-cc51-4872-a6be-f7e256b1a74e.png)\n\n    - 가장 간단하고 폭넓게 사용됨(아마존 등)\n    - 메모리 효율성 높음\n    - 버킷크기:토큰공급률 비율 튜닝이 관건\n\n---  \n\n## 누출 버킷\n    \n    > 토큰 버킷 알고리즘과 유사하지만 처리율이 고정\n    큐(FIFO)로 구현\n    > \n    \n![image](https://user-images.githubusercontent.com/55419159/138881283-90475661-ca10-481f-a3fb-2e7e3cae0168.png)\n\n\n- 동작방식\n    \n    1. 요청이 도착하면 큐가 가득 차 있는지 확인, 빈자리가 있는 경우 큐에 요청 추가\n    2. 큐가 가득 차있는 경우 새 요청은 버림\n    3. 지정된 시간마다 큐에서 요청을 꺼내어 처리\n    \n    - 토큰 버킷 알고리즘과 유사\n    - 고정된 처리율을 가지고 있어 안정적 출력이 필요한 환경에 적합\n    - 단시간에 많은 처리율이 들어올 경우 취약함\n\n---\n\n## 고정 윈도 카운터\n\n- 동작방식\n    \n    1. 타임라인을 고정된 간격의 윈도로 나누고, 각 윈도마다 카운터를 붙임\n    2. 요청이 접수될 때마다 이 카운터의 값은 1씩 증가함\n    3. 이 카운터 값이 사전에 설정된 임계치에 도달하면 새로운 요청은 \n    새 윈도가 열릴 때 까지 버려짐\n    \n![image](https://user-images.githubusercontent.com/55419159/138881425-aaf0ecc3-a73c-4007-9d36-3c9693f2062f.png)\n \n    - 메모리 효율 좋음\n    - 윈도 경계에서 일시적으로 많은 트래픽이 몰려드는 경우, \n    기대했던 시스템의 처리 한도보다 많은 양의 요청을 처리하게 됨\n\n---\n\n## 이동 윈도 로그\n    \n    > 고정 윈도 카운터 알고리즘의 윈도 경계 부분에서 \n    트래픽이 몰리는 경우를 보완하기 위한 알고리즘\n    > \n    \n- 동작방식\n    \n    1. 요청의 타임스탬프를 추적함\n    타임스탬프는 보통 Redis의 Sorted Set과 같은 정렬 집합 캐시에 보관\n    2. 새 요청이 오면 만료된 타임스탬프는 제거\n    3. 새 요청의 타임 스탬프를 로그에 추가\n    4. 로그의 크기가 허용치보다 같거나 작으면 요청을 시스템에 전달함\n    그렇지 않은 경우 처리는 거부됨\n    \n    - 윈도 알고리즘의 처리율 한도를 넘지 않음\n    - 다량의 메모리 사용, 거부된 요청의 타임스탬프도 보관하기 때문\n\n---\n\n## 이동 윈도 카운터\n    \n    > 고정 윈도 카운터 + 이동 윈도 로그\n    > \n    \n    - 이전 시간대의 평균 처리율에 따라 현재 윈도의 상태를 계산하므로 \n    짧은 시간에 몰리는 트래픽에도 잘 대응\n    - 메모리 효율이 좋음\n    - 직전 시간의 추정치를 계산하기 때문에 기준이 느슨함, But 심각한 건 아님\n\n---\n\n# 프로세스\n\n1. 처리율 제한 규칙은 디스크에 보관한다. \n작업 프로세스는 수시로 규칙을 디스크에서 읽어 캐시에 저장한다.\n2. 클라이언트가 요청을 서버에 보내면 요청은 먼저 처리율 제한 미들웨어에 도달한다.\n카운터 및 마지막 요청의 타임스탬프를 레디스 캐시에서 가져온다. \n    - 해당 요청이 처리율 제한에 걸리지 않은 경우 API서버로 보낸다.\n    - 해당 요청이 처리율 제한에 걸렸다면 429(too many request) 에러를 클라이언트에 보낸다. \n    한편 해당 요청은 그대로 버릴 수도 있고 메시지 큐에 저장할 수도 있다.\n","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/2021-10-13-처리율-제한-장치의-설계.md","raw":"---\ntitle: \"처리율 제한 장치의 설계\"\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\n  - 처리율제한\n  - 토큰버킷\n  - 누출버킷\n  - 이동윈도로그\n  - 고정윈도카운터\ntoc: true\ntoc_sticky: true\ntoc_label: \"처리율 제한 장치의 설계\"\ntoc_icon: \"sticky-note\"\n---\n\n\n# 처리율 제한 장치의 설계\n\n> API 요청횟수가 특정 임계치를 넘어가면 추가로 도달한 요청은 처리를 중단하는 것\n>\n\n---\n\n## 장점\n\n1. DoS공격 방지\n2. 비용절감\n3. 서버 과부하 방지\n\n---\n\n# 처리율 제한 알고리즘\n\n## 토큰 버킷\n    \n    > 토큰을 발급하고 토큰의 갯수 만큼만 API 요청을 버킷에 담음\n    버킷이 가득 찬 경우 API요청은 버려짐(overflow)\n    >\n\n![image](https://user-images.githubusercontent.com/55419159/138881073-2532be82-cc51-4872-a6be-f7e256b1a74e.png)\n\n    - 가장 간단하고 폭넓게 사용됨(아마존 등)\n    - 메모리 효율성 높음\n    - 버킷크기:토큰공급률 비율 튜닝이 관건\n\n---  \n\n## 누출 버킷\n    \n    > 토큰 버킷 알고리즘과 유사하지만 처리율이 고정\n    큐(FIFO)로 구현\n    > \n    \n![image](https://user-images.githubusercontent.com/55419159/138881283-90475661-ca10-481f-a3fb-2e7e3cae0168.png)\n\n\n- 동작방식\n    \n    1. 요청이 도착하면 큐가 가득 차 있는지 확인, 빈자리가 있는 경우 큐에 요청 추가\n    2. 큐가 가득 차있는 경우 새 요청은 버림\n    3. 지정된 시간마다 큐에서 요청을 꺼내어 처리\n    \n    - 토큰 버킷 알고리즘과 유사\n    - 고정된 처리율을 가지고 있어 안정적 출력이 필요한 환경에 적합\n    - 단시간에 많은 처리율이 들어올 경우 취약함\n\n---\n\n## 고정 윈도 카운터\n\n- 동작방식\n    \n    1. 타임라인을 고정된 간격의 윈도로 나누고, 각 윈도마다 카운터를 붙임\n    2. 요청이 접수될 때마다 이 카운터의 값은 1씩 증가함\n    3. 이 카운터 값이 사전에 설정된 임계치에 도달하면 새로운 요청은 \n    새 윈도가 열릴 때 까지 버려짐\n    \n![image](https://user-images.githubusercontent.com/55419159/138881425-aaf0ecc3-a73c-4007-9d36-3c9693f2062f.png)\n \n    - 메모리 효율 좋음\n    - 윈도 경계에서 일시적으로 많은 트래픽이 몰려드는 경우, \n    기대했던 시스템의 처리 한도보다 많은 양의 요청을 처리하게 됨\n\n---\n\n## 이동 윈도 로그\n    \n    > 고정 윈도 카운터 알고리즘의 윈도 경계 부분에서 \n    트래픽이 몰리는 경우를 보완하기 위한 알고리즘\n    > \n    \n- 동작방식\n    \n    1. 요청의 타임스탬프를 추적함\n    타임스탬프는 보통 Redis의 Sorted Set과 같은 정렬 집합 캐시에 보관\n    2. 새 요청이 오면 만료된 타임스탬프는 제거\n    3. 새 요청의 타임 스탬프를 로그에 추가\n    4. 로그의 크기가 허용치보다 같거나 작으면 요청을 시스템에 전달함\n    그렇지 않은 경우 처리는 거부됨\n    \n    - 윈도 알고리즘의 처리율 한도를 넘지 않음\n    - 다량의 메모리 사용, 거부된 요청의 타임스탬프도 보관하기 때문\n\n---\n\n## 이동 윈도 카운터\n    \n    > 고정 윈도 카운터 + 이동 윈도 로그\n    > \n    \n    - 이전 시간대의 평균 처리율에 따라 현재 윈도의 상태를 계산하므로 \n    짧은 시간에 몰리는 트래픽에도 잘 대응\n    - 메모리 효율이 좋음\n    - 직전 시간의 추정치를 계산하기 때문에 기준이 느슨함, But 심각한 건 아님\n\n---\n\n# 프로세스\n\n1. 처리율 제한 규칙은 디스크에 보관한다. \n작업 프로세스는 수시로 규칙을 디스크에서 읽어 캐시에 저장한다.\n2. 클라이언트가 요청을 서버에 보내면 요청은 먼저 처리율 제한 미들웨어에 도달한다.\n카운터 및 마지막 요청의 타임스탬프를 레디스 캐시에서 가져온다. \n    - 해당 요청이 처리율 제한에 걸리지 않은 경우 API서버로 보낸다.\n    - 해당 요청이 처리율 제한에 걸렸다면 429(too many request) 에러를 클라이언트에 보낸다. \n    한편 해당 요청은 그대로 버릴 수도 있고 메시지 큐에 저장할 수도 있다.\n","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-처리율-제한-장치의-설계/2021-10-13-처리율-제한-장치의-설계","published":1,"date":"2021-10-26T12:57:04.929Z","updated":"2021-10-26T12:57:04.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fq0013jd9k6ok140d0","content":"<h1 id=\"처리율-제한-장치의-설계\"><a href=\"#처리율-제한-장치의-설계\" class=\"headerlink\" title=\"처리율 제한 장치의 설계\"></a>처리율 제한 장치의 설계</h1><blockquote>\n<p>API 요청횟수가 특정 임계치를 넘어가면 추가로 도달한 요청은 처리를 중단하는 것</p>\n</blockquote>\n<hr>\n<h2 id=\"장점\"><a href=\"#장점\" class=\"headerlink\" title=\"장점\"></a>장점</h2><ol>\n<li>DoS공격 방지</li>\n<li>비용절감</li>\n<li>서버 과부하 방지</li>\n</ol>\n<hr>\n<h1 id=\"처리율-제한-알고리즘\"><a href=\"#처리율-제한-알고리즘\" class=\"headerlink\" title=\"처리율 제한 알고리즘\"></a>처리율 제한 알고리즘</h1><h2 id=\"토큰-버킷\"><a href=\"#토큰-버킷\" class=\"headerlink\" title=\"토큰 버킷\"></a>토큰 버킷</h2><pre><code>&gt; 토큰을 발급하고 토큰의 갯수 만큼만 API 요청을 버킷에 담음\n버킷이 가득 찬 경우 API요청은 버려짐(overflow)\n&gt;\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881073-2532be82-cc51-4872-a6be-f7e256b1a74e.png\" alt=\"image\"></p>\n<pre><code>- 가장 간단하고 폭넓게 사용됨(아마존 등)\n- 메모리 효율성 높음\n- 버킷크기:토큰공급률 비율 튜닝이 관건\n</code></pre>\n<hr>\n<h2 id=\"누출-버킷\"><a href=\"#누출-버킷\" class=\"headerlink\" title=\"누출 버킷\"></a>누출 버킷</h2><pre><code>&gt; 토큰 버킷 알고리즘과 유사하지만 처리율이 고정\n큐(FIFO)로 구현\n&gt; \n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881283-90475661-ca10-481f-a3fb-2e7e3cae0168.png\" alt=\"image\"></p>\n<ul>\n<li>동작방식<ol>\n<li>요청이 도착하면 큐가 가득 차 있는지 확인, 빈자리가 있는 경우 큐에 요청 추가</li>\n<li>큐가 가득 차있는 경우 새 요청은 버림</li>\n<li>지정된 시간마다 큐에서 요청을 꺼내어 처리</li>\n</ol>\n<ul>\n<li>토큰 버킷 알고리즘과 유사</li>\n<li>고정된 처리율을 가지고 있어 안정적 출력이 필요한 환경에 적합</li>\n<li>단시간에 많은 처리율이 들어올 경우 취약함</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"고정-윈도-카운터\"><a href=\"#고정-윈도-카운터\" class=\"headerlink\" title=\"고정 윈도 카운터\"></a>고정 윈도 카운터</h2><ul>\n<li>동작방식<ol>\n<li>타임라인을 고정된 간격의 윈도로 나누고, 각 윈도마다 카운터를 붙임</li>\n<li>요청이 접수될 때마다 이 카운터의 값은 1씩 증가함</li>\n<li>이 카운터 값이 사전에 설정된 임계치에 도달하면 새로운 요청은<br>새 윈도가 열릴 때 까지 버려짐</li>\n</ol>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881425-aaf0ecc3-a73c-4007-9d36-3c9693f2062f.png\" alt=\"image\"></p>\n<pre><code>- 메모리 효율 좋음\n- 윈도 경계에서 일시적으로 많은 트래픽이 몰려드는 경우, \n기대했던 시스템의 처리 한도보다 많은 양의 요청을 처리하게 됨\n</code></pre>\n<hr>\n<h2 id=\"이동-윈도-로그\"><a href=\"#이동-윈도-로그\" class=\"headerlink\" title=\"이동 윈도 로그\"></a>이동 윈도 로그</h2><pre><code>&gt; 고정 윈도 카운터 알고리즘의 윈도 경계 부분에서 \n트래픽이 몰리는 경우를 보완하기 위한 알고리즘\n&gt; \n</code></pre>\n<ul>\n<li>동작방식<ol>\n<li>요청의 타임스탬프를 추적함<br>타임스탬프는 보통 Redis의 Sorted Set과 같은 정렬 집합 캐시에 보관</li>\n<li>새 요청이 오면 만료된 타임스탬프는 제거</li>\n<li>새 요청의 타임 스탬프를 로그에 추가</li>\n<li>로그의 크기가 허용치보다 같거나 작으면 요청을 시스템에 전달함<br>그렇지 않은 경우 처리는 거부됨</li>\n</ol>\n<ul>\n<li>윈도 알고리즘의 처리율 한도를 넘지 않음</li>\n<li>다량의 메모리 사용, 거부된 요청의 타임스탬프도 보관하기 때문</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"이동-윈도-카운터\"><a href=\"#이동-윈도-카운터\" class=\"headerlink\" title=\"이동 윈도 카운터\"></a>이동 윈도 카운터</h2><pre><code>&gt; 고정 윈도 카운터 + 이동 윈도 로그\n&gt; \n\n- 이전 시간대의 평균 처리율에 따라 현재 윈도의 상태를 계산하므로 \n짧은 시간에 몰리는 트래픽에도 잘 대응\n- 메모리 효율이 좋음\n- 직전 시간의 추정치를 계산하기 때문에 기준이 느슨함, But 심각한 건 아님\n</code></pre>\n<hr>\n<h1 id=\"프로세스\"><a href=\"#프로세스\" class=\"headerlink\" title=\"프로세스\"></a>프로세스</h1><ol>\n<li>처리율 제한 규칙은 디스크에 보관한다.<br>작업 프로세스는 수시로 규칙을 디스크에서 읽어 캐시에 저장한다.</li>\n<li>클라이언트가 요청을 서버에 보내면 요청은 먼저 처리율 제한 미들웨어에 도달한다.<br>카운터 및 마지막 요청의 타임스탬프를 레디스 캐시에서 가져온다. <ul>\n<li>해당 요청이 처리율 제한에 걸리지 않은 경우 API서버로 보낸다.</li>\n<li>해당 요청이 처리율 제한에 걸렸다면 429(too many request) 에러를 클라이언트에 보낸다.<br>한편 해당 요청은 그대로 버릴 수도 있고 메시지 큐에 저장할 수도 있다.</li>\n</ul>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"처리율-제한-장치의-설계\"><a href=\"#처리율-제한-장치의-설계\" class=\"headerlink\" title=\"처리율 제한 장치의 설계\"></a>처리율 제한 장치의 설계</h1><blockquote>\n<p>API 요청횟수가 특정 임계치를 넘어가면 추가로 도달한 요청은 처리를 중단하는 것</p>\n</blockquote>\n<hr>\n<h2 id=\"장점\"><a href=\"#장점\" class=\"headerlink\" title=\"장점\"></a>장점</h2><ol>\n<li>DoS공격 방지</li>\n<li>비용절감</li>\n<li>서버 과부하 방지</li>\n</ol>\n<hr>\n<h1 id=\"처리율-제한-알고리즘\"><a href=\"#처리율-제한-알고리즘\" class=\"headerlink\" title=\"처리율 제한 알고리즘\"></a>처리율 제한 알고리즘</h1><h2 id=\"토큰-버킷\"><a href=\"#토큰-버킷\" class=\"headerlink\" title=\"토큰 버킷\"></a>토큰 버킷</h2><pre><code>&gt; 토큰을 발급하고 토큰의 갯수 만큼만 API 요청을 버킷에 담음\n버킷이 가득 찬 경우 API요청은 버려짐(overflow)\n&gt;\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881073-2532be82-cc51-4872-a6be-f7e256b1a74e.png\" alt=\"image\"></p>\n<pre><code>- 가장 간단하고 폭넓게 사용됨(아마존 등)\n- 메모리 효율성 높음\n- 버킷크기:토큰공급률 비율 튜닝이 관건\n</code></pre>\n<hr>\n<h2 id=\"누출-버킷\"><a href=\"#누출-버킷\" class=\"headerlink\" title=\"누출 버킷\"></a>누출 버킷</h2><pre><code>&gt; 토큰 버킷 알고리즘과 유사하지만 처리율이 고정\n큐(FIFO)로 구현\n&gt; \n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881283-90475661-ca10-481f-a3fb-2e7e3cae0168.png\" alt=\"image\"></p>\n<ul>\n<li>동작방식<ol>\n<li>요청이 도착하면 큐가 가득 차 있는지 확인, 빈자리가 있는 경우 큐에 요청 추가</li>\n<li>큐가 가득 차있는 경우 새 요청은 버림</li>\n<li>지정된 시간마다 큐에서 요청을 꺼내어 처리</li>\n</ol>\n<ul>\n<li>토큰 버킷 알고리즘과 유사</li>\n<li>고정된 처리율을 가지고 있어 안정적 출력이 필요한 환경에 적합</li>\n<li>단시간에 많은 처리율이 들어올 경우 취약함</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"고정-윈도-카운터\"><a href=\"#고정-윈도-카운터\" class=\"headerlink\" title=\"고정 윈도 카운터\"></a>고정 윈도 카운터</h2><ul>\n<li>동작방식<ol>\n<li>타임라인을 고정된 간격의 윈도로 나누고, 각 윈도마다 카운터를 붙임</li>\n<li>요청이 접수될 때마다 이 카운터의 값은 1씩 증가함</li>\n<li>이 카운터 값이 사전에 설정된 임계치에 도달하면 새로운 요청은<br>새 윈도가 열릴 때 까지 버려짐</li>\n</ol>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138881425-aaf0ecc3-a73c-4007-9d36-3c9693f2062f.png\" alt=\"image\"></p>\n<pre><code>- 메모리 효율 좋음\n- 윈도 경계에서 일시적으로 많은 트래픽이 몰려드는 경우, \n기대했던 시스템의 처리 한도보다 많은 양의 요청을 처리하게 됨\n</code></pre>\n<hr>\n<h2 id=\"이동-윈도-로그\"><a href=\"#이동-윈도-로그\" class=\"headerlink\" title=\"이동 윈도 로그\"></a>이동 윈도 로그</h2><pre><code>&gt; 고정 윈도 카운터 알고리즘의 윈도 경계 부분에서 \n트래픽이 몰리는 경우를 보완하기 위한 알고리즘\n&gt; \n</code></pre>\n<ul>\n<li>동작방식<ol>\n<li>요청의 타임스탬프를 추적함<br>타임스탬프는 보통 Redis의 Sorted Set과 같은 정렬 집합 캐시에 보관</li>\n<li>새 요청이 오면 만료된 타임스탬프는 제거</li>\n<li>새 요청의 타임 스탬프를 로그에 추가</li>\n<li>로그의 크기가 허용치보다 같거나 작으면 요청을 시스템에 전달함<br>그렇지 않은 경우 처리는 거부됨</li>\n</ol>\n<ul>\n<li>윈도 알고리즘의 처리율 한도를 넘지 않음</li>\n<li>다량의 메모리 사용, 거부된 요청의 타임스탬프도 보관하기 때문</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"이동-윈도-카운터\"><a href=\"#이동-윈도-카운터\" class=\"headerlink\" title=\"이동 윈도 카운터\"></a>이동 윈도 카운터</h2><pre><code>&gt; 고정 윈도 카운터 + 이동 윈도 로그\n&gt; \n\n- 이전 시간대의 평균 처리율에 따라 현재 윈도의 상태를 계산하므로 \n짧은 시간에 몰리는 트래픽에도 잘 대응\n- 메모리 효율이 좋음\n- 직전 시간의 추정치를 계산하기 때문에 기준이 느슨함, But 심각한 건 아님\n</code></pre>\n<hr>\n<h1 id=\"프로세스\"><a href=\"#프로세스\" class=\"headerlink\" title=\"프로세스\"></a>프로세스</h1><ol>\n<li>처리율 제한 규칙은 디스크에 보관한다.<br>작업 프로세스는 수시로 규칙을 디스크에서 읽어 캐시에 저장한다.</li>\n<li>클라이언트가 요청을 서버에 보내면 요청은 먼저 처리율 제한 미들웨어에 도달한다.<br>카운터 및 마지막 요청의 타임스탬프를 레디스 캐시에서 가져온다. <ul>\n<li>해당 요청이 처리율 제한에 걸리지 않은 경우 API서버로 보낸다.</li>\n<li>해당 요청이 처리율 제한에 걸렸다면 429(too many request) 에러를 클라이언트에 보낸다.<br>한편 해당 요청은 그대로 버릴 수도 있고 메시지 큐에 저장할 수도 있다.</li>\n</ul>\n</li>\n</ol>\n"},{"title":"키-값 저장소 설계","toc":true,"toc_sticky":true,"toc_label":"키-값 저장소 설계","toc_icon":"sticky-note","_content":"\n\n\n> - 비 관계형 데이터베이스\n고유식별자(key)를 키로 가짐\n> - 키와 값 사이의 연결 관계를 \"키-값\" 쌍(pair)라고 표현\n\n---\n\n## 분산 키-값 저장소의 CAP 정리\n\n데이터 일관성(Consistency), 가용성(Availability), 파티션 감내성(Partition Tolerance)라 표현하며,\n동시에 3가지 요구사항을 만족하는 것은 불가능하다는 정리\n\n![image](https://user-images.githubusercontent.com/55419159/138880667-4a4e727b-07d8-44e0-99b5-14088750a4b2.png){: .image-center}\n\n---\n\n### 용어 정리\n\n데이터 일관성(Consistency)\n\n- 분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계 없이 언제나 같은 데이터를 보게 되어야 한다.\n\n가용성(Availability)\n\n- 분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.\n\n파티션 감내성(Partition Tolerance)\n\n- 파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미한다. 파티션 감내는 네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 한다는 것을 뜻한다.\n\n---\n\n### 분산 키-값 저장소가 가져야하는 기능\n\n| 목표/문제                         | 기술                                       |\n| --------------------------------- | ------------------------------------------ |\n| 대규모 데이터 저장                | 안정 해시를 사용해 서버들에 부하 분산      |\n| 읽기 연산에 대한 높은 가용성 보장 | 여러 데이터센터에 다중화                   |\n| 쓰기 연산에 대한 높은 가용성 보장 | 버저닝 및 벡터 시계를 사용한 충돌 해소     |\n| 데이터 파티션                     | 안정 해시                                  |\n| 점진적 규모 확장성                | 안정 해시                                  |\n| 다양성(heterogeneity)             | 안정 해시                                  |\n| 조절 가능한 데이터 일관성         | 정족수 합의                                |\n| 일시적 장애 처리                  | 느슨한 정족수 프로토콜과 단서 후 임시 위탁 |\n| 영구적 장애 처리                  | 머클 트리                                  |\n| 데이터 센터 장애 대응             | 여러 데이터 센터에 걸친 데이터 다중화      |","source":"_posts/가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-키-값-저장소-설계/2021-10-13-키-값-저장소-설계.md","raw":"---\ntitle: \"키-값 저장소 설계\"\ncategories:\n  - 가상면접 사례로 배우는 대규모 시스템 설계기초\ntags:\n  - 시스템설계\n  - 대규모설계\n  - 키값저장소\ntoc: true\ntoc_sticky: true\ntoc_label: \"키-값 저장소 설계\"\ntoc_icon: \"sticky-note\"\n---\n\n\n\n> - 비 관계형 데이터베이스\n고유식별자(key)를 키로 가짐\n> - 키와 값 사이의 연결 관계를 \"키-값\" 쌍(pair)라고 표현\n\n---\n\n## 분산 키-값 저장소의 CAP 정리\n\n데이터 일관성(Consistency), 가용성(Availability), 파티션 감내성(Partition Tolerance)라 표현하며,\n동시에 3가지 요구사항을 만족하는 것은 불가능하다는 정리\n\n![image](https://user-images.githubusercontent.com/55419159/138880667-4a4e727b-07d8-44e0-99b5-14088750a4b2.png){: .image-center}\n\n---\n\n### 용어 정리\n\n데이터 일관성(Consistency)\n\n- 분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계 없이 언제나 같은 데이터를 보게 되어야 한다.\n\n가용성(Availability)\n\n- 분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.\n\n파티션 감내성(Partition Tolerance)\n\n- 파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미한다. 파티션 감내는 네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 한다는 것을 뜻한다.\n\n---\n\n### 분산 키-값 저장소가 가져야하는 기능\n\n| 목표/문제                         | 기술                                       |\n| --------------------------------- | ------------------------------------------ |\n| 대규모 데이터 저장                | 안정 해시를 사용해 서버들에 부하 분산      |\n| 읽기 연산에 대한 높은 가용성 보장 | 여러 데이터센터에 다중화                   |\n| 쓰기 연산에 대한 높은 가용성 보장 | 버저닝 및 벡터 시계를 사용한 충돌 해소     |\n| 데이터 파티션                     | 안정 해시                                  |\n| 점진적 규모 확장성                | 안정 해시                                  |\n| 다양성(heterogeneity)             | 안정 해시                                  |\n| 조절 가능한 데이터 일관성         | 정족수 합의                                |\n| 일시적 장애 처리                  | 느슨한 정족수 프로토콜과 단서 후 임시 위탁 |\n| 영구적 장애 처리                  | 머클 트리                                  |\n| 데이터 센터 장애 대응             | 여러 데이터 센터에 걸친 데이터 다중화      |","slug":"가상면접-사례로-배우는-대규모-시스템-설계기초/2021-10-13-키-값-저장소-설계/2021-10-13-키-값-저장소-설계","published":1,"date":"2021-10-26T12:52:30.860Z","updated":"2021-10-26T12:52:30.860Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fr0017jd9k0jimgwm0","content":"<blockquote>\n<ul>\n<li>비 관계형 데이터베이스<br>고유식별자(key)를 키로 가짐</li>\n<li>키와 값 사이의 연결 관계를 “키-값” 쌍(pair)라고 표현</li>\n</ul>\n</blockquote>\n<hr>\n<h2 id=\"분산-키-값-저장소의-CAP-정리\"><a href=\"#분산-키-값-저장소의-CAP-정리\" class=\"headerlink\" title=\"분산 키-값 저장소의 CAP 정리\"></a>분산 키-값 저장소의 CAP 정리</h2><p>데이터 일관성(Consistency), 가용성(Availability), 파티션 감내성(Partition Tolerance)라 표현하며,<br>동시에 3가지 요구사항을 만족하는 것은 불가능하다는 정리</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138880667-4a4e727b-07d8-44e0-99b5-14088750a4b2.png\" alt=\"image\">{: .image-center}</p>\n<hr>\n<h3 id=\"용어-정리\"><a href=\"#용어-정리\" class=\"headerlink\" title=\"용어 정리\"></a>용어 정리</h3><p>데이터 일관성(Consistency)</p>\n<ul>\n<li>분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계 없이 언제나 같은 데이터를 보게 되어야 한다.</li>\n</ul>\n<p>가용성(Availability)</p>\n<ul>\n<li>분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.</li>\n</ul>\n<p>파티션 감내성(Partition Tolerance)</p>\n<ul>\n<li>파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미한다. 파티션 감내는 네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 한다는 것을 뜻한다.</li>\n</ul>\n<hr>\n<h3 id=\"분산-키-값-저장소가-가져야하는-기능\"><a href=\"#분산-키-값-저장소가-가져야하는-기능\" class=\"headerlink\" title=\"분산 키-값 저장소가 가져야하는 기능\"></a>분산 키-값 저장소가 가져야하는 기능</h3><table>\n<thead>\n<tr>\n<th>목표/문제</th>\n<th>기술</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>대규모 데이터 저장</td>\n<td>안정 해시를 사용해 서버들에 부하 분산</td>\n</tr>\n<tr>\n<td>읽기 연산에 대한 높은 가용성 보장</td>\n<td>여러 데이터센터에 다중화</td>\n</tr>\n<tr>\n<td>쓰기 연산에 대한 높은 가용성 보장</td>\n<td>버저닝 및 벡터 시계를 사용한 충돌 해소</td>\n</tr>\n<tr>\n<td>데이터 파티션</td>\n<td>안정 해시</td>\n</tr>\n<tr>\n<td>점진적 규모 확장성</td>\n<td>안정 해시</td>\n</tr>\n<tr>\n<td>다양성(heterogeneity)</td>\n<td>안정 해시</td>\n</tr>\n<tr>\n<td>조절 가능한 데이터 일관성</td>\n<td>정족수 합의</td>\n</tr>\n<tr>\n<td>일시적 장애 처리</td>\n<td>느슨한 정족수 프로토콜과 단서 후 임시 위탁</td>\n</tr>\n<tr>\n<td>영구적 장애 처리</td>\n<td>머클 트리</td>\n</tr>\n<tr>\n<td>데이터 센터 장애 대응</td>\n<td>여러 데이터 센터에 걸친 데이터 다중화</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<ul>\n<li>비 관계형 데이터베이스<br>고유식별자(key)를 키로 가짐</li>\n<li>키와 값 사이의 연결 관계를 “키-값” 쌍(pair)라고 표현</li>\n</ul>\n</blockquote>\n<hr>\n<h2 id=\"분산-키-값-저장소의-CAP-정리\"><a href=\"#분산-키-값-저장소의-CAP-정리\" class=\"headerlink\" title=\"분산 키-값 저장소의 CAP 정리\"></a>분산 키-값 저장소의 CAP 정리</h2><p>데이터 일관성(Consistency), 가용성(Availability), 파티션 감내성(Partition Tolerance)라 표현하며,<br>동시에 3가지 요구사항을 만족하는 것은 불가능하다는 정리</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/138880667-4a4e727b-07d8-44e0-99b5-14088750a4b2.png\" alt=\"image\">{: .image-center}</p>\n<hr>\n<h3 id=\"용어-정리\"><a href=\"#용어-정리\" class=\"headerlink\" title=\"용어 정리\"></a>용어 정리</h3><p>데이터 일관성(Consistency)</p>\n<ul>\n<li>분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계 없이 언제나 같은 데이터를 보게 되어야 한다.</li>\n</ul>\n<p>가용성(Availability)</p>\n<ul>\n<li>분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.</li>\n</ul>\n<p>파티션 감내성(Partition Tolerance)</p>\n<ul>\n<li>파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미한다. 파티션 감내는 네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 한다는 것을 뜻한다.</li>\n</ul>\n<hr>\n<h3 id=\"분산-키-값-저장소가-가져야하는-기능\"><a href=\"#분산-키-값-저장소가-가져야하는-기능\" class=\"headerlink\" title=\"분산 키-값 저장소가 가져야하는 기능\"></a>분산 키-값 저장소가 가져야하는 기능</h3><table>\n<thead>\n<tr>\n<th>목표/문제</th>\n<th>기술</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>대규모 데이터 저장</td>\n<td>안정 해시를 사용해 서버들에 부하 분산</td>\n</tr>\n<tr>\n<td>읽기 연산에 대한 높은 가용성 보장</td>\n<td>여러 데이터센터에 다중화</td>\n</tr>\n<tr>\n<td>쓰기 연산에 대한 높은 가용성 보장</td>\n<td>버저닝 및 벡터 시계를 사용한 충돌 해소</td>\n</tr>\n<tr>\n<td>데이터 파티션</td>\n<td>안정 해시</td>\n</tr>\n<tr>\n<td>점진적 규모 확장성</td>\n<td>안정 해시</td>\n</tr>\n<tr>\n<td>다양성(heterogeneity)</td>\n<td>안정 해시</td>\n</tr>\n<tr>\n<td>조절 가능한 데이터 일관성</td>\n<td>정족수 합의</td>\n</tr>\n<tr>\n<td>일시적 장애 처리</td>\n<td>느슨한 정족수 프로토콜과 단서 후 임시 위탁</td>\n</tr>\n<tr>\n<td>영구적 장애 처리</td>\n<td>머클 트리</td>\n</tr>\n<tr>\n<td>데이터 센터 장애 대응</td>\n<td>여러 데이터 센터에 걸친 데이터 다중화</td>\n</tr>\n</tbody></table>\n"},{"title":"싱글톤 패턴","toc":true,"toc_label":"싱글톤 패턴","_content":"\n\n> 해당 클래스의 인스턴스가 하나만 만들어지고, \n어디서든지 그 인스턴스에 접근할 수 있도록 하기 위한 패턴\n> \n\n## 고전적인 싱글톤 패턴 (문제 있음)\n\n```java\npublic class Singleton {\n\n\tprivate static Singleton uniqueInstance;\n\n\tprivate Singleton(){}\n\n\tpublic static Singleton getInstance(){\n\t\tif (uniqueInstance == null){\n\t\t\tuniqueInstance = new Singleton();\n\t\t}\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n멀티쓰레드 환경에서는 \n\n```java\nif (uniqueInstance == null){\n\tuniqueInstance = new Singleton();\n}\n```\n\n이 부분에서  2개 이상의 인스턴스가 생성될 수 있다.\n\n## 해결방법\n\n### 1. `synchronized` 사용\n\n```java\npublic class Singleton {\n\n\tprivate static Singleton uniqueInstance;\n\n\tprivate Singleton(){}\n\n\tpublic static synchronized Singleton getInstance(){\n\t\tif (uniqueInstance == null){\n\t\t\tuniqueInstance = new Singleton();\n\t\t}\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n- 단점 : 속도 저하\n    \n    → 메소드가  `synchronized` 되면 약 100배 정도 성능 저하가 일어난다고 한다.\n    \n\n### 2. 인스턴스를 처음부터 만들어 버림\n\n```java\npublic class Singleton {\n\n\tprivate static Singleton uniqueInstance = new Singleton();\n\n\tprivate Singleton(){}\n\n\tpublic static synchronized Singleton getInstance(){\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n- 클래스가 로딩될 때 JVM에서 Singleton의 유일한 인스턴스를 생성해준다.\n\n### 3. DCL(Double-Checking Locking) 사용\n\n```java\npublic class Singleton {\n\n\tprivate volatile static Singleton uniqueInstance;\n\n\tprivate Singleton(){}\n\n\tpublic static Singleton getInstance(){\n\t\tif (uniqueInstance == null){\n                        synchronized (Singleton.class){\n                                  if(uniqueInstance == null){\n                                             uniqueInstance = new Singleton();\n                                  }\n                        }\n\t\t}\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n- `volatile` 키워드를 사용하면 자바의 일종의 최적화인 리오더링(보통 컴파일 과정에서 일어나며, 프로그래머가 만들어낸 코드는 컴파일 될 때 좀더 빠르게 실행될 수 있도록 조작이 가해져 최적하됨)을 회피하여 읽기와 쓰기순서를 보장한다.\n- 멀티스레딩을 쓰더라도 uniqueInstance변수가 Singleton 인스턴스로 초기화 되는 과정이 올바르게 진행되도록 할 수 있다.\n- **DCL은 자바1.5이상의 버전에서만 사용가능**하다.\n- 자바 1.4 및 그 전에 나온 버전의 JVM 중에는 volatile 키워드를 사용하더라도 동기화가 잘 안되는 것이 많다. 일종의 버그.\n\n## 요약\n\n- 우리가 알고있던 싱글톤 패턴은 사실 **싱글톤 패턴이 아님**!\n- 위의 3가지 방법을 사용하자\n- 개인적으론 **생성자(2번)**가 가장 간단한 것 같음","source":"_posts/디자인-패턴/2021-10-19-싱글톤-패턴/2021-10-19-싱글톤-패턴.md","raw":"---\ntitle: \"싱글톤 패턴\"\ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 싱글톤\ntoc: true\ntoc_label: \"싱글톤 패턴\"\n---\n\n\n> 해당 클래스의 인스턴스가 하나만 만들어지고, \n어디서든지 그 인스턴스에 접근할 수 있도록 하기 위한 패턴\n> \n\n## 고전적인 싱글톤 패턴 (문제 있음)\n\n```java\npublic class Singleton {\n\n\tprivate static Singleton uniqueInstance;\n\n\tprivate Singleton(){}\n\n\tpublic static Singleton getInstance(){\n\t\tif (uniqueInstance == null){\n\t\t\tuniqueInstance = new Singleton();\n\t\t}\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n멀티쓰레드 환경에서는 \n\n```java\nif (uniqueInstance == null){\n\tuniqueInstance = new Singleton();\n}\n```\n\n이 부분에서  2개 이상의 인스턴스가 생성될 수 있다.\n\n## 해결방법\n\n### 1. `synchronized` 사용\n\n```java\npublic class Singleton {\n\n\tprivate static Singleton uniqueInstance;\n\n\tprivate Singleton(){}\n\n\tpublic static synchronized Singleton getInstance(){\n\t\tif (uniqueInstance == null){\n\t\t\tuniqueInstance = new Singleton();\n\t\t}\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n- 단점 : 속도 저하\n    \n    → 메소드가  `synchronized` 되면 약 100배 정도 성능 저하가 일어난다고 한다.\n    \n\n### 2. 인스턴스를 처음부터 만들어 버림\n\n```java\npublic class Singleton {\n\n\tprivate static Singleton uniqueInstance = new Singleton();\n\n\tprivate Singleton(){}\n\n\tpublic static synchronized Singleton getInstance(){\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n- 클래스가 로딩될 때 JVM에서 Singleton의 유일한 인스턴스를 생성해준다.\n\n### 3. DCL(Double-Checking Locking) 사용\n\n```java\npublic class Singleton {\n\n\tprivate volatile static Singleton uniqueInstance;\n\n\tprivate Singleton(){}\n\n\tpublic static Singleton getInstance(){\n\t\tif (uniqueInstance == null){\n                        synchronized (Singleton.class){\n                                  if(uniqueInstance == null){\n                                             uniqueInstance = new Singleton();\n                                  }\n                        }\n\t\t}\n\t\treturn uniqueInstance;\n\t}\n }\n```\n\n- `volatile` 키워드를 사용하면 자바의 일종의 최적화인 리오더링(보통 컴파일 과정에서 일어나며, 프로그래머가 만들어낸 코드는 컴파일 될 때 좀더 빠르게 실행될 수 있도록 조작이 가해져 최적하됨)을 회피하여 읽기와 쓰기순서를 보장한다.\n- 멀티스레딩을 쓰더라도 uniqueInstance변수가 Singleton 인스턴스로 초기화 되는 과정이 올바르게 진행되도록 할 수 있다.\n- **DCL은 자바1.5이상의 버전에서만 사용가능**하다.\n- 자바 1.4 및 그 전에 나온 버전의 JVM 중에는 volatile 키워드를 사용하더라도 동기화가 잘 안되는 것이 많다. 일종의 버그.\n\n## 요약\n\n- 우리가 알고있던 싱글톤 패턴은 사실 **싱글톤 패턴이 아님**!\n- 위의 3가지 방법을 사용하자\n- 개인적으론 **생성자(2번)**가 가장 간단한 것 같음","slug":"디자인-패턴/2021-10-19-싱글톤-패턴/2021-10-19-싱글톤-패턴","published":1,"date":"2021-10-27T13:48:15.469Z","updated":"2021-10-27T13:48:15.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2fs001bjd9kevuzfu65","content":"<blockquote>\n<p>해당 클래스의 인스턴스가 하나만 만들어지고,<br>어디서든지 그 인스턴스에 접근할 수 있도록 하기 위한 패턴</p>\n</blockquote>\n<h2 id=\"고전적인-싱글톤-패턴-문제-있음\"><a href=\"#고전적인-싱글톤-패턴-문제-있음\" class=\"headerlink\" title=\"고전적인 싱글톤 패턴 (문제 있음)\"></a>고전적인 싱글톤 패턴 (문제 있음)</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\tuniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>멀티쓰레드 환경에서는 </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\tuniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>이 부분에서  2개 이상의 인스턴스가 생성될 수 있다.</p>\n<h2 id=\"해결방법\"><a href=\"#해결방법\" class=\"headerlink\" title=\"해결방법\"></a>해결방법</h2><h3 id=\"1-synchronized-사용\"><a href=\"#1-synchronized-사용\" class=\"headerlink\" title=\"1. synchronized 사용\"></a>1. <code>synchronized</code> 사용</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\tuniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>단점 : 속도 저하  → 메소드가  <code>synchronized</code> 되면 약 100배 정도 성능 저하가 일어난다고 한다.</li>\n</ul>\n<h3 id=\"2-인스턴스를-처음부터-만들어-버림\"><a href=\"#2-인스턴스를-처음부터-만들어-버림\" class=\"headerlink\" title=\"2. 인스턴스를 처음부터 만들어 버림\"></a>2. 인스턴스를 처음부터 만들어 버림</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton uniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>클래스가 로딩될 때 JVM에서 Singleton의 유일한 인스턴스를 생성해준다.</li>\n</ul>\n<h3 id=\"3-DCL-Double-Checking-Locking-사용\"><a href=\"#3-DCL-Double-Checking-Locking-사용\" class=\"headerlink\" title=\"3. DCL(Double-Checking Locking) 사용\"></a>3. DCL(Double-Checking Locking) 사용</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">synchronized</span> (Singleton.class)&#123;</span><br><span class=\"line\">                                  <span class=\"keyword\">if</span>(uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                                             uniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">                                  &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>volatile</code> 키워드를 사용하면 자바의 일종의 최적화인 리오더링(보통 컴파일 과정에서 일어나며, 프로그래머가 만들어낸 코드는 컴파일 될 때 좀더 빠르게 실행될 수 있도록 조작이 가해져 최적하됨)을 회피하여 읽기와 쓰기순서를 보장한다.</li>\n<li>멀티스레딩을 쓰더라도 uniqueInstance변수가 Singleton 인스턴스로 초기화 되는 과정이 올바르게 진행되도록 할 수 있다.</li>\n<li><strong>DCL은 자바1.5이상의 버전에서만 사용가능</strong>하다.</li>\n<li>자바 1.4 및 그 전에 나온 버전의 JVM 중에는 volatile 키워드를 사용하더라도 동기화가 잘 안되는 것이 많다. 일종의 버그.</li>\n</ul>\n<h2 id=\"요약\"><a href=\"#요약\" class=\"headerlink\" title=\"요약\"></a>요약</h2><ul>\n<li>우리가 알고있던 싱글톤 패턴은 사실 <strong>싱글톤 패턴이 아님</strong>!</li>\n<li>위의 3가지 방법을 사용하자</li>\n<li>개인적으론 **생성자(2번)**가 가장 간단한 것 같음</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>해당 클래스의 인스턴스가 하나만 만들어지고,<br>어디서든지 그 인스턴스에 접근할 수 있도록 하기 위한 패턴</p>\n</blockquote>\n<h2 id=\"고전적인-싱글톤-패턴-문제-있음\"><a href=\"#고전적인-싱글톤-패턴-문제-있음\" class=\"headerlink\" title=\"고전적인 싱글톤 패턴 (문제 있음)\"></a>고전적인 싱글톤 패턴 (문제 있음)</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\tuniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>멀티쓰레드 환경에서는 </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\tuniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>이 부분에서  2개 이상의 인스턴스가 생성될 수 있다.</p>\n<h2 id=\"해결방법\"><a href=\"#해결방법\" class=\"headerlink\" title=\"해결방법\"></a>해결방법</h2><h3 id=\"1-synchronized-사용\"><a href=\"#1-synchronized-사용\" class=\"headerlink\" title=\"1. synchronized 사용\"></a>1. <code>synchronized</code> 사용</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\tuniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>단점 : 속도 저하  → 메소드가  <code>synchronized</code> 되면 약 100배 정도 성능 저하가 일어난다고 한다.</li>\n</ul>\n<h3 id=\"2-인스턴스를-처음부터-만들어-버림\"><a href=\"#2-인스턴스를-처음부터-만들어-버림\" class=\"headerlink\" title=\"2. 인스턴스를 처음부터 만들어 버림\"></a>2. 인스턴스를 처음부터 만들어 버림</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton uniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>클래스가 로딩될 때 JVM에서 Singleton의 유일한 인스턴스를 생성해준다.</li>\n</ul>\n<h3 id=\"3-DCL-Double-Checking-Locking-사용\"><a href=\"#3-DCL-Double-Checking-Locking-사용\" class=\"headerlink\" title=\"3. DCL(Double-Checking Locking) 사용\"></a>3. DCL(Double-Checking Locking) 사용</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">synchronized</span> (Singleton.class)&#123;</span><br><span class=\"line\">                                  <span class=\"keyword\">if</span>(uniqueInstance == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                                             uniqueInstance = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">                                  &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>volatile</code> 키워드를 사용하면 자바의 일종의 최적화인 리오더링(보통 컴파일 과정에서 일어나며, 프로그래머가 만들어낸 코드는 컴파일 될 때 좀더 빠르게 실행될 수 있도록 조작이 가해져 최적하됨)을 회피하여 읽기와 쓰기순서를 보장한다.</li>\n<li>멀티스레딩을 쓰더라도 uniqueInstance변수가 Singleton 인스턴스로 초기화 되는 과정이 올바르게 진행되도록 할 수 있다.</li>\n<li><strong>DCL은 자바1.5이상의 버전에서만 사용가능</strong>하다.</li>\n<li>자바 1.4 및 그 전에 나온 버전의 JVM 중에는 volatile 키워드를 사용하더라도 동기화가 잘 안되는 것이 많다. 일종의 버그.</li>\n</ul>\n<h2 id=\"요약\"><a href=\"#요약\" class=\"headerlink\" title=\"요약\"></a>요약</h2><ul>\n<li>우리가 알고있던 싱글톤 패턴은 사실 <strong>싱글톤 패턴이 아님</strong>!</li>\n<li>위의 3가지 방법을 사용하자</li>\n<li>개인적으론 **생성자(2번)**가 가장 간단한 것 같음</li>\n</ul>\n"},{"title":"팩토리 패턴","toc":true,"toc_sticky":true,"toc_label":"팩토리 패턴","toc_icon":"sticky-note","_content":"\n## ⛳ 들어가기 전에..\n\n회사에서 같은 프로세스 내에서 각각의 제휴사에 서비스를 인터페이스해야 하는 경우가 있었다.\n\n전체적인 프로세스 플로우를 인터페이스로, 제휴사를 클래스(Bean)로 만들어 팩토리 패턴으로 구현하였다.\n\n동일한 프로세스 플로우 내에서 각기 다른 제휴사의 API와 연동해야 했는데 팩토리 패턴이 많은 도움이 되었다.\n\n---\n\n## 👋 팩토리패턴이란\n\n### ⚾ 팩토리 메소드 패턴\n\n> 객체를 생성하기 위한 인터페이스를 정의하는데,\n> 어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정하게 만든다.\n> 즉, 팩토리 메소드 패턴을 이용하면 **클래스의 인스턴스를 만드는 일을 서브클래스에게 맡기는 것**.\n\n### 🥎 추상 팩토리 패턴\n\n> **인터페이스를 이용**하여 서로 연관된,\n> 또는 의존하는 객체를 구상 클래스를 지정하지 않고도 생성한다.\n\n---\n\n## 🎩 팩토리패턴이 필요한 이유\n\n`new`를 사용하는 것은 구상 클래스의 인스턴스를 만드는 것이다. 당연히! 인터페이스가 아닌 _특정 구현을 사용하게 되어버리는 것_. 일련의 구상 클래스들이 있을때는 어쩔수 없이 다음과 같은 코드를 만들어야 하는\n경우가 있다.\n\n```java\nDuck duck;\n\n        if(type==picnic)duck=new MallardDuck();\n        else if(type==hunting)duck=new DecoyDuck();\n        else if(type==inBathTub)duck=new RubberDuck();\n```\n\n이런 코드가 있다는 것은, 뭔가 변경하거나 확장해야 할 때 *코드를 다시 확인하고 추가 또는 제거해야 한다는 것*을 의미한다.\n**인터페이스**에 맞춰서 코딩을 하면 시스템에서 일어날 수 있는 여러 변화를 이겨낼 수 있다.\n**다형성** 덕분에 어떤 클래스든 특정 인터페이스만 구현하면 사용할수 있기 때문이다.\n\n반대로. 구상 클래스를 많이 사용하면 새로운 구상 클래스가 추가될 때마다 코드를 고쳐야 하기때문에 많은 문제가 생길수 있다. 즉, *변화에 대해 닫혀 있는 코드*가 되어버리는 것이다.\n\n> 바뀔 수 있는 부분을 찾아내서 바뀌지 않는 부분하고 분리시켜야 한다는 원칙.\n\n---\n\n## 🎢 고전적인 팩토리 패턴\n\n- **피자 가게**를 운영하고 있고 **피자가게 클래스**를 만들어야 된다고 가정한다.\n\n> 피자가게는 다양한 피자가 있을 수 있다.\n> 또한 다양한 피자가게가 있을 수 있다.\n\n### 🎞 기존소스\n\n```java\nPizza orderPizza(String type){\n\n        Pizza pizza;\n\n        //추가하거나 제거 시 매번 바뀌어야 하는부분\n        if(type.equals(\"cheese\"))pizza=new CheesePizza();\n        else if(type.equals(\"greek\"))pizza=new GreekPizza();\n        else if(type.equals(\"pepperoni\"))pizza=new PepperoniPizza();\n        //\n\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n        return pizza;\n        }\n```\n\n### 1. 피자 팩토리를 만든다.\n\n```java\n public class SimplePizzaFactory {\n\n    public Pizza createPizza(String type) { //이런 경우에는 static메소드로 선언하는 경우가 종종 있음.\n\n        Pizza pizza = null;\n\n        if (pizza.equals(\"cheese\")) pizza = new CheesePizza();\n        if (pizza.equals(\"pepper\")) pizza = new PepperoniPizza();\n        if (pizza.equals(\"clam\")) pizza = new ClamPizza();\n        if (pizza.equals(\"veggie\")) pizza = new VeggiePizza();\n\n        return pizza;\n    }\n}\n```\n\n### 2. 피자 가게를 만든다.\n\n```java\n\npublic class PizzaStore {\n\n    SimplePizzaFactory simplePizzaFactory;\n\n    public PizzaStore(SimplePizzaFactory simplePizzaFactory) {\n        this.simplePizzaFactory = simplePizzaFactory;  //피자 가게를 동적으로 설정\n    }\n\n    public Pizza orderPizza(String type) {\n\n        Pizza pizza;\n        pizza = simplePizzaFactory.createPizza(type); //수정 안해도 됨\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n\n        return pizza;\n\n    }\n}\n```\n\n### 3. 다양한 피자가게가 생긴다.\n\n```java\n PizzaStore nyStore=new PizzaStore(new NYPizzaFactory());\n        nyStore.orderPizza(\"cheese\");\n\n        PizzaStore chicagoStore=new PizzaStore(new ChicagoPizzafactory());\n        chicagoStore.orderPizza(\"cheese\");\n```\n\n- 각 피자가게에서 `orderPizza()` 만 호출하면 피자를 생성할 수 있게 되었다.\n\n> 그러나, 각 팩토리를 가진 피자가게 체인점들이 서로의 구현방식이 달라지는 일이 발생할수도 있게 되었다.\n> (PizzaStore가 각각 있다보니 굽는 방식이 달라진다거나 피자를 자르는 단계를 빼먹거나 하는..)\n\n---\n\n## 🎟 팩토리 메소드 패턴\n\n> 피자가게와 피자 **제작 과정 전체를 하나로 묶어주는 프레임워크**를 만들어야 된다는 결론!!\n> 파자를 만드는 활동 자체는 전부 PizzaStore 클래스에 국한시키면서도 분점마다 고유의 스타일을 살릴 수 있는 방법은 ??\n\n### 4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)\n\n```java\npublic abstract class PizzaStore { //추상 클래스로 구현\n\n    public Pizza orderPizza(String type) {\n\n        Pizza pizza;\n        pizza = createPizza(type);\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n\n        return pizza;\n    }\n\n    abstract Pizza createPizza(String type); //Pizza 인스턴스를 만드는 일은 팩토리 역할을 하는 메소드에서 맡아 처리\n}\n```\n\n### 5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.\n\n이제 각 분점을 위한 지역별로 서브클래스를 만들어줘야 한다. 피자의 스타일은 각 서브클래스에서 결정.\n\n![image](https://user-images.githubusercontent.com/55419159/139077742-76ac1027-09c3-4e42-8046-82a2b4e0cb54.jpg)\n\n이제 `ChicagoPizzaStore`, `NYPizzaStore` 에는 구상 피자클래스를 분기해주는 각각의 `createPizza()` 메소드가 있다.\n\n```java\npublic class NYPizzaStore extends PizzaStore {\n\n    @Override\n    public Pizza createPizza(String type) {\n\n        Pizza pizza = null;\n        if (type.equals(\"cheese\")) pizza = new NYStyleCheesePizza();\n        if (type.equals(\"peper\")) pizza = new NYStylePepperoniPizza();\n        if (type.equals(\"clam\")) pizza = new NYStyleClamPizza();\n        if (type.equals(\"veggie\")) pizza = new NYStyleVeggiePizza();\n\n        return pizza;\n    }\n}\n\npublic class ChicagoPizzaStore extends PizzaStore {\n\n    @Override\n    public Pizza createPizza(String type) {\n\n        Pizza pizza = null;\n        if (type.equals(\"cheese\")) pizza = new ChicagoStyleCheesePizza();\n        if (type.equals(\"peper\")) pizza = new ChicagoStylePepperoniPizza();\n        if (type.equals(\"clam\")) pizza = new ChicagoStyleClamPizza();\n        if (type.equals(\"veggie\")) pizza = new ChicagoStyleVeggiePizza();\n\n        return pizza;\n    }\n} \n```\n\n### 6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)\n\n```java\npublic abstract class Pizza {\n    String name;\n    String dough;\n    String sauce;\n    ArrayList<String> toppings = new ArrayList<>();\n\n    public void prepare() {\n        System.out.println(\"Preparing : \" + name);\n        System.out.println(\"Tossing dough...\");\n        System.out.println(\"Adding source\");\n        System.out.println(\"Adding toppings\");\n        for (String topping : toppings) {\n            System.out.println(\"\\ttopping : \" + topping);\n        }\n    }\n\n    public void bake() {\n        System.out.println(\"Bake for 25 minutes at 350\");\n    }\n\n    public void cut() {\n        System.out.println(\"Cutting the pizza into diagonal slices\");\n    }\n\n    public void box() {\n        System.out.println(\"Place pizza in official PizzaStore box\");\n    }\n\n    public String getname() {\n        return this.name;\n    }\n\n}\n```\n\n### 7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.\n\n```java\npublic class NYStyleCheesePizza extends Pizza {\n\n    public NYStyleCheesePizza() {\n        this.name = \"NY Style CheesePizza\";\n        this.dough = \"Thin Crust Dough\";\n        this.sauce = \"Marinara Sauce\";\n        this.toppings.add(\"Grated Reggiano Cheese\");\n    }\n}\n\npublic class ChicagoStyleCheesePizza extends Pizza {\n\n    public ChicagoStyleCheesePizza() {\n        this.name = \"Chicago Style CheesePizza\";\n        this.dough = \"Extra Thick Crust Dough\";\n        this.sauce = \"Plum Tomato Sauce\";\n        this.toppings.add(\"Shredded mozzarella Cheese\");\n    }\n\n    @Override\n    public void cut() {\n        System.out.println(\"Cutting the pizza into square slices\");\n    } //바꾸고 싶은 메소드만 오버라이딩\n}\n```\n\n### 8. 피자를 주문한다.\n\n```java\n public class PizzaTestDrive {\n\n    public static void main(String[] args) {\n\n        PizzaStore nyStore = new NYPizzaStore();\n        PizzaStore chicagoStore = new ChicagoPizzaStore();\n\n        Pizza nySytpePizza = nyStore.orderPizza(\"cheese\");\n        System.out.println(nySytpePizza.getname());\n\n        Pizza chicagoStypePizza = chicagoStore.orderPizza(\"cheese\");\n        System.out.println(chicagoStypePizza.getname());\n    }\n} \n```\n\n- 모든 팩토리 패턴에서는 **객체 생성을 캡슐화** 한다.\n- 팩토리 메소드 패턴에서는 *서브 클래스에서 어떤 클래스를 만들지를 결정하게 함*으로써 객체 생성을 캡슐화 한다.\n\n\n- 생산자 클래스(피자가게)\n\n![image2](https://user-images.githubusercontent.com/55419159/139077751-6a262811-5faf-4937-b7f1-5fb3447d8b90.jpg)\n\n- 제품 클래스(피자)\n\n![image3](https://user-images.githubusercontent.com/55419159/139077752-b27d2d2f-57fb-4226-bab6-f890d0f70a74.jpg)\n\n위 클래스 다이어그램에서는 `PizzaStore` 추상 클래스에서 객체를 만들기 위한 메소드, 즉 팩토리 메소드를 위한 인터페이스를 제공한다는 것을 알수있다.\n\n`PizzaStore`에 구현되어 있는 다른 메소드 `orderPizza()` 에서는 팩토리 메소드에 의해 생산된 제품을 가지고 필요한 작업을 처리한다. 하지만 실제 팩토리 메소드를 구현하고 제품(객체 인스턴스)을\n만들어 내는 일은 **서브클래스**에서만 할수 있다.\n\n\n---\n\n## 🎭 디자인원칙 : 의존성 뒤집기 원칙\n\n> 추상화된 것에 의존하도록 만들어라. 구상 클래스에 의존하도록 만들지 않도록 한다.\n\n~~구현클래스에 의존하는 형태~~\n\n```java\nPizzaStore->NYStyleCheesePizza\n        PizzaStore->ChicagoStypeCheesePizza\n        PizzaStore->NYStyleVeggiePizza\n```\n\n~~-> 좋지않음~~\n\n추상클래스(인터페이스)를 의존하는 형태\n\n```java\nPizzaStore->Pizza\n        Pizza<-NYStyleCheesePizza\n        Pizza<-ChicagoStyleCheesePizza\n        Pizza<-NYStyleVeggiePizza\n```\n\n-> **좋음**\n\n### 🛒 원칙에 도움이 되는 가이드\n\n_**1. 어떤 변수에도 구상 클래스에 대한 레퍼런스를 지정하지 않는다.**_\n\n- `new` 연산자를 사용하면 레퍼런스를 사용하게 되는 것이다.\n\n_**2. 구상 클래스에서 유도된 클래스를 만들지 않는다.**_\n\n- 구상클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게된다, 추상화 된 것을 사용해야 한다.\n\n_**3. 베이스 클래스에 이미 구현되어 있던 메소드를 오버라이드 하지 않는다.**_\n\n- 이미 구현되어 있는 메소드를 오버라이드 한다는 것은 애초부터 베이스 클래스가 제대로 추상화 된것이 아니었다고 볼 수 있다.\n- 베이스 클래스에서 메소드를 정의할 때는 모든 서브 클래스에서 공유할 수 있는 것만 정의해야한다.\n\n---\n\n## 🦺 추상 팩토리 패턴\n\n이렇게 PizzaStore 디자인이 모양새를 갖췄다. 유연한 프레임워크도 만들어 졌고, 디자인 원칙도 충실하게 지켰다.\n\n각각 체인점들이 미리 정해놓은 절차를 잘 따르고 있지만 몇몇 체인점들이 자잘한 재료를 더 싼 재료로 바꿔서 원가를 절감해 마진을 남기고 있다.\n\n원재료의 품질까지 관리하는 방법이 있을까??\n\n- **원재료 군**을 만들어 파악하자.\n- 제품에 들어가는 재료군(반죽, 소스, 치즈, 야채, 고기)은 같지만, 지역마다 재료의 구체적인 내용이 조금씩 다르다.\n\n\n1. 지역별로 팩토리를 만들어 각 생성 메소드를 구현하는 `PizzaingredientFactory` 클래스를 만든다.\n2. `ReggianoCheese`, `RedPeppers`, `ThickCrustDough`와 같이 팩토리에서 사용할 원재료 클래스들을 구현한다.\n3. 만든 원재료 공장을 `PizzaStore` 코드에서 사용하도록 함으로써 하나로 묶어준다.\n\n### 9. 원재료 공장을 만든다.\n\n```java\n public interface PizzaIngredientFactory {\n    public Dough createDough();\n\n    public Sauce createSauce();\n\n    public Cheese createCheese();\n\n    public Veggies[] createVeggies();\n\n    public Pepperoni createPepperoni();\n\n    public Clams createClams();\n} \n```\n\n```java\npublic class NYPizzaingredientFactory implements PizzaIngredientFactory {\n\n    @Override\n    public Dough createDough() {\n        return new ThinCrustdough();\n    }\n\n    @Override\n    public Sauce createSauce() {\n        return new MarinaraSauce();\n    }\n\n    @Override\n    public Cheese createCheese() {\n        return new ReggianoCheese();\n    }\n\n    @Override\n    public Veggies[] createVeggies() {\n        Veggies veggies[] = {new Farlic(), new Onion(), new Mushroom(), new RedPepper()};\n        return veggies;\n    }\n\n    @Override\n    public Pepperoni createPepperoni() {\n        return new SlicedPepperoni();\n    }\n\n    @Override\n    public Clams createClams() {\n        return new Freshclams();\n    }\n}\n\n\npublic class ChicagoPizzaingredientFactory implements PizzaIngredientFactory {\n\n    @Override\n    public Dough createDough() {\n        return new ThickCrustDough();\n    }\n\n    @Override\n    public Sauce createSauce() {\n        return new PlumTomatoSauce();\n    }\n\n    @Override\n    public Cheese createCheese() {\n        return new MozzarellaCheese();\n    }\n\n    @Override\n    public Veggies[] createVeggies() {\n        Veggies veggies[] = {new BlackOlives(), new Spinach(), new EggPlant()};\n        return veggies;\n    }\n\n    @Override\n    public Pepperoni createPepperoni() {\n        return new Slicedpepperoni();\n    }\n\n    @Override\n    public Clams createClams() {\n        return new FrozenClam();\n    }\n}\n```\n\n### 10. 피자마다 재료는 다르다.\n\n```java\n public abstract class Pizza {\n    String name;\n    Dough dough;\n    Sauce sauce;\n    Veggies veggies[];\n    Cheese cheese;\n    Pepperoni pepperoni;\n    Clams clams;\n\n    public abstract void prepare(); //추상 메소드로 변경됨.\n\n    public void bake() {\n        System.out.println(\"Bake for 25 minutes at 350\");\n    }\n\n    public void cut() {\n        System.out.println(\"Cutting the pizza into diagonal slices\");\n    }\n\n    public void box() {\n        System.out.println(\"Place pizza in official PizzaStore box\");\n    }\n\n    public String getname() {\n        return this.name;\n    }\n} \n```\n\n```java\n public class CheesePizza extends Pizza {\n\n    PizzaIngredientFactory ingredientFactory;\n\n    public CheesePizza(PizzaIngredientFactory ingredientFactory) {\n        this.ingredientFactory = ingredientFactory;\n    }\n\n    @Override\n    public void prepare() {\n        this.dough = ingredientFactory.createDough();\n        this.sauce = ingredientFactory.createSauce();\n        this.cheese = ingredientFactory.createCheese();\n    }\n}\n\n\npublic class ClamPizza extends Pizza {\n\n    PizzaIngredientFactory ingredientFactory;\n\n    public ClamPizza(PizzaIngredientFactory ingredientFactory) {\n        this.ingredientFactory = ingredientFactory;\n    }\n\n    @Override\n    public void prepare() {\n        this.dough = ingredientFactory.createDough();\n        this.sauce = ingredientFactory.createSauce();\n        this.cheese = ingredientFactory.createCheese();\n        this.clams = ingredientFactory.createClams();\n    }\n}\n```\n\n### 11. 피자마다, 지역마다 다른 피자를 만든다.\n\n```java\n public class NYPizzaStore extends PizzaStore {\n\n    @Override\n    public Pizza createPizza(String type) {\n\n        Pizza pizza = null;\n        PizzaIngredientFactory ingredientFactory = new NYPizzaingredientFactory();\n\n        if (type.equals(\"cheese\")) {\n            pizza = new CheesePizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Cheese Pizza\");\n\n        } else if (type.equals(\"peper\")) {\n            pizza = new PepperoniPizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Pepperoni Pizza\");\n\n        } else if (type.equals(\"clam\")) {\n            pizza = new ClamPizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Clam Pizza\");\n\n        } else if (type.equals(\"veggie\")) {\n            pizza = new VeggiePizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Veggie Pizza\");\n        }\n\n        return pizza;\n    }\n} \n```\n\n### ⛳ 프로세스 정리\n\n![image4](https://user-images.githubusercontent.com/55419159/139077755-c920f73b-e347-41d4-b1a8-9f0bc5e028fa.jpg)\n\n이제 전체적인 흐름은.\n\n1. 뉴욕 피자가게를 만든다.\n\n```java\nPizzaStore nyPizzaStore=new NYPizzaStore();\n```\n\n2. 주문을 한다.\n\n```java\nnyPizzaStore.orderPizza(\"cheese\");\n```\n\n3. orderPizza 메소드에서는 우선 createPizza() 메소드를 호출한다\n\n```java\nPizza pizza=createPizza(\"cheese\");\n```\n\n4. createPizza() 메소드가 호출되면 원재료 공장이 돌아가기 시작한다.\n\n```java\nPizza pizza=new CheesePizza(nyIngredientFactory);\n```\n\n5. 피자를 준비하는 prepare()메소드가 호출되면 팩토리에 원재료 주문이 들어간다.\n\n```java\nvoid prepare(){\n        dough=nyIngredientFactory.createDough();\n        sauce=nyIngredientFactory.createSauce();\n        cheese=nyIngredientFactory.createCheese();\n        }\n```\n\n6. 준비단계가 끝나고 orderPizza() 메소드에서는 피자를 굽고, 자르고, 포장한다.\n\n---\n\n## 💎 요약\n\n### 추상 팩토리 패턴\n\n> 제품군을 생성하기 위한 **인터페이스**를 생성하고, 그 **인터페이스를 구성**하여 사용할수 있게끔 하는것.\n\n### 추상 메소드 패턴\n\n> 하나의 추상클래스에서 **추상 메소드**를 만들고, 서브클래스들이 **그 추상메소드를 구현**하여 인스턴스를 만들게끔 하는것.","source":"_posts/디자인-패턴/2021-10-20-팩토리-패턴/2021-10-20-팩토리-패턴.md","raw":"---\ntitle: \"팩토리 패턴\"\ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 팩토리\ntoc: true\ntoc_sticky: true\ntoc_label: \"팩토리 패턴\"\ntoc_icon: \"sticky-note\"\n---\n\n## ⛳ 들어가기 전에..\n\n회사에서 같은 프로세스 내에서 각각의 제휴사에 서비스를 인터페이스해야 하는 경우가 있었다.\n\n전체적인 프로세스 플로우를 인터페이스로, 제휴사를 클래스(Bean)로 만들어 팩토리 패턴으로 구현하였다.\n\n동일한 프로세스 플로우 내에서 각기 다른 제휴사의 API와 연동해야 했는데 팩토리 패턴이 많은 도움이 되었다.\n\n---\n\n## 👋 팩토리패턴이란\n\n### ⚾ 팩토리 메소드 패턴\n\n> 객체를 생성하기 위한 인터페이스를 정의하는데,\n> 어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정하게 만든다.\n> 즉, 팩토리 메소드 패턴을 이용하면 **클래스의 인스턴스를 만드는 일을 서브클래스에게 맡기는 것**.\n\n### 🥎 추상 팩토리 패턴\n\n> **인터페이스를 이용**하여 서로 연관된,\n> 또는 의존하는 객체를 구상 클래스를 지정하지 않고도 생성한다.\n\n---\n\n## 🎩 팩토리패턴이 필요한 이유\n\n`new`를 사용하는 것은 구상 클래스의 인스턴스를 만드는 것이다. 당연히! 인터페이스가 아닌 _특정 구현을 사용하게 되어버리는 것_. 일련의 구상 클래스들이 있을때는 어쩔수 없이 다음과 같은 코드를 만들어야 하는\n경우가 있다.\n\n```java\nDuck duck;\n\n        if(type==picnic)duck=new MallardDuck();\n        else if(type==hunting)duck=new DecoyDuck();\n        else if(type==inBathTub)duck=new RubberDuck();\n```\n\n이런 코드가 있다는 것은, 뭔가 변경하거나 확장해야 할 때 *코드를 다시 확인하고 추가 또는 제거해야 한다는 것*을 의미한다.\n**인터페이스**에 맞춰서 코딩을 하면 시스템에서 일어날 수 있는 여러 변화를 이겨낼 수 있다.\n**다형성** 덕분에 어떤 클래스든 특정 인터페이스만 구현하면 사용할수 있기 때문이다.\n\n반대로. 구상 클래스를 많이 사용하면 새로운 구상 클래스가 추가될 때마다 코드를 고쳐야 하기때문에 많은 문제가 생길수 있다. 즉, *변화에 대해 닫혀 있는 코드*가 되어버리는 것이다.\n\n> 바뀔 수 있는 부분을 찾아내서 바뀌지 않는 부분하고 분리시켜야 한다는 원칙.\n\n---\n\n## 🎢 고전적인 팩토리 패턴\n\n- **피자 가게**를 운영하고 있고 **피자가게 클래스**를 만들어야 된다고 가정한다.\n\n> 피자가게는 다양한 피자가 있을 수 있다.\n> 또한 다양한 피자가게가 있을 수 있다.\n\n### 🎞 기존소스\n\n```java\nPizza orderPizza(String type){\n\n        Pizza pizza;\n\n        //추가하거나 제거 시 매번 바뀌어야 하는부분\n        if(type.equals(\"cheese\"))pizza=new CheesePizza();\n        else if(type.equals(\"greek\"))pizza=new GreekPizza();\n        else if(type.equals(\"pepperoni\"))pizza=new PepperoniPizza();\n        //\n\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n        return pizza;\n        }\n```\n\n### 1. 피자 팩토리를 만든다.\n\n```java\n public class SimplePizzaFactory {\n\n    public Pizza createPizza(String type) { //이런 경우에는 static메소드로 선언하는 경우가 종종 있음.\n\n        Pizza pizza = null;\n\n        if (pizza.equals(\"cheese\")) pizza = new CheesePizza();\n        if (pizza.equals(\"pepper\")) pizza = new PepperoniPizza();\n        if (pizza.equals(\"clam\")) pizza = new ClamPizza();\n        if (pizza.equals(\"veggie\")) pizza = new VeggiePizza();\n\n        return pizza;\n    }\n}\n```\n\n### 2. 피자 가게를 만든다.\n\n```java\n\npublic class PizzaStore {\n\n    SimplePizzaFactory simplePizzaFactory;\n\n    public PizzaStore(SimplePizzaFactory simplePizzaFactory) {\n        this.simplePizzaFactory = simplePizzaFactory;  //피자 가게를 동적으로 설정\n    }\n\n    public Pizza orderPizza(String type) {\n\n        Pizza pizza;\n        pizza = simplePizzaFactory.createPizza(type); //수정 안해도 됨\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n\n        return pizza;\n\n    }\n}\n```\n\n### 3. 다양한 피자가게가 생긴다.\n\n```java\n PizzaStore nyStore=new PizzaStore(new NYPizzaFactory());\n        nyStore.orderPizza(\"cheese\");\n\n        PizzaStore chicagoStore=new PizzaStore(new ChicagoPizzafactory());\n        chicagoStore.orderPizza(\"cheese\");\n```\n\n- 각 피자가게에서 `orderPizza()` 만 호출하면 피자를 생성할 수 있게 되었다.\n\n> 그러나, 각 팩토리를 가진 피자가게 체인점들이 서로의 구현방식이 달라지는 일이 발생할수도 있게 되었다.\n> (PizzaStore가 각각 있다보니 굽는 방식이 달라진다거나 피자를 자르는 단계를 빼먹거나 하는..)\n\n---\n\n## 🎟 팩토리 메소드 패턴\n\n> 피자가게와 피자 **제작 과정 전체를 하나로 묶어주는 프레임워크**를 만들어야 된다는 결론!!\n> 파자를 만드는 활동 자체는 전부 PizzaStore 클래스에 국한시키면서도 분점마다 고유의 스타일을 살릴 수 있는 방법은 ??\n\n### 4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)\n\n```java\npublic abstract class PizzaStore { //추상 클래스로 구현\n\n    public Pizza orderPizza(String type) {\n\n        Pizza pizza;\n        pizza = createPizza(type);\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n\n        return pizza;\n    }\n\n    abstract Pizza createPizza(String type); //Pizza 인스턴스를 만드는 일은 팩토리 역할을 하는 메소드에서 맡아 처리\n}\n```\n\n### 5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.\n\n이제 각 분점을 위한 지역별로 서브클래스를 만들어줘야 한다. 피자의 스타일은 각 서브클래스에서 결정.\n\n![image](https://user-images.githubusercontent.com/55419159/139077742-76ac1027-09c3-4e42-8046-82a2b4e0cb54.jpg)\n\n이제 `ChicagoPizzaStore`, `NYPizzaStore` 에는 구상 피자클래스를 분기해주는 각각의 `createPizza()` 메소드가 있다.\n\n```java\npublic class NYPizzaStore extends PizzaStore {\n\n    @Override\n    public Pizza createPizza(String type) {\n\n        Pizza pizza = null;\n        if (type.equals(\"cheese\")) pizza = new NYStyleCheesePizza();\n        if (type.equals(\"peper\")) pizza = new NYStylePepperoniPizza();\n        if (type.equals(\"clam\")) pizza = new NYStyleClamPizza();\n        if (type.equals(\"veggie\")) pizza = new NYStyleVeggiePizza();\n\n        return pizza;\n    }\n}\n\npublic class ChicagoPizzaStore extends PizzaStore {\n\n    @Override\n    public Pizza createPizza(String type) {\n\n        Pizza pizza = null;\n        if (type.equals(\"cheese\")) pizza = new ChicagoStyleCheesePizza();\n        if (type.equals(\"peper\")) pizza = new ChicagoStylePepperoniPizza();\n        if (type.equals(\"clam\")) pizza = new ChicagoStyleClamPizza();\n        if (type.equals(\"veggie\")) pizza = new ChicagoStyleVeggiePizza();\n\n        return pizza;\n    }\n} \n```\n\n### 6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)\n\n```java\npublic abstract class Pizza {\n    String name;\n    String dough;\n    String sauce;\n    ArrayList<String> toppings = new ArrayList<>();\n\n    public void prepare() {\n        System.out.println(\"Preparing : \" + name);\n        System.out.println(\"Tossing dough...\");\n        System.out.println(\"Adding source\");\n        System.out.println(\"Adding toppings\");\n        for (String topping : toppings) {\n            System.out.println(\"\\ttopping : \" + topping);\n        }\n    }\n\n    public void bake() {\n        System.out.println(\"Bake for 25 minutes at 350\");\n    }\n\n    public void cut() {\n        System.out.println(\"Cutting the pizza into diagonal slices\");\n    }\n\n    public void box() {\n        System.out.println(\"Place pizza in official PizzaStore box\");\n    }\n\n    public String getname() {\n        return this.name;\n    }\n\n}\n```\n\n### 7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.\n\n```java\npublic class NYStyleCheesePizza extends Pizza {\n\n    public NYStyleCheesePizza() {\n        this.name = \"NY Style CheesePizza\";\n        this.dough = \"Thin Crust Dough\";\n        this.sauce = \"Marinara Sauce\";\n        this.toppings.add(\"Grated Reggiano Cheese\");\n    }\n}\n\npublic class ChicagoStyleCheesePizza extends Pizza {\n\n    public ChicagoStyleCheesePizza() {\n        this.name = \"Chicago Style CheesePizza\";\n        this.dough = \"Extra Thick Crust Dough\";\n        this.sauce = \"Plum Tomato Sauce\";\n        this.toppings.add(\"Shredded mozzarella Cheese\");\n    }\n\n    @Override\n    public void cut() {\n        System.out.println(\"Cutting the pizza into square slices\");\n    } //바꾸고 싶은 메소드만 오버라이딩\n}\n```\n\n### 8. 피자를 주문한다.\n\n```java\n public class PizzaTestDrive {\n\n    public static void main(String[] args) {\n\n        PizzaStore nyStore = new NYPizzaStore();\n        PizzaStore chicagoStore = new ChicagoPizzaStore();\n\n        Pizza nySytpePizza = nyStore.orderPizza(\"cheese\");\n        System.out.println(nySytpePizza.getname());\n\n        Pizza chicagoStypePizza = chicagoStore.orderPizza(\"cheese\");\n        System.out.println(chicagoStypePizza.getname());\n    }\n} \n```\n\n- 모든 팩토리 패턴에서는 **객체 생성을 캡슐화** 한다.\n- 팩토리 메소드 패턴에서는 *서브 클래스에서 어떤 클래스를 만들지를 결정하게 함*으로써 객체 생성을 캡슐화 한다.\n\n\n- 생산자 클래스(피자가게)\n\n![image2](https://user-images.githubusercontent.com/55419159/139077751-6a262811-5faf-4937-b7f1-5fb3447d8b90.jpg)\n\n- 제품 클래스(피자)\n\n![image3](https://user-images.githubusercontent.com/55419159/139077752-b27d2d2f-57fb-4226-bab6-f890d0f70a74.jpg)\n\n위 클래스 다이어그램에서는 `PizzaStore` 추상 클래스에서 객체를 만들기 위한 메소드, 즉 팩토리 메소드를 위한 인터페이스를 제공한다는 것을 알수있다.\n\n`PizzaStore`에 구현되어 있는 다른 메소드 `orderPizza()` 에서는 팩토리 메소드에 의해 생산된 제품을 가지고 필요한 작업을 처리한다. 하지만 실제 팩토리 메소드를 구현하고 제품(객체 인스턴스)을\n만들어 내는 일은 **서브클래스**에서만 할수 있다.\n\n\n---\n\n## 🎭 디자인원칙 : 의존성 뒤집기 원칙\n\n> 추상화된 것에 의존하도록 만들어라. 구상 클래스에 의존하도록 만들지 않도록 한다.\n\n~~구현클래스에 의존하는 형태~~\n\n```java\nPizzaStore->NYStyleCheesePizza\n        PizzaStore->ChicagoStypeCheesePizza\n        PizzaStore->NYStyleVeggiePizza\n```\n\n~~-> 좋지않음~~\n\n추상클래스(인터페이스)를 의존하는 형태\n\n```java\nPizzaStore->Pizza\n        Pizza<-NYStyleCheesePizza\n        Pizza<-ChicagoStyleCheesePizza\n        Pizza<-NYStyleVeggiePizza\n```\n\n-> **좋음**\n\n### 🛒 원칙에 도움이 되는 가이드\n\n_**1. 어떤 변수에도 구상 클래스에 대한 레퍼런스를 지정하지 않는다.**_\n\n- `new` 연산자를 사용하면 레퍼런스를 사용하게 되는 것이다.\n\n_**2. 구상 클래스에서 유도된 클래스를 만들지 않는다.**_\n\n- 구상클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게된다, 추상화 된 것을 사용해야 한다.\n\n_**3. 베이스 클래스에 이미 구현되어 있던 메소드를 오버라이드 하지 않는다.**_\n\n- 이미 구현되어 있는 메소드를 오버라이드 한다는 것은 애초부터 베이스 클래스가 제대로 추상화 된것이 아니었다고 볼 수 있다.\n- 베이스 클래스에서 메소드를 정의할 때는 모든 서브 클래스에서 공유할 수 있는 것만 정의해야한다.\n\n---\n\n## 🦺 추상 팩토리 패턴\n\n이렇게 PizzaStore 디자인이 모양새를 갖췄다. 유연한 프레임워크도 만들어 졌고, 디자인 원칙도 충실하게 지켰다.\n\n각각 체인점들이 미리 정해놓은 절차를 잘 따르고 있지만 몇몇 체인점들이 자잘한 재료를 더 싼 재료로 바꿔서 원가를 절감해 마진을 남기고 있다.\n\n원재료의 품질까지 관리하는 방법이 있을까??\n\n- **원재료 군**을 만들어 파악하자.\n- 제품에 들어가는 재료군(반죽, 소스, 치즈, 야채, 고기)은 같지만, 지역마다 재료의 구체적인 내용이 조금씩 다르다.\n\n\n1. 지역별로 팩토리를 만들어 각 생성 메소드를 구현하는 `PizzaingredientFactory` 클래스를 만든다.\n2. `ReggianoCheese`, `RedPeppers`, `ThickCrustDough`와 같이 팩토리에서 사용할 원재료 클래스들을 구현한다.\n3. 만든 원재료 공장을 `PizzaStore` 코드에서 사용하도록 함으로써 하나로 묶어준다.\n\n### 9. 원재료 공장을 만든다.\n\n```java\n public interface PizzaIngredientFactory {\n    public Dough createDough();\n\n    public Sauce createSauce();\n\n    public Cheese createCheese();\n\n    public Veggies[] createVeggies();\n\n    public Pepperoni createPepperoni();\n\n    public Clams createClams();\n} \n```\n\n```java\npublic class NYPizzaingredientFactory implements PizzaIngredientFactory {\n\n    @Override\n    public Dough createDough() {\n        return new ThinCrustdough();\n    }\n\n    @Override\n    public Sauce createSauce() {\n        return new MarinaraSauce();\n    }\n\n    @Override\n    public Cheese createCheese() {\n        return new ReggianoCheese();\n    }\n\n    @Override\n    public Veggies[] createVeggies() {\n        Veggies veggies[] = {new Farlic(), new Onion(), new Mushroom(), new RedPepper()};\n        return veggies;\n    }\n\n    @Override\n    public Pepperoni createPepperoni() {\n        return new SlicedPepperoni();\n    }\n\n    @Override\n    public Clams createClams() {\n        return new Freshclams();\n    }\n}\n\n\npublic class ChicagoPizzaingredientFactory implements PizzaIngredientFactory {\n\n    @Override\n    public Dough createDough() {\n        return new ThickCrustDough();\n    }\n\n    @Override\n    public Sauce createSauce() {\n        return new PlumTomatoSauce();\n    }\n\n    @Override\n    public Cheese createCheese() {\n        return new MozzarellaCheese();\n    }\n\n    @Override\n    public Veggies[] createVeggies() {\n        Veggies veggies[] = {new BlackOlives(), new Spinach(), new EggPlant()};\n        return veggies;\n    }\n\n    @Override\n    public Pepperoni createPepperoni() {\n        return new Slicedpepperoni();\n    }\n\n    @Override\n    public Clams createClams() {\n        return new FrozenClam();\n    }\n}\n```\n\n### 10. 피자마다 재료는 다르다.\n\n```java\n public abstract class Pizza {\n    String name;\n    Dough dough;\n    Sauce sauce;\n    Veggies veggies[];\n    Cheese cheese;\n    Pepperoni pepperoni;\n    Clams clams;\n\n    public abstract void prepare(); //추상 메소드로 변경됨.\n\n    public void bake() {\n        System.out.println(\"Bake for 25 minutes at 350\");\n    }\n\n    public void cut() {\n        System.out.println(\"Cutting the pizza into diagonal slices\");\n    }\n\n    public void box() {\n        System.out.println(\"Place pizza in official PizzaStore box\");\n    }\n\n    public String getname() {\n        return this.name;\n    }\n} \n```\n\n```java\n public class CheesePizza extends Pizza {\n\n    PizzaIngredientFactory ingredientFactory;\n\n    public CheesePizza(PizzaIngredientFactory ingredientFactory) {\n        this.ingredientFactory = ingredientFactory;\n    }\n\n    @Override\n    public void prepare() {\n        this.dough = ingredientFactory.createDough();\n        this.sauce = ingredientFactory.createSauce();\n        this.cheese = ingredientFactory.createCheese();\n    }\n}\n\n\npublic class ClamPizza extends Pizza {\n\n    PizzaIngredientFactory ingredientFactory;\n\n    public ClamPizza(PizzaIngredientFactory ingredientFactory) {\n        this.ingredientFactory = ingredientFactory;\n    }\n\n    @Override\n    public void prepare() {\n        this.dough = ingredientFactory.createDough();\n        this.sauce = ingredientFactory.createSauce();\n        this.cheese = ingredientFactory.createCheese();\n        this.clams = ingredientFactory.createClams();\n    }\n}\n```\n\n### 11. 피자마다, 지역마다 다른 피자를 만든다.\n\n```java\n public class NYPizzaStore extends PizzaStore {\n\n    @Override\n    public Pizza createPizza(String type) {\n\n        Pizza pizza = null;\n        PizzaIngredientFactory ingredientFactory = new NYPizzaingredientFactory();\n\n        if (type.equals(\"cheese\")) {\n            pizza = new CheesePizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Cheese Pizza\");\n\n        } else if (type.equals(\"peper\")) {\n            pizza = new PepperoniPizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Pepperoni Pizza\");\n\n        } else if (type.equals(\"clam\")) {\n            pizza = new ClamPizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Clam Pizza\");\n\n        } else if (type.equals(\"veggie\")) {\n            pizza = new VeggiePizza(ingredientFactory);\n            pizza.setName(ingredientFactory.NY_STYLE + \" Veggie Pizza\");\n        }\n\n        return pizza;\n    }\n} \n```\n\n### ⛳ 프로세스 정리\n\n![image4](https://user-images.githubusercontent.com/55419159/139077755-c920f73b-e347-41d4-b1a8-9f0bc5e028fa.jpg)\n\n이제 전체적인 흐름은.\n\n1. 뉴욕 피자가게를 만든다.\n\n```java\nPizzaStore nyPizzaStore=new NYPizzaStore();\n```\n\n2. 주문을 한다.\n\n```java\nnyPizzaStore.orderPizza(\"cheese\");\n```\n\n3. orderPizza 메소드에서는 우선 createPizza() 메소드를 호출한다\n\n```java\nPizza pizza=createPizza(\"cheese\");\n```\n\n4. createPizza() 메소드가 호출되면 원재료 공장이 돌아가기 시작한다.\n\n```java\nPizza pizza=new CheesePizza(nyIngredientFactory);\n```\n\n5. 피자를 준비하는 prepare()메소드가 호출되면 팩토리에 원재료 주문이 들어간다.\n\n```java\nvoid prepare(){\n        dough=nyIngredientFactory.createDough();\n        sauce=nyIngredientFactory.createSauce();\n        cheese=nyIngredientFactory.createCheese();\n        }\n```\n\n6. 준비단계가 끝나고 orderPizza() 메소드에서는 피자를 굽고, 자르고, 포장한다.\n\n---\n\n## 💎 요약\n\n### 추상 팩토리 패턴\n\n> 제품군을 생성하기 위한 **인터페이스**를 생성하고, 그 **인터페이스를 구성**하여 사용할수 있게끔 하는것.\n\n### 추상 메소드 패턴\n\n> 하나의 추상클래스에서 **추상 메소드**를 만들고, 서브클래스들이 **그 추상메소드를 구현**하여 인스턴스를 만들게끔 하는것.","slug":"디자인-패턴/2021-10-20-팩토리-패턴/2021-10-20-팩토리-패턴","published":1,"date":"2021-10-28T11:13:20.382Z","updated":"2021-11-13T05:32:17.631Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2ft001ejd9k6ckp7an3","content":"<h2 id=\"⛳-들어가기-전에\"><a href=\"#⛳-들어가기-전에\" class=\"headerlink\" title=\"⛳ 들어가기 전에..\"></a>⛳ 들어가기 전에..</h2><p>회사에서 같은 프로세스 내에서 각각의 제휴사에 서비스를 인터페이스해야 하는 경우가 있었다.</p>\n<p>전체적인 프로세스 플로우를 인터페이스로, 제휴사를 클래스(Bean)로 만들어 팩토리 패턴으로 구현하였다.</p>\n<p>동일한 프로세스 플로우 내에서 각기 다른 제휴사의 API와 연동해야 했는데 팩토리 패턴이 많은 도움이 되었다.</p>\n<hr>\n<h2 id=\"👋-팩토리패턴이란\"><a href=\"#👋-팩토리패턴이란\" class=\"headerlink\" title=\"👋 팩토리패턴이란\"></a>👋 팩토리패턴이란</h2><h3 id=\"⚾-팩토리-메소드-패턴\"><a href=\"#⚾-팩토리-메소드-패턴\" class=\"headerlink\" title=\"⚾ 팩토리 메소드 패턴\"></a>⚾ 팩토리 메소드 패턴</h3><blockquote>\n<p>객체를 생성하기 위한 인터페이스를 정의하는데,<br>어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정하게 만든다.<br>즉, 팩토리 메소드 패턴을 이용하면 <strong>클래스의 인스턴스를 만드는 일을 서브클래스에게 맡기는 것</strong>.</p>\n</blockquote>\n<h3 id=\"🥎-추상-팩토리-패턴\"><a href=\"#🥎-추상-팩토리-패턴\" class=\"headerlink\" title=\"🥎 추상 팩토리 패턴\"></a>🥎 추상 팩토리 패턴</h3><blockquote>\n<p><strong>인터페이스를 이용</strong>하여 서로 연관된,<br>또는 의존하는 객체를 구상 클래스를 지정하지 않고도 생성한다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🎩-팩토리패턴이-필요한-이유\"><a href=\"#🎩-팩토리패턴이-필요한-이유\" class=\"headerlink\" title=\"🎩 팩토리패턴이 필요한 이유\"></a>🎩 팩토리패턴이 필요한 이유</h2><p><code>new</code>를 사용하는 것은 구상 클래스의 인스턴스를 만드는 것이다. 당연히! 인터페이스가 아닌 <em>특정 구현을 사용하게 되어버리는 것</em>. 일련의 구상 클래스들이 있을때는 어쩔수 없이 다음과 같은 코드를 만들어야 하는<br>경우가 있다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Duck duck;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(type==picnic)duck=<span class=\"keyword\">new</span> MallardDuck();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==hunting)duck=<span class=\"keyword\">new</span> DecoyDuck();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==inBathTub)duck=<span class=\"keyword\">new</span> RubberDuck();</span><br></pre></td></tr></table></figure>\n\n<p>이런 코드가 있다는 것은, 뭔가 변경하거나 확장해야 할 때 <em>코드를 다시 확인하고 추가 또는 제거해야 한다는 것</em>을 의미한다.<br><strong>인터페이스</strong>에 맞춰서 코딩을 하면 시스템에서 일어날 수 있는 여러 변화를 이겨낼 수 있다.<br><strong>다형성</strong> 덕분에 어떤 클래스든 특정 인터페이스만 구현하면 사용할수 있기 때문이다.</p>\n<p>반대로. 구상 클래스를 많이 사용하면 새로운 구상 클래스가 추가될 때마다 코드를 고쳐야 하기때문에 많은 문제가 생길수 있다. 즉, <em>변화에 대해 닫혀 있는 코드</em>가 되어버리는 것이다.</p>\n<blockquote>\n<p>바뀔 수 있는 부분을 찾아내서 바뀌지 않는 부분하고 분리시켜야 한다는 원칙.</p>\n</blockquote>\n<hr>\n<h2 id=\"🎢-고전적인-팩토리-패턴\"><a href=\"#🎢-고전적인-팩토리-패턴\" class=\"headerlink\" title=\"🎢 고전적인 팩토리 패턴\"></a>🎢 고전적인 팩토리 패턴</h2><ul>\n<li><strong>피자 가게</strong>를 운영하고 있고 <strong>피자가게 클래스</strong>를 만들어야 된다고 가정한다.</li>\n</ul>\n<blockquote>\n<p>피자가게는 다양한 피자가 있을 수 있다.<br>또한 다양한 피자가게가 있을 수 있다.</p>\n</blockquote>\n<h3 id=\"🎞-기존소스\"><a href=\"#🎞-기존소스\" class=\"headerlink\" title=\"🎞 기존소스\"></a>🎞 기존소스</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Pizza <span class=\"title\">orderPizza</span><span class=\"params\">(String type)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//추가하거나 제거 시 매번 바뀌어야 하는부분</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(type.equals(<span class=\"string\">&quot;cheese&quot;</span>))pizza=<span class=\"keyword\">new</span> CheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type.equals(<span class=\"string\">&quot;greek&quot;</span>))pizza=<span class=\"keyword\">new</span> GreekPizza();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type.equals(<span class=\"string\">&quot;pepperoni&quot;</span>))pizza=<span class=\"keyword\">new</span> PepperoniPizza();</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\">        pizza.prepare();</span><br><span class=\"line\">        pizza.bake();</span><br><span class=\"line\">        pizza.cut();</span><br><span class=\"line\">        pizza.box();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-피자-팩토리를-만든다\"><a href=\"#1-피자-팩토리를-만든다\" class=\"headerlink\" title=\"1. 피자 팩토리를 만든다.\"></a>1. 피자 팩토리를 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimplePizzaFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123; <span class=\"comment\">//이런 경우에는 static메소드로 선언하는 경우가 종종 있음.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;cheese&quot;</span>)) pizza = <span class=\"keyword\">new</span> CheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;pepper&quot;</span>)) pizza = <span class=\"keyword\">new</span> PepperoniPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;clam&quot;</span>)) pizza = <span class=\"keyword\">new</span> ClamPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;veggie&quot;</span>)) pizza = <span class=\"keyword\">new</span> VeggiePizza();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-피자-가게를-만든다\"><a href=\"#2-피자-가게를-만든다\" class=\"headerlink\" title=\"2. 피자 가게를 만든다.\"></a>2. 피자 가게를 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    SimplePizzaFactory simplePizzaFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PizzaStore</span><span class=\"params\">(SimplePizzaFactory simplePizzaFactory)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.simplePizzaFactory = simplePizzaFactory;  <span class=\"comment\">//피자 가게를 동적으로 설정</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">orderPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza;</span><br><span class=\"line\">        pizza = simplePizzaFactory.createPizza(type); <span class=\"comment\">//수정 안해도 됨</span></span><br><span class=\"line\">        pizza.prepare();</span><br><span class=\"line\">        pizza.bake();</span><br><span class=\"line\">        pizza.cut();</span><br><span class=\"line\">        pizza.box();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-다양한-피자가게가-생긴다\"><a href=\"#3-다양한-피자가게가-생긴다\" class=\"headerlink\" title=\"3. 다양한 피자가게가 생긴다.\"></a>3. 다양한 피자가게가 생긴다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore nyStore=<span class=\"keyword\">new</span> PizzaStore(<span class=\"keyword\">new</span> NYPizzaFactory());</span><br><span class=\"line\">       nyStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       PizzaStore chicagoStore=<span class=\"keyword\">new</span> PizzaStore(<span class=\"keyword\">new</span> ChicagoPizzafactory());</span><br><span class=\"line\">       chicagoStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>각 피자가게에서 <code>orderPizza()</code> 만 호출하면 피자를 생성할 수 있게 되었다.</li>\n</ul>\n<blockquote>\n<p>그러나, 각 팩토리를 가진 피자가게 체인점들이 서로의 구현방식이 달라지는 일이 발생할수도 있게 되었다.<br>(PizzaStore가 각각 있다보니 굽는 방식이 달라진다거나 피자를 자르는 단계를 빼먹거나 하는..)</p>\n</blockquote>\n<hr>\n<h2 id=\"🎟-팩토리-메소드-패턴\"><a href=\"#🎟-팩토리-메소드-패턴\" class=\"headerlink\" title=\"🎟 팩토리 메소드 패턴\"></a>🎟 팩토리 메소드 패턴</h2><blockquote>\n<p>피자가게와 피자 <strong>제작 과정 전체를 하나로 묶어주는 프레임워크</strong>를 만들어야 된다는 결론!!<br>파자를 만드는 활동 자체는 전부 PizzaStore 클래스에 국한시키면서도 분점마다 고유의 스타일을 살릴 수 있는 방법은 ??</p>\n</blockquote>\n<h3 id=\"4-피자가게를-묶는-추상-클래스를-만든다-프렌차이즈-본사랄까\"><a href=\"#4-피자가게를-묶는-추상-클래스를-만든다-프렌차이즈-본사랄까\" class=\"headerlink\" title=\"4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)\"></a>4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PizzaStore</span> </span>&#123; <span class=\"comment\">//추상 클래스로 구현</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">orderPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza;</span><br><span class=\"line\">        pizza = createPizza(type);</span><br><span class=\"line\">        pizza.prepare();</span><br><span class=\"line\">        pizza.bake();</span><br><span class=\"line\">        pizza.cut();</span><br><span class=\"line\">        pizza.box();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">abstract</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span></span>; <span class=\"comment\">//Pizza 인스턴스를 만드는 일은 팩토리 역할을 하는 메소드에서 맡아 처리</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-각-피자가게에서-추상클래스-본사-를-상속받게-한다\"><a href=\"#5-각-피자가게에서-추상클래스-본사-를-상속받게-한다\" class=\"headerlink\" title=\"5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.\"></a>5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.</h3><p>이제 각 분점을 위한 지역별로 서브클래스를 만들어줘야 한다. 피자의 스타일은 각 서브클래스에서 결정.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139077742-76ac1027-09c3-4e42-8046-82a2b4e0cb54.jpg\" alt=\"image\"></p>\n<p>이제 <code>ChicagoPizzaStore</code>, <code>NYPizzaStore</code> 에는 구상 피자클래스를 분기해주는 각각의 <code>createPizza()</code> 메소드가 있다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYPizzaStore</span> <span class=\"keyword\">extends</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;cheese&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStyleCheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;peper&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStylePepperoniPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;clam&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStyleClamPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;veggie&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStyleVeggiePizza();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChicagoPizzaStore</span> <span class=\"keyword\">extends</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;cheese&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStyleCheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;peper&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStylePepperoniPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;clam&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStyleClamPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;veggie&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStyleVeggiePizza();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-피자-추상클래스를-만든다-순수한-피자-그-자체\"><a href=\"#6-피자-추상클래스를-만든다-순수한-피자-그-자체\" class=\"headerlink\" title=\"6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)\"></a>6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    String dough;</span><br><span class=\"line\">    String sauce;</span><br><span class=\"line\">    ArrayList&lt;String&gt; toppings = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Preparing : &quot;</span> + name);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Tossing dough...&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Adding source&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Adding toppings&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String topping : toppings) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;\\ttopping : &quot;</span> + topping);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">bake</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Bake for 25 minutes at 350&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cut</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cutting the pizza into diagonal slices&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">box</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Place pizza in official PizzaStore box&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getname</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-다양한-피자를-만들어-피자-추상클래스를-상속한다\"><a href=\"#7-다양한-피자를-만들어-피자-추상클래스를-상속한다\" class=\"headerlink\" title=\"7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.\"></a>7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYStyleCheesePizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NYStyleCheesePizza</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = <span class=\"string\">&quot;NY Style CheesePizza&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = <span class=\"string\">&quot;Thin Crust Dough&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = <span class=\"string\">&quot;Marinara Sauce&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.toppings.add(<span class=\"string\">&quot;Grated Reggiano Cheese&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChicagoStyleCheesePizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ChicagoStyleCheesePizza</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = <span class=\"string\">&quot;Chicago Style CheesePizza&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = <span class=\"string\">&quot;Extra Thick Crust Dough&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = <span class=\"string\">&quot;Plum Tomato Sauce&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.toppings.add(<span class=\"string\">&quot;Shredded mozzarella Cheese&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cut</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cutting the pizza into square slices&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"comment\">//바꾸고 싶은 메소드만 오버라이딩</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-피자를-주문한다\"><a href=\"#8-피자를-주문한다\" class=\"headerlink\" title=\"8. 피자를 주문한다.\"></a>8. 피자를 주문한다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PizzaTestDrive</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        PizzaStore nyStore = <span class=\"keyword\">new</span> NYPizzaStore();</span><br><span class=\"line\">        PizzaStore chicagoStore = <span class=\"keyword\">new</span> ChicagoPizzaStore();</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza nySytpePizza = nyStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br><span class=\"line\">        System.out.println(nySytpePizza.getname());</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza chicagoStypePizza = chicagoStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br><span class=\"line\">        System.out.println(chicagoStypePizza.getname());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>모든 팩토리 패턴에서는 <strong>객체 생성을 캡슐화</strong> 한다.</li>\n<li>팩토리 메소드 패턴에서는 <em>서브 클래스에서 어떤 클래스를 만들지를 결정하게 함</em>으로써 객체 생성을 캡슐화 한다.</li>\n</ul>\n<ul>\n<li>생산자 클래스(피자가게)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139077751-6a262811-5faf-4937-b7f1-5fb3447d8b90.jpg\" alt=\"image2\"></p>\n<ul>\n<li>제품 클래스(피자)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139077752-b27d2d2f-57fb-4226-bab6-f890d0f70a74.jpg\" alt=\"image3\"></p>\n<p>위 클래스 다이어그램에서는 <code>PizzaStore</code> 추상 클래스에서 객체를 만들기 위한 메소드, 즉 팩토리 메소드를 위한 인터페이스를 제공한다는 것을 알수있다.</p>\n<p><code>PizzaStore</code>에 구현되어 있는 다른 메소드 <code>orderPizza()</code> 에서는 팩토리 메소드에 의해 생산된 제품을 가지고 필요한 작업을 처리한다. 하지만 실제 팩토리 메소드를 구현하고 제품(객체 인스턴스)을<br>만들어 내는 일은 <strong>서브클래스</strong>에서만 할수 있다.</p>\n<hr>\n<h2 id=\"🎭-디자인원칙-의존성-뒤집기-원칙\"><a href=\"#🎭-디자인원칙-의존성-뒤집기-원칙\" class=\"headerlink\" title=\"🎭 디자인원칙 : 의존성 뒤집기 원칙\"></a>🎭 디자인원칙 : 의존성 뒤집기 원칙</h2><blockquote>\n<p>추상화된 것에 의존하도록 만들어라. 구상 클래스에 의존하도록 만들지 않도록 한다.</p>\n</blockquote>\n<p><del>구현클래스에 의존하는 형태</del></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore-&gt;NYStyleCheesePizza</span><br><span class=\"line\">        PizzaStore-&gt;ChicagoStypeCheesePizza</span><br><span class=\"line\">        PizzaStore-&gt;NYStyleVeggiePizza</span><br></pre></td></tr></table></figure>\n\n<p><del>-&gt; 좋지않음</del></p>\n<p>추상클래스(인터페이스)를 의존하는 형태</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore-&gt;Pizza</span><br><span class=\"line\">        Pizza&lt;-NYStyleCheesePizza</span><br><span class=\"line\">        Pizza&lt;-ChicagoStyleCheesePizza</span><br><span class=\"line\">        Pizza&lt;-NYStyleVeggiePizza</span><br></pre></td></tr></table></figure>\n\n<p>-&gt; <strong>좋음</strong></p>\n<h3 id=\"🛒-원칙에-도움이-되는-가이드\"><a href=\"#🛒-원칙에-도움이-되는-가이드\" class=\"headerlink\" title=\"🛒 원칙에 도움이 되는 가이드\"></a>🛒 원칙에 도움이 되는 가이드</h3><p><em><strong>1. 어떤 변수에도 구상 클래스에 대한 레퍼런스를 지정하지 않는다.</strong></em></p>\n<ul>\n<li><code>new</code> 연산자를 사용하면 레퍼런스를 사용하게 되는 것이다.</li>\n</ul>\n<p><em><strong>2. 구상 클래스에서 유도된 클래스를 만들지 않는다.</strong></em></p>\n<ul>\n<li>구상클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게된다, 추상화 된 것을 사용해야 한다.</li>\n</ul>\n<p><em><strong>3. 베이스 클래스에 이미 구현되어 있던 메소드를 오버라이드 하지 않는다.</strong></em></p>\n<ul>\n<li>이미 구현되어 있는 메소드를 오버라이드 한다는 것은 애초부터 베이스 클래스가 제대로 추상화 된것이 아니었다고 볼 수 있다.</li>\n<li>베이스 클래스에서 메소드를 정의할 때는 모든 서브 클래스에서 공유할 수 있는 것만 정의해야한다.</li>\n</ul>\n<hr>\n<h2 id=\"🦺-추상-팩토리-패턴\"><a href=\"#🦺-추상-팩토리-패턴\" class=\"headerlink\" title=\"🦺 추상 팩토리 패턴\"></a>🦺 추상 팩토리 패턴</h2><p>이렇게 PizzaStore 디자인이 모양새를 갖췄다. 유연한 프레임워크도 만들어 졌고, 디자인 원칙도 충실하게 지켰다.</p>\n<p>각각 체인점들이 미리 정해놓은 절차를 잘 따르고 있지만 몇몇 체인점들이 자잘한 재료를 더 싼 재료로 바꿔서 원가를 절감해 마진을 남기고 있다.</p>\n<p>원재료의 품질까지 관리하는 방법이 있을까??</p>\n<ul>\n<li><strong>원재료 군</strong>을 만들어 파악하자.</li>\n<li>제품에 들어가는 재료군(반죽, 소스, 치즈, 야채, 고기)은 같지만, 지역마다 재료의 구체적인 내용이 조금씩 다르다.</li>\n</ul>\n<ol>\n<li>지역별로 팩토리를 만들어 각 생성 메소드를 구현하는 <code>PizzaingredientFactory</code> 클래스를 만든다.</li>\n<li><code>ReggianoCheese</code>, <code>RedPeppers</code>, <code>ThickCrustDough</code>와 같이 팩토리에서 사용할 원재료 클래스들을 구현한다.</li>\n<li>만든 원재료 공장을 <code>PizzaStore</code> 코드에서 사용하도록 함으로써 하나로 묶어준다.</li>\n</ol>\n<h3 id=\"9-원재료-공장을-만든다\"><a href=\"#9-원재료-공장을-만든다\" class=\"headerlink\" title=\"9. 원재료 공장을 만든다.\"></a>9. 원재료 공장을 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PizzaIngredientFactory</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dough <span class=\"title\">createDough</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Sauce <span class=\"title\">createSauce</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Cheese <span class=\"title\">createCheese</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Veggies[] createVeggies();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pepperoni <span class=\"title\">createPepperoni</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Clams <span class=\"title\">createClams</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYPizzaingredientFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">PizzaIngredientFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dough <span class=\"title\">createDough</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ThinCrustdough();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Sauce <span class=\"title\">createSauce</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MarinaraSauce();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Cheese <span class=\"title\">createCheese</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ReggianoCheese();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Veggies[] createVeggies() &#123;</span><br><span class=\"line\">        Veggies veggies[] = &#123;<span class=\"keyword\">new</span> Farlic(), <span class=\"keyword\">new</span> Onion(), <span class=\"keyword\">new</span> Mushroom(), <span class=\"keyword\">new</span> RedPepper()&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> veggies;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pepperoni <span class=\"title\">createPepperoni</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SlicedPepperoni();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Clams <span class=\"title\">createClams</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Freshclams();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChicagoPizzaingredientFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">PizzaIngredientFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dough <span class=\"title\">createDough</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ThickCrustDough();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Sauce <span class=\"title\">createSauce</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PlumTomatoSauce();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Cheese <span class=\"title\">createCheese</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MozzarellaCheese();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Veggies[] createVeggies() &#123;</span><br><span class=\"line\">        Veggies veggies[] = &#123;<span class=\"keyword\">new</span> BlackOlives(), <span class=\"keyword\">new</span> Spinach(), <span class=\"keyword\">new</span> EggPlant()&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> veggies;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pepperoni <span class=\"title\">createPepperoni</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Slicedpepperoni();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Clams <span class=\"title\">createClams</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> FrozenClam();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-피자마다-재료는-다르다\"><a href=\"#10-피자마다-재료는-다르다\" class=\"headerlink\" title=\"10. 피자마다 재료는 다르다.\"></a>10. 피자마다 재료는 다르다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    Dough dough;</span><br><span class=\"line\">    Sauce sauce;</span><br><span class=\"line\">    Veggies veggies[];</span><br><span class=\"line\">    Cheese cheese;</span><br><span class=\"line\">    Pepperoni pepperoni;</span><br><span class=\"line\">    Clams clams;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span></span>; <span class=\"comment\">//추상 메소드로 변경됨.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">bake</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Bake for 25 minutes at 350&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cut</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cutting the pizza into diagonal slices&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">box</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Place pizza in official PizzaStore box&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getname</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CheesePizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    PizzaIngredientFactory ingredientFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CheesePizza</span><span class=\"params\">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ingredientFactory = ingredientFactory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = ingredientFactory.createDough();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = ingredientFactory.createSauce();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cheese = ingredientFactory.createCheese();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClamPizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    PizzaIngredientFactory ingredientFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ClamPizza</span><span class=\"params\">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ingredientFactory = ingredientFactory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = ingredientFactory.createDough();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = ingredientFactory.createSauce();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cheese = ingredientFactory.createCheese();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.clams = ingredientFactory.createClams();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-피자마다-지역마다-다른-피자를-만든다\"><a href=\"#11-피자마다-지역마다-다른-피자를-만든다\" class=\"headerlink\" title=\"11. 피자마다, 지역마다 다른 피자를 만든다.\"></a>11. 피자마다, 지역마다 다른 피자를 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYPizzaStore</span> <span class=\"keyword\">extends</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PizzaIngredientFactory ingredientFactory = <span class=\"keyword\">new</span> NYPizzaingredientFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;cheese&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> CheesePizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Cheese Pizza&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;peper&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> PepperoniPizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Pepperoni Pizza&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;clam&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> ClamPizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Clam Pizza&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;veggie&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> VeggiePizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Veggie Pizza&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"⛳-프로세스-정리\"><a href=\"#⛳-프로세스-정리\" class=\"headerlink\" title=\"⛳ 프로세스 정리\"></a>⛳ 프로세스 정리</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/139077755-c920f73b-e347-41d4-b1a8-9f0bc5e028fa.jpg\" alt=\"image4\"></p>\n<p>이제 전체적인 흐름은.</p>\n<ol>\n<li>뉴욕 피자가게를 만든다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore nyPizzaStore=<span class=\"keyword\">new</span> NYPizzaStore();</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>주문을 한다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nyPizzaStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>orderPizza 메소드에서는 우선 createPizza() 메소드를 호출한다</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Pizza pizza=createPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>createPizza() 메소드가 호출되면 원재료 공장이 돌아가기 시작한다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Pizza pizza=<span class=\"keyword\">new</span> CheesePizza(nyIngredientFactory);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>피자를 준비하는 prepare()메소드가 호출되면 팩토리에 원재료 주문이 들어간다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        dough=nyIngredientFactory.createDough();</span><br><span class=\"line\">        sauce=nyIngredientFactory.createSauce();</span><br><span class=\"line\">        cheese=nyIngredientFactory.createCheese();</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>준비단계가 끝나고 orderPizza() 메소드에서는 피자를 굽고, 자르고, 포장한다.</li>\n</ol>\n<hr>\n<h2 id=\"💎-요약\"><a href=\"#💎-요약\" class=\"headerlink\" title=\"💎 요약\"></a>💎 요약</h2><h3 id=\"추상-팩토리-패턴\"><a href=\"#추상-팩토리-패턴\" class=\"headerlink\" title=\"추상 팩토리 패턴\"></a>추상 팩토리 패턴</h3><blockquote>\n<p>제품군을 생성하기 위한 <strong>인터페이스</strong>를 생성하고, 그 <strong>인터페이스를 구성</strong>하여 사용할수 있게끔 하는것.</p>\n</blockquote>\n<h3 id=\"추상-메소드-패턴\"><a href=\"#추상-메소드-패턴\" class=\"headerlink\" title=\"추상 메소드 패턴\"></a>추상 메소드 패턴</h3><blockquote>\n<p>하나의 추상클래스에서 <strong>추상 메소드</strong>를 만들고, 서브클래스들이 <strong>그 추상메소드를 구현</strong>하여 인스턴스를 만들게끔 하는것.</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"⛳-들어가기-전에\"><a href=\"#⛳-들어가기-전에\" class=\"headerlink\" title=\"⛳ 들어가기 전에..\"></a>⛳ 들어가기 전에..</h2><p>회사에서 같은 프로세스 내에서 각각의 제휴사에 서비스를 인터페이스해야 하는 경우가 있었다.</p>\n<p>전체적인 프로세스 플로우를 인터페이스로, 제휴사를 클래스(Bean)로 만들어 팩토리 패턴으로 구현하였다.</p>\n<p>동일한 프로세스 플로우 내에서 각기 다른 제휴사의 API와 연동해야 했는데 팩토리 패턴이 많은 도움이 되었다.</p>\n<hr>\n<h2 id=\"👋-팩토리패턴이란\"><a href=\"#👋-팩토리패턴이란\" class=\"headerlink\" title=\"👋 팩토리패턴이란\"></a>👋 팩토리패턴이란</h2><h3 id=\"⚾-팩토리-메소드-패턴\"><a href=\"#⚾-팩토리-메소드-패턴\" class=\"headerlink\" title=\"⚾ 팩토리 메소드 패턴\"></a>⚾ 팩토리 메소드 패턴</h3><blockquote>\n<p>객체를 생성하기 위한 인터페이스를 정의하는데,<br>어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정하게 만든다.<br>즉, 팩토리 메소드 패턴을 이용하면 <strong>클래스의 인스턴스를 만드는 일을 서브클래스에게 맡기는 것</strong>.</p>\n</blockquote>\n<h3 id=\"🥎-추상-팩토리-패턴\"><a href=\"#🥎-추상-팩토리-패턴\" class=\"headerlink\" title=\"🥎 추상 팩토리 패턴\"></a>🥎 추상 팩토리 패턴</h3><blockquote>\n<p><strong>인터페이스를 이용</strong>하여 서로 연관된,<br>또는 의존하는 객체를 구상 클래스를 지정하지 않고도 생성한다.</p>\n</blockquote>\n<hr>\n<h2 id=\"🎩-팩토리패턴이-필요한-이유\"><a href=\"#🎩-팩토리패턴이-필요한-이유\" class=\"headerlink\" title=\"🎩 팩토리패턴이 필요한 이유\"></a>🎩 팩토리패턴이 필요한 이유</h2><p><code>new</code>를 사용하는 것은 구상 클래스의 인스턴스를 만드는 것이다. 당연히! 인터페이스가 아닌 <em>특정 구현을 사용하게 되어버리는 것</em>. 일련의 구상 클래스들이 있을때는 어쩔수 없이 다음과 같은 코드를 만들어야 하는<br>경우가 있다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Duck duck;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(type==picnic)duck=<span class=\"keyword\">new</span> MallardDuck();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==hunting)duck=<span class=\"keyword\">new</span> DecoyDuck();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==inBathTub)duck=<span class=\"keyword\">new</span> RubberDuck();</span><br></pre></td></tr></table></figure>\n\n<p>이런 코드가 있다는 것은, 뭔가 변경하거나 확장해야 할 때 <em>코드를 다시 확인하고 추가 또는 제거해야 한다는 것</em>을 의미한다.<br><strong>인터페이스</strong>에 맞춰서 코딩을 하면 시스템에서 일어날 수 있는 여러 변화를 이겨낼 수 있다.<br><strong>다형성</strong> 덕분에 어떤 클래스든 특정 인터페이스만 구현하면 사용할수 있기 때문이다.</p>\n<p>반대로. 구상 클래스를 많이 사용하면 새로운 구상 클래스가 추가될 때마다 코드를 고쳐야 하기때문에 많은 문제가 생길수 있다. 즉, <em>변화에 대해 닫혀 있는 코드</em>가 되어버리는 것이다.</p>\n<blockquote>\n<p>바뀔 수 있는 부분을 찾아내서 바뀌지 않는 부분하고 분리시켜야 한다는 원칙.</p>\n</blockquote>\n<hr>\n<h2 id=\"🎢-고전적인-팩토리-패턴\"><a href=\"#🎢-고전적인-팩토리-패턴\" class=\"headerlink\" title=\"🎢 고전적인 팩토리 패턴\"></a>🎢 고전적인 팩토리 패턴</h2><ul>\n<li><strong>피자 가게</strong>를 운영하고 있고 <strong>피자가게 클래스</strong>를 만들어야 된다고 가정한다.</li>\n</ul>\n<blockquote>\n<p>피자가게는 다양한 피자가 있을 수 있다.<br>또한 다양한 피자가게가 있을 수 있다.</p>\n</blockquote>\n<h3 id=\"🎞-기존소스\"><a href=\"#🎞-기존소스\" class=\"headerlink\" title=\"🎞 기존소스\"></a>🎞 기존소스</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Pizza <span class=\"title\">orderPizza</span><span class=\"params\">(String type)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//추가하거나 제거 시 매번 바뀌어야 하는부분</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(type.equals(<span class=\"string\">&quot;cheese&quot;</span>))pizza=<span class=\"keyword\">new</span> CheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type.equals(<span class=\"string\">&quot;greek&quot;</span>))pizza=<span class=\"keyword\">new</span> GreekPizza();</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type.equals(<span class=\"string\">&quot;pepperoni&quot;</span>))pizza=<span class=\"keyword\">new</span> PepperoniPizza();</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\">        pizza.prepare();</span><br><span class=\"line\">        pizza.bake();</span><br><span class=\"line\">        pizza.cut();</span><br><span class=\"line\">        pizza.box();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-피자-팩토리를-만든다\"><a href=\"#1-피자-팩토리를-만든다\" class=\"headerlink\" title=\"1. 피자 팩토리를 만든다.\"></a>1. 피자 팩토리를 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimplePizzaFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123; <span class=\"comment\">//이런 경우에는 static메소드로 선언하는 경우가 종종 있음.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;cheese&quot;</span>)) pizza = <span class=\"keyword\">new</span> CheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;pepper&quot;</span>)) pizza = <span class=\"keyword\">new</span> PepperoniPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;clam&quot;</span>)) pizza = <span class=\"keyword\">new</span> ClamPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pizza.equals(<span class=\"string\">&quot;veggie&quot;</span>)) pizza = <span class=\"keyword\">new</span> VeggiePizza();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-피자-가게를-만든다\"><a href=\"#2-피자-가게를-만든다\" class=\"headerlink\" title=\"2. 피자 가게를 만든다.\"></a>2. 피자 가게를 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    SimplePizzaFactory simplePizzaFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PizzaStore</span><span class=\"params\">(SimplePizzaFactory simplePizzaFactory)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.simplePizzaFactory = simplePizzaFactory;  <span class=\"comment\">//피자 가게를 동적으로 설정</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">orderPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza;</span><br><span class=\"line\">        pizza = simplePizzaFactory.createPizza(type); <span class=\"comment\">//수정 안해도 됨</span></span><br><span class=\"line\">        pizza.prepare();</span><br><span class=\"line\">        pizza.bake();</span><br><span class=\"line\">        pizza.cut();</span><br><span class=\"line\">        pizza.box();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-다양한-피자가게가-생긴다\"><a href=\"#3-다양한-피자가게가-생긴다\" class=\"headerlink\" title=\"3. 다양한 피자가게가 생긴다.\"></a>3. 다양한 피자가게가 생긴다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore nyStore=<span class=\"keyword\">new</span> PizzaStore(<span class=\"keyword\">new</span> NYPizzaFactory());</span><br><span class=\"line\">       nyStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       PizzaStore chicagoStore=<span class=\"keyword\">new</span> PizzaStore(<span class=\"keyword\">new</span> ChicagoPizzafactory());</span><br><span class=\"line\">       chicagoStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>각 피자가게에서 <code>orderPizza()</code> 만 호출하면 피자를 생성할 수 있게 되었다.</li>\n</ul>\n<blockquote>\n<p>그러나, 각 팩토리를 가진 피자가게 체인점들이 서로의 구현방식이 달라지는 일이 발생할수도 있게 되었다.<br>(PizzaStore가 각각 있다보니 굽는 방식이 달라진다거나 피자를 자르는 단계를 빼먹거나 하는..)</p>\n</blockquote>\n<hr>\n<h2 id=\"🎟-팩토리-메소드-패턴\"><a href=\"#🎟-팩토리-메소드-패턴\" class=\"headerlink\" title=\"🎟 팩토리 메소드 패턴\"></a>🎟 팩토리 메소드 패턴</h2><blockquote>\n<p>피자가게와 피자 <strong>제작 과정 전체를 하나로 묶어주는 프레임워크</strong>를 만들어야 된다는 결론!!<br>파자를 만드는 활동 자체는 전부 PizzaStore 클래스에 국한시키면서도 분점마다 고유의 스타일을 살릴 수 있는 방법은 ??</p>\n</blockquote>\n<h3 id=\"4-피자가게를-묶는-추상-클래스를-만든다-프렌차이즈-본사랄까\"><a href=\"#4-피자가게를-묶는-추상-클래스를-만든다-프렌차이즈-본사랄까\" class=\"headerlink\" title=\"4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)\"></a>4. 피자가게를 묶는 추상 클래스를 만든다. (프렌차이즈 본사랄까..)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PizzaStore</span> </span>&#123; <span class=\"comment\">//추상 클래스로 구현</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">orderPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza;</span><br><span class=\"line\">        pizza = createPizza(type);</span><br><span class=\"line\">        pizza.prepare();</span><br><span class=\"line\">        pizza.bake();</span><br><span class=\"line\">        pizza.cut();</span><br><span class=\"line\">        pizza.box();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">abstract</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span></span>; <span class=\"comment\">//Pizza 인스턴스를 만드는 일은 팩토리 역할을 하는 메소드에서 맡아 처리</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-각-피자가게에서-추상클래스-본사-를-상속받게-한다\"><a href=\"#5-각-피자가게에서-추상클래스-본사-를-상속받게-한다\" class=\"headerlink\" title=\"5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.\"></a>5. 각 피자가게에서 추상클래스(본사)를 상속받게 한다.</h3><p>이제 각 분점을 위한 지역별로 서브클래스를 만들어줘야 한다. 피자의 스타일은 각 서브클래스에서 결정.</p>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139077742-76ac1027-09c3-4e42-8046-82a2b4e0cb54.jpg\" alt=\"image\"></p>\n<p>이제 <code>ChicagoPizzaStore</code>, <code>NYPizzaStore</code> 에는 구상 피자클래스를 분기해주는 각각의 <code>createPizza()</code> 메소드가 있다.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYPizzaStore</span> <span class=\"keyword\">extends</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;cheese&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStyleCheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;peper&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStylePepperoniPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;clam&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStyleClamPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;veggie&quot;</span>)) pizza = <span class=\"keyword\">new</span> NYStyleVeggiePizza();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChicagoPizzaStore</span> <span class=\"keyword\">extends</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;cheese&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStyleCheesePizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;peper&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStylePepperoniPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;clam&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStyleClamPizza();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;veggie&quot;</span>)) pizza = <span class=\"keyword\">new</span> ChicagoStyleVeggiePizza();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-피자-추상클래스를-만든다-순수한-피자-그-자체\"><a href=\"#6-피자-추상클래스를-만든다-순수한-피자-그-자체\" class=\"headerlink\" title=\"6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)\"></a>6. 피자 추상클래스를 만든다.(순수한 피자 그 자체)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    String dough;</span><br><span class=\"line\">    String sauce;</span><br><span class=\"line\">    ArrayList&lt;String&gt; toppings = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Preparing : &quot;</span> + name);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Tossing dough...&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Adding source&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Adding toppings&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String topping : toppings) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;\\ttopping : &quot;</span> + topping);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">bake</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Bake for 25 minutes at 350&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cut</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cutting the pizza into diagonal slices&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">box</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Place pizza in official PizzaStore box&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getname</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-다양한-피자를-만들어-피자-추상클래스를-상속한다\"><a href=\"#7-다양한-피자를-만들어-피자-추상클래스를-상속한다\" class=\"headerlink\" title=\"7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.\"></a>7. 다양한 피자를 만들어 피자 추상클래스를 상속한다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYStyleCheesePizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NYStyleCheesePizza</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = <span class=\"string\">&quot;NY Style CheesePizza&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = <span class=\"string\">&quot;Thin Crust Dough&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = <span class=\"string\">&quot;Marinara Sauce&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.toppings.add(<span class=\"string\">&quot;Grated Reggiano Cheese&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChicagoStyleCheesePizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ChicagoStyleCheesePizza</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = <span class=\"string\">&quot;Chicago Style CheesePizza&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = <span class=\"string\">&quot;Extra Thick Crust Dough&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = <span class=\"string\">&quot;Plum Tomato Sauce&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.toppings.add(<span class=\"string\">&quot;Shredded mozzarella Cheese&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cut</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cutting the pizza into square slices&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"comment\">//바꾸고 싶은 메소드만 오버라이딩</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-피자를-주문한다\"><a href=\"#8-피자를-주문한다\" class=\"headerlink\" title=\"8. 피자를 주문한다.\"></a>8. 피자를 주문한다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PizzaTestDrive</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        PizzaStore nyStore = <span class=\"keyword\">new</span> NYPizzaStore();</span><br><span class=\"line\">        PizzaStore chicagoStore = <span class=\"keyword\">new</span> ChicagoPizzaStore();</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza nySytpePizza = nyStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br><span class=\"line\">        System.out.println(nySytpePizza.getname());</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza chicagoStypePizza = chicagoStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br><span class=\"line\">        System.out.println(chicagoStypePizza.getname());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>모든 팩토리 패턴에서는 <strong>객체 생성을 캡슐화</strong> 한다.</li>\n<li>팩토리 메소드 패턴에서는 <em>서브 클래스에서 어떤 클래스를 만들지를 결정하게 함</em>으로써 객체 생성을 캡슐화 한다.</li>\n</ul>\n<ul>\n<li>생산자 클래스(피자가게)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139077751-6a262811-5faf-4937-b7f1-5fb3447d8b90.jpg\" alt=\"image2\"></p>\n<ul>\n<li>제품 클래스(피자)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/55419159/139077752-b27d2d2f-57fb-4226-bab6-f890d0f70a74.jpg\" alt=\"image3\"></p>\n<p>위 클래스 다이어그램에서는 <code>PizzaStore</code> 추상 클래스에서 객체를 만들기 위한 메소드, 즉 팩토리 메소드를 위한 인터페이스를 제공한다는 것을 알수있다.</p>\n<p><code>PizzaStore</code>에 구현되어 있는 다른 메소드 <code>orderPizza()</code> 에서는 팩토리 메소드에 의해 생산된 제품을 가지고 필요한 작업을 처리한다. 하지만 실제 팩토리 메소드를 구현하고 제품(객체 인스턴스)을<br>만들어 내는 일은 <strong>서브클래스</strong>에서만 할수 있다.</p>\n<hr>\n<h2 id=\"🎭-디자인원칙-의존성-뒤집기-원칙\"><a href=\"#🎭-디자인원칙-의존성-뒤집기-원칙\" class=\"headerlink\" title=\"🎭 디자인원칙 : 의존성 뒤집기 원칙\"></a>🎭 디자인원칙 : 의존성 뒤집기 원칙</h2><blockquote>\n<p>추상화된 것에 의존하도록 만들어라. 구상 클래스에 의존하도록 만들지 않도록 한다.</p>\n</blockquote>\n<p><del>구현클래스에 의존하는 형태</del></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore-&gt;NYStyleCheesePizza</span><br><span class=\"line\">        PizzaStore-&gt;ChicagoStypeCheesePizza</span><br><span class=\"line\">        PizzaStore-&gt;NYStyleVeggiePizza</span><br></pre></td></tr></table></figure>\n\n<p><del>-&gt; 좋지않음</del></p>\n<p>추상클래스(인터페이스)를 의존하는 형태</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore-&gt;Pizza</span><br><span class=\"line\">        Pizza&lt;-NYStyleCheesePizza</span><br><span class=\"line\">        Pizza&lt;-ChicagoStyleCheesePizza</span><br><span class=\"line\">        Pizza&lt;-NYStyleVeggiePizza</span><br></pre></td></tr></table></figure>\n\n<p>-&gt; <strong>좋음</strong></p>\n<h3 id=\"🛒-원칙에-도움이-되는-가이드\"><a href=\"#🛒-원칙에-도움이-되는-가이드\" class=\"headerlink\" title=\"🛒 원칙에 도움이 되는 가이드\"></a>🛒 원칙에 도움이 되는 가이드</h3><p><em><strong>1. 어떤 변수에도 구상 클래스에 대한 레퍼런스를 지정하지 않는다.</strong></em></p>\n<ul>\n<li><code>new</code> 연산자를 사용하면 레퍼런스를 사용하게 되는 것이다.</li>\n</ul>\n<p><em><strong>2. 구상 클래스에서 유도된 클래스를 만들지 않는다.</strong></em></p>\n<ul>\n<li>구상클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게된다, 추상화 된 것을 사용해야 한다.</li>\n</ul>\n<p><em><strong>3. 베이스 클래스에 이미 구현되어 있던 메소드를 오버라이드 하지 않는다.</strong></em></p>\n<ul>\n<li>이미 구현되어 있는 메소드를 오버라이드 한다는 것은 애초부터 베이스 클래스가 제대로 추상화 된것이 아니었다고 볼 수 있다.</li>\n<li>베이스 클래스에서 메소드를 정의할 때는 모든 서브 클래스에서 공유할 수 있는 것만 정의해야한다.</li>\n</ul>\n<hr>\n<h2 id=\"🦺-추상-팩토리-패턴\"><a href=\"#🦺-추상-팩토리-패턴\" class=\"headerlink\" title=\"🦺 추상 팩토리 패턴\"></a>🦺 추상 팩토리 패턴</h2><p>이렇게 PizzaStore 디자인이 모양새를 갖췄다. 유연한 프레임워크도 만들어 졌고, 디자인 원칙도 충실하게 지켰다.</p>\n<p>각각 체인점들이 미리 정해놓은 절차를 잘 따르고 있지만 몇몇 체인점들이 자잘한 재료를 더 싼 재료로 바꿔서 원가를 절감해 마진을 남기고 있다.</p>\n<p>원재료의 품질까지 관리하는 방법이 있을까??</p>\n<ul>\n<li><strong>원재료 군</strong>을 만들어 파악하자.</li>\n<li>제품에 들어가는 재료군(반죽, 소스, 치즈, 야채, 고기)은 같지만, 지역마다 재료의 구체적인 내용이 조금씩 다르다.</li>\n</ul>\n<ol>\n<li>지역별로 팩토리를 만들어 각 생성 메소드를 구현하는 <code>PizzaingredientFactory</code> 클래스를 만든다.</li>\n<li><code>ReggianoCheese</code>, <code>RedPeppers</code>, <code>ThickCrustDough</code>와 같이 팩토리에서 사용할 원재료 클래스들을 구현한다.</li>\n<li>만든 원재료 공장을 <code>PizzaStore</code> 코드에서 사용하도록 함으로써 하나로 묶어준다.</li>\n</ol>\n<h3 id=\"9-원재료-공장을-만든다\"><a href=\"#9-원재료-공장을-만든다\" class=\"headerlink\" title=\"9. 원재료 공장을 만든다.\"></a>9. 원재료 공장을 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PizzaIngredientFactory</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dough <span class=\"title\">createDough</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Sauce <span class=\"title\">createSauce</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Cheese <span class=\"title\">createCheese</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Veggies[] createVeggies();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pepperoni <span class=\"title\">createPepperoni</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Clams <span class=\"title\">createClams</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYPizzaingredientFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">PizzaIngredientFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dough <span class=\"title\">createDough</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ThinCrustdough();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Sauce <span class=\"title\">createSauce</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MarinaraSauce();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Cheese <span class=\"title\">createCheese</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ReggianoCheese();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Veggies[] createVeggies() &#123;</span><br><span class=\"line\">        Veggies veggies[] = &#123;<span class=\"keyword\">new</span> Farlic(), <span class=\"keyword\">new</span> Onion(), <span class=\"keyword\">new</span> Mushroom(), <span class=\"keyword\">new</span> RedPepper()&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> veggies;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pepperoni <span class=\"title\">createPepperoni</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SlicedPepperoni();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Clams <span class=\"title\">createClams</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Freshclams();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChicagoPizzaingredientFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">PizzaIngredientFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Dough <span class=\"title\">createDough</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ThickCrustDough();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Sauce <span class=\"title\">createSauce</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PlumTomatoSauce();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Cheese <span class=\"title\">createCheese</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MozzarellaCheese();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Veggies[] createVeggies() &#123;</span><br><span class=\"line\">        Veggies veggies[] = &#123;<span class=\"keyword\">new</span> BlackOlives(), <span class=\"keyword\">new</span> Spinach(), <span class=\"keyword\">new</span> EggPlant()&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> veggies;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pepperoni <span class=\"title\">createPepperoni</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Slicedpepperoni();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Clams <span class=\"title\">createClams</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> FrozenClam();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-피자마다-재료는-다르다\"><a href=\"#10-피자마다-재료는-다르다\" class=\"headerlink\" title=\"10. 피자마다 재료는 다르다.\"></a>10. 피자마다 재료는 다르다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    Dough dough;</span><br><span class=\"line\">    Sauce sauce;</span><br><span class=\"line\">    Veggies veggies[];</span><br><span class=\"line\">    Cheese cheese;</span><br><span class=\"line\">    Pepperoni pepperoni;</span><br><span class=\"line\">    Clams clams;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span></span>; <span class=\"comment\">//추상 메소드로 변경됨.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">bake</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Bake for 25 minutes at 350&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cut</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cutting the pizza into diagonal slices&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">box</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Place pizza in official PizzaStore box&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getname</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CheesePizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    PizzaIngredientFactory ingredientFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CheesePizza</span><span class=\"params\">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ingredientFactory = ingredientFactory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = ingredientFactory.createDough();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = ingredientFactory.createSauce();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cheese = ingredientFactory.createCheese();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClamPizza</span> <span class=\"keyword\">extends</span> <span class=\"title\">Pizza</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    PizzaIngredientFactory ingredientFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ClamPizza</span><span class=\"params\">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.ingredientFactory = ingredientFactory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dough = ingredientFactory.createDough();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sauce = ingredientFactory.createSauce();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cheese = ingredientFactory.createCheese();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.clams = ingredientFactory.createClams();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-피자마다-지역마다-다른-피자를-만든다\"><a href=\"#11-피자마다-지역마다-다른-피자를-만든다\" class=\"headerlink\" title=\"11. 피자마다, 지역마다 다른 피자를 만든다.\"></a>11. 피자마다, 지역마다 다른 피자를 만든다.</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NYPizzaStore</span> <span class=\"keyword\">extends</span> <span class=\"title\">PizzaStore</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Pizza <span class=\"title\">createPizza</span><span class=\"params\">(String type)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Pizza pizza = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PizzaIngredientFactory ingredientFactory = <span class=\"keyword\">new</span> NYPizzaingredientFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;cheese&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> CheesePizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Cheese Pizza&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;peper&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> PepperoniPizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Pepperoni Pizza&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;clam&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> ClamPizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Clam Pizza&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type.equals(<span class=\"string\">&quot;veggie&quot;</span>)) &#123;</span><br><span class=\"line\">            pizza = <span class=\"keyword\">new</span> VeggiePizza(ingredientFactory);</span><br><span class=\"line\">            pizza.setName(ingredientFactory.NY_STYLE + <span class=\"string\">&quot; Veggie Pizza&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> pizza;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"⛳-프로세스-정리\"><a href=\"#⛳-프로세스-정리\" class=\"headerlink\" title=\"⛳ 프로세스 정리\"></a>⛳ 프로세스 정리</h3><p><img src=\"https://user-images.githubusercontent.com/55419159/139077755-c920f73b-e347-41d4-b1a8-9f0bc5e028fa.jpg\" alt=\"image4\"></p>\n<p>이제 전체적인 흐름은.</p>\n<ol>\n<li>뉴욕 피자가게를 만든다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PizzaStore nyPizzaStore=<span class=\"keyword\">new</span> NYPizzaStore();</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>주문을 한다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nyPizzaStore.orderPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>orderPizza 메소드에서는 우선 createPizza() 메소드를 호출한다</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Pizza pizza=createPizza(<span class=\"string\">&quot;cheese&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>createPizza() 메소드가 호출되면 원재료 공장이 돌아가기 시작한다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Pizza pizza=<span class=\"keyword\">new</span> CheesePizza(nyIngredientFactory);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>피자를 준비하는 prepare()메소드가 호출되면 팩토리에 원재료 주문이 들어간다.</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">prepare</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        dough=nyIngredientFactory.createDough();</span><br><span class=\"line\">        sauce=nyIngredientFactory.createSauce();</span><br><span class=\"line\">        cheese=nyIngredientFactory.createCheese();</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>준비단계가 끝나고 orderPizza() 메소드에서는 피자를 굽고, 자르고, 포장한다.</li>\n</ol>\n<hr>\n<h2 id=\"💎-요약\"><a href=\"#💎-요약\" class=\"headerlink\" title=\"💎 요약\"></a>💎 요약</h2><h3 id=\"추상-팩토리-패턴\"><a href=\"#추상-팩토리-패턴\" class=\"headerlink\" title=\"추상 팩토리 패턴\"></a>추상 팩토리 패턴</h3><blockquote>\n<p>제품군을 생성하기 위한 <strong>인터페이스</strong>를 생성하고, 그 <strong>인터페이스를 구성</strong>하여 사용할수 있게끔 하는것.</p>\n</blockquote>\n<h3 id=\"추상-메소드-패턴\"><a href=\"#추상-메소드-패턴\" class=\"headerlink\" title=\"추상 메소드 패턴\"></a>추상 메소드 패턴</h3><blockquote>\n<p>하나의 추상클래스에서 <strong>추상 메소드</strong>를 만들고, 서브클래스들이 <strong>그 추상메소드를 구현</strong>하여 인스턴스를 만들게끔 하는것.</p>\n</blockquote>\n"},{"title":"커맨드 패턴","_content":"\n## 👋 커맨드패턴이란\n\n> _레스토랑에서 주문을 했다고 가정하자_ \n> _**손님**은 항상 요리의 **요리 방법**을 알아야 하는가?_\n> _손님은 그저 **웨이터**에게 주문만 하면 된다. 요리 방법법을 알아야만 하는 건 **요리사** 뿐이다._\n\n\n\n커맨드 패턴(Command pattern)이란 **요청을 객체의 형태로 캡슐화**하여 사용자가 보낸 요청을 나중에 이용할 수 있도록\n매서드 이름, 매개변수 등 요청에 필요한 정보를 저장 또는 로깅, 취소할 수 있게 하는 패턴이다.\n\n<br>\n\n- 커맨드 패턴에는 **명령**(`command`), **수신자**(`receiver`), **발동자**(`invoker`), **클라이언트**(`client`)의 네개의 용어가 항상 따른다. \n- **커맨드 객체**는 수신자 객체를 가지고 있으며, 수신자의 메서드를 호출하고, 이에 수신자는 자신에게 정의된 메서드를 수행한다. \n- 커맨드 객체는 별도로 **발동자 객체**에 전달되어 명령을 발동하게 한다. \n- **발동자 객체**는 필요에 따라 명령 발동에 대한 기록을 남길 수 있다. 한 발동자 객체에 **다수**의 커맨드 객체가 전달될 수 있다. \n- **클라이언트 객체**는 발동자 객체와 하나 이상의 커맨드 객체를 보유한다. 클라이언트 객체는 어느 시점에서 어떤 명령을 수행할지를 결정한다. \n- 명령을 수행하려면, **클라이언트 객체**는 발동자 객체로 커맨드 객체를 전달한다.\n---\n\n## 🎩 커맨드패턴이 필요한 이유\n\n커맨드 객체는 일련의 행동을 특정 리시버하고 연결시킴으로써 **요구사항을 캡슐화**한다.\n\n이렇게 하기 위해 행동과 **리시버**를 한 객체에 집어넣고 메소드 하나만 외부에 공개하는 방법을 사용한다.\n\n\n---\n\n## 🔧 커맨드패턴 클래스 다이어그램\n\n![image](https://user-images.githubusercontent.com/55419159/140605872-990096e0-f4bc-4d27-9e0a-40c5ee684c1d.png)\n\n### 🍔 식당을 예로들어보자\n\n1. 손님이 웨이터에게 **주문**을 한다.\n2. 웨이터가 고객의 주문을 **주문서**에 적는다.\n3. **웨이터**는 주문서를 주방에 전달하여 주문을 요청한다.\n4. **주방장**은 주문서에 적힌 주문대로 음식을 자신의 노하우로 만든다.\n\n\n> - 손님 == `클라이언트`\n> - 웨이터 == `인보커 객체`\n> - 주문서 == `커맨드 객체`\n> - 주방장 == `리시버 객체`\n> - 주문을 하는것 == `setCommand()`\n> - 주문을 요청하는것 == `execute()`\n\n\n으로 볼수있다.\n\n---\n\n## 🎞 구현방법\n\n### 1. 커맨드 인터페이스 구현\n\n```java\npublic interface Command {\n    public void execute();\n}\n```\n\n### 2. 커맨드 구현 객체\n\n```java\n\npublic class LightOnCommand implements Command {\n\n    Light light;   //이 Light 객체는 실제 불키는 방법을 알고있는 리시버 객체\n\n    public LightOnCommand(Light light) {\n        this.light = light;\n    }\n\n    public void execute() {\n        light.on();\n    }\n}\n```\n\n### 3. 인보커\n\n```java\n public class SimpleRemoteControl {\n\n    Command slot;\n\n    public SimpleRemotecontrol() {\n    }\n\n    public void setCommand(Command command) {\n        slot = command;\n    }\n\n    public void buttonWasPressed() {\n        slot.execute();\n    }\n}\n```\n\n### 4. 클라이언트\n\n```java\n public class RemoteControlTest {\n\n    public static void main(String[] args) {\n\n        SimpleRemoteControl remote = new SimpleRemoteControl();\n        Light light = new Light();\n        LightOnCommand lightOn = new LightOnCommand(light);\n\n        remote.setCommand(lightOn);\n        remote.buttonWasPressed();\n    }\n}\n```\n\n### + 매크로 커맨드\n\n```java\n public class MacroCommand implements Command {\n\n    Command[] commands;\n\n    public MacroCommand(Command[] commands) {  //커맨드의 묶음으로 메소드 한번으로 실행할 수 있다.\n        this.commands = commands;\n    }\n\n    public void execute() {\n        for (int o = 0; i < commands.length; i++) {\n            commands[i].execute();\n        }\n    }\n}\n```\n\n\n---\n\n## 🥊 커맨드 패턴의 활용방식\n\n### 메시지 큐\n\n- 큐 한 쪽 끝은 커멘드를 추가하고 다른 쪽 끝에는 커맨드를 처리하기 위한 스레드들이 대기.\n- 각 스레드에서는 execute() 메소드를 호출하고 그 호출이 완료되고 나면 커맨드 객체를 보내고 새로운 커맨드\n- 객체를 가져온다.\n\n\n### 리퀘스트 로깅\n\n- 자바에서는 이런 메소드를 객체 직렬화를 통해 구현할 수도 있지만, 직렬화와 관련된 제약 조건때문에 쉽지않을수 있다.\n- 커맨더 패턴을 이용한다면, Command 인터페이스에 store(), load() 라는 메소드를 추가하여 기능을 지원 가능하다.\n- 인보커 클래스가 Command1, Command2, Command3.. 각각 커멘드를 execute() 할때마다 각 Command 들은 store()를 실행시켜 디스크에 각각의 객체를을 저장한다. \n- 컴퓨터가 다운되어 모든작업이 멈추고 이후 컴퓨터가 복구되었을때, 디스크로 부터 각각의 Command1, Command2 .. 작업완료 하지 못한 객체들을 로딩하고 다시 순서대로 작업을 처리한다.\n\n","source":"_posts/디자인-패턴/2021-11-06-커맨드-패턴/2021-11-06-커맨드-패턴.md","raw":"---\ntitle: 커맨드 패턴\ncategories:\n  - 디자인패턴 \ntags:\n  - 디자인패턴\n  - 커맨드\n---\n\n## 👋 커맨드패턴이란\n\n> _레스토랑에서 주문을 했다고 가정하자_ \n> _**손님**은 항상 요리의 **요리 방법**을 알아야 하는가?_\n> _손님은 그저 **웨이터**에게 주문만 하면 된다. 요리 방법법을 알아야만 하는 건 **요리사** 뿐이다._\n\n\n\n커맨드 패턴(Command pattern)이란 **요청을 객체의 형태로 캡슐화**하여 사용자가 보낸 요청을 나중에 이용할 수 있도록\n매서드 이름, 매개변수 등 요청에 필요한 정보를 저장 또는 로깅, 취소할 수 있게 하는 패턴이다.\n\n<br>\n\n- 커맨드 패턴에는 **명령**(`command`), **수신자**(`receiver`), **발동자**(`invoker`), **클라이언트**(`client`)의 네개의 용어가 항상 따른다. \n- **커맨드 객체**는 수신자 객체를 가지고 있으며, 수신자의 메서드를 호출하고, 이에 수신자는 자신에게 정의된 메서드를 수행한다. \n- 커맨드 객체는 별도로 **발동자 객체**에 전달되어 명령을 발동하게 한다. \n- **발동자 객체**는 필요에 따라 명령 발동에 대한 기록을 남길 수 있다. 한 발동자 객체에 **다수**의 커맨드 객체가 전달될 수 있다. \n- **클라이언트 객체**는 발동자 객체와 하나 이상의 커맨드 객체를 보유한다. 클라이언트 객체는 어느 시점에서 어떤 명령을 수행할지를 결정한다. \n- 명령을 수행하려면, **클라이언트 객체**는 발동자 객체로 커맨드 객체를 전달한다.\n---\n\n## 🎩 커맨드패턴이 필요한 이유\n\n커맨드 객체는 일련의 행동을 특정 리시버하고 연결시킴으로써 **요구사항을 캡슐화**한다.\n\n이렇게 하기 위해 행동과 **리시버**를 한 객체에 집어넣고 메소드 하나만 외부에 공개하는 방법을 사용한다.\n\n\n---\n\n## 🔧 커맨드패턴 클래스 다이어그램\n\n![image](https://user-images.githubusercontent.com/55419159/140605872-990096e0-f4bc-4d27-9e0a-40c5ee684c1d.png)\n\n### 🍔 식당을 예로들어보자\n\n1. 손님이 웨이터에게 **주문**을 한다.\n2. 웨이터가 고객의 주문을 **주문서**에 적는다.\n3. **웨이터**는 주문서를 주방에 전달하여 주문을 요청한다.\n4. **주방장**은 주문서에 적힌 주문대로 음식을 자신의 노하우로 만든다.\n\n\n> - 손님 == `클라이언트`\n> - 웨이터 == `인보커 객체`\n> - 주문서 == `커맨드 객체`\n> - 주방장 == `리시버 객체`\n> - 주문을 하는것 == `setCommand()`\n> - 주문을 요청하는것 == `execute()`\n\n\n으로 볼수있다.\n\n---\n\n## 🎞 구현방법\n\n### 1. 커맨드 인터페이스 구현\n\n```java\npublic interface Command {\n    public void execute();\n}\n```\n\n### 2. 커맨드 구현 객체\n\n```java\n\npublic class LightOnCommand implements Command {\n\n    Light light;   //이 Light 객체는 실제 불키는 방법을 알고있는 리시버 객체\n\n    public LightOnCommand(Light light) {\n        this.light = light;\n    }\n\n    public void execute() {\n        light.on();\n    }\n}\n```\n\n### 3. 인보커\n\n```java\n public class SimpleRemoteControl {\n\n    Command slot;\n\n    public SimpleRemotecontrol() {\n    }\n\n    public void setCommand(Command command) {\n        slot = command;\n    }\n\n    public void buttonWasPressed() {\n        slot.execute();\n    }\n}\n```\n\n### 4. 클라이언트\n\n```java\n public class RemoteControlTest {\n\n    public static void main(String[] args) {\n\n        SimpleRemoteControl remote = new SimpleRemoteControl();\n        Light light = new Light();\n        LightOnCommand lightOn = new LightOnCommand(light);\n\n        remote.setCommand(lightOn);\n        remote.buttonWasPressed();\n    }\n}\n```\n\n### + 매크로 커맨드\n\n```java\n public class MacroCommand implements Command {\n\n    Command[] commands;\n\n    public MacroCommand(Command[] commands) {  //커맨드의 묶음으로 메소드 한번으로 실행할 수 있다.\n        this.commands = commands;\n    }\n\n    public void execute() {\n        for (int o = 0; i < commands.length; i++) {\n            commands[i].execute();\n        }\n    }\n}\n```\n\n\n---\n\n## 🥊 커맨드 패턴의 활용방식\n\n### 메시지 큐\n\n- 큐 한 쪽 끝은 커멘드를 추가하고 다른 쪽 끝에는 커맨드를 처리하기 위한 스레드들이 대기.\n- 각 스레드에서는 execute() 메소드를 호출하고 그 호출이 완료되고 나면 커맨드 객체를 보내고 새로운 커맨드\n- 객체를 가져온다.\n\n\n### 리퀘스트 로깅\n\n- 자바에서는 이런 메소드를 객체 직렬화를 통해 구현할 수도 있지만, 직렬화와 관련된 제약 조건때문에 쉽지않을수 있다.\n- 커맨더 패턴을 이용한다면, Command 인터페이스에 store(), load() 라는 메소드를 추가하여 기능을 지원 가능하다.\n- 인보커 클래스가 Command1, Command2, Command3.. 각각 커멘드를 execute() 할때마다 각 Command 들은 store()를 실행시켜 디스크에 각각의 객체를을 저장한다. \n- 컴퓨터가 다운되어 모든작업이 멈추고 이후 컴퓨터가 복구되었을때, 디스크로 부터 각각의 Command1, Command2 .. 작업완료 하지 못한 객체들을 로딩하고 다시 순서대로 작업을 처리한다.\n\n","slug":"디자인-패턴/2021-11-06-커맨드-패턴/2021-11-06-커맨드-패턴","published":1,"date":"2021-11-06T09:58:47.875Z","updated":"2021-11-07T12:58:38.901Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckwgau2ft001hjd9kh08hhm77","content":"<h2 id=\"👋-커맨드패턴이란\"><a href=\"#👋-커맨드패턴이란\" class=\"headerlink\" title=\"👋 커맨드패턴이란\"></a>👋 커맨드패턴이란</h2><blockquote>\n<p><em>레스토랑에서 주문을 했다고 가정하자</em><br><em><strong>손님</strong>은 항상 요리의 <strong>요리 방법</strong>을 알아야 하는가?</em><br><em>손님은 그저 <strong>웨이터</strong>에게 주문만 하면 된다. 요리 방법법을 알아야만 하는 건 <strong>요리사</strong> 뿐이다.</em></p>\n</blockquote>\n<p>커맨드 패턴(Command pattern)이란 <strong>요청을 객체의 형태로 캡슐화</strong>하여 사용자가 보낸 요청을 나중에 이용할 수 있도록<br>매서드 이름, 매개변수 등 요청에 필요한 정보를 저장 또는 로깅, 취소할 수 있게 하는 패턴이다.</p>\n<br>\n\n<ul>\n<li>커맨드 패턴에는 <strong>명령</strong>(<code>command</code>), <strong>수신자</strong>(<code>receiver</code>), <strong>발동자</strong>(<code>invoker</code>), <strong>클라이언트</strong>(<code>client</code>)의 네개의 용어가 항상 따른다. </li>\n<li><strong>커맨드 객체</strong>는 수신자 객체를 가지고 있으며, 수신자의 메서드를 호출하고, 이에 수신자는 자신에게 정의된 메서드를 수행한다. </li>\n<li>커맨드 객체는 별도로 <strong>발동자 객체</strong>에 전달되어 명령을 발동하게 한다. </li>\n<li><strong>발동자 객체</strong>는 필요에 따라 명령 발동에 대한 기록을 남길 수 있다. 한 발동자 객체에 <strong>다수</strong>의 커맨드 객체가 전달될 수 있다. </li>\n<li><strong>클라이언트 객체</strong>는 발동자 객체와 하나 이상의 커맨드 객체를 보유한다. 클라이언트 객체는 어느 시점에서 어떤 명령을 수행할지를 결정한다. </li>\n<li>명령을 수행하려면, <strong>클라이언트 객체</strong>는 발동자 객체로 커맨드 객체를 전달한다.</li>\n</ul>\n<hr>\n<h2 id=\"🎩-커맨드패턴이-필요한-이유\"><a href=\"#🎩-커맨드패턴이-필요한-이유\" class=\"headerlink\" title=\"🎩 커맨드패턴이 필요한 이유\"></a>🎩 커맨드패턴이 필요한 이유</h2><p>커맨드 객체는 일련의 행동을 특정 리시버하고 연결시킴으로써 <strong>요구사항을 캡슐화</strong>한다.</p>\n<p>이렇게 하기 위해 행동과 <strong>리시버</strong>를 한 객체에 집어넣고 메소드 하나만 외부에 공개하는 방법을 사용한다.</p>\n<hr>\n<h2 id=\"🔧-커맨드패턴-클래스-다이어그램\"><a href=\"#🔧-커맨드패턴-클래스-다이어그램\" class=\"headerlink\" title=\"🔧 커맨드패턴 클래스 다이어그램\"></a>🔧 커맨드패턴 클래스 다이어그램</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/140605872-990096e0-f4bc-4d27-9e0a-40c5ee684c1d.png\" alt=\"image\"></p>\n<h3 id=\"🍔-식당을-예로들어보자\"><a href=\"#🍔-식당을-예로들어보자\" class=\"headerlink\" title=\"🍔 식당을 예로들어보자\"></a>🍔 식당을 예로들어보자</h3><ol>\n<li>손님이 웨이터에게 <strong>주문</strong>을 한다.</li>\n<li>웨이터가 고객의 주문을 <strong>주문서</strong>에 적는다.</li>\n<li><strong>웨이터</strong>는 주문서를 주방에 전달하여 주문을 요청한다.</li>\n<li><strong>주방장</strong>은 주문서에 적힌 주문대로 음식을 자신의 노하우로 만든다.</li>\n</ol>\n<blockquote>\n<ul>\n<li>손님 == <code>클라이언트</code></li>\n<li>웨이터 == <code>인보커 객체</code></li>\n<li>주문서 == <code>커맨드 객체</code></li>\n<li>주방장 == <code>리시버 객체</code></li>\n<li>주문을 하는것 == <code>setCommand()</code></li>\n<li>주문을 요청하는것 == <code>execute()</code></li>\n</ul>\n</blockquote>\n<p>으로 볼수있다.</p>\n<hr>\n<h2 id=\"🎞-구현방법\"><a href=\"#🎞-구현방법\" class=\"headerlink\" title=\"🎞 구현방법\"></a>🎞 구현방법</h2><h3 id=\"1-커맨드-인터페이스-구현\"><a href=\"#1-커맨드-인터페이스-구현\" class=\"headerlink\" title=\"1. 커맨드 인터페이스 구현\"></a>1. 커맨드 인터페이스 구현</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-커맨드-구현-객체\"><a href=\"#2-커맨드-구현-객체\" class=\"headerlink\" title=\"2. 커맨드 구현 객체\"></a>2. 커맨드 구현 객체</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LightOnCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Light light;   <span class=\"comment\">//이 Light 객체는 실제 불키는 방법을 알고있는 리시버 객체</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LightOnCommand</span><span class=\"params\">(Light light)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.light = light;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        light.on();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-인보커\"><a href=\"#3-인보커\" class=\"headerlink\" title=\"3. 인보커\"></a>3. 인보커</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleRemoteControl</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Command slot;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SimpleRemotecontrol</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCommand</span><span class=\"params\">(Command command)</span> </span>&#123;</span><br><span class=\"line\">        slot = command;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buttonWasPressed</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        slot.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-클라이언트\"><a href=\"#4-클라이언트\" class=\"headerlink\" title=\"4. 클라이언트\"></a>4. 클라이언트</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RemoteControlTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        SimpleRemoteControl remote = <span class=\"keyword\">new</span> SimpleRemoteControl();</span><br><span class=\"line\">        Light light = <span class=\"keyword\">new</span> Light();</span><br><span class=\"line\">        LightOnCommand lightOn = <span class=\"keyword\">new</span> LightOnCommand(light);</span><br><span class=\"line\"></span><br><span class=\"line\">        remote.setCommand(lightOn);</span><br><span class=\"line\">        remote.buttonWasPressed();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"매크로-커맨드\"><a href=\"#매크로-커맨드\" class=\"headerlink\" title=\"+ 매크로 커맨드\"></a>+ 매크로 커맨드</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MacroCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Command[] commands;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MacroCommand</span><span class=\"params\">(Command[] commands)</span> </span>&#123;  <span class=\"comment\">//커맨드의 묶음으로 메소드 한번으로 실행할 수 있다.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.commands = commands;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> o = <span class=\"number\">0</span>; i &lt; commands.length; i++) &#123;</span><br><span class=\"line\">            commands[i].execute();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<h2 id=\"🥊-커맨드-패턴의-활용방식\"><a href=\"#🥊-커맨드-패턴의-활용방식\" class=\"headerlink\" title=\"🥊 커맨드 패턴의 활용방식\"></a>🥊 커맨드 패턴의 활용방식</h2><h3 id=\"메시지-큐\"><a href=\"#메시지-큐\" class=\"headerlink\" title=\"메시지 큐\"></a>메시지 큐</h3><ul>\n<li>큐 한 쪽 끝은 커멘드를 추가하고 다른 쪽 끝에는 커맨드를 처리하기 위한 스레드들이 대기.</li>\n<li>각 스레드에서는 execute() 메소드를 호출하고 그 호출이 완료되고 나면 커맨드 객체를 보내고 새로운 커맨드</li>\n<li>객체를 가져온다.</li>\n</ul>\n<h3 id=\"리퀘스트-로깅\"><a href=\"#리퀘스트-로깅\" class=\"headerlink\" title=\"리퀘스트 로깅\"></a>리퀘스트 로깅</h3><ul>\n<li>자바에서는 이런 메소드를 객체 직렬화를 통해 구현할 수도 있지만, 직렬화와 관련된 제약 조건때문에 쉽지않을수 있다.</li>\n<li>커맨더 패턴을 이용한다면, Command 인터페이스에 store(), load() 라는 메소드를 추가하여 기능을 지원 가능하다.</li>\n<li>인보커 클래스가 Command1, Command2, Command3.. 각각 커멘드를 execute() 할때마다 각 Command 들은 store()를 실행시켜 디스크에 각각의 객체를을 저장한다. </li>\n<li>컴퓨터가 다운되어 모든작업이 멈추고 이후 컴퓨터가 복구되었을때, 디스크로 부터 각각의 Command1, Command2 .. 작업완료 하지 못한 객체들을 로딩하고 다시 순서대로 작업을 처리한다.</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"👋-커맨드패턴이란\"><a href=\"#👋-커맨드패턴이란\" class=\"headerlink\" title=\"👋 커맨드패턴이란\"></a>👋 커맨드패턴이란</h2><blockquote>\n<p><em>레스토랑에서 주문을 했다고 가정하자</em><br><em><strong>손님</strong>은 항상 요리의 <strong>요리 방법</strong>을 알아야 하는가?</em><br><em>손님은 그저 <strong>웨이터</strong>에게 주문만 하면 된다. 요리 방법법을 알아야만 하는 건 <strong>요리사</strong> 뿐이다.</em></p>\n</blockquote>\n<p>커맨드 패턴(Command pattern)이란 <strong>요청을 객체의 형태로 캡슐화</strong>하여 사용자가 보낸 요청을 나중에 이용할 수 있도록<br>매서드 이름, 매개변수 등 요청에 필요한 정보를 저장 또는 로깅, 취소할 수 있게 하는 패턴이다.</p>\n<br>\n\n<ul>\n<li>커맨드 패턴에는 <strong>명령</strong>(<code>command</code>), <strong>수신자</strong>(<code>receiver</code>), <strong>발동자</strong>(<code>invoker</code>), <strong>클라이언트</strong>(<code>client</code>)의 네개의 용어가 항상 따른다. </li>\n<li><strong>커맨드 객체</strong>는 수신자 객체를 가지고 있으며, 수신자의 메서드를 호출하고, 이에 수신자는 자신에게 정의된 메서드를 수행한다. </li>\n<li>커맨드 객체는 별도로 <strong>발동자 객체</strong>에 전달되어 명령을 발동하게 한다. </li>\n<li><strong>발동자 객체</strong>는 필요에 따라 명령 발동에 대한 기록을 남길 수 있다. 한 발동자 객체에 <strong>다수</strong>의 커맨드 객체가 전달될 수 있다. </li>\n<li><strong>클라이언트 객체</strong>는 발동자 객체와 하나 이상의 커맨드 객체를 보유한다. 클라이언트 객체는 어느 시점에서 어떤 명령을 수행할지를 결정한다. </li>\n<li>명령을 수행하려면, <strong>클라이언트 객체</strong>는 발동자 객체로 커맨드 객체를 전달한다.</li>\n</ul>\n<hr>\n<h2 id=\"🎩-커맨드패턴이-필요한-이유\"><a href=\"#🎩-커맨드패턴이-필요한-이유\" class=\"headerlink\" title=\"🎩 커맨드패턴이 필요한 이유\"></a>🎩 커맨드패턴이 필요한 이유</h2><p>커맨드 객체는 일련의 행동을 특정 리시버하고 연결시킴으로써 <strong>요구사항을 캡슐화</strong>한다.</p>\n<p>이렇게 하기 위해 행동과 <strong>리시버</strong>를 한 객체에 집어넣고 메소드 하나만 외부에 공개하는 방법을 사용한다.</p>\n<hr>\n<h2 id=\"🔧-커맨드패턴-클래스-다이어그램\"><a href=\"#🔧-커맨드패턴-클래스-다이어그램\" class=\"headerlink\" title=\"🔧 커맨드패턴 클래스 다이어그램\"></a>🔧 커맨드패턴 클래스 다이어그램</h2><p><img src=\"https://user-images.githubusercontent.com/55419159/140605872-990096e0-f4bc-4d27-9e0a-40c5ee684c1d.png\" alt=\"image\"></p>\n<h3 id=\"🍔-식당을-예로들어보자\"><a href=\"#🍔-식당을-예로들어보자\" class=\"headerlink\" title=\"🍔 식당을 예로들어보자\"></a>🍔 식당을 예로들어보자</h3><ol>\n<li>손님이 웨이터에게 <strong>주문</strong>을 한다.</li>\n<li>웨이터가 고객의 주문을 <strong>주문서</strong>에 적는다.</li>\n<li><strong>웨이터</strong>는 주문서를 주방에 전달하여 주문을 요청한다.</li>\n<li><strong>주방장</strong>은 주문서에 적힌 주문대로 음식을 자신의 노하우로 만든다.</li>\n</ol>\n<blockquote>\n<ul>\n<li>손님 == <code>클라이언트</code></li>\n<li>웨이터 == <code>인보커 객체</code></li>\n<li>주문서 == <code>커맨드 객체</code></li>\n<li>주방장 == <code>리시버 객체</code></li>\n<li>주문을 하는것 == <code>setCommand()</code></li>\n<li>주문을 요청하는것 == <code>execute()</code></li>\n</ul>\n</blockquote>\n<p>으로 볼수있다.</p>\n<hr>\n<h2 id=\"🎞-구현방법\"><a href=\"#🎞-구현방법\" class=\"headerlink\" title=\"🎞 구현방법\"></a>🎞 구현방법</h2><h3 id=\"1-커맨드-인터페이스-구현\"><a href=\"#1-커맨드-인터페이스-구현\" class=\"headerlink\" title=\"1. 커맨드 인터페이스 구현\"></a>1. 커맨드 인터페이스 구현</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-커맨드-구현-객체\"><a href=\"#2-커맨드-구현-객체\" class=\"headerlink\" title=\"2. 커맨드 구현 객체\"></a>2. 커맨드 구현 객체</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LightOnCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Light light;   <span class=\"comment\">//이 Light 객체는 실제 불키는 방법을 알고있는 리시버 객체</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LightOnCommand</span><span class=\"params\">(Light light)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.light = light;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        light.on();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-인보커\"><a href=\"#3-인보커\" class=\"headerlink\" title=\"3. 인보커\"></a>3. 인보커</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleRemoteControl</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Command slot;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SimpleRemotecontrol</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCommand</span><span class=\"params\">(Command command)</span> </span>&#123;</span><br><span class=\"line\">        slot = command;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">buttonWasPressed</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        slot.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-클라이언트\"><a href=\"#4-클라이언트\" class=\"headerlink\" title=\"4. 클라이언트\"></a>4. 클라이언트</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RemoteControlTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        SimpleRemoteControl remote = <span class=\"keyword\">new</span> SimpleRemoteControl();</span><br><span class=\"line\">        Light light = <span class=\"keyword\">new</span> Light();</span><br><span class=\"line\">        LightOnCommand lightOn = <span class=\"keyword\">new</span> LightOnCommand(light);</span><br><span class=\"line\"></span><br><span class=\"line\">        remote.setCommand(lightOn);</span><br><span class=\"line\">        remote.buttonWasPressed();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"매크로-커맨드\"><a href=\"#매크로-커맨드\" class=\"headerlink\" title=\"+ 매크로 커맨드\"></a>+ 매크로 커맨드</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MacroCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Command[] commands;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MacroCommand</span><span class=\"params\">(Command[] commands)</span> </span>&#123;  <span class=\"comment\">//커맨드의 묶음으로 메소드 한번으로 실행할 수 있다.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.commands = commands;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> o = <span class=\"number\">0</span>; i &lt; commands.length; i++) &#123;</span><br><span class=\"line\">            commands[i].execute();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<h2 id=\"🥊-커맨드-패턴의-활용방식\"><a href=\"#🥊-커맨드-패턴의-활용방식\" class=\"headerlink\" title=\"🥊 커맨드 패턴의 활용방식\"></a>🥊 커맨드 패턴의 활용방식</h2><h3 id=\"메시지-큐\"><a href=\"#메시지-큐\" class=\"headerlink\" title=\"메시지 큐\"></a>메시지 큐</h3><ul>\n<li>큐 한 쪽 끝은 커멘드를 추가하고 다른 쪽 끝에는 커맨드를 처리하기 위한 스레드들이 대기.</li>\n<li>각 스레드에서는 execute() 메소드를 호출하고 그 호출이 완료되고 나면 커맨드 객체를 보내고 새로운 커맨드</li>\n<li>객체를 가져온다.</li>\n</ul>\n<h3 id=\"리퀘스트-로깅\"><a href=\"#리퀘스트-로깅\" class=\"headerlink\" title=\"리퀘스트 로깅\"></a>리퀘스트 로깅</h3><ul>\n<li>자바에서는 이런 메소드를 객체 직렬화를 통해 구현할 수도 있지만, 직렬화와 관련된 제약 조건때문에 쉽지않을수 있다.</li>\n<li>커맨더 패턴을 이용한다면, Command 인터페이스에 store(), load() 라는 메소드를 추가하여 기능을 지원 가능하다.</li>\n<li>인보커 클래스가 Command1, Command2, Command3.. 각각 커멘드를 execute() 할때마다 각 Command 들은 store()를 실행시켜 디스크에 각각의 객체를을 저장한다. </li>\n<li>컴퓨터가 다운되어 모든작업이 멈추고 이후 컴퓨터가 복구되었을때, 디스크로 부터 각각의 Command1, Command2 .. 작업완료 하지 못한 객체들을 로딩하고 다시 순서대로 작업을 처리한다.</li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckwgau2f40001jd9kc3o90u2g","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fe000djd9khs868xkt"},{"post_id":"ckwgau2f80003jd9k06gc2qmo","category_id":"ckwgau2fd0009jd9kg7ij76r5","_id":"ckwgau2ff000ijd9k78f5ei62"},{"post_id":"ckwgau2fb0006jd9k5gg8djno","category_id":"ckwgau2fe000ejd9k7ufq1wt1","_id":"ckwgau2fj000ojd9k1qts3g5f"},{"post_id":"ckwgau2fc0007jd9k2rx07sig","category_id":"ckwgau2fe000ejd9k7ufq1wt1","_id":"ckwgau2fm000tjd9k12wpfzcq"},{"post_id":"ckwgau2fk000qjd9kfzbtbshn","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fp0010jd9k3rpy6erj"},{"post_id":"ckwgau2fc0008jd9k4qx033jq","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2fq0014jd9k9bfvanuv"},{"post_id":"ckwgau2fl000sjd9kbhzhhc9u","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fr0018jd9k5mtdbuyz"},{"post_id":"ckwgau2fn000wjd9kd39zgdz2","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fs001cjd9k7vqsfnhd"},{"post_id":"ckwgau2fd000bjd9kfhlug5vo","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2ft001fjd9kcj0zej1o"},{"post_id":"ckwgau2fp000zjd9k6sf5agrf","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fu001ijd9k9z6rhe4m"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fu001kjd9k0sl1a0nz"},{"post_id":"ckwgau2fe000cjd9k070rej6j","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2fv001njd9k38rn2w3d"},{"post_id":"ckwgau2fr0017jd9k0jimgwm0","category_id":"ckwgau2fa0004jd9kfb7dfc44","_id":"ckwgau2fv001pjd9kfw1ih8cc"},{"post_id":"ckwgau2fs001bjd9kevuzfu65","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2fy001tjd9keasm7x8i"},{"post_id":"ckwgau2fe000gjd9k38sy9jkz","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2fy001vjd9kf1pub2nh"},{"post_id":"ckwgau2ft001ejd9k6ckp7an3","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2fz001xjd9khv99fnms"},{"post_id":"ckwgau2ft001hjd9kh08hhm77","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2fz001yjd9k9b5dhtkv"},{"post_id":"ckwgau2ff000hjd9k2agq8lp1","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2g00020jd9k123gc8yw"},{"post_id":"ckwgau2fg000ljd9k4s2fcdqc","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2g00022jd9k7v8t514y"},{"post_id":"ckwgau2fi000mjd9kfgwz8tla","category_id":"ckwgau2fj000njd9k7z22fv7e","_id":"ckwgau2g00025jd9kg91tc7v1"}],"PostTag":[{"post_id":"ckwgau2f40001jd9kc3o90u2g","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2fl000rjd9k8nslex6a"},{"post_id":"ckwgau2f40001jd9kc3o90u2g","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2fn000ujd9khfxu3lmi"},{"post_id":"ckwgau2f40001jd9kc3o90u2g","tag_id":"ckwgau2fe000fjd9k82iw78io","_id":"ckwgau2fp000yjd9k0ouehk7a"},{"post_id":"ckwgau2f40001jd9kc3o90u2g","tag_id":"ckwgau2ff000kjd9k76ri0k1k","_id":"ckwgau2fq0011jd9kfcns9sf4"},{"post_id":"ckwgau2fk000qjd9kfzbtbshn","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2fr0016jd9kbde009ir"},{"post_id":"ckwgau2fk000qjd9kfzbtbshn","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2fs0019jd9k4c9hd20i"},{"post_id":"ckwgau2f80003jd9k06gc2qmo","tag_id":"ckwgau2fj000pjd9kdi35b4ot","_id":"ckwgau2fv001ljd9kfgiz0ave"},{"post_id":"ckwgau2f80003jd9k06gc2qmo","tag_id":"ckwgau2fn000xjd9kco4r0nmt","_id":"ckwgau2fv001ojd9k60v37gld"},{"post_id":"ckwgau2f80003jd9k06gc2qmo","tag_id":"ckwgau2fr0015jd9k7lxb1mqv","_id":"ckwgau2fx001rjd9kclkzek7n"},{"post_id":"ckwgau2f80003jd9k06gc2qmo","tag_id":"ckwgau2fs001djd9k9v3ba4lm","_id":"ckwgau2fy001ujd9ke9po2y7m"},{"post_id":"ckwgau2fb0006jd9k5gg8djno","tag_id":"ckwgau2fu001jjd9k6nyqeo7u","_id":"ckwgau2g00021jd9kaju15koq"},{"post_id":"ckwgau2fb0006jd9k5gg8djno","tag_id":"ckwgau2fw001qjd9k4f78h4fd","_id":"ckwgau2g00023jd9kew48939o"},{"post_id":"ckwgau2fb0006jd9k5gg8djno","tag_id":"ckwgau2fy001wjd9kgnmq1zth","_id":"ckwgau2g00026jd9kc8mj6i44"},{"post_id":"ckwgau2fc0007jd9k2rx07sig","tag_id":"ckwgau2fu001jjd9k6nyqeo7u","_id":"ckwgau2g10029jd9kel9q723i"},{"post_id":"ckwgau2fc0007jd9k2rx07sig","tag_id":"ckwgau2fw001qjd9k4f78h4fd","_id":"ckwgau2g1002ajd9kd55phhpa"},{"post_id":"ckwgau2fc0007jd9k2rx07sig","tag_id":"ckwgau2g00027jd9k2qc01wu6","_id":"ckwgau2g1002cjd9kg5gidx27"},{"post_id":"ckwgau2fc0008jd9k4qx033jq","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g2002fjd9kg82465fs"},{"post_id":"ckwgau2fc0008jd9k4qx033jq","tag_id":"ckwgau2g1002bjd9k4w0g7w83","_id":"ckwgau2g2002gjd9k4awtfb9m"},{"post_id":"ckwgau2fc0008jd9k4qx033jq","tag_id":"ckwgau2g1002djd9k1m0y8t30","_id":"ckwgau2g2002ijd9kh3ao8ipx"},{"post_id":"ckwgau2fd000bjd9kfhlug5vo","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g2002kjd9k5rfu2hlz"},{"post_id":"ckwgau2fd000bjd9kfhlug5vo","tag_id":"ckwgau2g2002hjd9kfw9s8fad","_id":"ckwgau2g2002ljd9k6kk6792a"},{"post_id":"ckwgau2fe000cjd9k070rej6j","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g3002ojd9k2sv363we"},{"post_id":"ckwgau2fe000cjd9k070rej6j","tag_id":"ckwgau2g2002mjd9kfn0obgzt","_id":"ckwgau2g3002pjd9k3q476quo"},{"post_id":"ckwgau2fe000gjd9k38sy9jkz","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g3002sjd9k18vjbyb9"},{"post_id":"ckwgau2fe000gjd9k38sy9jkz","tag_id":"ckwgau2g3002qjd9kh8e5hax6","_id":"ckwgau2g3002tjd9k3iq252xr"},{"post_id":"ckwgau2ff000hjd9k2agq8lp1","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g4002wjd9kbudk89ha"},{"post_id":"ckwgau2ff000hjd9k2agq8lp1","tag_id":"ckwgau2g3002ujd9k4vgbcfyq","_id":"ckwgau2g4002xjd9k9a6c8gt4"},{"post_id":"ckwgau2fg000ljd9k4s2fcdqc","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g40030jd9kfic25h8q"},{"post_id":"ckwgau2fg000ljd9k4s2fcdqc","tag_id":"ckwgau2g4002yjd9k7tqc5x0x","_id":"ckwgau2g40031jd9kdlwh0435"},{"post_id":"ckwgau2fi000mjd9kfgwz8tla","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2g50034jd9k9ah6dxxz"},{"post_id":"ckwgau2fi000mjd9kfgwz8tla","tag_id":"ckwgau2g40032jd9k46er4v10","_id":"ckwgau2g50035jd9k341w9ahg"},{"post_id":"ckwgau2fl000sjd9kbhzhhc9u","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2g50037jd9k5i2z46f6"},{"post_id":"ckwgau2fl000sjd9kbhzhhc9u","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2g50038jd9khsy00qsm"},{"post_id":"ckwgau2fl000sjd9kbhzhhc9u","tag_id":"ckwgau2g40033jd9k6ptea49u","_id":"ckwgau2g5003ajd9k09h8a2vf"},{"post_id":"ckwgau2fn000wjd9kd39zgdz2","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2g6003djd9kcxkjgflg"},{"post_id":"ckwgau2fn000wjd9kd39zgdz2","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2g6003ejd9k8a03g88c"},{"post_id":"ckwgau2fn000wjd9kd39zgdz2","tag_id":"ckwgau2g50036jd9katj1949c","_id":"ckwgau2g6003gjd9kb8zuf2lb"},{"post_id":"ckwgau2fn000wjd9kd39zgdz2","tag_id":"ckwgau2g50039jd9k5bmf6v97","_id":"ckwgau2g7003hjd9khih56d1s"},{"post_id":"ckwgau2fn000wjd9kd39zgdz2","tag_id":"ckwgau2g5003bjd9k2m4bf7ql","_id":"ckwgau2g8003jjd9kf8da35d5"},{"post_id":"ckwgau2fp000zjd9k6sf5agrf","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2g8003kjd9k5t7h3ce8"},{"post_id":"ckwgau2fp000zjd9k6sf5agrf","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2g8003mjd9k9braato1"},{"post_id":"ckwgau2fp000zjd9k6sf5agrf","tag_id":"ckwgau2g5003cjd9k3ofv6idw","_id":"ckwgau2g8003njd9k06rwau82"},{"post_id":"ckwgau2fp000zjd9k6sf5agrf","tag_id":"ckwgau2g6003fjd9k9rn6gvfb","_id":"ckwgau2g8003ojd9ke63zce9r"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2g9003tjd9k9xi38b3k"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2g9003ujd9kfzjo8tdo"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2g7003ijd9k6u1r7s91","_id":"ckwgau2g9003wjd9k8zeed95c"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2g8003ljd9k7imab0fi","_id":"ckwgau2ga003xjd9k93s05afn"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2g8003pjd9kfhhk1bls","_id":"ckwgau2ga003zjd9k44lachiw"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2g8003qjd9kffgo2u7a","_id":"ckwgau2ga0040jd9k8ht78q8n"},{"post_id":"ckwgau2fq0013jd9k6ok140d0","tag_id":"ckwgau2g9003rjd9kcoqc3fpq","_id":"ckwgau2gb0042jd9khut96wdb"},{"post_id":"ckwgau2fr0017jd9k0jimgwm0","tag_id":"ckwgau2fb0005jd9k8orygogi","_id":"ckwgau2gb0043jd9k88fudavz"},{"post_id":"ckwgau2fr0017jd9k0jimgwm0","tag_id":"ckwgau2fd000ajd9k7tdfhz9y","_id":"ckwgau2gc0045jd9k0ecqakig"},{"post_id":"ckwgau2fr0017jd9k0jimgwm0","tag_id":"ckwgau2g9003sjd9k6yvgf1dj","_id":"ckwgau2gc0046jd9kh0wphlh3"},{"post_id":"ckwgau2fs001bjd9kevuzfu65","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2gc0048jd9k6zoiepyy"},{"post_id":"ckwgau2fs001bjd9kevuzfu65","tag_id":"ckwgau2ga003yjd9kflmshdiu","_id":"ckwgau2gd0049jd9kfsc87o28"},{"post_id":"ckwgau2ft001ejd9k6ckp7an3","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2gd004bjd9khxg9fcyj"},{"post_id":"ckwgau2ft001ejd9k6ckp7an3","tag_id":"ckwgau2gb0044jd9k31tvfyby","_id":"ckwgau2gd004cjd9kh8mjbtbw"},{"post_id":"ckwgau2ft001hjd9kh08hhm77","tag_id":"ckwgau2g10028jd9ka8dz2ttq","_id":"ckwgau2ge004djd9kf0ppf97y"},{"post_id":"ckwgau2ft001hjd9kh08hhm77","tag_id":"ckwgau2gd004ajd9k59pz2zky","_id":"ckwgau2ge004ejd9kathv8q61"}],"Tag":[{"name":"시스템설계","_id":"ckwgau2fb0005jd9k8orygogi"},{"name":"대규모설계","_id":"ckwgau2fd000ajd9k7tdfhz9y"},{"name":"Primary Key","_id":"ckwgau2fe000fjd9k82iw78io"},{"name":"DataBase","_id":"ckwgau2ff000kjd9k76ri0k1k"},{"name":"m1","_id":"ckwgau2fj000pjd9kdi35b4ot"},{"name":"롤","_id":"ckwgau2fn000xjd9kco4r0nmt"},{"name":"league of legend","_id":"ckwgau2fr0015jd9k7lxb1mqv"},{"name":"mac on metal","_id":"ckwgau2fs001djd9k9v3ba4lm"},{"name":"자바","_id":"ckwgau2fu001jjd9k6nyqeo7u"},{"name":"Util","_id":"ckwgau2fw001qjd9k4f78h4fd"},{"name":"Enum","_id":"ckwgau2fy001wjd9kgnmq1zth"},{"name":"ObjectMapper","_id":"ckwgau2g00027jd9k2qc01wu6"},{"name":"디자인패턴","_id":"ckwgau2g10028jd9ka8dz2ttq"},{"name":"어댑터","_id":"ckwgau2g1002bjd9k4w0g7w83"},{"name":"파사드","_id":"ckwgau2g1002djd9k1m0y8t30"},{"name":"이터레이터","_id":"ckwgau2g2002hjd9kfw9s8fad"},{"name":"템플릿메소드","_id":"ckwgau2g2002mjd9kfn0obgzt"},{"name":"스트레티지","_id":"ckwgau2g3002qjd9kh8e5hax6"},{"name":"데코레이터","_id":"ckwgau2g3002ujd9k4vgbcfyq"},{"name":"컴포지트","_id":"ckwgau2g4002yjd9k7tqc5x0x"},{"name":"옵저버","_id":"ckwgau2g40032jd9k46er4v10"},{"name":"면접","_id":"ckwgau2g40033jd9k6ptea49u"},{"name":"DB설계","_id":"ckwgau2g50036jd9katj1949c"},{"name":"서버설계","_id":"ckwgau2g50039jd9k5bmf6v97"},{"name":"분산설계","_id":"ckwgau2g5003bjd9k2m4bf7ql"},{"name":"안정해시","_id":"ckwgau2g5003cjd9k3ofv6idw"},{"name":"가상노드","_id":"ckwgau2g6003fjd9k9rn6gvfb"},{"name":"처리율제한","_id":"ckwgau2g7003ijd9k6u1r7s91"},{"name":"토큰버킷","_id":"ckwgau2g8003ljd9k7imab0fi"},{"name":"누출버킷","_id":"ckwgau2g8003pjd9kfhhk1bls"},{"name":"이동윈도로그","_id":"ckwgau2g8003qjd9kffgo2u7a"},{"name":"고정윈도카운터","_id":"ckwgau2g9003rjd9kcoqc3fpq"},{"name":"키값저장소","_id":"ckwgau2g9003sjd9k6yvgf1dj"},{"name":"싱글톤","_id":"ckwgau2ga003yjd9kflmshdiu"},{"name":"팩토리","_id":"ckwgau2gb0044jd9k31tvfyby"},{"name":"커맨드","_id":"ckwgau2gd004ajd9k59pz2zky"}]}}