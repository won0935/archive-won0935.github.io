---
title: "[Kotlin] apply, run, with, let, also ì •ë¦¬"
date: '2022-05-07'
category: 'kotlin'
description: ''
emoji: 'ğŸ'
---


# ë²”ìœ„ì§€ì •í•¨ìˆ˜(scope function)ë€?

ë²”ìœ„ì§€ì •í•¨ìˆ˜ëŠ” **íŠ¹ì • ê°ì²´ì— ëŒ€í•œ ì‘ì—…ì„ ë¸”ë¡ ì•ˆì— ë„£ì–´ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í•¨ìˆ˜**ì´ë‹¤. 
**ë¸”ë¡ì€ íŠ¹ì • ê°ì²´ì— ëŒ€í•´ í•  ì‘ì—…ì˜ ë²”ìœ„ê°€ ë˜ë©°, ë”°ë¼ì„œ ë²”ìœ„ì§€ì •í•¨ìˆ˜**ë¼ ë¶€ë¥¸ë‹¤.
íŠ¹ì • ê°ì²´ì— ëŒ€í•œ ì‘ì—…ì„ ë¸”ë¡ì•ˆì— ë„£ê²Œ ë˜ë©´ ê°€ë…ì„±ì´ ì¦ê°€í•˜ì—¬ ìœ ì§€ ë³´ìˆ˜ê°€ ì‰¬ì›Œì§„ë‹¤.
ì½”í‹€ë¦°ì—ì„œëŠ” `apply`, `run`, `with`, `let`, `also` ì´ 5ê°€ì§€ ê¸°ë³¸ì ì¸ ë²”ìœ„ì§€ì •í•¨ìˆ˜ë¥¼ ì§€ì›í•œë‹¤.

---

# í•¨ìˆ˜ë³„ ì •ë¦¬

`apply`, `run`, `with`, `let`, `also` ì— ëŒ€í•œ ë¶„ë¥˜ë¥¼ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

![image](https://user-images.githubusercontent.com/55419159/167235461-ba8c84d1-9886-4f94-9a23-43109b0178ea.png)



ì•„ë˜ì˜ data í´ë˜ìŠ¤ë¥¼ í™œìš©í•´ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³¸ë‹¤.

```kotlin
data class Person(
    var name : String = "",
    var age : Int = 0,
    var temperature : Float = 36.5f
)
```

## apply

**`apply`ëŠ” ìˆ˜ì‹ ê°ì²´ ë‚´ë¶€ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•œ ë‹¤ìŒ ìˆ˜ì‹  ê°ì²´ ìì²´ë¥¼ ë°˜í™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜**ì´ë‹¤.
ë”°ë¼ì„œ ê°ì²´ ìƒì„± ì‹œì— ë‹¤ì–‘í•œ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•´ì•¼ í•˜ëŠ” ê²½ìš° ìì£¼ ì‚¬ìš©ëœë‹¤.

`apply`ì—ì„œì˜ ë¸”ë¡ì€ ëŒë‹¤ì‹ì˜ ìˆ˜ì‹  ê°ì²´ë¡œ `apply`ì˜ ìˆ˜ì‹ ê°ì²´(`T`)ë¥¼ ì§€ì •í•˜ê¸° ë•Œë¬¸ì— ëŒë‹¤ì‹ ë‚´ë¶€ì—ì„œ ìˆ˜ì‹ ê°ì²´ì— ëŒ€í•œ ëª…ì‹œë¥¼ í•˜ì§€ ì•Šê³  í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ ëœë‹¤.

```kotlin
public inline fun <T> T.apply(block : T.() -> Unit) : T 
```

`apply`ë¥¼ í™œìš©í•˜ë©´ ë‹¤ìŒì˜ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì‹ ê°ì²´ì˜ í”„ë¡œí¼í‹° ì§€ì •ì´ ê°€ëŠ¥í•˜ë‹¤.
ëŒë‹¤ì‹ì˜ ìˆ˜ì‹ ê°ì²´ê°€ `apply`ì˜ ìˆ˜ì‹ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ìˆ˜ì‹ ê°ì²´ì— ëŒ€í•œ ëª…ì‹œë¥¼ ìƒëµí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.

```kotlin
val person = Person().apply {
   name = "Song"
   age = 30
   temperature = 36.3f
}
```

í”„ë¡œí¼í‹° ì„¤ì • ì‹œë§ˆë‹¤ personì„ ì“°ì§€ ì•Šì•„ë„ ë˜ì–´ ê°€ë…ì„±ì´ ì¢‹ë‹¤.
ìë°”ì˜ builder íƒ€ì…ê³¼ ìœ ì‚¬í•˜ë‹¤.


## run

**`run`ì€ `apply`ì™€ ë˜‘ê°™ì´ ë™ì‘í•˜ì§€ë§Œ ìˆ˜ì‹  ê°ì²´ë¥¼ return í•˜ì§€ ì•Šê³ , `run` ë¸”ë¡ì˜ ë§ˆì§€ë§‰ ë¼ì¸ì„ return** í•˜ëŠ” ë²”ìœ„ì§€ì • í•¨ìˆ˜ì´ë‹¤.
ì´ëŠ” **ìˆ˜ì‹ ê°ì²´ì— ëŒ€í•´ íŠ¹ì •í•œ ë™ì‘ì„ ìˆ˜í–‰í•œ í›„ ê²°ê³¼ê°’ì„ ë¦¬í„´ ë°›ì•„ì•¼ í•  ê²½ìš°** ì‚¬ìš©í•œë‹¤.

```kotlin
public inline fun <T, R> T.run(block : T.() -> R) : R 
```

ì˜ˆë¥¼ ë“¤ì–´ ìœ„ `Person` ê°ì²´ì˜ ì²´ì˜¨ì„ ì²´í¬í•´ì„œ ì •ìƒì¸ì§€ë¥¼ í™•ì¸í•˜ë‹¤ê³  í•´ë³´ì.
ë§Œì•½ ì‚¬ëŒì˜ ì²´ì˜¨ì´ 37.5ë„ ì´ìƒì´ë©´ ë¹„ì •ìƒìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ë§ˆì§€ë§‰ì¤„ì„ return ë°›ì„ ìˆ˜ ìˆë‹¤.

```kotlin
Person(
    name = "",
    age = 0,
    temperature = 36.5f
){
    fun isSick() : Boolean = temperature > 37.5f
}
```

```kotlin
fun main(){
    val person = Person(name = "Song", age = 30, temperature = 36.3f)
    val isPersonSick = person.run {
        temperature = 37.2f
        isSick() //return ê°’
    }
    
    print("PersonIsSick : $isPersonSick")
}
```

![image](https://user-images.githubusercontent.com/55419159/167236105-84dd1876-2d86-44e2-89cc-0ac443a4816d.png)

`run`ì€ ìˆ˜ì‹ ê°ì²´ ì—†ì´ë„ ë™ì‘í•  ìˆ˜ ìˆë‹¤.
ë‹¤ë§Œ ìˆ˜ì‹ ê°ì²´ ì—†ì´ `run`ì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì— ìˆ˜ì‹ ê°ì²´ë¥¼ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤.

```kotlin
val person = Person(name = "Song", age = 30, temperature = 36.3f)
val isPersonSick = run {
    person.temperature = 37.2f
    person.isSick()
}
```


## with

**`with`ì€ ìˆ˜ì‹ ê°ì²´ì— ëŒ€í•œ ì‘ì—… í›„ ë§ˆì§€ë§‰ ë¼ì¸ì„ return í•œë‹¤.
`run`ê³¼ ì™„ì „íˆ ë˜‘ê°™ì´ ë™ì‘í•œë‹¤.
ë‹¤ë¥¸ ì ì€ `run`ì€ í™•ì¥ í•¨ìˆ˜ë¡œ ì‚¬ìš©ë˜ì§€ë§Œ `with`ì€ ìˆ˜ì‹ ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ ì‚¬ìš©í•œë‹¤ëŠ” ì ì´ë‹¤.**
`run`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¹”ë”í•˜ë¯€ë¡œ ì‹¤ì œë¡œëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

```kotlin
public inline fun <T, R> with(receiver : T, block : T.() -> R) : R 
```

ìœ„ì˜ ì˜ˆì‹œì— withì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```kotlin
fun main(){
    val person = Person(name = "Song", age = 30, temperature = 36.3f)
    val isPersonSick = with(person) {
        temperature = 37.2f
        isSick() //return ê°’
    }
    
    print("PersonIsSick : $isPersonSick")
}
```


## let

**`let`ì€ ìˆ˜ì‹ ê°ì²´ë¥¼ ì´ìš©í•´ ì‘ì—…ì„ í•œ í›„ ë§ˆì§€ë§‰ ì¤„ì„ returní•  ë•Œ ì‚¬ìš©í•œë‹¤.
`run`ì´ë‚˜ `with`ê³¼ëŠ” ìˆ˜ì‹ ê°ì²´ë¥¼ ì ‘ê·¼í•  ë•Œ itì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ì ë§Œ ë‹¤ë¥´ê³  ë‚˜ë¨¸ì§€ ë™ì‘ì€ ê°™ë‹¤.**
í•˜ì§€ë§Œ ì‹¤ì œ ì‚¬ìš©ì—ì„œëŠ” ì¡°ê¸ˆ ì°¨ì´ê°€ ìˆë‹¤.

```kotlin
public inline fun <T, R> T.let(block : (T) -> R) : R 
```

`let`ì€ ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš° ì‚¬ìš©ëœë‹¤.

- **null check ì´í›„ ì½”ë“œë¥¼ ì‹¤í–‰**í•´ì•¼ í•˜ëŠ” ê²½ìš°
- **nullableí•œ ìˆ˜ì‹ ê°ì²´ë¥¼ ë‹¤ë¥¸ íƒ€ì…ì˜ ë³€ìˆ˜ë¡œ ë³€í™˜**í•´ì•¼ í•˜ëŠ” ê²½ìš°

**ìš”ì•½í•˜ë©´ nullableí•œ ê°’ì„ ì²˜ë¦¬í•´ì•¼ í•  ë•ŒëŠ” letë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.**

`let`ì„ ì´ìš©í•´ null checkë¥¼ í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ null check ì—°ì‚°ì”ì¸ `?`ì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
`?.let`ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ `let`ì˜ ë¸”ë¡ì€ ìˆ˜ì‹ ê°ì²´ê°€ nullì´ ì•„ë‹ë•Œë§Œ ìˆ˜í–‰ëœë‹¤.
ë”°ë¼ì„œ `let` ë¸”ë¡ì—ì„œì˜ `it` íƒ€ì…ì€ nullable í•˜ì§€ ì•Šì€ íƒ€ì…ì´ ëœë‹¤.

ì˜ˆë¥¼ë“¤ì–´ ì‚¬ëŒì´ nullì´ ì•„ë‹ ë•Œë§Œ ì˜í™”ë¥¼ ì˜ˆë§¤í•´ì•¼ í•œë‹¤ê³  í•´ë³´ì.

```kotlin
fun main(){
    val person : Person? = null
    val isReserved = person?.let { it : Person ->
        reserveMovie(it)
    }
}
```

personì€ nullableí•œ ê°ì²´ (Person?)ì˜€ëŠ”ë°, `?.let`ì„ ì‚¬ìš©í•˜ë©´ `let` ë¸”ë¡ ë‚´ë¶€ì—ì„œëŠ” ë”ì´ìƒ nullableí•˜ì§€ ì•Šì€ it : Person ì´ ëœë‹¤.
ì¦‰, null check í›„ ì½”ë“œê°€ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ë˜í•œ personì„ ì‚¬ìš©í•´ ì˜í™”ë¥¼ ì˜ˆë§¤í•˜ê³  ê²°ê³¼ê°’ì„ returnë°›ì•˜ìœ¼ë¯€ë¡œ Personê°ì²´ê°€ ë‹¤ë¥¸ íƒ€ì…ì˜ ë³€ìˆ˜ë¡œ ë³€í™˜ëœ ê²ƒ ë˜í•œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

_ë¬¼ë¡  `let`ì€ nullableí•˜ì§€ ì•Šì€ ëŒ€ìƒì— ëŒ€í•´ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ì‹¤ë¬´ì—ì„œëŠ” nullableí•œ ê°’ì´ ì•„ë‹ ê²½ìš°ì—ëŠ” `run`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤._


## also

`also`ëŠ” `apply`ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìˆ˜ì‹ ê°ì²´ ìì‹ ì„ ë°˜í™˜í•œë‹¤.
`apply`ê°€ í”„ë¡œí¼í‹°ë¥¼ ì„¸íŒ… í›„ ê°ì²´ ìì²´ë¥¼ ë°˜í™˜ í•˜ëŠ”ë°ë§Œ ì‚¬ìš©ëœë‹¤ë©´, `also`ëŠ” í”„ë¡œí¼í‹° ì„¸íŒ… ë¿ë§Œì•„ë‹ˆë¼ ê°ì²´ì— ëŒ€í•œ ì¶”ê°€ì ì¸ ì‘ì—…(ë¡œê¹…, ìœ íš¨ì„± ê²€ì¦)ì„ í•œ í›„ ê°ì²´ë¥¼ ë°˜í™˜í•  ë•Œ ì‚¬ìš©ëœë‹¤.

`also`ì—ì„œì˜ ë¸”ë¡ì€ ëŒë‹¤ì‹ì˜ ì…ë ¥ íŒŒë¼ë¯¸í„°ë¡œ `also`ì˜ ìˆ˜ì‹ ê°ì²´ë¥¼(`T`)ë¥¼ ì§€ì •í•˜ê¸° ë•Œë¬¸ì— ë‚´ë¶€ì—ì„œ ìˆ˜ì‹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `it`ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```kotlin
public inline fun <T> T.also(block : (T) -> Unit) : T 
```

`also`ê°€ ì‚¬ìš©ë˜ëŠ” ì˜ˆëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

numberì„ ë°˜í™˜ë°›ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“  í›„ í•´ë‹¹ numberì˜ ìˆ«ìë¥¼ ì˜¬ë¦¬ê³  ì‹¶ì„ ë•Œ ë‹¤ìŒê³¼ ê°™ì´ numberì„ returní•œ ë‹¤ìŒ numberì˜ ê°’ì„ ì˜¬ë¦°ë‹¤.


```kotlin
var number = 3

fun getAndIncreaseNumber() = number.also{
    number++
}

fun main(){
    println("first number ${getAndIncreaseNumber()}")
    println("second number ${getAndIncreaseNumber()}")
}
```

![image](https://user-images.githubusercontent.com/55419159/167237080-8fff8aa1-e7aa-4fc4-baf0-3933ef0aa810.png)


**ì£¼ì˜í•  ì ì€ ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ê°ì²´ì˜ ì£¼ì†Œê°’ì„ returní•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ê°ì²´ì˜ í”„ë¡œí¼í‹°ê°€ ë°”ë€Œë©´ `also`ì—ì„œ returní•˜ëŠ” ê°ì²´ì˜ í”„ë¡œí¼í‹° ë˜í•œ ë°”ë€ë‹¤ëŠ” ì ì´ë‹¤**.
ë”°ë¼ì„œ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¾¸ì–´ ë²„ë¦´ ê²½ìš°, ë°”ë€ í”„ë¡œí¼í‹°ê°€ ê°ì²´ì˜ ê°’ì´ ë˜ì–´ë²„ë¦°ë‹¤. 
ë¶„ëª… ageê°€ 29ì—ì„œ ì‹œì‘ëëŠ”ë° 30ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

```kotlin
val person = Person(name = "Song", age = 30, temperature = 36.3f)

fun getAndIncreaseNumber() = person.also{
    person.age = it.age + 1
}

fun main(){
    println("first number ${getAndIncreaseNumber()}")
    println("second number ${getAndIncreaseNumber()}")
}
```

![image](https://user-images.githubusercontent.com/55419159/167237215-9d922e45-ca96-4d75-9785-0742407b8a43.png)


ë”°ë¼ì„œ ë³´í†µ ê°ì²´ì— ëŒ€í•´ ê°™ì€ ìš©ë„ë¡œ ì‚¬ìš©í•˜ê³ ì í•  ë•ŒëŠ” `copy`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ ë°”ë€Œì§€ ì•Šì€ ê°ì²´ê°€ returnë¨ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.

```kotlin
val person = Person(name = "Song", age = 30, temperature = 36.3f)

fun getAndIncreaseNumber() = person.also{
    person.age = person.copy(age = it.age + 1)
}

fun main(){
    println("first number ${getAndIncreaseNumber()}")
    println("second number ${getAndIncreaseNumber()}")
}
```

![image](https://user-images.githubusercontent.com/55419159/167237241-9f3343ac-d2af-4252-b37e-8bff1f6a0f3f.png)

ì´ëŸ¬í•œ ë¬¸ì œ ë•Œë¬¸ì— `also`ëŠ” ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•Šê³ , ì‚¬ìš©í•  ë•ŒëŠ” í”„ë¡œí¼í‹°ë¥¼ ë°”ê¾¸ì§€ ì•Šê³  ë™ì‘ì„ ì¶”ê°€ì ìœ¼ë¡œ í•´ì•¼í•˜ëŠ” ê²½ìš°(ë¡œê¹…, ê²€ì¦)ë“±ì—ì„œ ì‚¬ìš©ëœë‹¤.